if (self.CavalryLogger) { CavalryLogger.start_js(["9qQz2"]); }

__d("XGamesNavigationSliderAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/games\/async\/navigationslider\/",{id:{type:"String",required:true},referral_objects:{type:"StringVector",defaultValue:[]},num_items_per_page:{type:"Int",required:true},num_rows:{type:"Int",defaultValue:1},width:{type:"Int",required:true},height:{type:"Int",required:true}})}),null);
__d('CanvasNavigationSlider',['Event','XGamesNavigationSliderAsyncController','AsyncRequest','DataStore'],(function a(b,c,d,e,f,g){var h='GamesNavigationSlider';i.init=function(j,k){'use strict';return new i(j,k)};function i(j,k){'use strict';this.$CanvasNavigationSlider1=k.autoscroll;this.$CanvasNavigationSlider2=j;this.$CanvasNavigationSlider3=k.referral_objects;this.$CanvasNavigationSlider4=j.getNode().id;this.$CanvasNavigationSlider5=k.height;this.$CanvasNavigationSlider6=k.width;this.$CanvasNavigationSlider7=k.num_items_per_page;this.$CanvasNavigationSlider8=k.num_rows;this.$CanvasNavigationSlider9=false;c('DataStore').set(h,this.$CanvasNavigationSlider4,this);if(j.getIndex()>0||this.$CanvasNavigationSlider1)this.$CanvasNavigationSlider10();var l=c('Event').listen(j.getNextArrow(),'click',function(){l.remove();this.$CanvasNavigationSlider10()}.bind(this).bind(this))}i.prototype.$CanvasNavigationSlider10=function(){'use strict';if(this.$CanvasNavigationSlider9)return;this.$CanvasNavigationSlider9=true;var j=c('XGamesNavigationSliderAsyncController').getURIBuilder().setString('id',this.$CanvasNavigationSlider4).setInt('num_items_per_page',this.$CanvasNavigationSlider7).setInt('num_rows',this.$CanvasNavigationSlider8).setInt('width',this.$CanvasNavigationSlider6).setInt('height',this.$CanvasNavigationSlider5).getURI();new (c('AsyncRequest'))(j).setData({referral_objects:this.$CanvasNavigationSlider3}).send()};i.prototype.$CanvasNavigationSlider11=function(j){'use strict';j.forEach(function(k){this.$CanvasNavigationSlider2.push(k)}.bind(this))};i.update=function(j,k){'use strict';var l=c('DataStore').get(h,j);l.$CanvasNavigationSlider11(k)};f.exports=i}),null);
__d('ChannelConnection',['Arbiter','ChannelConstants','ChannelManager','JSLogger','Run','SystemEvents','Visibility','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=c('JSLogger').create('channel_connection'),i=null,j=null,k=null,l=null,m=0;c('ChannelManager').startChannelManager();var n=Object.assign(new (c('Arbiter'))(),{CONNECTED:'chat-connection/connected',RECONNECTING:'chat-connection/reconnecting',SHUTDOWN:'chat-connection/shutdown',MUTE_WARNING:'chat-connection/mute',UNMUTE_WARNING:'chat-connection/unmute'});c('Run').onBeforeUnload(function(){});function o(){if(j){clearTimeout(j);j=null}}function p(){o();h.log('unmute_warning');n.inform(n.UNMUTE_WARNING)}function q(v){o();j=c('setTimeoutAcrossTransitions')(p,v);h.log('mute_warning',{time:v});n.inform(n.MUTE_WARNING)}function r(){if(k){clearTimeout(k);k=null}}function s(v,w){r();if(v===c('ChannelConstants').ON_ENTER_STATE&&(w.nextState||w.state)==='pull'){if(l!==n.CONNECTED){h.log('connected');var x=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:x})}}else if(v===c('ChannelConstants').ON_ENTER_STATE&&((w.nextState||w.state)==='ping'||!w.nextState&&w.state==='idle')){k=c('setTimeoutAcrossTransitions')(function(){var y=null;if(!(w.state==='idle'&&!w.nextState))y=w.delay||0;h.log('reconnecting',{delay:y});if(n.disconnected())h.log('reconnecting_ui',{delay:y});l=n.RECONNECTING;w.state==='idle'&&m++;if(m>1){n.inform(n.RECONNECTING,y)}else if(!w.nextState&&w.state==='idle')s(v,w);},500)}else if(v===c('ChannelConstants').ON_SHUTDOWN){h.log('shutdown',{reason:w.reason});l=n.SHUTDOWN;m=0;n.inform(n.SHUTDOWN,w.reason)}}function t(){if(c('ChannelManager').isShutdown()){s(c('ChannelConstants').ON_SHUTDOWN,c('ChannelManager')._shutdownHint)}else s(c('ChannelConstants').ON_ENTER_STATE,{state:c('ChannelManager').state,nextState:c('ChannelManager').nextState,delay:0});c('Visibility').addListener(c('Visibility').VISIBLE,n.reconnect)}c('Run').onAfterLoad(t);Object.assign(n,{disconnected:function v(){return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1},isShutdown:function v(){return l===n.SHUTDOWN},reconnect:function v(w){if(c('ChannelManager').state==='ping'||c('ChannelManager').state==='pull'||c('ChannelManager').isShutdown())return;h.log('reconnect',{now:w});n.inform(n.RECONNECTING,0);if(!!w){if(i!==null){clearTimeout(i);i=null}c('ChannelManager').enterState('ping!')}else if(!i)i=c('setTimeoutAcrossTransitions')(function(){c('ChannelManager').enterState('ping!');i=null},c('ChannelConstants').CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);c('ChannelManager').resetDelay()},unmuteWarning:p});function u(){c('Arbiter').subscribe([c('ChannelConstants').ON_ENTER_STATE,c('ChannelConstants').ON_SHUTDOWN],s);c('Arbiter').subscribe(c('ChannelConstants').ATTEMPT_RECONNECT,function(){if(n.disconnected())n.reconnect();});c('SystemEvents').subscribe(c('SystemEvents').TIME_TRAVEL,function(){n.reconnect();q(c('ChannelConstants').MUTE_WARNING_TIME_MSEC)});c('Run').onBeforeUnload(r,false)}c('Run').onAfterLoad(u);n.mockAfterLoad=function(){t();u()};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(v,w){w.channel_connected=!n.disconnected()});f.exports=n}),3);
__d('BuddyListNubLoader',['Arbiter','ChatOptions','ChatSidebarStore','KeyEventController','PresencePrivacy','JSResource','SidebarType','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';function h(){return c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ifRequired')('ChannelConnection',function(j){return j.disconnected()})&&!c('PresencePrivacy').isUserOffline()}function i(j,k,l,m){this.$BuddyListNubLoader1=j;this.$BuddyListNubLoader2=k;this.$BuddyListNubLoader3=l;this.$BuddyListNubLoader4=m;this.$BuddyListNubLoader5=null;c('ifRequired')('ChatSidebar',c('emptyFunction'),function(){if(h()){this.show()}else this.load();}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(n,o){if(this.$BuddyListNubLoader7())if(o.name==='hide_buddylist'&&!o.value)this.show();}.bind(this));c('KeyEventController').registerKey('q',function(event){if(this.$BuddyListNubLoader7()){this.show();event.prevent()}}.bind(this));c('ChatSidebarStore').addListener(function(){if(c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST)if(h()){this.show()}else this.load();}.bind(this));if(c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST)if(h()){this.show()}else this.load();}i.prototype.load=function(){if(!this.$BuddyListNubLoader6){this.$BuddyListNubLoader6=c('JSResource')('BuddyListNub').__setRef('BuddyListNubLoader').load();this.$BuddyListNubLoader6.done(function(j){this.$BuddyListNubLoader5=new j(this.$BuddyListNubLoader1,this.$BuddyListNubLoader2,this.$BuddyListNubLoader3,this.$BuddyListNubLoader4)}.bind(this))}return this.$BuddyListNubLoader6};i.prototype.show=function(){return this.load().then(function(j){this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.onButtonClick();this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.show()}.bind(this))};i.prototype.$BuddyListNubLoader7=function(){return !this.$BuddyListNubLoader5&&!this.$BuddyListNubLoader6};f.exports=i}),null);
__d('ChatSearchSource',['requireWeak','AbstractSearchSource','AsyncRequest','CurrentUser','MercuryConfig','MercuryParticipantTypes','SearchableEntry','SearchSourceCallbackManager','ShortProfiles','TokenizeUtil','debounce','emptyFunction','isValidUniqueID'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=null;c('requireWeak')('OrderedFriendsList',function(l){j=l});h=babelHelpers.inherits(k,c('AbstractSearchSource'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$ChatSearchSource1=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:c('TokenizeUtil').isQueryMatch,indexFn:l.indexFn});this.$ChatSearchSource2=l.queryRequests||[];this.$ChatSearchSource3=false;this.$ChatSearchSource4=c('debounce')(this.$ChatSearchSource4,100,this)}k.prototype.bootstrapImpl=function(l){c('ShortProfiles').fetchAll().done(function(){this.$ChatSearchSource3=true;this.$ChatSearchSource5();l()}.bind(this))};k.prototype.searchImpl=function(l,m,n){var o=null,p={},q=n&&n.onQueryFinished,r=n&&n.onQueryStarted;r&&r(l);var s=this.$ChatSearchSource1.search(l,function(v){if(!o){o=v;o.forEach(function(w){return p[w.getUniqueID()]=true})}else v.forEach(function(w){var x=w.getUniqueID();if(!p[x]){o.push(w);p[x]=true}});m(o,l);if(l.length===1&&this.$ChatSearchSource3)q&&q(l);}.bind(this),n);if(!s||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||l.length===0){q&&q(l);return}if(l.length===1){if(this.$ChatSearchSource3)q&&q(l);return}var t={value:l,existing_ids:o&&o.map(function(v){return v.getUniqueID()}).join(','),limit:n&&n.threadLimit},u=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(v){this.$ChatSearchSource4(t,v,function(w){this.$ChatSearchSource6(this.$ChatSearchSource7(this.$ChatSearchSource8(w)).filter(function(x){return !!x}),l);u--;if(u===0){this.$ChatSearchSource1.setQueryStringAsExhausted(l);q&&q(l)}}.bind(this))}.bind(this),this)};k.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries()};k.prototype.$ChatSearchSource5=function(){var l=c('ShortProfiles').getCachedProfileIDs(),m=l.filter(function(o){var p=c('ShortProfiles').getNow(o);return o==c('CurrentUser').getID()||p.type===c('MercuryParticipantTypes').FRIEND||p.type===c('MercuryParticipantTypes').PAGE&&c('MercuryConfig').LinkedAgents&&c('MercuryConfig').LinkedAgents.indexOf(o.toString())>-1}),n=m.map(this.$ChatSearchSource9);if(n.length)this.$ChatSearchSource1.addLocalEntries(n);};k.prototype.$ChatSearchSource7=function(l){return l.map(this.$ChatSearchSource10,this)};k.prototype.$ChatSearchSource10=function(l,m){if(l.mercury_thread){if(!j)return null;return j.normalizeThreadEntry(l,m)}var n=l.text,o=l.uid;if(!n||!c('isValidUniqueID')(o))return null;var p=j?j.getActiveRank(o):0;if(j&&!j.contains(o))p+=m;return new (c('SearchableEntry'))({uniqueID:o,title:n,order:p,subtitle:l.subtext,type:l.render_type||l.type,photo:l.photo,uri:l.path,auxiliaryData:{isMessengerUser:l.is_messenger_user,alias:l.alias}})};k.prototype.$ChatSearchSource8=function(l){var m=l.getPayload();if(Array.isArray(m)){return m}else if(m&&m.entries){return m.entries}else return [];};k.prototype.$ChatSearchSource9=function(l){var m=c('ShortProfiles').getNow(l),n=l==c('CurrentUser').getID()?c('MercuryParticipantTypes').FRIEND:m.type,o=[m.additionalName,m.alternateName].concat(m.searchTokens||[]).join(' '),p=m.name,q=null;return new (c('SearchableEntry'))({uniqueID:l,title:p,order:j?j.getActiveRank(l):0,subtitle:q,keywordString:o,type:n,photo:m.thumbSrc,uri:m.uri,auxiliaryData:{isMessengerUser:m.is_messenger_user,alias:m.alias}})};k.prototype.$ChatSearchSource4=function(l,m,n,o){new (c('AsyncRequest'))(m.uri).setData(babelHelpers['extends']({},l,m.data)).setMethod('GET').setReadOnly(true).setHandler(n).setErrorHandler(o||c('emptyFunction')).setAllowCrossPageTransition(true).send()};k.prototype.$ChatSearchSource6=function(l,m){if(l.length)this.$ChatSearchSource1.addQueryEntries(l,m);};k.prototype.addLocalEntries=function(l){this.$ChatSearchSource1.addLocalEntries(l)};k.prototype.refreshData=function(){c('ShortProfiles').fetchAll()};f.exports=k}),null);
__d('FBPaymentsDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d('FBPaymentsDialogActions',['FBPaymentsDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h={types:c('keyMirror')({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function i(j,k){c('FBPaymentsDispatcher').dispatch({type:h.types.SHOW_DIALOG,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c('FBPaymentsDispatcher').dispatch({type:h.types.HIDE_DIALOG,data:{}})}};f.exports=h}),null);
__d('FBPaymentsDialogStore',['FBPaymentsDialogActions','FBPaymentsDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c('FBPaymentsDialogActions').types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c('FBPaymentsDialogActions').types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break;}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1};f.exports=new j()}),null);
__d('FBPaymentsDialogContainer.react',['FBPaymentsDialogStore','FBPaymentsDispatcher','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.calculateState=function(){return c('FBPaymentsDialogStore').getState()};j.getStores=function(){return [c('FBPaymentsDialogStore')]};j.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(c('FBPaymentsDialogStore'))};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}))};function j(){h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('FBPaymentsDialogContainerMount',['FBPaymentsDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('FBPaymentsDialogContainer.react'),null),j)}};f.exports=h}),null);
__d("XGamesHideableXOutAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/games\/async\/xout\/hide\/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},extra_data:{type:"String"}})}),null);
__d('GamesUninstallXOut.react',['cx','AsyncRequest','CSS','Dialog','DOMContainer.react','GamesXOut.react','React','ReactDOM','URI','XGamesHideableXOutAsyncController'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={pending:false},this.$GamesUninstallXOut1=function(){var r=c('XGamesHideableXOutAsyncController').getURIBuilder().setInt('app_id',this.props.appID).setString('extra_data',this.props.extraData).setString('unit_type',this.props.unitType).setInt('fbs',this.props.fbs).getURI();this.$GamesUninstallXOut2=new (c('AsyncRequest'))(r).setMethod('POST');this.$GamesUninstallXOut2.send()}.bind(this),this.$GamesUninstallXOut3=function(){var r=new (c('URI'))('/ajax/settings/apps/delete_app.php').setQueryData({app_id:this.props.appID,legacy:false,dialog:true,xout:true});new (c('Dialog'))().setAsync(new (c('AsyncRequest'))(r).setRelativeTo(c('ReactDOM').findDOMNode(this))).setCausalElement(c('ReactDOM').findDOMNode(this)).show()}.bind(this),n}l.appUninstalled=function(m){'use strict';c('CSS').addClass(m,"_4ksu")};l.prototype.render=function(){'use strict';return c('React').createElement(c('GamesXOut.react'),{onClick:this.$GamesUninstallXOut3},c('React').createElement(c('DOMContainer.react'),null,this.props.domChild))};l.propTypes={unitType:k.string.isRequired,appID:k.string.isRequired,domChild:k.any.isRequired,extraData:k.string.isRequired,fbs:k.number.isRequired};f.exports=l}),null);
__d('ChatTimezoneWarning',['MercuryParticipants','MercuryViewer','MessengerBotIDs'],(function a(b,c,d,e,f,g){'use strict';var h=1,i={updateUserTimezoneWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y);}}else return;if(o&&p&&q<h)c('MercuryParticipants').getMulti(k.participants,function(z){var aa={},ba=true;for(var ca in z){ba=ba&&z[ca].employee;var da=!!c('MessengerBotIDs')[z[ca].fbid];if(z[ca].timezone!==undefined&&z[ca].timezone!==null&&p!==z[ca].timezone&&!da){var ea=z[ca].fbid;aa[ea]=z[ca]}}if(Object.keys(aa).length>0&&ba){aa.self=n;l(aa)}else m();});})}};f.exports=i}),null);
__d('WorkDualityDismissWarning',[],(function a(b,c,d,e,f,g){'use strict';var h={},i={};f.exports={isWarningAcknowledged:function j(k){if(h[k])return true;return false},acknowledgeWarning:function j(k){h[k]=true},isThreadHijacked:function j(k){if(i[k])return true;return false},setHijackedThread:function j(k){i[k]=true}}}),null);
__d('ChatUserPersonalUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeePersonalUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q)}else m();}.bind(this))}.bind(this))},getEmployeePersonalUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p)}),o=this._getParticipant(k,n,m);return {myself:l,participant:o}},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.personal_id&&m===o.personal_id&&o.work_id&&o.employee&&!c('WorkDualityDismissWarning').isWarningAcknowledged(k.thread_id))n=o;});return n},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y}};f.exports=i}),null);
__d('ChatUserWorkUserWarning',['MercuryIDs','MercuryParticipants','MercuryViewer','MercuryEmployeeDualityPreferences','WorkDualityDismissWarning'],(function a(b,c,d,e,f,g){var h=1,i={updateEmployeeWorkUserWarning:function j(k,l,m){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(n){var o=this._getFriendID(k,n);if(!o){m();return}c('MercuryParticipants').getMulti(k.participants,function(p){var q=this._getParticipant(k,Object.values(p),o);if(q){l(n,q)}else m();}.bind(this))}.bind(this))},getEmployeeWorkUserWarning:function j(k){var l=c('MercuryParticipants').getNow(c('MercuryViewer').getID()),m=this._getFriendID(k,l),n=k.participants.map(function(p){return c('MercuryParticipants').getNow(p)}),o=this._getParticipant(k,n,m);return {myself:l,participant:o}},_getParticipant:function j(k,l,m){var n=null;l.forEach(function(o){if(o.work_id&&m===o.work_id.toString()&&o.personal_id&&c('WorkDualityDismissWarning').isThreadHijacked(k.thread_id)&&o.employee&&!o.is_friend)n=o;});return n},_getFriendID:function j(k,l){var m=l.employee,n=null;if(l.personal_id)n='fbid:'+l.personal_id;var o=n===l.id,p=0;if(k.work_user_warning_dismiss_count!==undefined){var q=k.work_user_warning_dismiss_count;for(var r=Object.entries(q),s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u,w=v[0],x=v[1];if(w===l.fbid)p=Number(x);}}else return null;var y=c('MercuryIDs').getUserIDFromThreadID(k.thread_id);if(!m||!o||!y||k.participants.length>2||!c('MercuryEmployeeDualityPreferences').duality_warning_gk_check||p>=h)return null;return y}};f.exports=i}),null);
__d('ChatVideoCallButton.react',['cx','fbt','invariant','Bootloader','FBID','FBRTCCallabilityStore','FBRTCCore','Keys','LayerFadeOnHide','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadIDMap','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','TrackingNodes','FBRTCLogger','VideoCallTypedLogger','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreadIDMap').get(),l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n={isCallable:false,shown:false,user:null},o=c('React').createClass({displayName:'ChatVideoCallButton',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('FBRTCCallabilityStore'),c('MercuryParticipants'))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,thread:m.object,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return {shown:true,rtcCallData:{call_state:'NO_ONGOING_CALL'}}},statics:{calculateState:function p(q){if(!q.threadID)return babelHelpers['extends']({},n);if(q.isGroupChat)return {isCallable:true,shown:q.shown,user:null};var r=c('MercuryIDs').getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c('FBID').isUser(r))return babelHelpers['extends']({},n);r&&c('FBID').isUser(r)||j(0);var s=c('MercuryIDs').getParticipantIDFromUserID(r),t=c('MercuryParticipants').getOrFetch(s),u=q.thread?q.thread.folder==='inbox':true;return {isCallable:c('FBRTCCallabilityStore').isCallable(r)&&u,shown:q.shown,user:t}}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("Start a group call"):i._("Start a group video chat");var q=this.state.user;if(!q)return undefined;var r=this.props.thread?this.props.thread.folder==='inbox':true;return this.props.isAudio?c('FBRTCCallabilityStore').voiceCallButtonTooltip(q.fbid,q.short_name,r):c('FBRTCCallabilityStore').callButtonTooltip(q.fbid,q.short_name,r)},render:function p(){if(!this.state.shown)return null;var q=c('TrackingNodes').getTrackingInfo(this.props.isAudio?c('TrackingNodes').types.VIDEOCHAT:c('TrackingNodes').types.VOICECHAT),r=JSON.stringify({videochat:'call_clicked_bhat_tab'});return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{'aria-label':this.getTooltipLabel(),className:"button"+(' '+"_3olv")+(this.props.isAudio?' '+"_2fpc":'')+(!this.props.isAudio?' '+"_2fpd":'')+(this.state.isCallable?' '+"enabled":''),'data-ft':q,'data-gt':r,'data-hover':'tooltip','data-tooltip-content':this.getTooltipLabel(),'data-tooltip-position':'above',onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:'button'}),c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},contextRef:function(){return this.refs.button}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:'auto'},i._("You can now make a group call.")))},_handleClick:function p(q){q.preventDefault();if(!this.state.isCallable)return;this.props.onRTCNuxCloseButtonClick();this._initiateCall()},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c('Keys').RETURN||!this.state.isCallable)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur()}this._initiateCall()},_initiateCall:function p(){var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?'audio':'video';if(s){if(c('MercuryIDs').isLocalThread(t)){k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v)}.bind(this))}else this._initiateGroupCall(c('MercuryIDs').getThreadFBIDFromThreadID(t));}else{c('FBRTCCore').startOutgoingCall(this.state.user.fbid,u,!!r);new (c('VideoCallTypedLogger'))().setEvent('chat_tab_call_click').log()}},_initiateGroupCall:function p(q){var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=='NO_ONGOING_CALL'&&v){c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+q,hasVideo:!s,serverInfoData:v,trigger:u!=='AUDIO_GROUP_CALL'?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return}c('Bootloader').loadModules(["FBRTCSupport","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController","RTCGroupCallUtils"],function(w,x,y,z){if(!w.isGroupCallWebtrcSupported()){x.render({hasVideo:!this.props.isAudio});return}z.getThread(q,function(aa,ba){y.render({participants:ba['delete'](c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)),thread:aa,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:'GROUP:'+q,hasVideo:!this.props.isAudio})}.bind(this))}.bind(this),'ChatVideoCallButton.react')}});f.exports=o}),null);
__d('MessengerTypeaheadUtils',['fbt','ix','immutable','MercuryConfig','MercuryTypeaheadConstants','MessengerEnvironment','ReactDOM','SearchableEntry','WorkModeConfig','mapObject'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k=c('immutable').OrderedMap,l=500,m=100,n=c('WorkModeConfig').is_work_user||c('MercuryConfig').CoworkersOverGroups?[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE]:[c('MercuryTypeaheadConstants').SEARCH_TYPE,c('MercuryTypeaheadConstants').FRIEND_TYPE,c('MercuryTypeaheadConstants').THREAD_TYPE,c('MercuryTypeaheadConstants').FB4C_TYPE,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE,c('MercuryTypeaheadConstants').PAGE_TYPE,c('MercuryTypeaheadConstants').NON_FRIEND_TYPE,c('MercuryTypeaheadConstants').GAME_TYPE],o=(j={},j[c('MercuryTypeaheadConstants').SEARCH_TYPE]={header:''},j[c('MercuryTypeaheadConstants').FRIEND_TYPE]={header:h._("Contacts")},j[c('MercuryTypeaheadConstants').FB4C_TYPE]={header:h._("Colleagues")},j[c('MercuryTypeaheadConstants').THREAD_TYPE]={header:h._("Group conversations")},j[c('MercuryTypeaheadConstants').PAGE_TYPE]={header:h._("Businesses")},j[c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting rooms")},j[c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE]={header:h._("Bots")},j[c('MercuryTypeaheadConstants').NON_FRIEND_TYPE]={header:h._("More people")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){var t=[],u=[],v=[],w=[],x=[],y=[],z=[],aa=[],ba=[];r.forEach(function(ca){switch(ca.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:u.push(ca);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:v.push(ca);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:w.push(ca);break;case c('MercuryTypeaheadConstants').PAGE_TYPE:case c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE:y.push(ca);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:x.push(ca);break;case c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE:z.push(ca);break;case c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE:aa.push(ca);break;case c('MercuryTypeaheadConstants').SEARCH_TYPE:t.push(ca);break;case c('MercuryTypeaheadConstants').GAME_TYPE:ba.push(ca);break;}});if(p._shouldHoistPages(s))return t.concat(y,u,v,w,z,aa,x,ba);return t.concat(u,v,w,z,aa,y,x,ba)},sortEntriesWithoutPages:function q(r){var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:s.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').THREAD_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return s.concat(t,u,v)},sortEntriesWithoutGroupsOrViewer:function q(r,s){var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c('MercuryTypeaheadConstants').FRIEND_TYPE:t.push(w);break;case c('MercuryTypeaheadConstants').FB4C_TYPE:u.push(w);break;case c('MercuryTypeaheadConstants').NON_FRIEND_TYPE:v.push(w);break;}});return t.concat(u,v)},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];if(p._shouldHoistPages(r)){s=[].concat(s);s.splice(s.indexOf(c('MercuryTypeaheadConstants').PAGE_TYPE));s.unshift(c('MercuryTypeaheadConstants').PAGE_TYPE)}return s},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c('MercuryTypeaheadConstants').SEARCH_TYPE}).concat(c('MercuryTypeaheadConstants').SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u)}.bind(this)))}.bind(this));return t},buildSingleSection:function q(r){return k([['',r]])},buildListSections:function q(r,s,t){if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c('mapObject')(o,function(v){return babelHelpers['extends']({},v,{entries:[]})});u[c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE]=u[c('MercuryTypeaheadConstants').PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v);});return k(t.filter(function(v){return u[v].entries.length}).map(function(v){return [u[v].header,u[v].entries]}))},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t},areSectionsEqual:function q(r,s){if(r===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE)return s===c('MercuryTypeaheadConstants').COMMERCE_PAGE_TYPE||s===c('MercuryTypeaheadConstants').PAGE_TYPE;return r===s},scrollEntryIntoView:function q(r,s){var t=c('ReactDOM').findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m){s.scrollToPosition(u+v-w,true,{duration:l})}else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l});},getMessageSearchEntry:function q(r){if(!c('MessengerEnvironment').messengerui||r.length<2)return null;return new (c('SearchableEntry'))({uniqueID:'__special_search_entry__',title:h._("Search messages for \"{queryString}\"",[h.param('queryString',r)]),photo:i("86924"),type:c('MercuryTypeaheadConstants').SEARCH_TYPE})},_shouldHoistPages:function q(r){if(!r)return false;return !!(c('MercuryConfig').HoistAgentsKeywords&&c('MercuryConfig').HoistAgentsKeywords.indexOf(r.toLowerCase().trim())!==-1)}};f.exports=p}),null);
__d('MNCommerceActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h}),null);
__d('MNCommerceDialogStateStore',['FluxStore','MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MNCommerceActionTypes').DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c('MNCommerceActionTypes').DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break;}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};f.exports=new j()}),null);
__d('PureStoreBasedStateMixin',['invariant','StoreBasedStateMixinHelper','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=function(){for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return {getInitialState:function m(){return this.constructor.calculateState()},componentWillMount:function m(){this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null}.bind(this);this._mixin=new (c('StoreBasedStateMixinHelper'))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c('setImmediate')(n);}.bind(this))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}}}.bind(this);f.exports=i}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j}}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null)}});f.exports=h}),null);
__d('MNCommerceDialogContainerMount',['MNCommerceDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('MNCommerceDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('FBRTCIceStatsParser',[],(function a(b,c,d,e,f,g){var h=null;i.getInstance=function(){'use strict';if(!h)h=new i();return h};function i(){'use strict'}i.prototype.extractIceInfo=function(j){'use strict';var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)});}return k};i.prototype.$FBRTCIceStatsParser1=function(j){'use strict';return j.indexOf('candidate:')>-1};i.prototype.$FBRTCIceStatsParser2=function(j){'use strict';var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k};i.prototype.$FBRTCIceStatsParser3=function(j){'use strict';var k=j.match(/typ (host|relay|srflx|prflx)/);if(k){return k[1]}else return 'unknown';};f.exports=i}),null);
__d('FBRTCCallSummary',['FBRTCConstants','FBRTCIceStatsParser','FBRTCLogger','FBRTCUtils','SiteData','UserAgentData','performanceNow'],(function a(b,c,d,e,f,g){var h=5*60*1000,i={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};j.CURRENT_SUMMARY_VERSION=19;function j(k){'use strict';this.peerID=k.peerID;this.callID=k.callID;this.$FBRTCCallSummary1=k.isCaller;this.$FBRTCCallSummary2=c('FBRTCUtils').getLocalUploadLogLevel();this.$FBRTCCallSummary3=new Date().valueOf();this.$FBRTCCallSummary4=null;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummary10=null;this.$FBRTCCallSummary11=null;this.$FBRTCCallSummary12={};this.$FBRTCCallSummary13={};this.$FBRTCCallSummary14={};this.$FBRTCCallSummary15={};this.$FBRTCCallSummary16={};this.$FBRTCCallSummary17={};this.$FBRTCCallSummary18=null;this.$FBRTCCallSummary19=c('performanceNow')();this.$FBRTCCallSummary20=0;this.$FBRTCCallSummary21={};this.$FBRTCCallSummary22=this.$FBRTCCallSummary19;this.$FBRTCCallSummary23=0;this.$FBRTCCallSummary24={};this.addExtraInfo(c('FBRTCLogger').Key.DEVICE_INFO,this.$FBRTCCallSummary25());this.$FBRTCCallSummary26();this.$FBRTCCallSummary27=c('FBRTCIceStatsParser').getInstance();this.$FBRTCCallSummary28=c('FBRTCLogger').getInstance()}j.prototype.toJsonString=function(){'use strict';this.$FBRTCCallSummary10=new Date().valueOf();return JSON.stringify({version:j.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary18,callType:this.$FBRTCCallSummary29,isUsingMultiway:this.$FBRTCCallSummary30,conferenceName:this.$FBRTCCallSummary31,serverInfoData:this.$FBRTCCallSummary32,localVideoDuration:this.$FBRTCCallSummary33,remoteVideoDuration:this.$FBRTCCallSummary34,startTime:this.$FBRTCCallSummary3,trigger:this.$FBRTCCallSummary4,signalingTime:this.$FBRTCCallSummary5,endCallReason:this.$FBRTCCallSummary6,endCallSubreason:this.$FBRTCCallSummary7,isRemoteEnded:this.$FBRTCCallSummary8,lastUpdatedTime:this.$FBRTCCallSummary9,lastSerializedTime:this.$FBRTCCallSummary10,unsetOnRetrieve:this.$FBRTCCallSummary11,openCount:this.$FBRTCCallSummary23,extraInfo:this.$FBRTCCallSummary24,pcStats:this.$FBRTCCallSummary12,captureStats:this.$FBRTCCallSummary13,gen0IceSentCount:this.$FBRTCCallSummary14,gen0IceReceivedCount:this.$FBRTCCallSummary15,iceSentCount:this.$FBRTCCallSummary16,iceReceivedCount:this.$FBRTCCallSummary17,newSignalingTime:this.$FBRTCCallSummary21,accumulatedCallTime:this.$FBRTCCallSummary35()})};j.fromJsonString=function(k){'use strict';var l;try{l=JSON.parse(k)}catch(n){return null}if(l.version!==j.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(l,'peerID')||!Object.prototype.hasOwnProperty.call(l,'callID')||!Object.prototype.hasOwnProperty.call(l,'isCaller')||!Object.prototype.hasOwnProperty.call(l,'startTime')||!Object.prototype.hasOwnProperty.call(l,'trigger')||!Object.prototype.hasOwnProperty.call(l,'signalingTime')||!Object.prototype.hasOwnProperty.call(l,'endCallReason')||!Object.prototype.hasOwnProperty.call(l,'isRemoteEnded')||!Object.prototype.hasOwnProperty.call(l,'lastUpdatedTime')||!Object.prototype.hasOwnProperty.call(l,'lastSerializedTime'))return null;var m=new j({peerID:l.peerID,callID:l.callID,isCaller:l.isCaller});m.$FBRTCCallSummary2=l.uploadLogLevel;m.$FBRTCCallSummary18=l.clientVersion;m.$FBRTCCallSummary3=l.startTime;m.$FBRTCCallSummary4=l.trigger;m.$FBRTCCallSummary5=l.signalingTime;m.$FBRTCCallSummary6=l.endCallReason;m.$FBRTCCallSummary7=l.endCallSubreason;m.$FBRTCCallSummary8=l.isRemoteEnded;m.$FBRTCCallSummary9=l.lastUpdatedTime;m.$FBRTCCallSummary10=l.lastSerializedTime;if(l.callType)m.$FBRTCCallSummary29=l.callType;if(l.isUsingMultiway!=null)m.$FBRTCCallSummary30=l.isUsingMultiway;if(l.conferenceName)m.$FBRTCCallSummary31=l.conferenceName;if(l.serverInfoData)m.$FBRTCCallSummary32=l.serverInfoData;if(l.localVideoDuration)m.$FBRTCCallSummary33=l.localVideoDuration;if(l.remoteVideoDuration)m.$FBRTCCallSummary34=l.remoteVideoDuration;if(l.unsetOnRetrieve)m.$FBRTCCallSummary11=l.unsetOnRetrieve;if(l.openCount)m.$FBRTCCallSummary23=l.openCount;if(l.extraInfo)m.$FBRTCCallSummary24=l.extraInfo;if(l.pcStats)m.$FBRTCCallSummary12=l.pcStats;if(l.captureStats)m.$FBRTCCallSummary13=l.captureStats;if(l.gen0IceSentCount)m.$FBRTCCallSummary14=l.gen0IceSentCount;if(l.gen0IceReceivedCount)m.$FBRTCCallSummary15=l.gen0IceReceivedCount;if(l.iceSentCount)m.$FBRTCCallSummary16=l.iceSentCount;if(l.iceReceivedCount)m.$FBRTCCallSummary17=l.iceReceivedCount;if(l.newSignalingTime)m.$FBRTCCallSummary21=l.newSignalingTime;if(l.accumulatedCallTime)m.$FBRTCCallSummary20=l.accumulatedCallTime;return m};j.restoreOrInitialize=function(k,l,m,n,o){'use strict';var p=k.retrieveCallSummary(l,m);if(!p){p=new j({peerID:l,callID:m,isCaller:n});if(o){p.onFullMessageReceived({msg:o});p.onOfferAckSent(o)}else p.onCallStarted(c('FBRTCLogger').Trigger.UNKNOWN);c('FBRTCLogger').getInstance().logError(l,m,'Missing call summary from storage')}else if(p.$FBRTCCallSummary11){p.$FBRTCCallSummary6=null;p.$FBRTCCallSummary7=null;p.$FBRTCCallSummary8=null;delete p.$FBRTCCallSummary5[i.CALL_ENDED];delete p.$FBRTCCallSummary21[i.CALL_ENDED];p.$FBRTCCallSummary11=null}return p};j.logSavedSummaries=function(k){'use strict';var l=k.getLoggableSummaries(),m=l.length;if(m<=0)return;var n=c('FBRTCLogger').getInstance(),o=[];for(var p=0;p<m;p++){var q=l[p];n.logEndCallSummary(q);o.push({peerID:q.peerID,callID:q.callID})}k.removeCallSummaries(o);n.logToConsole('Logged pending summaries: '+m)};j.prototype.save=function(k){'use strict';var l=c('performanceNow')(),m=l-this.$FBRTCCallSummary22;if(m>h){this.$FBRTCCallSummary28.logInfo(this.peerID,this.callID,'Summary too old: '+m);return}k.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary22=l};j.prototype.getLastUpdatedTime=function(){'use strict';return this.$FBRTCCallSummary9};j.prototype.setLastUpdatedTime=function(k){'use strict';this.$FBRTCCallSummary9=k};j.prototype.getExtraInfo=function(){'use strict';return this.$FBRTCCallSummary24};j.prototype.addExtraInfo=function(k,l){'use strict';this.$FBRTCCallSummary24[k]=l;this.$FBRTCCallSummary26()};j.prototype.isCaller=function(){'use strict';return this.$FBRTCCallSummary1};j.prototype.isNetworkReady=function(){'use strict';if(this.$FBRTCCallSummary5[i.NETWORK_READY]){return true}else return false;};j.prototype.isAnswerReceived=function(){'use strict';if(this.$FBRTCCallSummary5[i.RECV_ANSWER]){return true}else return false;};j.prototype.onCallStarted=function(k){'use strict';this.$FBRTCCallSummary4=k;this.$FBRTCCallSummary36(i.CALL_STARTED);this.$FBRTCCallSummary26()};j.prototype.onPopupOpened=function(){'use strict';this.$FBRTCCallSummary36(i.POPUP_OPENED);this.$FBRTCCallSummary23++;this.$FBRTCCallSummary26()};j.prototype.setPcStats=function(k){'use strict';this.$FBRTCCallSummary12=k;this.$FBRTCCallSummary26()};j.prototype.setVideoCaptureStats=function(k,l){'use strict';this.$FBRTCCallSummary13={w:k,h:l};this.$FBRTCCallSummary26()};j.prototype.setUploadLogLevel=function(k){'use strict';this.$FBRTCCallSummary2=k;this.$FBRTCCallSummary26()};j.prototype.getCallType=function(){'use strict';return this.$FBRTCCallSummary29};j.prototype.setCallType=function(k){'use strict';this.$FBRTCCallSummary29=k;this.addExtraInfo('call_type',k);this.$FBRTCCallSummary26()};j.prototype.setVideoDurations=function(k,l){'use strict';this.$FBRTCCallSummary33=k;this.$FBRTCCallSummary34=l;this.$FBRTCCallSummary26()};j.prototype.setIsUsingMultiway=function(k){'use strict';this.$FBRTCCallSummary30=k;this.$FBRTCCallSummary26()};j.prototype.setConferenceName=function(k){'use strict';this.$FBRTCCallSummary31=k;this.$FBRTCCallSummary26()};j.prototype.setServerInfoData=function(k){'use strict';this.$FBRTCCallSummary32=k;this.$FBRTCCallSummary26()};j.prototype.onOfferAckSent=function(k){'use strict';this.onMessageSent({type:c('FBRTCConstants').PayloadType.OFFER_ACK,flag:k.flag})};j.prototype.onMessageSent=function(k){'use strict';var l=k.flag===1;switch(k.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary37(l,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary37(l,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary36(i.SENT_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary36(i.SENT_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary37(l,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary37(l,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary38(k,this.$FBRTCCallSummary14,this.$FBRTCCallSummary16);break;default:}this.$FBRTCCallSummary26()};j.prototype.$FBRTCCallSummary38=function(k,l,m){'use strict';var n=null,o=null,p=this.$FBRTCCallSummary27.extractIceInfo(k.sdp);for(var q=0;q<p.length;q++){n=p[q].gen;o=p[q].type;if(n===0)this.$FBRTCCallSummary39(l,o);this.$FBRTCCallSummary39(m,o)}};j.prototype.$FBRTCCallSummary39=function(k,l){'use strict';if(!k[l]){k[l]=1}else k[l]=k[l]+1;};j.prototype.$FBRTCCallSummary40=function(k){'use strict';if(k.isFromMobile())this.addExtraInfo(c('FBRTCLogger').Key.PEER_IS_MOBILE,'1');};j.prototype.onFullMessageReceived=function(k){'use strict';var l=k.msg,m=l.flag===1;switch(l.type){case c('FBRTCConstants').PayloadType.OFFER:this.$FBRTCCallSummary40(k);this.$FBRTCCallSummary37(m,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c('FBRTCConstants').PayloadType.ANSWER:this.$FBRTCCallSummary40(k);this.$FBRTCCallSummary37(m,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;case c('FBRTCConstants').PayloadType.OK:this.$FBRTCCallSummary36(i.RECV_OK);break;case c('FBRTCConstants').PayloadType.PRANSWER:this.$FBRTCCallSummary36(i.RECV_PRANSWER);break;case c('FBRTCConstants').PayloadType.OFFER_ACK:this.$FBRTCCallSummary37(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c('FBRTCConstants').PayloadType.ANSWER_ACK:this.$FBRTCCallSummary37(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c('FBRTCConstants').PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary38(l,this.$FBRTCCallSummary15,this.$FBRTCCallSummary17);break;default:}this.$FBRTCCallSummary26()};j.prototype.onMsgAckReceived=function(k,l){'use strict';var m=k.msg.flag===1;if(l){this.$FBRTCCallSummary37(m,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK)}else this.$FBRTCCallSummary37(m,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);};j.prototype.onNetworkReady=function(){'use strict';this.$FBRTCCallSummary36(i.NETWORK_READY);this.$FBRTCCallSummary26()};j.prototype.onCallConnected=function(){'use strict';this.$FBRTCCallSummary36(i.CALL_CONNECTED);this.$FBRTCCallSummary26()};j.prototype.onCallEnded=function(k,l,m,n){'use strict';this.$FBRTCCallSummary11=m;this.$FBRTCCallSummary6=k;this.$FBRTCCallSummary7=n;this.$FBRTCCallSummary8=l;this.$FBRTCCallSummary36(i.CALL_ENDED);this.$FBRTCCallSummary26()};j.prototype.setOfferSentTime=function(){'use strict';this.$FBRTCCallSummary36(i.SENT_OFFER)};j.prototype.setOfferAckReceivedTime=function(){'use strict';this.$FBRTCCallSummary36(i.RECV_OFFER_ACK)};j.prototype.setAnswerSentTime=function(){'use strict';this.$FBRTCCallSummary36(i.SENT_ANSWER)};j.prototype.setAnswerReceivedTime=function(){'use strict';this.$FBRTCCallSummary36(i.RECV_ANSWER)};j.prototype.toString=function(){'use strict';var k={};k.core_metrics=this.$FBRTCCallSummary41();k.time_series=null;return JSON.stringify(k)};j.prototype.$FBRTCCallSummary41=function(){'use strict';var k={};k.ver=j.CURRENT_SUMMARY_VERSION;k.log_level=c('FBRTCConstants').uploadLogLevelString(this.$FBRTCCallSummary2);k.caller=this.$FBRTCCallSummary1;k.call_type=this.$FBRTCCallSummary29;k.is_using_multiway=this.$FBRTCCallSummary30;k.conf_name=this.$FBRTCCallSummary31;k.serv_info=this.$FBRTCCallSummary32;k.conn=this.$FBRTCCallSummary42();k.peer_id=this.peerID;k.has_video=true;k.open_count=this.$FBRTCCallSummary23;k.signaling=this.$FBRTCCallSummary43();k.sender=this.$FBRTCCallSummary44();k.receiver=this.$FBRTCCallSummary45();k.end=this.$FBRTCCallSummary46();k.video=this.$FBRTCCallSummary47();k.push_phase=c('SiteData').push_phase;k.client_version=this.$FBRTCCallSummary18;return k};j.prototype.$FBRTCCallSummary42=function(){'use strict';var k={dtls:1};if(this.$FBRTCCallSummary12.sender&&this.$FBRTCCallSummary12.sender.rtt)k.rtt=this.$FBRTCCallSummary12.sender.rtt;return k};j.prototype.$FBRTCCallSummary43=function(){'use strict';var k={};if(this.$FBRTCCallSummary4)k.trigger=this.$FBRTCCallSummary4;k.start_time=this.$FBRTCCallSummary3;k.time_from_start=this.$FBRTCCallSummary5;var l=this.$FBRTCCallSummary5[i.CALL_CONNECTED],m=this.$FBRTCCallSummary5[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary10){m=this.$FBRTCCallSummary10-this.$FBRTCCallSummary3}else m=this.$FBRTCCallSummary48();var n=m-l;if(n>0)k.duration=n;}k.new_time_from_start=this.$FBRTCCallSummary21;l=this.$FBRTCCallSummary21[i.CALL_CONNECTED];m=this.$FBRTCCallSummary21[i.CALL_ENDED];if(l){if(!m)if(this.$FBRTCCallSummary20>0){m=this.$FBRTCCallSummary20}else m=this.$FBRTCCallSummary35();n=m-l;if(n>0)k.new_duration=n;}return k};j.prototype.$FBRTCCallSummary44=function(){'use strict';var k={};if(this.$FBRTCCallSummary14)k.ice_g0=this.$FBRTCCallSummary14;if(this.$FBRTCCallSummary16)k.ice=this.$FBRTCCallSummary16;if(this.$FBRTCCallSummary12.sender)Object.assign(k,this.$FBRTCCallSummary12.sender);return k};j.prototype.$FBRTCCallSummary45=function(){'use strict';var k={};if(this.$FBRTCCallSummary15)k.ice_g0=this.$FBRTCCallSummary15;if(this.$FBRTCCallSummary17)k.ice=this.$FBRTCCallSummary17;return k};j.prototype.$FBRTCCallSummary46=function(){'use strict';var k={};if(this.$FBRTCCallSummary6!==null){k.end_call_reason_string=c('FBRTCConstants').callEndReasonString(this.$FBRTCCallSummary6);if(this.$FBRTCCallSummary7!==null)k.end_call_subreason_string=this.$FBRTCCallSummary7;k.remote_ended=this.$FBRTCCallSummary8}if(this.$FBRTCCallSummary12.end)Object.assign(k,this.$FBRTCCallSummary12.end);return k};j.prototype.$FBRTCCallSummary47=function(){'use strict';var k={capture:{}};if(this.$FBRTCCallSummary12.video&&this.$FBRTCCallSummary12.video.sender)Object.assign(k,this.$FBRTCCallSummary12.video.sender);if(this.$FBRTCCallSummary13)Object.assign(k.capture,this.$FBRTCCallSummary13);return {sender:k,ld:this.$FBRTCCallSummary33,rd:this.$FBRTCCallSummary34}};j.prototype.$FBRTCCallSummary48=function(){'use strict';return new Date().valueOf()-this.$FBRTCCallSummary3};j.prototype.$FBRTCCallSummary35=function(){'use strict';var k=c('performanceNow')()-this.$FBRTCCallSummary19;return Math.floor(this.$FBRTCCallSummary20+k)};j.prototype.$FBRTCCallSummary36=function(k){'use strict';if(this.$FBRTCCallSummary5[k])return;this.$FBRTCCallSummary5[k]=this.$FBRTCCallSummary48();this.$FBRTCCallSummary21[k]=this.$FBRTCCallSummary35()};j.prototype.$FBRTCCallSummary37=function(k,l,m){'use strict';if(k){this.$FBRTCCallSummary36(m)}else this.$FBRTCCallSummary36(l);};j.prototype.$FBRTCCallSummary26=function(){'use strict';this.$FBRTCCallSummary9=new Date().valueOf()};j.prototype.$FBRTCCallSummary25=function(){'use strict';return {device:c('UserAgentData').deviceName,os:c('UserAgentData').platformName,os_version:c('UserAgentData').platformFullVersion,browser:c('UserAgentData').browserName,browser_version:c('UserAgentData').browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};j.prototype.setClientVersion=function(k){'use strict';this.$FBRTCCallSummary18=k};f.exports=j}),null);
__d('FBRTCCallSummaryStore',['CacheStorage','FBRTCCallSummary','FBRTCLogger','areEqual'],(function a(b,c,d,e,f,g){var h='localstorage',i='RTC_CALL_SUMMARY_',j='summary',k=2000,l=3,m=3*60*1000,n=null;o.getInstance=function(){'use strict';if(!n)n=new o();return n};function o(){'use strict';this.$FBRTCCallSummaryStore1=new (c('CacheStorage'))(h,i);this.$FBRTCCallSummaryStore2=c('FBRTCLogger').getInstance()}o.prototype.storeCallSummary=function(p,q,r){'use strict';var s=this;this.$FBRTCCallSummaryStore3(function(t){if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole('Outdated summaries');return null}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q))};o.prototype.retrieveCallSummary=function(p,q){'use strict';var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s){return this.$FBRTCCallSummaryStore4(s)}else return null;};o.prototype.removeCallSummary=function(p,q){'use strict';this.removeCallSummaries([{peerID:p,callID:q}])};o.prototype.removeCallSummaries=function(p){'use strict';var q=this;this.$FBRTCCallSummaryStore3(function(r){var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u];}}return r},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null))};o.prototype.getLoggableSummaries=function(){'use strict';var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t);}return q};o.prototype.$FBRTCCallSummaryStore7=function(p){'use strict';for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true};o.prototype.$FBRTCCallSummaryStore5=function(p){'use strict';var q={__t:Date.now(),__d:p.toJsonString()};return q};o.prototype.$FBRTCCallSummaryStore4=function(p,q){'use strict';if(p)if(!q||Date.now()-p.__t>=q)return c('FBRTCCallSummary').fromJsonString(p.__d);return null};o.prototype.$FBRTCCallSummaryStore6=function(){'use strict';var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){'use strict';if(r===undefined||r===null)r=l;var t=this.$FBRTCCallSummaryStore6(),u=this.$FBRTCCallSummaryStore6(),v=p(t);if(v===null)return;var w=this.$FBRTCCallSummaryStore6();if(c('areEqual')(u,w)){this.$FBRTCCallSummaryStore1.set(j,v);this.$FBRTCCallSummaryStore2.logToConsole('Updated summaries')}else if(r>0){q('Retry lock');if(s){var x=this;setTimeout(function(){x.$FBRTCCallSummaryStore3(p,q,r-1,true)},k)}else this.$FBRTCCallSummaryStore3(p,q,r-1,true);}else q('Failed to lock');};f.exports=o}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j)})}};f.exports=h}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]))};function l(){i.apply(this,arguments)}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet connection"));if(o==null||false===navigator.onLine){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection."))}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))]))}else if(o>1000){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param('seconds',Math.floor(o/1000))]))}else return n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting..."));};function l(){i.apply(this,arguments)}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','CurrentUser','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return c('React').createElement('div',null,h._("Your session has timed out. Please log in."));case c('ChannelConstants').HINT_MAINT:return o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("{Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))]));case c('ChannelConstants').HINT_CONN:default:if(!o){return c('React').createElement('div',null,h._("{Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))]))}else if(c('CurrentUser').isWorkUser()){return c('React').createElement('div',null,h._("Work Chat is currently unavailable."))}else return c('React').createElement('div',null,h._("Messenger is currently unavailable."));}};function l(){i.apply(this,arguments)}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','MercuryConfig','MessengerEnvironment','CSS','JSLogger','LogHistory','MercurySyncConstants','PresencePrivacy','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('JSLogger').create('sidebar_sheet'),l=c('LogHistory').getInstance('sidebar_sheet'),m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new (c('SubscriptionsHandler'))();this.$ChatSidebarSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$ChatSidebarSheet3),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this.$ChatSidebarSheet4),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$ChatSidebarSheet4),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this.$ChatSidebarSheet4),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){l.log('invalid state fatal','{}');this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log('retry from invalid state','{}');this.$ChatSidebarSheet5()}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log('recover from invalid state','{}');this.$ChatSidebarSheet6()}.bind(this)))};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p='offline';q=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p='error';q=this.$ChatSidebarSheet8(o)}else if(!this.state.notifiesUserMessages&&!o){p='notice';q=this.$ChatSidebarSheet9()}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000||this.state.syncStateReconnecting)p=c('joinClasses')(p,'reconnecting');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,p)},o?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},q))};n.prototype.$ChatSidebarSheet8=function(o){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o})}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1000)this.$ChatSidebarSheet2=c('setTimeoutAcrossTransitions')(this.$ChatSidebarSheet3.bind(this,c('ChannelConnection').RECONNECTING,p-1000),1000);return c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c('ChannelConnection').reconnect();}.bind(this)})}return null};n.prototype.$ChatSidebarSheet7=function(){return c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function o(p){k.log('sidebar_go_online');c('ChatVisibility').goOnline()}})};n.prototype.$ChatSidebarSheet9=function(){return c('React').createElement('div',null,h._("Alerts are off while you use another client to chat."))};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=n}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null}}l.prototype.getState=function(){return k};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l()}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState())}.bind(this),l}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange)};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}))};f.exports=j}),null);
__d('P2PDialogContainerMount',['P2PDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('P2PDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))()}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null}}k.prototype.getState=function(){return j};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k()}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState()}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}))}});f.exports=h}),null);
__d('PagesPlatformDialogContainerMount',['PagesPlatformDialogContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={mount:function i(j){c('ReactDOM').render(c('React').createElement(c('PagesPlatformDialogContainer.react'),null),j)}};f.exports=h}),null);
__d('Carousel',['cx','Animation','CSS','Ease','Locale','Slideshow','Style','shield'],(function a(b,c,d,e,f,g,h){var i,j,k=c('Locale').isRTL()?'right':'left',l=c('Ease').sineInOut;i=babelHelpers.inherits(m,c('Slideshow'));j=i&&i.prototype;function m(n,o){'use strict';j.constructor.call(this,n,o);this.subscribe('items_updated',this._updateItemState.bind(this));this._width=this._config.width}m.prototype._updateItemState=function(n,o){'use strict';this._setContainerPos(n);c('Style').set(this._container,'width',this._items.length*this._config.width+this._config.widthunit)};m.prototype._updateArrowState=function(n){'use strict';if(!this._config.arrows)return;var o=this._config.wrap,p=this._items.length,q=Math.floor(p/this._config.photosperframe);c('CSS').conditionClass(this._arrowNext,"_2xo",q===1||!o&&n===q-1);c('CSS').conditionClass(this._arrowPrev,"_2xo",q===1||!o&&n===0)};m.prototype._animate=function(n){var o=arguments.length<=1||arguments[1]===undefined?null:arguments[1],p=arguments[2];'use strict';var q=n===-1?this._items.length-1:n,r=0,s=0;r=this._calcOffset(n,this._config.width,this._config.peek,this._config.item_margin);this._animating=true;this.inform('page_start',q);var t=new (c('Animation'))(this._container).setUnit(this._config.widthunit).to(k,r).duration(this._config.animationDuration).ease(l).ondone(p);if(o!==null){s=this._calcOffset(o,this._config.width,this._config.peek,this._config.item_margin);t.from(k,s)}t.go()};m.prototype._calcOffset=function(n,o,p,q){'use strict';if(this._config.peek_with_offset){var r=-n*(o-p*2);if(n>0)r=r+p-n*(q/2);if(n===this._items.length-1)r+=p;return r}else return -n*o;};m.prototype._setContainerPos=function(n){'use strict';c('Style').set(this._container,k,-n*this._config.width+this._config.widthunit)};m.prototype._animateTo=function(n){var o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];'use strict';if(this._animating)return;var p=this._items.length;if(0<=n&&n<p||!this._config.wrap){var q=(n+p)%p;this._updateArrowState(q);return this._animate(q,o,c('shield')(this._setCurrent,this,q))}var r=n%p,s=r?p-1:0,t=this._items[p-1];c('Style').set(t,'position','absolute');c('Style').set(t,k,-this._config.width+this._config.widthunit);if(s===0)this._setContainerPos(-1);this._animate(r,o,function(){c('Style').set(t,'position','static');c('Style').set(t,k,'auto');this._setContainerPos(s);this._setCurrent(s)}.bind(this))};f.exports=m}),null);