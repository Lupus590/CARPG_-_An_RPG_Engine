if (self.CavalryLogger) { CavalryLogger.start_js(["5YPuo"]); }

__d('BandicootSession',[],(function a(b,c,d,e,f,g){'use strict';var h={ACTIVE:'ACTIVE',INACTIVE:'INACTIVE',CLOSED:'CLOSED'},i=10*60*1000,j=14*24*60*60*1000;function k(p){return Date.now()-p.lastUpdated}function l(p){return !!(typeof p==='object'&&p&&p.lastUpdated&&p.status)}function m(p){if(p.status===h.CLOSED){return false}else if(p.status===h.INACTIVE&&k(p)>i)return false;return true}function n(p){return p.status===h.ACTIVE&&k(p)>i}function o(p){return k(p)>j}f.exports={Status:h,isValidSession:l,isTrackedSession:m,isOrphanSession:o,isCrashedSession:n}}),null);
__d('Bandicoot',['invariant','BandicootSession'],(function a(b,c,d,e,f,g,h){'use strict';var i=5*1000,j=i*2,k='Bandicoot:',l=c('BandicootSession').Status,m=c('BandicootSession').isValidSession,n=c('BandicootSession').isTrackedSession,o=c('BandicootSession').isCrashedSession,p=c('BandicootSession').isOrphanSession;function q(){try{var t=window.localStorage;if(t){var u='__test'+Date.now();t.setItem(u,'');t.removeItem(u)}return t}catch(v){return null}}var r=q();function s(t){'use strict';this.$Bandicoot5=k+t;this.$Bandicoot4={};this.$Bandicoot1=this.$Bandicoot7.bind(this);this.sessionID=null;this.sessionStartTime=null;this.storage=r}s.prototype.getCrashTimeData=function(){'use strict';var t=window.performance&&window.performance.memory||{},u=this.sessionStartTime;return {duration:u?Date.now()-u:0,tabs:Object.keys(this.$Bandicoot8()).length,jsHeapSizeLimit:t.jsHeapSizeLimit,totalJSHeapSize:t.totalJSHeapSize,usedJSHeapSize:t.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,uri:window.location.href}};s.prototype.getLogTimeData=function(){'use strict';return {userAgent:window.navigator.userAgent}};s.prototype.logCrash=function(t,u,v){'use strict';var w=Object.assign({sessionID:t},u,v)};s.prototype.logBrowserUnsupported=function(){'use strict'};s.prototype.logTrackingError=function(){'use strict'};s.prototype.startSession=function(){'use strict';if(!this.storage){this.logBrowserUnsupported();return}if(this.$Bandicoot2)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Bandicoot2=setInterval(function(){this.$Bandicoot9()}.bind(this),i);this.$Bandicoot9();if(document.addEventListener)document.addEventListener('visibilitychange',this.$Bandicoot1);this.$Bandicoot10()};s.prototype.endSession=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2)return;clearInterval(this.$Bandicoot2);this.$Bandicoot2=null;if(!this.$Bandicoot3)this.$Bandicoot11({status:l.CLOSED});this.sessionID=null;this.sessionStartTime=null;if(document.removeEventListener)document.removeEventListener('visibilitychange',this.$Bandicoot1);};s.prototype.logKnownCrashes=function(){'use strict';if(!this.storage)return;if(!this.$Bandicoot2){var t=this.$Bandicoot8();t=this.$Bandicoot12(t,function(u,v){if(o(u)){this.logCrash(v,u,this.getLogTimeData());return null}else return u;}.bind(this));this.$Bandicoot13(t)}};s.prototype.$Bandicoot14=function(){'use strict';var t=this.sessionID;t||h(0);return t};s.prototype.$Bandicoot9=function(){'use strict';var t=this.$Bandicoot8();this.$Bandicoot15(t);t=this.$Bandicoot16(t);this.$Bandicoot13(t)};s.prototype.$Bandicoot15=function(t){'use strict';var u=this.$Bandicoot14(),v=t[u]?t[u]:{};t[u]=babelHelpers['extends']({},v,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$Bandicoot17()})};s.prototype.$Bandicoot12=function(t,u){'use strict';var v={};Object.keys(t).forEach(function(w){var x=t[w];if(m(x)&&n(x)&&!p(x)){var y=u(x,w);if(y)v[w]=y;}});return v};s.prototype.$Bandicoot16=function(t){'use strict';return this.$Bandicoot12(t,function(u,v){if(o(u)){var w=u.loggerReportTime||0;if(Date.now()-w>j){u.loggerReportTime=Date.now();u.loggerReportSession=this.$Bandicoot14()}else if(u.loggerReportSession==this.$Bandicoot14()){this.logCrash(v,u,this.getLogTimeData());this.$Bandicoot4[v]=true;return null}}return u}.bind(this))};s.prototype.$Bandicoot8=function(t){'use strict';t=t||this.$Bandicoot5;var u=this.storage.getItem(t)||'{}';try{u=JSON.parse(u)}catch(v){u={};this.storage.removeItem(t)}return u};s.prototype.$Bandicoot11=function(t){'use strict';t.lastUpdated=Date.now();var u=this.$Bandicoot8(),v=this.sessionID;if(v&&u[v]){Object.assign(u[v],t);this.$Bandicoot13(u)}};s.prototype.$Bandicoot13=function(t){'use strict';var u=JSON.stringify(t);try{this.storage.setItem(this.$Bandicoot5,u)}catch(x){var v=this.$Bandicoot6,w=Date.now();if(!v||w>v+i){this.logTrackingError();this.$Bandicoot6=w}try{this.storage.removeItem(this.$Bandicoot5)}catch(y){this.$Bandicoot3=true;this.endSession()}}};s.prototype.$Bandicoot10=function(){'use strict';for(var t=0;t<this.storage.length;++t){var u=this.storage.key(t);if(u.indexOf(k)===0&&u!==this.$Bandicoot5){var v=this.$Bandicoot8(u),w=Object.keys(v).every(function(x){var y=v[x];return !m(y)||p(y)});if(w)this.storage.removeItem(u);}}};s.prototype.$Bandicoot7=function(){'use strict';this.$Bandicoot11({status:this.$Bandicoot17()})};s.prototype.$Bandicoot17=function(){'use strict';return document.hidden?l.INACTIVE:l.ACTIVE};f.exports=s}),null);
__d('BlobFactory',['emptyFunction'],(function a(b,c,d,e,f,g){var h=void 0,i=void 0;function j(){try{new b.Blob();i=true}catch(l){i=false}}var k=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob){h={getBlob:function l(m,n){m=m||[];n=n||{};if(i===undefined)j();if(i){return new b.Blob(m,n)}else{var o=new k();for(var p=0;p<m.length;p++)o.append(m[p]);return o.getBlob(n.type)}},isSupported:c('emptyFunction').thatReturnsTrue}}else h={getBlob:function l(){},isSupported:c('emptyFunction').thatReturnsFalse};f.exports=h}),null);
__d('WebWorker',['invariant','BanzaiLogger','BlobFactory','EventListener','SubscriptionsHandler','URI','WebWorkerConfig','XHRRequest','areSameOrigin','destroyOnUnload','emptyFunction','filterObject','getCrossOriginTransport','memoize','performanceNow'],(function a(b,c,d,e,f,g,h){var i=b.URL||b.webkitURL;function j(p){'use strict';this.$WebWorker1=false;this.$WebWorker2=null;this.$WebWorker3=p;this.$WebWorker4=null;this.$WebWorker5=c('emptyFunction');this.$WebWorker6=c('emptyFunction');this.$WebWorker7=[];this.$WebWorker8=false;this.$WebWorker9=new (c('SubscriptionsHandler'))();c('destroyOnUnload')(function(){if(!this.$WebWorker8)this.terminate();}.bind(this));this.$WebWorker10('constructed')}j.prototype.setMessageHandler=function(p){'use strict';this.$WebWorker5=p||c('emptyFunction');return this};j.prototype.setErrorHandler=function(p){'use strict';this.$WebWorker6=p||c('emptyFunction');return this};j.prototype.postMessage=function(p,q){'use strict';!this.isCurrentState('constructed')||h(0);!this.isCurrentState('terminated')||h(0);if(this.isCurrentState('preparing')){this.$WebWorker7.push(this.postMessage.bind(this,p,q));return this}var r={type:'message',message:p};if(q){this.$WebWorker4.postMessage(r,q)}else this.$WebWorker4.postMessage(r);return this};j.prototype.terminate=function(){'use strict';if(this.isCurrentState('executing'))this.$WebWorker4.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker10('terminated');this.$WebWorker4=null;this.$WebWorker11();this.$WebWorker7=[]}return this};j.prototype.execute=function(){'use strict';!this.isCurrentState('terminated')||h(0);if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker10('preparing');j.prepareResource(this.$WebWorker3,this.$WebWorker12.bind(this));return this};j.prototype.setAllowCrossPageTransition=function(p){'use strict';this.$WebWorker8=p;return this};j.prototype.isCurrentState=function(p){'use strict';j.states.includes(p)||h(0);return p===this.$WebWorker2};j.prototype.$WebWorker12=function(){'use strict';!this.isCurrentState('executing')||h(0);if(this.isCurrentState('terminated'))return;this.$WebWorker3.sameOriginURL||this.$WebWorker3.source||h(0);if(this.$WebWorker3.sameOriginURL){this.$WebWorker4=new b.Worker(this.$WebWorker3.sameOriginURL)}else{this.$WebWorker4=new b.Worker(j.evalWorkerURL);this.$WebWorker4.postMessage(this.$WebWorker3.source)}this.$WebWorker13('ping',Date.now());if(this.$WebWorker3.dynamicModules)try{this.$WebWorker13('defineModules',this.$WebWorker3.dynamicModules)}catch(p){this.terminate();this.$WebWorker14('define_error',{message:p.message});throw p}this.$WebWorker15();this.$WebWorker10('executing');this.$WebWorker7.forEach(function(p){return p()});this.$WebWorker7=null};j.prototype.$WebWorker11=function(){'use strict';this.$WebWorker9.release()};j.prototype.$WebWorker13=function(p){for(var q=arguments.length,r=Array(q>1?q-1:0),s=1;s<q;s++)r[s-1]=arguments[s];'use strict';this.$WebWorker4.postMessage({type:p,args:r})};j.prototype.$WebWorker14=function(event,p){'use strict';j.$WebWorker14(event,this.$WebWorker3.name,babelHelpers['extends']({},p,{cross_page_transition:!!this.$WebWorker8,state:this.$WebWorker2}))};j.$WebWorker16=function(){'use strict';return Object.keys(c('filterObject')({object_url:j.$WebWorker17(),eval_url:n(),data_url:j.$WebWorker18(),worker:j.isSupported(),transferables:j.areTransferablesSupported()},function(p){return !!p}))};j.prototype.$WebWorker15=function(){'use strict';this.$WebWorker9.addSubscriptions(c('EventListener').listen(this.$WebWorker4,'message',this.$WebWorker19.bind(this)),c('EventListener').listen(this.$WebWorker4,'error',this.$WebWorker20.bind(this)))};j.prototype.$WebWorker20=function(p){'use strict';var q=this.$WebWorker6(p);if(!q&&!p.defaultPrevented)this.$WebWorker14('exception',{message:p.message});};j.prototype.$WebWorker19=function(event){'use strict';var p=event.data;switch(p.type){case 'message':this.$WebWorker5(p.message);break;case 'pong':this.$WebWorker1=true;this.$WebWorker14('executed',{dt:Math.floor(p.args[1]-p.args[0]),bytes:this.$WebWorker3.source?this.$WebWorker3.source.length:-1});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorker14('haste_error',{message:p.message});break;case 'console':var q=p.args.shift();['log','error','info','debug','warn'].includes(q)||h(0);b.console[q].apply(b.console,p.args);break;}};j.prototype.$WebWorker10=function(p){'use strict';j.states.includes(p)||h(0);this.$WebWorker14('transition',{next_state:p});this.$WebWorker2=p};j.prepareResource=function(p,q){'use strict';q=q||c('emptyFunction');p.sameOriginURL||p.url||p.source||h(0);!!j.isSupported()||h(0);if(p.sameOriginURL){q()}else if(p.url&&c('areSameOrigin')(new (c('URI'))(p.url),new (c('URI'))(b.location.href))){p.sameOriginURL=p.url;q()}else if(p.source){if(j.$WebWorker21())p.sameOriginURL=j.$WebWorker22(p.source);q()}else if(!p.loading){var r=c('performanceNow')();p.loading=[q];j.$WebWorker23(p.url,function(s){if(s){p.source=s;if(j.$WebWorker21())p.sameOriginURL=j.$WebWorker22(s);}j.$WebWorker14('prepared',p.name,{dt:Math.floor(c('performanceNow')()-r),bytes:s.length});p.loading.forEach(function(t){return t()});p.loading=false})}else p.loading.push(q);return p};j.releaseResource=function(p){'use strict';if(p.sameOriginURL.indexOf('blob:')===0){if(i.revokeObjectURL)i.revokeObjectURL(p.sameOriginURL);p.sameOriginURL=null}return p};j.isSupported=function(){'use strict';return m&&(j.$WebWorker21()||n())};j.areTransferablesSupported=function(){'use strict';return j.isSupported()&&o()};j.$WebWorker23=function(p,q){'use strict';new (c('XHRRequest'))(p).setTransportBuilder(c('getCrossOriginTransport')).setMethod('GET').setResponseHandler(function(r){q(r)}).setErrorHandler(q.bind(null,null)).send()};j.$WebWorker22=function(p){'use strict';j.$WebWorker21()||h(0);if(j.$WebWorker17()){var q=c('BlobFactory').getBlob([p],{type:'application/javascript'});return i.createObjectURL(q)}if(j.$WebWorker18())return 'data:application/javascript,'+encodeURIComponent(p);};j.$WebWorker17=function(){'use strict';return c('BlobFactory').isSupported()&&k()};j.$WebWorker18=function(){'use strict';return l()};j.$WebWorker21=function(){'use strict';return j.$WebWorker17()||j.$WebWorker18()};j.$WebWorker14=function(event,p,q){'use strict';if(!c('WebWorkerConfig').logging.enabled)return;c('BanzaiLogger').log(c('WebWorkerConfig').logging.config,babelHelpers['extends']({},q,{features_array:j.$WebWorker16(),event:event,resource:p}))};var k=c('memoize')(function(){var p,q;if(!i||!i.createObjectURL)return false;try{p=i.createObjectURL(c('BlobFactory').getBlob([''],{type:'application/javascript'}));var r=new b.Worker(p);r.terminate();q=true}catch(s){q=false}finally{if(i.revokeObjectURL)i.revokeObjectURL(p);}return q}),l=c('memoize')(function(){var p;try{var q=new b.Worker('data:application/javascript,');q.terminate();p=true}catch(r){p=false}return p}),m=!!b.Worker,n=c('memoize')(function(){var p;try{var q=new b.Worker(j.evalWorkerURL);q.terminate();p=true}catch(r){p=false}return p}),o=c('memoize')(function(){var p;try{var q=new b.Worker(j.evalWorkerURL),r=new ArrayBuffer(0);q.postMessage({buffer:r},[r]);q.terminate();p=true}catch(s){p=false}return p});j.states=['constructed','preparing','executing','terminated'];j.evalWorkerURL=c('WebWorkerConfig').evalWorkerURL;f.exports=j}),null);
__d('FileHasher',['WebWorker','fileSliceName','emptyFunction','FileHashWorkerResource'],(function a(b,c,d,e,f,g){h.isSupported=function(){'use strict';return c('WebWorker').isSupported()};function h(){'use strict';var i=c('FileHashWorkerResource');c('WebWorker').prepareResource(i);this.$FileHasher1=new (c('WebWorker'))(i).setMessageHandler(function(j){this.$FileHasher2(j)}.bind(this)).execute()}h.prototype.hash=function(i,j){'use strict';this.$FileHasher2=j;this.$FileHasher1.postMessage({file:i,fileSliceName:c('fileSliceName')});return this};h.prototype.destroy=function(){'use strict';this.$FileHasher2=c('emptyFunction');this.$FileHasher1.terminate()};f.exports=h}),null);
__d('PagesComposerActionsTypes',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({BACKDATE:null,SET_DRAFT:null,SCHEDULE:null,SET_ADS_POST:null,SET_BOOSTED_POST:null,SHOW_OFFER_UPSELL:null,ABANDON_OFFER_UPSELL:null,INSTAGRAM_CROSS_POSTING:null});f.exports=h}),null);
__d('ReactComposerAttachmentInitState',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({UNINITIALIZED:null,INITIALIZING:null,INITIALIZED:null},'ReactComposerAttachmentInitState')}),null);
__d('ReactComposerAttachmentStore',['ImmutableObject','ReactComposerAttachmentActionType','ReactComposerAttachmentInitState','ReactComposerAttachmentType','ReactComposerStoreBaseGatedModule','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){var h,i,j=c('ReactComposerStoreBaseGatedModule').module;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(){'use strict';var l;i.constructor.call(this,function(){return {attachments:[],selectedAttachment:null,isSelectedAttachmentActive:false}},function(m){switch(m.type){case c('ReactComposerAttachmentActionType').REGISTER_ATTACHMENT:l&&l.$ReactComposerAttachmentStore1(m);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:l&&l.$ReactComposerAttachmentStore2(m);break;case c('ReactComposerAttachmentActionType').SET_BOOTLOADED:l&&l.$ReactComposerAttachmentStore3(m);break;case c('ReactComposerAttachmentActionType').SET_BOOTSTRAPPED:l&&l.$ReactComposerAttachmentStore4(m);break;case c('ReactComposerAttachmentActionType').SET_INITIALIZED:l&&l.$ReactComposerAttachmentStore5(m);break;}});l=this}k.prototype.getAttachment=function(l,m){'use strict';var n=this.getComposerData(l);return n.attachments.find(function(o){return o.id===m})};k.prototype.getSelectedAttachmentID=function(l){'use strict';var m=this.getComposerData(l);if(m.selectedAttachment)return m.selectedAttachment.id;return null};k.prototype.hasAttachment=function(l,m){'use strict';return this.getComposerData(l).attachments.some(function(n){return n.id===m})};k.prototype.getIsAttachmentSelected=function(l,m){'use strict';var n=this.getComposerData(l).selectedAttachment;return !!n&&n.id===m};k.prototype.isSelectedAttachmentActive=function(l){'use strict';return this.getComposerData(l).isSelectedAttachmentActive};k.prototype.isBootstrapped=function(l,m){'use strict';var n=this.getComposerData(l),o=this.$ReactComposerAttachmentStore6(n,m);return n.attachments[o].bootstrapped};k.prototype.getBootloadDuration=function(l,m){'use strict';var n=this.getComposerData(l),o=this.$ReactComposerAttachmentStore6(n,m);return n.attachments[o].bootloadDuration};k.prototype.getBootstrapDuration=function(l,m){'use strict';var n=this.getComposerData(l),o=this.$ReactComposerAttachmentStore6(n,m);return n.attachments[o].bootstrapDuration};k.prototype.getAttachmentsConfig=function(l,m){'use strict';var n=this.getComposerData(l),o=this.$ReactComposerAttachmentStore6(n,m);return n.attachments[o].config};k.prototype.$ReactComposerAttachmentStore1=function(l){'use strict';var m=this.validateAction(l,['composerID','id']),n=m[0],o=m[1],p=this.getComposerData(n),q=new (c('ImmutableObject'))({id:o,initState:c('ReactComposerAttachmentInitState').UNINITIALIZED,bootloaded:l.bootloaded,bootstrapped:l.bootstrapped,module:l.module,postButtonModule:l.postButtonModule,initTime:null,bootloadDuration:null,bootstrapDuration:null,config:o===c('ReactComposerAttachmentType').MEDIA&&l.config?{videoUploadParams:l.config.videoUploadParams||{}}:null});p.attachments.push(q);if(l.selected)p.selectedAttachment=q;if(l.active)p.isSelectedAttachmentActive=true;this.emitChange(n)};k.prototype.$ReactComposerAttachmentStore7=function(l){'use strict';var m=this.validateAction(l,['id','composerID']),n=m[0],o=m[1],p=this.getComposerData(o),q=this.$ReactComposerAttachmentStore6(p,n);if(p.attachments[q].initState===c('ReactComposerAttachmentInitState').UNINITIALIZED)p.attachments[q]=c('ImmutableObject').set(p.attachments[q],{initState:c('ReactComposerAttachmentInitState').INITIALIZING});this.emitChange(o)};k.prototype.$ReactComposerAttachmentStore2=function(l){'use strict';var m=this.validateAction(l,['id','composerID','activate']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(o),r=this.$ReactComposerAttachmentStore6(q,n);q.selectedAttachment=q.attachments[r];if(p)q.isSelectedAttachmentActive=true;if(q.attachments[r].initState===c('ReactComposerAttachmentInitState').UNINITIALIZED)q.attachments[r]=c('ImmutableObject').set(q.attachments[r],{initState:c('ReactComposerAttachmentInitState').INITIALIZING});this.emitChange(o)};k.prototype.$ReactComposerAttachmentStore3=function(l){'use strict';var m=this.validateAction(l,['id','composerID','attachmentModule']),n=m[0],o=m[1],p=m[2],q=this.getComposerData(o),r=this.$ReactComposerAttachmentStore6(q,n);q.attachments[r]=c('ImmutableObject').set(q.attachments[r],{bootloaded:true,bootloadDuration:c('performanceAbsoluteNow')()-q.attachments[r].initTime,module:p,postButtonModule:l.postButtonModule});this.emitChange(o)};k.prototype.$ReactComposerAttachmentStore4=function(l){'use strict';var m=this.validateAction(l,['id','composerID']),n=m[0],o=m[1],p=this.getComposerData(o),q=this.$ReactComposerAttachmentStore6(p,n);p.attachments[q]=c('ImmutableObject').set(p.attachments[q],{bootstrapped:true,bootstrapDuration:c('performanceAbsoluteNow')()-p.attachments[q].initTime});this.emitChange(o)};k.prototype.$ReactComposerAttachmentStore5=function(l){'use strict';var m=this.validateAction(l,['id','composerID']),n=m[0],o=m[1],p=this.getComposerData(o),q=this.$ReactComposerAttachmentStore6(p,n);p.attachments[q]=c('ImmutableObject').set(p.attachments[q],{initState:c('ReactComposerAttachmentInitState').INITIALIZED,initTime:c('performanceAbsoluteNow')()});this.emitChange(o)};k.prototype.$ReactComposerAttachmentStore6=function(l,m){'use strict';var n=-1;for(var o=0;o<l.attachments.length;o++)if(l.attachments[o].id===m){n=o;break}if(n===-1)throw new Error('Undefined attachment id: '+m);return n};f.exports=new k()}),null);
__d('ReactComposerPhotoActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({PHOTO_RECOGNITION_STARTED:null,PHOTO_RECOGNITION_FINISHED:null,PHOTO_RECOGNITION_ALL_FINISHED:null,PHOTO_ADD_FACEBOX:null,PHOTO_TAG_FACEBOX:null,PHOTO_TAG_XY:null,PHOTO_TAG_XY_PRODUCT:null,PHOTO_UNTAG_FACEBOX:null,PHOTO_REMOVE:null,PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:null,PHOTO_EDIT_STARTED:null,PHOTO_EDIT_FINISHED:null,PHOTO_SET_BEING_TAGGED:null,PHOTO_LOADING_EDIT_FINISHED:null,PHOTO_UNTAG_ALL:null,PHOTO_SPHERICAL_UPDATING:null,PHOTO_UPDATE_ALL_PHOTO_TAGS:null},'ReactComposerPhotoActionType')}),null);
__d('ReactComposerPhotoStore',['immutable','ReactComposerMediaUploadActionType','ReactComposerPhotoActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i,j=c('immutable').Record({cubestripURI:null,faceboxes:c('immutable').Map(),height:null,id:null,imageSrc:null,isLoadingPhotoEdit:false,isRecognizingFaceboxes:false,thumbSrc:null,uploadID:null,width:null,xyTags:c('immutable').Map()}),k=c('immutable').Record({id:null,photoID:null,x:null,y:null,top:null,left:null,width:null,height:null,croppedURI:null,taggedSubjectID:null,taggedValue:null,isMagicTag:false,recognizedSubjectID:null}),l=c('immutable').Record({from_facebox:false,name:null,photoID:null,source:null,subject:null,x:null,y:null,is_product_tag:false});h=babelHelpers.inherits(m,c('ReactComposerStoreBase'));i=h&&h.prototype;function m(){'use strict';var n;i.constructor.call(this,function(){return {photos:c('immutable').Map(),photoBeingTagged:null,isSphericalPhotoUpdating:false}},function(o){switch(o.type){case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:n&&n.$ReactComposerPhotoStore1(o);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_EXTRA_DONE:n&&n.$ReactComposerPhotoStore2(o);break;case c('ReactComposerMediaUploadActionType').PHOTO_ADD_UPLOAD:n&&n.$ReactComposerPhotoStore3(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_STARTED:n&&n.$ReactComposerPhotoStore4(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_FINISHED:n&&n.$ReactComposerPhotoStore5(o);break;case c('ReactComposerPhotoActionType').PHOTO_RECOGNITION_ALL_FINISHED:n&&n.$ReactComposerPhotoStore6(o);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:n&&n.$ReactComposerPhotoStore7(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT:n&&n.$ReactComposerPhotoStore8(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY:n&&n.$ReactComposerPhotoStore9(o);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX:n&&n.$ReactComposerPhotoStore10(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX:n&&n.$ReactComposerPhotoStore11(o);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:n&&n.$ReactComposerPhotoStore12(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_SUBJECT_FROM_ALL_PHOTOS:n&&n.$ReactComposerPhotoStore13(o);break;case c('ReactComposerPhotoActionType').PHOTO_SET_BEING_TAGGED:n&&n.$ReactComposerPhotoStore14(o);break;case c('ReactComposerMediaUploadActionType').PREFILL_MEDIAS:n&&n.$ReactComposerPhotoStore15(o);break;case c('ReactComposerPhotoActionType').PHOTO_EDIT_STARTED:n&&n.$ReactComposerPhotoStore16(o);break;case c('ReactComposerPhotoActionType').PHOTO_LOADING_EDIT_FINISHED:n&&n.$ReactComposerPhotoStore17(o);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL:n&&n.$ReactComposerPhotoStore18(o);break;case c('ReactComposerPhotoActionType').PHOTO_SPHERICAL_UPDATING:n&&n.$ReactComposerPhotoStore19(o);break;case c('ReactComposerPhotoActionType').PHOTO_UPDATE_ALL_PHOTO_TAGS:n&&n.$ReactComposerPhotoStore20(o);break;default:}});n=this}m.prototype.getPhotos=function(n){'use strict';return this.getComposerData(n).photos};m.prototype.isLimitExceeded=function(n,o){'use strict';return this.getPhotos(n).size>o};m.prototype.getPhoto=function(n,o){'use strict';return this.getComposerData(n).photos.get(o)};m.prototype.isRecognizing=function(n){'use strict';return this.getComposerData(n).photos.some(function(o){return o.isRecognizingFaceboxes})};m.prototype.getIsSubjectTagged=function(n,o){'use strict';var p=this.getComposerData(n).photos;return p.some(function(q){return this.getIsSubjectTaggedInPhoto(n,q.id,o)}.bind(this))};m.prototype.getIsSubjectTaggedInPhoto=function(n,o,p){'use strict';var q=this.getPhoto(n,o),r=q.faceboxes.some(function(t){return t.taggedSubjectID===p}),s=q.xyTags.some(function(t){return t.subject===p});return r||s};m.prototype.hasTagsInPhoto=function(n,o){'use strict';var p=this.getPhoto(n,o);if(!p)return false;var q=p.faceboxes.some(function(s){return s.taggedSubjectID!==null}),r=p.xyTags.size>0;return q||r};m.prototype.getAllTaggedFaceboxes=function(n){'use strict';var o=this.getPhotos(n),p=[];o.forEach(function(q){p=p.concat(q.faceboxes.toArray())});return p.filter(function(q){return !!q.get('taggedSubjectID')})};m.prototype.getTaggedFaceboxes=function(n,o){'use strict';var p=this.getPhoto(n,o);return !p?null:p.faceboxes.filter(function(q){return !!q.get('taggedSubjectID')}).map(function(q){return q.toObject()}).toArray()};m.prototype.getFaceboxes=function(n,o){'use strict';var p=this.getPhoto(n,o);return !p?null:p.faceboxes.map(function(q){return q.toObject()}).toArray()};m.prototype.getXYTags=function(n,o){'use strict';var p=this.getPhoto(n,o);return !p?null:p.xyTags.map(function(q){return q.toObject()}).toArray()};m.prototype.getAllXYTags=function(n){'use strict';var o=this.getPhotos(n),p=[];o.forEach(function(q){p=p.concat(q.xyTags.toArray())});return p};m.prototype.getPhotoBeingTagged=function(n){'use strict';return this.getComposerData(n).photoBeingTagged};m.prototype.isSphericalPhotoUpdating=function(n){'use strict';return this.getComposerData(n).isSphericalPhotoUpdating};m.prototype.$ReactComposerPhotoStore1=function(n){'use strict';var o=this.validateAction(n,['composerID','uploadID','photoID','thumbSrc','cubestripURI','imageSrc','width','height']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=o[7];this.$ReactComposerPhotoStore21(p,r,new j({id:r,uploadID:q,thumbSrc:s,cubestripURI:t,imageSrc:u,width:v,height:w}));this.emitChange(p)};m.prototype.$ReactComposerPhotoStore2=function(n){'use strict';this.$ReactComposerPhotoStore1(n)};m.prototype.$ReactComposerPhotoStore4=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return s.set('isRecognizingFaceboxes',true)});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore5=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return s&&s.set('isRecognizingFaceboxes',false)});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore6=function(n){'use strict';var o=this.validateAction(n,['composerID','photos']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.map(function(s){return q.indexOf(s.id)!==-1?s.set('isRecognizingFaceboxes',false):s});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore7=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','facebox']),p=o[0],q=o[1],r=o[2],s=this.getComposerData(p),t=r.bestRecognition,u=null,v=null;if(t){u=t.subjectID;v=t.value}s.photos=s.photos.update(q,function(w){return w&&w.update('faceboxes',function(x){return x.set(r.id,new k({id:r.id,photoID:q,x:r.x,y:r.y,top:r.top,left:r.left,width:r.width,height:r.height,croppedURI:r.croppedURI,taggedSubjectID:u,taggedValue:v,isMagicTag:!!u,recognizedSubjectID:u}))})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore9=function(n){'use strict';var o=this.validateAction(n,['composerID','value','photoID','source','subject','x','y']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=this.getComposerData(p);w.photos=w.photos.update(r,function(x){return x.update('xyTags',function(y){return y.set(t,new l({name:q,photoID:r,source:s,subject:t,x:u,y:v}))})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore8=function(n){'use strict';var o=this.validateAction(n,['composerID','value','photoID','source','subject','x','y']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=o[5],v=o[6],w=this.getComposerData(p);w.photos=w.photos.update(r,function(x){return x.update('xyTags',function(y){return y.set(t,new l({name:q,photoID:r,source:s,subject:t,x:u,y:v,is_product_tag:true}))})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore10=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','faceboxID','subjectID','value']),p=o[0],q=o[1],r=o[2],s=o[3],t=o[4],u=this.getComposerData(p);u.photos=u.photos.update(q,function(v){return v.update('faceboxes',function(w){return w.update(r,function(x){return x.withMutations(function(y){return y.set('taggedSubjectID',s).set('taggedValue',t).set('isMagicTag',false)})})})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore18=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){s=s.set('xyTags',c('immutable').Map());return s});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore11=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','faceboxID']),p=o[0],q=o[1],r=o[2],s=this.getComposerData(p);s.photos=s.photos.update(q,function(t){return t.update('faceboxes',function(u){return u.update(r,function(v){return v.withMutations(function(w){return w.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false)})})})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore12=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos['delete'](q)};m.prototype.$ReactComposerPhotoStore13=function(n){'use strict';var o=this.validateAction(n,['composerID','subjectID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.map(function(s){return s.withMutations(function(t){return t.update('faceboxes',function(u){return u.map(function(v){if(v.taggedSubjectID!==q)return v;return v.withMutations(function(w){return w.remove('taggedSubjectID').remove('taggedValue').set('isMagicTag',false)})})}).update('xyTags',function(u){return u.filterNot(function(v){return v.subject===q})})})});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore14=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photoBeingTagged=q;this.emitChange(p)};m.prototype.$ReactComposerPhotoStore15=function(n){'use strict';var o=this.validateAction(n,['composerID','medias']),p=o[0],q=o[1];q.forEach(function(r){this.$ReactComposerPhotoStore21(p,r.photoID,new j({id:r.photoID,uploadID:r.uploadID,thumbSrc:r.thumbSrc,imageSrc:r.imageSrc,width:r.width,height:r.height,cubestripURI:r.cubestripURI}))}.bind(this));this.emitChange(p)};m.prototype.$ReactComposerPhotoStore16=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return s.set('isLoadingPhotoEdit',true)});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore17=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID']),p=o[0],q=o[1],r=this.getComposerData(p);r.photos=r.photos.update(q,function(s){return s.set('isLoadingPhotoEdit',false)});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore3=function(n){'use strict';var o=this.validateAction(n,['composerID','photo']),p=o[0],q=o[1];this.$ReactComposerPhotoStore21(p,q.id,q);this.emitChange(p)};m.prototype.$ReactComposerPhotoStore19=function(n){'use strict';var o=this.validateAction(n,['composerID','isSphericalPhotoUpdating']),p=o[0],q=o[1],r=this.getComposerData(p);r.isSphericalPhotoUpdating=q;this.emitChange(p)};m.prototype.$ReactComposerPhotoStore20=function(n){'use strict';var o=this.validateAction(n,['composerID','photoID','faceboxes','xyTags']),p=o[0],q=o[1],r=o[2],s=o[3],t=this.getComposerData(p),u={};r.forEach(function(w){u[w.id]=new k(w)});var v={};s.forEach(function(w){v[w.subject]=new l(w)});t.photos=t.photos.update(q,function(w){return w&&w.set('faceboxes',c('immutable').Map(u)).set('xyTags',c('immutable').Map(v))});this.emitChange(p)};m.prototype.$ReactComposerPhotoStore21=function(n,o,p){'use strict';var q=this.getComposerData(n);q.photos=q.photos.set(o,p)};f.exports=new m()}),null);
__d('ReactComposerTaggerActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({DESELECT_TAGGER:null,SET_SELECTED_TAGGER:null,UPDATE_TAGGERS_SOURCE:null,SET_TAGGER_SOURCE:null,SET_TAGGER_DATA:null,SET_SELECTED_DATETIME:null,SET_SELECTED_PEOPLE:null,SET_TAGGER_SHOW_NUX:null,SET_DISABLED:null,SET_TAGGER_SHOW_TOOLTIP:null,SET_IS_BRANDED_CONTENT_VIDEO:null},'ReactComposerTaggerActionType')}),null);
__d('ReactComposerTaggerStore',['immutable','ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerScrapedAttachmentActionType','ReactComposerDispatcher','ReactComposerMediaUploadActionType','ReactComposerPhotoActionType','ReactComposerPhotoStore','ReactComposerStoreBase','ReactComposerTaggerActionType','ReactComposerTaggerType','SearchableEntry','Set','isEmpty'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){var l={};l[c('ReactComposerTaggerType').PEOPLE]=[];l[c('ReactComposerTaggerType').LOCATION]={};l[c('ReactComposerTaggerType').BACKDATE]={};l[c('ReactComposerTaggerType').ACTIVITY]={};l[c('ReactComposerTaggerType').TARGETING]={};l[c('ReactComposerTaggerType').PUBLISHER_ABTEST_HOLDOUT]={};l[c('ReactComposerTaggerType').SPONSOR]={sponsors:[],directShareStatus:0,sponsorRelationship:0};l[c('ReactComposerTaggerType').PRODUCT]=[];l[c('ReactComposerTaggerType').MARKDOWN]={};l[c('ReactComposerTaggerType').CONTENT_WARNINGS]=[];l[c('ReactComposerTaggerType').MESSAGING]=[];l[c('ReactComposerTaggerType').POLITICAL_INFO]={};l[c('ReactComposerTaggerType').ISSUE_TAG]=[];l[c('ReactComposerTaggerType').CONTACT_YOUR_REPRESENTATIVE]={};l[c('ReactComposerTaggerType').GIF]={};l[c('ReactComposerTaggerType').FUNDRAISER]={};return {$ReactComposerTaggerStore1:c('immutable').Set(),autoFocusOnSelectedTagger:true,selectedTagger:null,taggersData:l,taggersSource:{},taggersShowNUX:{},disabled:{},taggersShowTooltip:{},sourceAttachment:null}},function(l){switch(l.type){case c('ReactComposerTaggerActionType').DESELECT_TAGGER:k&&k.$ReactComposerTaggerStore2(l);break;case c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER:k&&k.$ReactComposerTaggerStore3(l);break;case c('ReactComposerTaggerActionType').UPDATE_TAGGERS_SOURCE:k&&k.$ReactComposerTaggerStore4(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_SOURCE:k&&k.$ReactComposerTaggerStore5(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_DATA:k&&k.$ReactComposerTaggerStore6(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_SHOW_NUX:k&&k.$ReactComposerTaggerStore7(l);break;case c('ReactComposerTaggerActionType').SET_DISABLED:k&&k.$ReactComposerTaggerStore8(l);break;case c('ReactComposerTaggerActionType').SET_TAGGER_SHOW_TOOLTIP:k&&k.$ReactComposerTaggerStore9(l);break;case c('ReactComposerPhotoActionType').PHOTO_ADD_FACEBOX:k&&k.$ReactComposerTaggerStore10(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY:k&&k.$ReactComposerTaggerStore11(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_XY_PRODUCT:k&&k.$ReactComposerTaggerStore12(l);break;case c('ReactComposerPhotoActionType').PHOTO_TAG_FACEBOX:k&&k.$ReactComposerTaggerStore13(l);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_ALL:k&&k.$ReactComposerTaggerStore14(l);break;case c('ReactComposerPhotoActionType').PHOTO_UNTAG_FACEBOX:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerTaggerStore15(l);break;case c('ReactComposerPhotoActionType').PHOTO_UPDATE_ALL_PHOTO_TAGS:k&&k.$ReactComposerTaggerStore16(l);break;case c('ReactComposerPhotoActionType').PHOTO_REMOVE:c('ReactComposerDispatcher').waitFor([c('ReactComposerPhotoStore').getDispatchToken()]);k&&k.$ReactComposerTaggerStore17(l);break;case c('ReactComposerMediaUploadActionType').PHOTO_UPLOAD_DONE:k&&k.$ReactComposerTaggerStore18(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerTaggerStore19(l);break;case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerTaggerStore20(l);break;}});k=this}j.prototype.hasData=function(k,l){'use strict';var m=this.getTaggerData(k,l);if(m==null)return false;switch(l){case c('ReactComposerTaggerType').PEOPLE:case c('ReactComposerTaggerType').PRODUCT:case c('ReactComposerTaggerType').CONTENT_WARNINGS:return m.length>0;case c('ReactComposerTaggerType').LOCATION:return !!m.place;case c('ReactComposerTaggerType').BACKDATE:return !!m.year;case c('ReactComposerTaggerType').ACTIVITY:return !!m.action&&!!m.object;case c('ReactComposerTaggerType').TARGETING:case c('ReactComposerTaggerType').PUBLISHER_ABTEST_HOLDOUT:case c('ReactComposerTaggerType').MARKDOWN:case c('ReactComposerTaggerType').POLITICAL_INFO:case c('ReactComposerTaggerType').ISSUE_TAG:case c('ReactComposerTaggerType').FUN_FACT:return !c('isEmpty')(m);case c('ReactComposerTaggerType').SPONSOR:return m.sponsors&&m.sponsors.length>0;case c('ReactComposerTaggerType').FORMATTED_TEXT:return !!m.formatActive;case c('ReactComposerTaggerType').STICKER:return !!m.stickerID;case c('ReactComposerTaggerType').GIF:return !!m.hasGIF;case c('ReactComposerTaggerType').MESSAGING:return m.hasCTA;case c('ReactComposerTaggerType').CONTACT_YOUR_REPRESENTATIVE:return !!m.politicalRepresentative;case c('ReactComposerTaggerType').FUNDRAISER:return !!m.charityID;default:throw new Error(l+' is an unhandled tagger type in '+'ReactComposerTaggerStore.hasData');}};j.prototype.shouldShowNUX=function(k,l){'use strict';var m=this.getComposerData(k);return !!m.taggersShowNUX[l]};j.prototype.shouldShowTooltip=function(k,l){'use strict';var m=this.getComposerData(k);return !!m.taggersShowTooltip[l]};j.prototype.isDisabled=function(k,l){'use strict';var m=this.getComposerData(k);return !!m.disabled[l]};j.prototype.areAllTaggersEmpty=function(k){'use strict';var l=this.getTaggersData(k);for(var m in l)if(this.hasData(k,m))return false;return true};j.prototype.getSelectedTagger=function(k){'use strict';return this.getComposerData(k).selectedTagger};j.prototype.getAutoFocusOnSelectedTagger=function(k){'use strict';return this.getComposerData(k).autoFocusOnSelectedTagger};j.prototype.getTaggerSource=function(k,l){'use strict';return this.getComposerData(k).taggersSource[l]};j.prototype.getTaggerData=function(k,l){'use strict';return this.getComposerData(k).taggersData[l]};j.prototype.getTaggersData=function(k){'use strict';return this.getComposerData(k).taggersData};j.prototype.hasMinutiae=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').ACTIVITY);return !!(l&&l.action&&l.object)};j.prototype.hasLocationTag=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&(l.place||l.implicitLocation))};j.prototype.hasExplicitLocation=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&l.place)};j.prototype.hasImplicitLocation=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').LOCATION);return !!(l&&l.implicitLocation&&!l.place)};j.prototype.hasBackdate=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').BACKDATE)||{};return !!l.year};j.prototype.hasMarkdown=function(k){'use strict';return !!this.getTaggerData(k,c('ReactComposerTaggerType').MARKDOWN).isMarkdown};j.prototype.hasMessagingCTA=function(k){'use strict';return !!this.getTaggerData(k,c('ReactComposerTaggerType').MESSAGING).hasCTA};j.prototype.getPoliticalDistrictInfo=function(k){'use strict';return this.getTaggerData(k,c('ReactComposerTaggerType').POLITICAL_INFO)};j.prototype.getNumberOfWithWhoTags=function(k){'use strict';var l=this.getTaggerData(k,c('ReactComposerTaggerType').PEOPLE)||[];return l.length};j.prototype.$ReactComposerTaggerStore2=function(k){'use strict';var l=this.getComposerData(k.composerID);l.selectedTagger=null;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore3=function(k){'use strict';var l=this.getComposerData(k.composerID);if(l.selectedTagger===k.taggerID&&!k.disableToggle){l.selectedTagger=null}else l.selectedTagger=k.taggerID;l.autoFocusOnSelectedTagger=k.autoFocus;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore5=function(k){'use strict';var l=this.getComposerData(k.composerID);l.taggersSource[k.taggerID]=k.taggerSource;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore4=function(k){'use strict';var l=this.validateAction(k,['composerID','taggersSource']),m=l[0],n=l[1],o=this.getComposerData(m);for(var p in n)o.taggersSource[p]=n[p];this.emitChange(m)};j.prototype.$ReactComposerTaggerStore6=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore7=function(k){'use strict';var l=this.getComposerData(k.composerID);l.taggersShowNUX[k.taggerID]=k.showNUX;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore9=function(k){'use strict';var l=this.getComposerData(k.composerID);l.taggersShowTooltip[k.taggerID]=k.showTooltip;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore8=function(k){'use strict';var l=this.validateAction(k,['composerID','taggerID','disabled']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.disabled[n]=o;this.emitChange(m)};j.prototype.$ReactComposerTaggerStore20=function(k){'use strict';var l=this.getComposerData(k.composerID);l.sourceAttachment=c('ReactComposerAttachmentStore').getSelectedAttachmentID(k.composerID);this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore19=function(k){'use strict';var l=this.getComposerData(k.composerID);if(k.id===l.sourceAttachment||l.sourceAttachment===null)return;this.getTaggerData(k.composerID,c('ReactComposerTaggerType').GIF).hasGIF=false;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore18=function(k){'use strict';var l=this.getComposerData(k.composerID),m=Object.assign({mediaLocation:k.mediaLocation},l.taggersData[c('ReactComposerTaggerType').LOCATION]);l.taggersData[c('ReactComposerTaggerType').LOCATION]=m;this.emitChange(k.composerID)};j.prototype.$ReactComposerTaggerStore10=function(k){'use strict';var l=this.validateAction(k,['composerID','facebox','photoID']),m=l[0],n=l[1],o=l[2],p=n.bestRecognition;if(p)this.$ReactComposerTaggerStore21(m,p.subjectID,p.value,o);};j.prototype.$ReactComposerTaggerStore11=function(k){'use strict';var l=this.validateAction(k,['composerID','subject','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore21(m,n,o,p)};j.prototype.$ReactComposerTaggerStore14=function(k){'use strict';var l=this.validateAction(k,['composerID','photoID']),m=l[0],n=l[1];this.$ReactComposerTaggerStore22(m,n);this.$ReactComposerTaggerStore23(m,n)};j.prototype.$ReactComposerTaggerStore12=function(k){'use strict';var l=this.validateAction(k,['composerID','subject','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore24(m,n,o,p)};j.prototype.$ReactComposerTaggerStore13=function(k){'use strict';var l=this.validateAction(k,['composerID','subjectID','value','photoID']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore21(m,n,o,p)};j.prototype.$ReactComposerTaggerStore15=function(k){'use strict';var l=this.validateAction(k,['composerID','subjectID']),m=l[0],n=l[1];if(!c('ReactComposerPhotoStore').getIsSubjectTagged(m,n))this.$ReactComposerTaggerStore25(m,n);};j.prototype.$ReactComposerTaggerStore16=function(k){'use strict';var l=this.validateAction(k,['composerID','photoID','faceboxes','xyTags']),m=l[0],n=l[1],o=l[2],p=l[3];this.$ReactComposerTaggerStore22(m,n);o.forEach(function(q){q&&q.taggedSubjectID&&this.$ReactComposerTaggerStore21(m,q.taggedSubjectID,q.taggedValue,n)}.bind(this));p.forEach(function(q){q&&this.$ReactComposerTaggerStore21(m,q.subject,q.name,n)}.bind(this))};j.prototype.$ReactComposerTaggerStore17=function(k){'use strict';var l=this.validateAction(k,'composerID');this.getComposerData(l).$ReactComposerTaggerStore1.forEach(function(m){if(!c('ReactComposerPhotoStore').getIsSubjectTagged(l,m))this.$ReactComposerTaggerStore25(l,m);}.bind(this))};j.prototype.$ReactComposerTaggerStore21=function(k,l,m,n){'use strict';var o=new (c('SearchableEntry'))({uniqueID:l,title:m,auxiliaryData:{isFacebox:true,photos:new (c('Set'))([n])}}),p=this.getComposerData(k),q=p.taggersData[c('ReactComposerTaggerType').PEOPLE],r=q.find(function(t){return t.getUniqueID()===o.getUniqueID()});p.$ReactComposerTaggerStore1=p.$ReactComposerTaggerStore1.add(l);if(r){var s=r.getAuxiliaryData();if(this.$ReactComposerTaggerStore26(r))s.photos.add(n);}else p.taggersData[c('ReactComposerTaggerType').PEOPLE]=q.concat(o);this.emitChange(k)};j.prototype.$ReactComposerTaggerStore24=function(k,l,m,n){'use strict';var o=new (c('SearchableEntry'))({uniqueID:l,title:m,auxiliaryData:{isFacebox:true,photos:new (c('Set'))([n])}}),p=this.getComposerData(k),q=p.taggersData[c('ReactComposerTaggerType').PRODUCT],r=q.find(function(s){return s.getUniqueID()===o.getUniqueID()});if(r){if(this.$ReactComposerTaggerStore26(r))r.getAuxiliaryData().photos.add(n);}else p.taggersData[c('ReactComposerTaggerType').PRODUCT]=q.concat(o);this.emitChange(k)};j.prototype.$ReactComposerTaggerStore25=function(k,l){'use strict';var m=this.getComposerData(k);m.taggersData[c('ReactComposerTaggerType').PEOPLE]=m.taggersData[c('ReactComposerTaggerType').PEOPLE].filter(function(n){return n.getUniqueID()!==l});m.taggersData[c('ReactComposerTaggerType').PRODUCT]=m.taggersData[c('ReactComposerTaggerType').PRODUCT].filter(function(n){return n.getUniqueID()!==l});m.$ReactComposerTaggerStore1=m.$ReactComposerTaggerStore1['delete'](l);this.emitChange(k)};j.prototype.$ReactComposerTaggerStore22=function(k,l){'use strict';var m=this.getComposerData(k),n=m.taggersData[c('ReactComposerTaggerType').PEOPLE];this.$ReactComposerTaggerStore27(k,n,l)};j.prototype.$ReactComposerTaggerStore23=function(k,l){'use strict';var m=this.getComposerData(k),n=m.taggersData[c('ReactComposerTaggerType').PRODUCT];this.$ReactComposerTaggerStore27(k,n,l)};j.prototype.$ReactComposerTaggerStore27=function(k,l,m){'use strict';var n=[];for(var o=l,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r,t=s.getAuxiliaryData();if(this.$ReactComposerTaggerStore26(s)&&t.photos['delete'](m)&&t.photos.size==0)n.push(s.getUniqueID());}for(var u=n,v=Array.isArray(u),w=0,u=v?u:u[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var x;if(v){if(w>=u.length)break;x=u[w++]}else{w=u.next();if(w.done)break;x=w.value}var y=x;this.$ReactComposerTaggerStore25(k,y)}};j.prototype.$ReactComposerTaggerStore26=function(k){'use strict';return k.getAuxiliaryData().photos};f.exports=new j()}),null);
__d('ReactComposerTaggerActions',['ReactComposerDispatcher','ReactComposerTaggerActionType','ReactComposerTaggerStore'],(function a(b,c,d,e,f,g){h.prototype.deselectCurrentTagger=function(i,j){'use strict';var k=c('ReactComposerTaggerStore').getSelectedTagger(i);if(k){var l={composerID:i,sourceLoggingName:j,type:c('ReactComposerTaggerActionType').DESELECT_TAGGER,taggerID:k};c('ReactComposerDispatcher').dispatch(l)}};h.prototype.selectTagger=function(i,j,k,l){'use strict';var m=c('ReactComposerTaggerStore').getSelectedTagger(i);if(k===m&&l!==true){this.deselectCurrentTagger(i,j)}else{var n={composerID:i,sourceLoggingName:j,type:c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER,taggerID:k,autoFocus:true,disableToggle:l};c('ReactComposerDispatcher').dispatch(n)}};h.prototype.selectTaggerWithoutAutofocus=function(i,j,k){'use strict';var l={composerID:i,sourceLoggingName:j,type:c('ReactComposerTaggerActionType').SET_SELECTED_TAGGER,taggerID:k,autoFocus:false};c('ReactComposerDispatcher').dispatch(l)};h.prototype.updateTaggersSource=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerTaggerActionType').UPDATE_TAGGERS_SOURCE,taggersSource:j};c('ReactComposerDispatcher').dispatch(k)};h.prototype.setTaggerSource=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerTaggerActionType').SET_TAGGER_SOURCE,taggerID:j,taggerSource:k};c('ReactComposerDispatcher').dispatch(l)};h.prototype.setTaggerData=function(i,j,k,l){'use strict';this.$ReactComposerTaggerActions1(i,k,l,false,j)};h.prototype.setTaggerDataWithoutLogging=function(i,j,k){'use strict';this.$ReactComposerTaggerActions1(i,j,k,true)};h.prototype.$ReactComposerTaggerActions1=function(i,j,k,l,m){'use strict';var n={composerID:i,sourceLoggingName:m,type:c('ReactComposerTaggerActionType').SET_TAGGER_DATA,taggerID:j,taggerData:k,suppressWaterfallLogging:l};c('ReactComposerDispatcher').dispatch(n)};h.prototype.selectDateTime=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerTaggerActionType').SET_SELECTED_DATETIME,selectedDateTime:j};c('ReactComposerDispatcher').dispatch(k)};h.prototype.selectPeople=function(i,j){'use strict';var k={composerID:i,type:c('ReactComposerTaggerActionType').SET_SELECTED_PEOPLE,selectedPeople:j};c('ReactComposerDispatcher').dispatch(k)};h.prototype.handleSetTaggerShowNUX=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerTaggerActionType').SET_TAGGER_SHOW_NUX,taggerID:j,showNUX:k};c('ReactComposerDispatcher').dispatch(l)};h.prototype.setDisabled=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerTaggerActionType').SET_DISABLED,taggerID:j,disabled:k};c('ReactComposerDispatcher').dispatch(l)};h.prototype.handleSetTaggerShowTooltip=function(i,j,k){'use strict';var l={composerID:i,type:c('ReactComposerTaggerActionType').SET_TAGGER_SHOW_TOOLTIP,taggerID:j,showTooltip:k};c('ReactComposerDispatcher').dispatch(l)};h.prototype.setIsBrandedContentVideo=function(i,j){'use strict';var k={composerID:i,isBrandedContentVideo:j,type:c('ReactComposerTaggerActionType').SET_IS_BRANDED_CONTENT_VIDEO};c('ReactComposerDispatcher').dispatch(k)};function h(){'use strict'}f.exports=new h()}),null);
__d('ResumableUploadServiceState.enum',[],(function a(b,c,d,e,f,g){'use strict';var h={CANCEL:'upload-cancel',FAIL:'upload-fail',FILE_TOO_LARGE:'upload-too-large',NOT_STARTED:'upload-not-started',PROGRESS:'upload-progress',START:'upload-start',SUCCESS:'upload-success',TRANSPORT_FAILURE:'upload-transport-fail'};f.exports=h}),null);
__d('ResumableUploadService',['Promise','AsyncRequest','EventEmitter','ResumableUploadServiceState.enum','URI','uuid'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l,m,n,o){i.constructor.call(this);this.consumer=k;this.accessToken=l;this.sessionKey=m||c('uuid')();this.contentKey=n||'';this.contentValue=o||''}j.prototype.resume=function(k){var l=new (c('URI'))('https://rupload.facebook.com/'+this.consumer+'/'+this.sessionKey);if(this.contentKey&&this.contentValue)l=l.addQueryData(this.contentKey,this.contentValue);var m=function(){return new (c('Promise'))(function(q,r){new (c('AsyncRequest'))().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setMethod('GET').setURI(l).setReadOnly(true).setRequestHeader('Authorization','OAuth '+this.accessToken).setHandler(q).setErrorHandler(r).setOption('suppressEvaluation',true).setTransportErrorHandler(function(event){this.emit(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,event)}.bind(this)).send()}.bind(this))}.bind(this),n=function(q){return new (c('Promise'))(function(r,s){var t=JSON.parse(q.payload.response),u=t.offset;this.emit(c('ResumableUploadServiceState.enum').START,{offset:u});this.uploadAsyncRequest=new (c('AsyncRequest'))().disableInteractionServerTracing().setAllowCrossOrigin(true).setAllowCredentials(false).setURI(l).setRawData(k.slice(u)).setHandler(r).setErrorHandler(s).setRequestHeader('Authorization','OAuth '+this.accessToken).setRequestHeader('X-Entity-Name',encodeURIComponent(k.name)).setRequestHeader('X-Entity-Type',k.type).setRequestHeader('X-Entity-Length',String(k.size)).setRequestHeader('Offset',String(u)).setOption('suppressEvaluation',true).setUploadProgressHandler(function(event){var v=new ProgressEvent('upload-service',{total:k.size,loaded:event.loaded+Number(u)});this.emit(c('ResumableUploadServiceState.enum').PROGRESS,v)}.bind(this)).setTransportErrorHandler(function(event){this.emit(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,event)}.bind(this));this.uploadAsyncRequest.send()}.bind(this))}.bind(this),o=function(q){if(q!=null){var r=JSON.parse(q.payload.response);this.emit(c('ResumableUploadServiceState.enum').SUCCESS,r.h)}else this.emit(c('ResumableUploadServiceState.enum').FAIL,'uploading failed');}.bind(this),p=function(q){return this.emit(c('ResumableUploadServiceState.enum').FAIL,q)}.bind(this);return m().then(n,p).then(o,p)};j.prototype.cancel=function(){this.uploadAsyncRequest&&this.uploadAsyncRequest.abort();this.emit(c('ResumableUploadServiceState.enum').CANCEL)};f.exports=j}),null);
__d('VideoUploadLogger',['Banzai'],(function a(b,c,d,e,f,g){function h(i){this._source=i.source;this._waterfallID=i.waterfall_id;this._targetID=i.target_id;this._delay=i.delay;this._times=[];this._isChunkedUpload=i.is_chunked_upload;this._actorID=i.actor_id;this._composerEntryPointRef=i.composer_entry_point_ref;this._isRemoteUpload=i.is_remote_upload;this._containerType=i.container_type}Object.assign(h,{BANZAI_GK:'videos',BANZAI_ROUTE:'video_waterfall',SOURCE_SIMPLE:'simple',SOURCE_COMPOSER:'composer',EVENT_STARTED_GENERATE_THUMBNAILS:'upload.client.started_generate_thumbnails',EVENT_FINISHED_GENERATE_THUMBNAILS:'upload.client.finished_generate_thumbnails',EVENT_SELECTED_CUSTOM_THUMBNAIL:'upload.client.selected_custom_thumbnail',EVENT_VIDEO_DIMENSIONS_UNREADABLE:'upload.client.video_dimensions_unreadable',EVENT_REPLACE_VIDEO:'upload.client.replace_video',EVENT_STARTED_FLOW:'upload.client.started_flow',EVENT_FINISHED_FLOW:'upload.client.finished_flow',EVENT_FAILED_FLOW:'upload.client.failed_flow',EVENT_CANCELED_FLOW:'upload.client.canceled_flow',EVENT_RESIGNED_FLOW:'upload.client.resigned_flow',EVENT_REQUESTED_UPLOADING:'upload.client.requested_uploading',EVENT_INVALIDATED_UPLOADING:'upload.client.invalidated_uploading',EVENT_STARTED_UPLOADING:'upload.client.started_uploading',EVENT_PROGRESS_UPLOADING_START_REQUEST:'upload.client.progress_uploading_start_request',EVENT_FINISHED_UPLOADING:'upload.client.finished_uploading',EVENT_CANCELED_UPLOADING:'upload.client.canceled_uploading',EVENT_ABANDONED_UPLOADING:'upload.client.abandoned_uploading',EVENT_FAILED_UPLOADING:'upload.client.failed_uploading',EVENT_STARTED_SENDING_BYTES:'upload.client.started_sending_bytes',EVENT_FINISHED_SENDING_BYTES:'upload.client.finished_sending_bytes',EVENT_CANCELED_SENDING_BYTES:'upload.client.canceled_sending_bytes',EVENT_FAILED_SENDING_BYTES:'upload.client.failed_sending_bytes',EVENT_STARTED_START_REQUEST:'upload.client.started_sending_start_request',EVENT_FINISHED_START_REQUEST:'upload.client.finished_sending_start_request',EVENT_FAILED_START_REQUEST:'upload.client.failed_sending_start_request',EVENT_STARTED_POST_REQUEST:'upload.client.started_sending_post_request',EVENT_FINISHED_POST_REQUEST:'upload.client.finished_sending_post_request',EVENT_FAILED_POST_REQUEST:'upload.client.failed_sending_post_request',EVENT_STARTED_SENDING_CHUNK_BYTES:'upload.client.started_sending_chunk_bytes',EVENT_FINISHED_SENDING_CHUNK_BYTES:'upload.client.finished_sending_chunk_bytes',EVENT_CANCELED_SENDING_CHUNK_BYTES:'upload.client.canceled_sending_chunk_bytes',EVENT_FAILED_SENDING_CHUNK_BYTES:'upload.client.failed_sending_chunk_bytes',EVENT_TIMEOUT_SENDING_CHUNK_BYTES:'upload.client.timeout_sending_chunk_bytes',EVENT_RESUMABLE_CALLED:'upload.client.resumable_called',EVENT_RESUMABLE_STARTED:'upload.client.resumable_started',EVENT_RESUMABLE_SUCCESS:'upload.client.resumable_success',EVENT_RESUMABLE_FAILED:'upload.client.resumable_failed',EVENT_RECURRING_LOG_PROGRESS:'upload.client.recurring_log_progress',EVENT_ENCODING_START_OBSERVED:'encode.client.encoding_start_observed',EVENT_ENCODING_SUCCESS_OBSERVED:'encode.client.encoding_success_observed',EVENT_ENCODING_FAIL_OBSERVED:'encode.client.encoding_fail_observed',EVENT_RECEIVED_RESPONSE:'upload.client.received_response',EVENT_STARTED_FLOW_EXP1:'upload.client.started_flow_exp1',EVENT_FINISHED_FLOW_EXP1:'upload.client.finished_flow_exp1',EVENT_CANCELED_FLOW_EXP1:'upload.client.canceled_flow_exp1'});Object.assign(h.prototype,{logEvent:function i(event,j){var k=babelHelpers['extends']({},j);if(k.elapsed_time==null)if(event.indexOf('started')!==-1){this._times[event]=Date.now()}else if(event.indexOf('finished')!==-1){k.elapsed_time=this._computeElapsedTime(event,'finished')}else if(event.indexOf('canceled')!==-1){k.elapsed_time=this._computeElapsedTime(event,'canceled')}else if(event.indexOf('failed')!==-1)k.elapsed_time=this._computeElapsedTime(event,'failed');k.event=event;k.source=this._source;k.waterfall_id=this._waterfallID;k.target_id=this._targetID;k.is_chunked_upload=this._isChunkedUpload;k.actor_id=this._actorID;k.composer_entry_point_ref=this._composerEntryPointRef;k.is_remote_upload=this._isRemoteUpload;k.container_type=this._containerType;c('Banzai').post(h.BANZAI_ROUTE,k,{delay:this._delay,retry:true})},_computeElapsedTime:function i(event,j){var k=event.replace(j,'started'),l=this._times[k];return l?Date.now()-l:null}});f.exports=h}),null);
__d('VideoUploadSphericalLogger',['Banzai'],(function a(b,c,d,e,f,g){var h=3000;function i(){'use strict';this.$VideoUploadSphericalLogger1={};this.$VideoUploadSphericalLogger2=false;this.$VideoUploadSphericalLogger3=0}i.prototype.log=function(){'use strict';this.$VideoUploadSphericalLogger2?this.$VideoUploadSphericalLogger4():this.$VideoUploadSphericalLogger5()};i.prototype.$VideoUploadSphericalLogger5=function(){'use strict';c('Banzai').post('spherical_video_composer_upload',babelHelpers['extends']({},this.$VideoUploadSphericalLogger1))};i.prototype.$VideoUploadSphericalLogger4=function(){'use strict';var j=Date.now();if(j-this.$VideoUploadSphericalLogger3>h){this.$VideoUploadSphericalLogger3=j;this.$VideoUploadSphericalLogger5()}};i.prototype.setDirectorsCutEnabled=function(j){'use strict';this.$VideoUploadSphericalLogger1.directors_cut_enabled=j;return this};i.prototype.setFieldOfView=function(j){'use strict';this.$VideoUploadSphericalLogger1.field_of_view=j;return this};i.prototype.setFileExtension=function(j){'use strict';this.$VideoUploadSphericalLogger1.file_extension=j;return this};i.prototype.setHasSphericalMetadata=function(j){'use strict';this.$VideoUploadSphericalLogger1.has_spherical_metadata=j;return this};i.prototype.setPitchDegrees=function(j){'use strict';this.$VideoUploadSphericalLogger1.pitch_degrees=j;return this};i.prototype.setTargetID=function(j){'use strict';this.$VideoUploadSphericalLogger1.target_id=j;return this};i.prototype.setVideoID=function(j){'use strict';this.$VideoUploadSphericalLogger1.video_id=j;return this};i.prototype.setUserAction=function(j){'use strict';this.$VideoUploadSphericalLogger1.user_action=j;if(j==='drag_video_preview'||j==='scroll_video_preview'){this.$VideoUploadSphericalLogger2=true}else this.$VideoUploadSphericalLogger2=false;return this};i.prototype.setVideoPreviewPosition=function(j){'use strict';this.$VideoUploadSphericalLogger1.video_preview_position=j;return this};i.prototype.setYawDegrees=function(j){'use strict';this.$VideoUploadSphericalLogger1.yaw_degrees=j;return this};i.prototype.setIsRedesign=function(j){'use strict';this.$VideoUploadSphericalLogger1.is_redesign=j;return this};i.prototype.setFinalGuideEnabled=function(j){'use strict';this.$VideoUploadSphericalLogger1.final_guide_enabled=j;return this};i.prototype.setFinalNumGuidePoints=function(j){'use strict';this.$VideoUploadSphericalLogger1.final_num_guide_points=j;return this};i.prototype.setIsNuxTest=function(j){'use strict';this.$VideoUploadSphericalLogger1.is_nux_test=j;return this};f.exports=new i()}),null);
__d('VideoUploadCrashMonitor',['Bandicoot','VideoUploadLogger'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('Bandicoot'));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r){'use strict';i.constructor.call(this,'VideoUploadSession');this.$VideoUploadCrashMonitor1={waterfallID:k,actorID:l,source:m,targetID:n,loggingDelay:o,supportsChunking:p,composerEntryPointRef:q,flowStarted:r}}j.prototype.flowStarted=function(){'use strict';this.$VideoUploadCrashMonitor1.flowStarted=true};j.prototype.getCrashTimeData=function(){'use strict';return this.$VideoUploadCrashMonitor1};j.prototype.logCrash=function(k,l,m){'use strict';if(!l.waterfallID)return;var n=new (c('VideoUploadLogger'))({actor_id:l.actorID,source:l.source,waterfall_id:l.waterfallID,target_id:l.targetID,delay:l.loggingDelay,is_chunked_upload:l.supportsChunking,composer_entry_point_ref:l.composerEntryPointRef}),o={error:'Crash Detected',error_description:'Detected video upload did not complete due to a crash'};n.logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,o);if(l.flowStarted)n.logEvent(c('VideoUploadLogger').EVENT_RESIGNED_FLOW,{});};f.exports=j}),null);
__d('VideoUploadFileValidator',['errorCode','fbt','ErrorDialog','ImageExtensions','Link.react','React','killswitch'],(function a(b,c,d,e,f,g,h,i){var j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=['VIDEO__INVALID_GUIDE_DATA'];function l(m){'use strict';this.$VideoUploadFileValidator1=m}l.prototype.validate=function(m,n){'use strict';return this.$VideoUploadFileValidator2(m)&&this.$VideoUploadFileValidator3(m)&&this.$VideoUploadFileValidator4(m.getExtension()===c('ImageExtensions').GIF,n)};l.prototype.getValidationErrorMessage=function(m,n){'use strict';return this.$VideoUploadFileValidator5(m)||this.$VideoUploadFileValidator6(m)||this.$VideoUploadFileValidator7(m.getExtension()===c('ImageExtensions').GIF,n)};l.canReplaceVideoForError=function(m){'use strict';if(!m)return true;if(k.indexOf(m)>-1)return false;if(j.indexOf(m)>-1)return true;return false};l.prototype.$VideoUploadFileValidator2=function(m){'use strict';var n=this.$VideoUploadFileValidator5(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false}else return true;};l.prototype.$VideoUploadFileValidator5=function(m){'use strict';if(this.$VideoUploadFileValidator1.extensions[m.getExtension()])return;var n="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",o=c('React').createElement(c('Link.react'),{href:n},i._("recommended formats"));return {summary:i._("Unsupported File Format"),description:i._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[i.param('link',o)])}};l.prototype.$VideoUploadFileValidator3=function(m){'use strict';var n=this.$VideoUploadFileValidator6(m);if(n){c('ErrorDialog').show(n.summary,n.description);return false}else return true;};l.prototype.$VideoUploadFileValidator6=function(m){'use strict';var n;if(m.getSize()===null)return;if(m.getSize()<this.$VideoUploadFileValidator1.minSize)n=this.$VideoUploadFileValidator8();if(m.getSize()>this.$VideoUploadFileValidator1.maxSize)n=this.$VideoUploadFileValidator9();return n};l.prototype.$VideoUploadFileValidator8=function(){'use strict';var m=Math.round(this.$VideoUploadFileValidator1.minSize/1024);return {summary:i._("Video File Too Small"),description:i._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[i.param('min-size',m)])}};l.prototype.$VideoUploadFileValidator9=function(){'use strict';var m=Math.floor(this.$VideoUploadFileValidator1.maxSize/1024/1024);return {summary:i._("Video File Too Large"),description:i._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[i.param('max-size',m)])}};l.prototype.$VideoUploadFileValidator4=function(m,n){'use strict';var o=this.$VideoUploadFileValidator7(m,n);if(o){c('ErrorDialog').show(o.summary,o.description);return false}else return true;};l.prototype.$VideoUploadFileValidator7=function(m,n){'use strict';var o;if(!n)return;var p=n.format.duration;if(p>this.$VideoUploadFileValidator1.maxLength)o=this.$VideoUploadFileValidator10();if(p<this.$VideoUploadFileValidator1.minLength&&!m)o=this.$VideoUploadFileValidator11();var q=n.streams.primaryVideo.width,r=n.streams.primaryVideo.height,s=0,t=0;if(n.videoPlayerData!==null){s=n.videoPlayerData.height;t=n.videoPlayerData.width}if(!c('killswitch')('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')&&t!==0&&s!==0){q=t;r=s}if(!n.streams.primaryVideo&&n.streams.primaryAudio)o=this.$VideoUploadFileValidator12();if(q<this.$VideoUploadFileValidator1.minWidth)o=this.$VideoUploadFileValidator13();if(r<this.$VideoUploadFileValidator1.minHeight)o=this.$VideoUploadFileValidator14();var u=q/r;if(this.$VideoUploadFileValidator1.require16to9AspectRatio)if(u>2||u<1.6)o=this.$VideoUploadFileValidator15();if(this.$VideoUploadFileValidator1.minAspectRatio)if(u<this.$VideoUploadFileValidator1.minAspectRatio)o=this.$VideoUploadFileValidator16();if(this.$VideoUploadFileValidator1.maxAspectRatio)if(u>this.$VideoUploadFileValidator1.maxAspectRatio)o=this.$VideoUploadFileValidator17();return o};l.prototype.$VideoUploadFileValidator10=function(){'use strict';if(this.$VideoUploadFileValidator1.source==='profile_video'){return {summary:i._("Profile video duration too long"),description:i._("The maximum length is {max-length} seconds. Please upload a shorter video.",[i.param('max-length',this.$VideoUploadFileValidator1.maxLength)])}}else return {summary:i._("Video duration too long"),description:i._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[i.param('max-length',Math.round(this.$VideoUploadFileValidator1.maxLength/60))])};};l.prototype.$VideoUploadFileValidator11=function(){'use strict';return {summary:i._("Video file too short"),description:i._({"second":"The duration of the video that you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video that you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[i.param('min-length',this.$VideoUploadFileValidator1.minLength),i['enum'](this.$VideoUploadFileValidator1.minLength===1?'second':'seconds',{second:'second',seconds:'seconds'})])}};l.prototype.$VideoUploadFileValidator12=function(){'use strict';var m="http://www.facebook.com/help/"+"?faq=218673814818907#What-formats-of-video-files-can-I-upload?",n=c('React').createElement(c('Link.react'),{href:m},i._("supported video format"));return {summary:i._("No video detected"),description:i._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[i.param('supported-video-format link',n)])}};l.prototype.$VideoUploadFileValidator13=function(){'use strict';return {summary:i._("Video width too narrow"),description:i._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[i.param('min-width',this.$VideoUploadFileValidator1.minWidth)])}};l.prototype.$VideoUploadFileValidator15=function(){'use strict';return {summary:i._("Problem with uploading video"),description:i._("Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload it again.")}};l.prototype.$VideoUploadFileValidator14=function(){'use strict';return {summary:i._("Video height too short"),description:i._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[i.param('min-height',this.$VideoUploadFileValidator1.minHeight)])}};l.prototype.$VideoUploadFileValidator17=function(){'use strict';return {summary:i._("Aspect ratio too big"),description:i._("The video you've selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};l.prototype.$VideoUploadFileValidator16=function(){'use strict';return {summary:i._("Aspect ratio too low"),description:i._("The video you've selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}.",[i.param('max_aspect_ratio',this.$VideoUploadFileValidator1.maxAspectRatio+':1'),i.param('min_aspect_ratio',this.$VideoUploadFileValidator1.minAspectRatio+':1')])}};f.exports=l}),null);
__d('VideoUploadProgressBar',['cx','CSS','VideoUploadFeatureDetector'],(function a(b,c,d,e,f,g,h){function i(j){'use strict';this.$VideoUploadProgressBar1=j.progress_bar;this.$VideoUploadProgressBar2=j.throbber;this.$VideoUploadProgressBar3=j.uploader;this.$VideoUploadProgressBar4=j.start_margin;this.$VideoUploadProgressBar5=j.start_delay;this.$VideoUploadProgressBar6=j.end_margin;this.$VideoUploadProgressBar7=j.end_delay;this.$VideoUploadProgressBar8=j.progress_bar_label;this.$VideoUploadProgressBar9()}i.prototype.reset=function(){'use strict';this.$VideoUploadProgressBar1.setPosition(0)};i.prototype.getRoot=function(){'use strict';return this.$VideoUploadProgressBar1.getRoot()};i.computeProgress=function(j,k,l,m,n){'use strict';var o=Math.min(j+k,l);return o/l*(100-m-n)+m};i.prototype.$VideoUploadProgressBar9=function(){'use strict';if(c('VideoUploadFeatureDetector').supportsFileAPI()){this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar10.bind(this));this.$VideoUploadProgressBar3.subscribe('upload-progressed',this.$VideoUploadProgressBar11.bind(this));this.$VideoUploadProgressBar3.subscribe('online',this.$VideoUploadProgressBar12.bind(this));this.$VideoUploadProgressBar3.subscribe('offline',this.$VideoUploadProgressBar13.bind(this))}else this.$VideoUploadProgressBar3.subscribe('upload-requested',this.$VideoUploadProgressBar14.bind(this));};i.prototype.$VideoUploadProgressBar10=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar1.getRoot());c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");this.$VideoUploadProgressBar1.setTarget(this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar5);this.$VideoUploadProgressBar15(0)};i.prototype.$VideoUploadProgressBar15=function(j){'use strict';if(this.$VideoUploadProgressBar8)this.$VideoUploadProgressBar1.changeLabel(''+j.toFixed(1)+'%');};i.prototype.$VideoUploadProgressBar11=function(event,j){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a");var k=i.computeProgress(j.start_offset,j.sent_bytes,j.file_size,this.$VideoUploadProgressBar4,this.$VideoUploadProgressBar6);this.$VideoUploadProgressBar1.setPosition(k);this.$VideoUploadProgressBar15(k);if(k>=100-this.$VideoUploadProgressBar6){this.$VideoUploadProgressBar1.setTarget(100,this.$VideoUploadProgressBar7);this.$VideoUploadProgressBar15(100)}};i.prototype.$VideoUploadProgressBar12=function(event){'use strict';c('CSS').removeClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};i.prototype.$VideoUploadProgressBar13=function(event){'use strict';c('CSS').addClass(this.$VideoUploadProgressBar1.getRoot(),"_5r5a")};i.prototype.$VideoUploadProgressBar14=function(event){'use strict';c('CSS').show(this.$VideoUploadProgressBar2)};f.exports=i}),null);
__d('VideoUploadRequest',['AsyncRequest','DOM','DTSG','FileForm','Form','PHPQuerySerializer','VideoUploadFeatureDetector','emptyFunction','flattenPHPQueryData','submitForm'],(function a(b,c,d,e,f,g){var h='video';function i(j){'use strict';this.$VideoUploadRequest1=j;this.$VideoUploadRequest2=null;this.$VideoUploadRequest3=false;this.$VideoUploadRequest4=null;this.$VideoUploadRequest5=null;this.$VideoUploadRequest6=null;this.$VideoUploadRequest7=null;this.$VideoUploadRequest8=c('emptyFunction');this.$VideoUploadRequest9=c('emptyFunction');this.$VideoUploadRequest10=c('emptyFunction');this.$VideoUploadRequest11=c('emptyFunction');this.$VideoUploadRequest12=null}i.prototype.setAllowCrossOrigin=function(j){'use strict';this.$VideoUploadRequest3=j;return this};i.prototype.setData=function(j){'use strict';this.$VideoUploadRequest4=j;return this};i.prototype.setWaterfallID=function(j){'use strict';this.$VideoUploadRequest6=j;return this};i.prototype.setSuccessHandler=function(j){'use strict';this.$VideoUploadRequest8=j;return this};i.prototype.setErrorHandler=function(j){'use strict';this.$VideoUploadRequest9=j;return this};i.prototype.setTransportErrorHandler=function(j){'use strict';this.$VideoUploadRequest10=j;return this};i.prototype.setUploadProgressHandler=function(j){'use strict';this.$VideoUploadRequest11=j;return this};i.prototype.setTimeoutHandler=function(j,k){'use strict';this.$VideoUploadRequest7=j;this.$VideoUploadRequest12=k;return this};i.prototype.setThumbnail=function(j){'use strict';this.$VideoUploadRequest13=j;return this};i.prototype.setHandle=function(j){'use strict';this.$VideoUploadRequest5=j;return this};i.prototype.setCaptions=function(j){'use strict';this.$VideoUploadRequest14=j;return this};i.prototype.send=function(){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');if(c('VideoUploadFeatureDetector').supportsXHR()){this.$VideoUploadRequest2=this.$VideoUploadRequest15();if(this.$VideoUploadRequest13||this.$VideoUploadRequest14){var j=new FormData();if(this.$VideoUploadRequest13)j.append('thumb',this.$VideoUploadRequest13);if(this.$VideoUploadRequest14)this.$VideoUploadRequest14.forEach(function(l,m){var n=l.getIsDefault()?'captions_default':'captions_file'+m;j.append(n,l.getFile())});if(this.$VideoUploadRequest4){var k=c('flattenPHPQueryData')(this.$VideoUploadRequest4);Object.keys(k).forEach(function(l){j.append(l,k[l])})}this.$VideoUploadRequest2.setRawData(j)}this.$VideoUploadRequest2.send()}else{this.$VideoUploadRequest2=this.$VideoUploadRequest16();this.$VideoUploadRequest17(this.$VideoUploadRequest2)}};i.prototype.sendChunk=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');var k=new FormData();if(this.$VideoUploadRequest5){k.append('fbuploader_video_file_chunk',this.$VideoUploadRequest5)}else k.append('video_file_chunk',j);this.$VideoUploadRequest2=this.$VideoUploadRequest15();this.$VideoUploadRequest2.setRawData(k);this.$VideoUploadRequest2.send()};i.prototype.sendFile=function(j){'use strict';if(this.$VideoUploadRequest2)throw new Error('An upload request is already in progress.');this.$VideoUploadRequest2=this.$VideoUploadRequest16();var k=j.cloneNode(false);j.name=h;c('DOM').replace(j,k);c('DOM').appendContent(this.$VideoUploadRequest2.getRoot(),j);this.$VideoUploadRequest17(this.$VideoUploadRequest2);j.name=k.name;c('DOM').replace(k,j)};i.prototype.abort=function(){'use strict';if(!this.$VideoUploadRequest2)return;this.$VideoUploadRequest2.abort();this.$VideoUploadRequest2=null};i.prototype.$VideoUploadRequest15=function(){'use strict';var j=this.__getAsyncRequest().setAllowCrossOrigin(this.$VideoUploadRequest3).setURI(this.$VideoUploadRequest1).setData(this.$VideoUploadRequest4).setRequestHeader('X_FB_VIDEO_WATERFALL_ID',this.$VideoUploadRequest6).setHandler(this.$VideoUploadRequest8).setErrorHandler(this.$VideoUploadRequest9).setTransportErrorHandler(this.$VideoUploadRequest10).setUploadProgressHandler(this.$VideoUploadRequest11);if(this.$VideoUploadRequest12)j.setTimeoutHandler(this.$VideoUploadRequest7,this.$VideoUploadRequest12);return j};i.prototype.__getAsyncRequest=function(){'use strict';return new (c('AsyncRequest'))()};i.prototype.$VideoUploadRequest16=function(){'use strict';var j=c('DOM').create('form',{action:this.$VideoUploadRequest1,method:'POST'});c('Form').createHiddenInputs(babelHelpers['extends']({fb_dtsg:c('DTSG').getToken()},this.$VideoUploadRequest4),j);var k=new (c('FileForm'))(j,null,{allowCrossOrigin:this.$VideoUploadRequest3});k.subscribe('success',this.$VideoUploadRequest18.bind(this));k.subscribe('failure',this.$VideoUploadRequest19.bind(this));k.subscribe('progress',this.$VideoUploadRequest20.bind(this));return k};i.prototype.$VideoUploadRequest17=function(j){'use strict';c('DOM').appendContent(document.body,j.getRoot());c('submitForm')(j.getRoot())};i.prototype.$VideoUploadRequest18=function(event,j){'use strict';this.$VideoUploadRequest8(j.response)};i.prototype.$VideoUploadRequest19=function(event,j){'use strict';this.$VideoUploadRequest9(j.response)};i.prototype.$VideoUploadRequest20=function(event,j){'use strict';this.$VideoUploadRequest11(j.event)};f.exports=i}),null);
__d("VideoUploadRequestContext",[],(function a(b,c,d,e,f,g){function h(){"use strict";this.reset()}h.prototype.setFile=function(i){"use strict";this.$VideoUploadRequestContext1=i;return this};h.prototype.getFile=function(){"use strict";return this.$VideoUploadRequestContext1};h.prototype.setMetadata=function(i){"use strict";this.$VideoUploadRequestContext2=i;return this};h.prototype.getMetadata=function(){"use strict";return this.$VideoUploadRequestContext2};h.prototype.setVideoID=function(i){"use strict";this.$VideoUploadRequestContext3=i;return this};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadRequestContext3};h.prototype.setStartOffset=function(i){"use strict";this.$VideoUploadRequestContext4=i;return this};h.prototype.getStartOffset=function(){"use strict";return this.$VideoUploadRequestContext4};h.prototype.setEndOffset=function(i){"use strict";this.$VideoUploadRequestContext5=i;return this};h.prototype.getEndOffset=function(){"use strict";return this.$VideoUploadRequestContext5};h.prototype.setPartitionStartOffset=function(i){"use strict";this.$VideoUploadRequestContext6=i;return this};h.prototype.getPartitionStartOffset=function(){"use strict";return this.$VideoUploadRequestContext6};h.prototype.setPartitionEndOffset=function(i){"use strict";this.$VideoUploadRequestContext7=i;return this};h.prototype.getPartitionEndOffset=function(){"use strict";return this.$VideoUploadRequestContext7};h.prototype.setTargetID=function(i){"use strict";this.$VideoUploadRequestContext8=i;return this};h.prototype.getTargetID=function(){"use strict";return this.$VideoUploadRequestContext8};h.prototype.setSource=function(i){"use strict";this.$VideoUploadRequestContext9=i;return this};h.prototype.getSource=function(){"use strict";return this.$VideoUploadRequestContext9};h.prototype.setWaterfallID=function(i){"use strict";this.$VideoUploadRequestContext10=i;return this};h.prototype.getWaterfallID=function(){"use strict";return this.$VideoUploadRequestContext10};h.prototype.setComposerEntryPointRef=function(i){"use strict";this.$VideoUploadRequestContext11=i};h.prototype.getComposerEntryPointRef=function(){"use strict";return this.$VideoUploadRequestContext11};h.prototype.setSupportsChunking=function(i){"use strict";this.$VideoUploadRequestContext12=i;return this};h.prototype.getSupportsChunking=function(){"use strict";return this.$VideoUploadRequestContext12};h.prototype.setSupportsFileAPI=function(i){"use strict";this.$VideoUploadRequestContext13=i;return this};h.prototype.getSupportsFileAPI=function(){"use strict";return this.$VideoUploadRequestContext13};h.prototype.setCreatorProduct=function(i){"use strict";this.$VideoUploadRequestContext14=i;return this};h.prototype.getCreatorProduct=function(){"use strict";return this.$VideoUploadRequestContext14};h.prototype.setLastKnownUploadSpeed=function(i){"use strict";this.$VideoUploadRequestContext15=i};h.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$VideoUploadRequestContext15||0};h.prototype.setUseParallelChunks=function(i){"use strict";this.$VideoUploadRequestContext16=i};h.prototype.getUseParallelChunks=function(){"use strict";return this.$VideoUploadRequestContext16};h.prototype.setIsSphericalVideo=function(i){"use strict";this.$VideoUploadRequestContext17=i};h.prototype.getIsSphericalVideo=function(){"use strict";return this.$VideoUploadRequestContext17};h.prototype.setSphericalMetadata=function(i){"use strict";this.$VideoUploadRequestContext18=i};h.prototype.getSphericalMetadata=function(){"use strict";return this.$VideoUploadRequestContext18};h.prototype.setEnableOmnistab=function(i){"use strict";this.$VideoUploadRequestContext19=i};h.prototype.getEnableOmnistab=function(){"use strict";return this.$VideoUploadRequestContext19};h.prototype.reset=function(){"use strict";this.$VideoUploadRequestContext1=null;this.$VideoUploadRequestContext3=null;this.$VideoUploadRequestContext4=null;this.$VideoUploadRequestContext5=null;this.$VideoUploadRequestContext8=null;this.$VideoUploadRequestContext9=null;this.$VideoUploadRequestContext10=null;this.$VideoUploadRequestContext11=null;this.$VideoUploadRequestContext12=null;this.$VideoUploadRequestContext13=null;this.$VideoUploadRequestContext6=null;this.$VideoUploadRequestContext7=null;this.$VideoUploadRequestContext14=null;this.$VideoUploadRequestContext15=0;this.$VideoUploadRequestContext16=false;this.$VideoUploadRequestContext17=false;this.$VideoUploadRequestContext2={};this.$VideoUploadRequestContext18={};this.$VideoUploadRequestContext19=false};f.exports=h}),null);
__d('VideoUploadPostRequestManager',['ArbiterMixin','VideoUploadRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this);this.$VideoUploadPostRequestManager1=k;this.$VideoUploadPostRequestManager2=l;this.$VideoUploadPostRequestManager3=m;this.$VideoUploadPostRequestManager4=0;this.$VideoUploadPostRequestManager5=n;this.$VideoUploadPostRequestManager6=o;this.$VideoUploadPostRequestManager7=0}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadPostRequestManager8};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadPostRequestManager8)return;this.$VideoUploadPostRequestManager9=babelHelpers['extends']({},k.getMetadata(),this.__createRequestData(k));this.$VideoUploadPostRequestManager10=this.$VideoUploadPostRequestManager9.thumb;delete this.$VideoUploadPostRequestManager9.thumb;this.$VideoUploadPostRequestManager11=this.$VideoUploadPostRequestManager9.captions;delete this.$VideoUploadPostRequestManager9.captions;this.$VideoUploadPostRequestManager12=k.getWaterfallID();this.$VideoUploadPostRequestManager13();this.inform('request-started')};j.prototype.$VideoUploadPostRequestManager13=function(){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=null;this.$VideoUploadPostRequestManager8=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager1).setAllowCrossOrigin(true).setData(this.$VideoUploadPostRequestManager9).setThumbnail(this.$VideoUploadPostRequestManager10).setCaptions(this.$VideoUploadPostRequestManager11).setWaterfallID(this.$VideoUploadPostRequestManager12).setSuccessHandler(this.$VideoUploadPostRequestManager15.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager16.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager17.bind(this));this.$VideoUploadPostRequestManager8.send()};j.prototype.__createRequestData=function(k){'use strict';return {video_id:k.getVideoID(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),creator_product:k.getCreatorProduct(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking()}};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k)};j.prototype.clearRequest=function(){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager7=0;this.$VideoUploadPostRequestManager4=0};j.prototype.isInProgress=function(){'use strict';return !!this.$VideoUploadPostRequestManager8};j.prototype.$VideoUploadPostRequestManager18=function(k){'use strict';clearTimeout(this.$VideoUploadPostRequestManager14);this.$VideoUploadPostRequestManager14=setTimeout(this.$VideoUploadPostRequestManager13.bind(this),k)};j.prototype.$VideoUploadPostRequestManager19=function(k,l){'use strict';return Math.pow(k,l)*1000};j.prototype.$VideoUploadPostRequestManager15=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',{video_id:l.video_id,video_asset_id:l.video_asset_id,container_type:l.container_type,transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7});this.clearRequest()};j.prototype.$VideoUploadPostRequestManager20=function(k){'use strict';this.inform('request-failed',{error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager4,server_retries:this.$VideoUploadPostRequestManager7,error_is_transient:k.isTransient()});this.clearRequest()};j.prototype.$VideoUploadPostRequestManager16=function(k){'use strict';this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager4=0;if(k.isTransient()&&this.$VideoUploadPostRequestManager7<this.$VideoUploadPostRequestManager5){this.$VideoUploadPostRequestManager7++;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager6,this.$VideoUploadPostRequestManager7))}else this.$VideoUploadPostRequestManager20(k);};j.prototype.$VideoUploadPostRequestManager17=function(k){'use strict';if(this.$VideoUploadPostRequestManager2===0||this.$VideoUploadPostRequestManager4>=this.$VideoUploadPostRequestManager2){this.$VideoUploadPostRequestManager20(k)}else{this.$VideoUploadPostRequestManager4++;this.$VideoUploadPostRequestManager8=null;this.$VideoUploadPostRequestManager18(this.$VideoUploadPostRequestManager19(this.$VideoUploadPostRequestManager3,this.$VideoUploadPostRequestManager4))}};f.exports=j}),null);
__d('VideoUploadConnectionMonitor',['ArbiterMixin','Network','VideoUploadFeatureDetector','debounce','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$VideoUploadConnectionMonitor1=false;this.$VideoUploadConnectionMonitor2=[];this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor4=true;this.$VideoUploadConnectionMonitor5=c('debounce')(function(){this.$VideoUploadConnectionMonitor6(false)}.bind(this),2000)}j.prototype.notifyStart=function(){'use strict';if(this.$VideoUploadConnectionMonitor3)return;if(this.$VideoUploadConnectionMonitor2.length===0){this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('online',function(){this.$VideoUploadConnectionMonitor6(true)}.bind(this)));this.$VideoUploadConnectionMonitor2.push(c('Network').addListener('offline',function(){if(this.$VideoUploadConnectionMonitor1){this.$VideoUploadConnectionMonitor5()}else{this.$VideoUploadConnectionMonitor5.reset();setTimeout(this.$VideoUploadConnectionMonitor5,2000)}}.bind(this)))}this.$VideoUploadConnectionMonitor3=true};j.prototype.notifyProgress=function(event){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;if(!event)return;if(c('VideoUploadFeatureDetector').supportsFullProgress()){this.$VideoUploadConnectionMonitor1=true;if(event.total&&event.loaded===event.total){this.$VideoUploadConnectionMonitor5.reset()}else this.$VideoUploadConnectionMonitor5();}};j.prototype.notifySuccess=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};j.prototype.notifyTransportError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=false;this.$VideoUploadConnectionMonitor6(false)};j.prototype.notifyError=function(){'use strict';if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(true)};j.prototype.isOnline=function(){'use strict';return this.$VideoUploadConnectionMonitor4};j.prototype.reset=function(){'use strict';while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=false};j.prototype.$VideoUploadConnectionMonitor6=function(k){'use strict';this.$VideoUploadConnectionMonitor5.reset();if(this.$VideoUploadConnectionMonitor4!==k){this.$VideoUploadConnectionMonitor4=k;if(this.$VideoUploadConnectionMonitor4){this.inform('online')}else this.inform('offline');}};f.exports=j}),null);
__d('VideoUploadReceiveRequestManager',['fbt','ArbiterMixin','VideoUploadConnectionMonitor','VideoUploadRequest','ResumableUploadService','ResumableUploadServiceState.enum','md5','mixin'],(function a(b,c,d,e,f,g,h){var i,j,k=1363037;i=babelHelpers.inherits(l,c('mixin')(c('ArbiterMixin')));j=i&&i.prototype;function l(m,n,o,p,q,r,s,t,u){var v=arguments.length<=9||arguments[9]===undefined?'':arguments[9],w=arguments.length<=10||arguments[10]===undefined?false:arguments[10];'use strict';j.constructor.call(this);this.$VideoUploadReceiveRequestManager1=m;this.$VideoUploadReceiveRequestManager2=n;this.$VideoUploadReceiveRequestManager3=o;this.$VideoUploadReceiveRequestManager4=p;this.$VideoUploadReceiveRequestManager5=q;this.$VideoUploadReceiveRequestManager6=r;this.$VideoUploadReceiveRequestManager7=s;this.$VideoUploadReceiveRequestManager8=t;this.$VideoUploadReceiveRequestManager9=u;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager16='constructed';this.$VideoUploadReceiveRequestManager17=null;this.$VideoUploadReceiveRequestManager18=v;this.$VideoUploadReceiveRequestManager19=w;this.$VideoUploadReceiveRequestManager20=new (c('VideoUploadConnectionMonitor'))();this.$VideoUploadReceiveRequestManager20.subscribe('online',this.$VideoUploadReceiveRequestManager21.bind(this));this.$VideoUploadReceiveRequestManager20.subscribe('offline',this.$VideoUploadReceiveRequestManager22.bind(this))}l.prototype.sendRequest=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='sending request';if(this.$VideoUploadReceiveRequestManager23){this.$VideoUploadReceiveRequestManager16='request already in progress';return}this.$VideoUploadReceiveRequestManager15=m.getEndOffset()-m.getStartOffset();this.$VideoUploadReceiveRequestManager24=m;this.$VideoUploadReceiveRequestManager25()};l.prototype.cancelRequest=function(){'use strict';if(!this.$VideoUploadReceiveRequestManager23)return;this.$VideoUploadReceiveRequestManager23.abort();if(this.$VideoUploadReceiveRequestManager17!==null)this.$VideoUploadReceiveRequestManager17.cancel();this.$VideoUploadReceiveRequestManager26()};l.prototype.appendStateLogData=function(m,n){'use strict';m[n+'request_manager_state']=this.$VideoUploadReceiveRequestManager16;m[n+'upload_speed']=this.$VideoUploadReceiveRequestManager14;m[n+'transport_retries']=this.$VideoUploadReceiveRequestManager10;m[n+'server_retries']=this.$VideoUploadReceiveRequestManager11;m[n+'timeout_retries']=this.$VideoUploadReceiveRequestManager12;m[n+'last_timeout_value']=this.$VideoUploadReceiveRequestManager27;m[n+'last_request_start_time']=this.$VideoUploadReceiveRequestManager13;m[n+'pending_request']=this.$VideoUploadReceiveRequestManager23!=null;m[n+'pending_timer']=this.$VideoUploadReceiveRequestManager28!=null;m[n+'cached_chunk']=this.$VideoUploadReceiveRequestManager29!=null;if(this.$VideoUploadReceiveRequestManager24!=null){m[n+'start_offset']=this.$VideoUploadReceiveRequestManager24.getStartOffset();m[n+'end_offset']=this.$VideoUploadReceiveRequestManager24.getEndOffset();m[n+'partition_start_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionStartOffset();m[n+'partition_end_offset']=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()}if(this.$VideoUploadReceiveRequestManager20!=null)m[n+'connection_monitor_online']=this.$VideoUploadReceiveRequestManager20.isOnline();};l.prototype.$VideoUploadReceiveRequestManager26=function(){'use strict';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager15=0;this.$VideoUploadReceiveRequestManager24.reset();this.$VideoUploadReceiveRequestManager20.reset();clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null};l.prototype.$VideoUploadReceiveRequestManager25=function(m){'use strict';clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=null;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager24.getStartOffset()>=this.$VideoUploadReceiveRequestManager24.getPartitionEndOffset()){if(!m){this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager16='request finished - notified'}else this.$VideoUploadReceiveRequestManager16='request finished - not notified';return}this.$VideoUploadReceiveRequestManager23=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(true).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager24)).setWaterfallID(this.$VideoUploadReceiveRequestManager24.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager30.bind(this));if(!this.$VideoUploadReceiveRequestManager19)this.$VideoUploadReceiveRequestManager23.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager31.bind(this));this.$VideoUploadReceiveRequestManager13=Date.now();if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager4){var n=this.$VideoUploadReceiveRequestManager32(this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23.setTimeoutHandler(n,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager16='sending chunk with timeout = '+n;this.$VideoUploadReceiveRequestManager27=n}else this.$VideoUploadReceiveRequestManager16='sending chunk without timeout';var o=this.$VideoUploadReceiveRequestManager33();if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager34(o)}else this.$VideoUploadReceiveRequestManager23.sendChunk(o);}else{this.$VideoUploadReceiveRequestManager16='sending file';this.$VideoUploadReceiveRequestManager23.sendFile(this.$VideoUploadReceiveRequestManager24.getFile().getFileInput())}this.$VideoUploadReceiveRequestManager20.notifyStart();this.inform('request-started',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16})};l.prototype.$VideoUploadReceiveRequestManager34=function(m){'use strict';var n=this.$VideoUploadReceiveRequestManager24.getFile(),o=c('md5')(n.getFile().lastModified+n.getFile().name+n.getFile().type+this.$VideoUploadReceiveRequestManager24.getWaterfallID())+'-'+this.$VideoUploadReceiveRequestManager24.getStartOffset()+'-'+this.$VideoUploadReceiveRequestManager24.getEndOffset();this.$VideoUploadReceiveRequestManager17=new (c('ResumableUploadService'))('fb_video',this.$VideoUploadReceiveRequestManager18,o,null,null);this.$VideoUploadReceiveRequestManager35();this.$VideoUploadReceiveRequestManager17.resume(m);this.inform('resumable-called')};l.prototype.$VideoUploadReceiveRequestManager35=function(){'use strict';this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').START,function(m){this.inform('resumable-started',{resume_from_offset:m.offset})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').FAIL,function(m){this.inform('resumable-failed',{error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});this.__handleServerFailureResponse(m)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').SUCCESS,function(m){this.$VideoUploadReceiveRequestManager23.setHandle(m);this.$VideoUploadReceiveRequestManager23.sendChunk(null);this.inform('resumable-success',{everstore_handle:m})}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').TRANSPORT_FAILURE,function(m){this.inform('resumable-failed',{error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()});this.$VideoUploadReceiveRequestManager30(m)}.bind(this));this.$VideoUploadReceiveRequestManager17.addListener(c('ResumableUploadServiceState.enum').PROGRESS,function(event){this.$VideoUploadReceiveRequestManager31(event)}.bind(this))};l.prototype.__getVideoUploadRequest=function(m){'use strict';return new (c('VideoUploadRequest'))(m)};l.prototype.$VideoUploadReceiveRequestManager36=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='setting request to send after'+m;clearTimeout(this.$VideoUploadReceiveRequestManager28);this.$VideoUploadReceiveRequestManager28=setTimeout(this.$VideoUploadReceiveRequestManager25.bind(this),m)};l.prototype.$VideoUploadReceiveRequestManager33=function(){'use strict';if(this.$VideoUploadReceiveRequestManager29)return this.$VideoUploadReceiveRequestManager29;if(this.$VideoUploadReceiveRequestManager19){this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getFile().slice(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset(),'application/octet-stream')}else this.$VideoUploadReceiveRequestManager29=this.$VideoUploadReceiveRequestManager24.getFile().getChunk(this.$VideoUploadReceiveRequestManager24.getStartOffset(),this.$VideoUploadReceiveRequestManager24.getEndOffset());return this.$VideoUploadReceiveRequestManager29};l.prototype.__createRequestData=function(m){'use strict';return {video_id:m.getVideoID(),start_offset:m.getStartOffset(),end_offset:m.getEndOffset(),source:m.getSource(),target_id:m.getTargetID(),waterfall_id:m.getWaterfallID(),composer_entry_point_ref:m.getComposerEntryPointRef&&m.getComposerEntryPointRef(),supports_chunking:m.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager14,partition_start_offset:m.getPartitionStartOffset(),partition_end_offset:m.getPartitionEndOffset()}};l.prototype.__handleSuccessResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='success response received';var n=Date.now()-this.$VideoUploadReceiveRequestManager13;n=n===0?1:n;var o=m.getPayload();if(o.start_offset===this.$VideoUploadReceiveRequestManager24.getEndOffset()){var p=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();this.$VideoUploadReceiveRequestManager14=Math.floor(p/n)}else this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifySuccess();this.inform('request-finished',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager24.setStartOffset(o.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(o.end_offset);this.$VideoUploadReceiveRequestManager24.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager14);this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager24.getSupportsChunking())this.$VideoUploadReceiveRequestManager25(true);};l.prototype.__handleServerFailureResponse=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='failure response received';this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager20.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(m.getError())){this.$VideoUploadReceiveRequestManager11++;var n=m.getPayload();this.$VideoUploadReceiveRequestManager16='invalid offset response received start='+n.start_offset+' end='+n.end_offset;if(this.$VideoUploadReceiveRequestManager24.getStartOffset()!=n.start_offset||this.$VideoUploadReceiveRequestManager24.getEndOffset()!=n.end_offset){this.$VideoUploadReceiveRequestManager24.setStartOffset(n.start_offset);this.$VideoUploadReceiveRequestManager24.setEndOffset(n.end_offset);this.$VideoUploadReceiveRequestManager29=null}this.$VideoUploadReceiveRequestManager25()}else if((m.isTransient()||this.$VideoUploadReceiveRequestManager9)&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3){this.$VideoUploadReceiveRequestManager16='transient server error';this.$VideoUploadReceiveRequestManager11++;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11))}else this.$VideoUploadReceiveRequestManager38(m);};l.prototype.__handleResponseTimeout=function(m){'use strict';this.inform('request-timeout',{start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager24.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager10,server_retries:this.$VideoUploadReceiveRequestManager11,timeout_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager14,request_manager_state:this.$VideoUploadReceiveRequestManager16});this.$VideoUploadReceiveRequestManager23.abort();this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager20.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager12<=this.$VideoUploadReceiveRequestManager5){var n=this.$VideoUploadReceiveRequestManager24.getEndOffset()-this.$VideoUploadReceiveRequestManager24.getStartOffset();n=Math.floor(n/2);n=Math.max(n,this.$VideoUploadReceiveRequestManager15);var o=this.$VideoUploadReceiveRequestManager24.getEndOffset();o=Math.min(o,this.$VideoUploadReceiveRequestManager24.getStartOffset()+n);this.$VideoUploadReceiveRequestManager24.setEndOffset(o);this.$VideoUploadReceiveRequestManager29=null;this.$VideoUploadReceiveRequestManager16='resending after timeout with chunksize='+n;this.$VideoUploadReceiveRequestManager25()}else this.$VideoUploadReceiveRequestManager39({error_code:1006,error_description:h._("Your browser appears to be offline. Please check your Internet connection and try again."),error_summary:h._("No network connection"),error_is_transient:true});};l.prototype.__hasInvalidStartOffsetAndHasRetries=function(m){'use strict';return m===k&&this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager3};l.prototype.$VideoUploadReceiveRequestManager30=function(m){'use strict';this.$VideoUploadReceiveRequestManager20.notifyTransportError();this.$VideoUploadReceiveRequestManager14=null;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager10<this.$VideoUploadReceiveRequestManager2){this.$VideoUploadReceiveRequestManager16='resending after transport failure';this.$VideoUploadReceiveRequestManager10++;this.$VideoUploadReceiveRequestManager23=null;this.$VideoUploadReceiveRequestManager36(this.$VideoUploadReceiveRequestManager37(this.$VideoUploadReceiveRequestManager7,this.$VideoUploadReceiveRequestManager10))}else this.$VideoUploadReceiveRequestManager38(m);};l.prototype.$VideoUploadReceiveRequestManager38=function(m){'use strict';this.$VideoUploadReceiveRequestManager39({error_code:m.getError(),error_description:m.getErrorDescription(),error_summary:m.getErrorSummary(),error_is_transient:m.isTransient()})};l.prototype.$VideoUploadReceiveRequestManager39=function(m){'use strict';this.$VideoUploadReceiveRequestManager16='handling failure error';this.inform('request-failed',m);this.$VideoUploadReceiveRequestManager26()};l.prototype.$VideoUploadReceiveRequestManager31=function(event){'use strict';this.$VideoUploadReceiveRequestManager20.notifyProgress(event);this.inform('request-progressed',{file_size:this.$VideoUploadReceiveRequestManager24.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager24.getStartOffset(),sent_bytes:event.loaded,transport_retries:this.$VideoUploadReceiveRequestManager10})};l.prototype.$VideoUploadReceiveRequestManager21=function(event){'use strict';this.inform('online');this.$VideoUploadReceiveRequestManager10=0;this.$VideoUploadReceiveRequestManager12=0;if(this.$VideoUploadReceiveRequestManager28)this.$VideoUploadReceiveRequestManager25();};l.prototype.$VideoUploadReceiveRequestManager22=function(event){'use strict';this.inform('offline')};l.prototype.$VideoUploadReceiveRequestManager37=function(m,n){'use strict';if(this.$VideoUploadReceiveRequestManager19)return Math.min(Math.pow(m,n),8)*1000;return Math.pow(m,n)*1000};l.prototype.$VideoUploadReceiveRequestManager32=function(m,n){'use strict';var o;if(n>0){o=n}else o=10;var p=Math.floor(m/o*this.$VideoUploadReceiveRequestManager6/100);return Math.max(p,30000)};f.exports=l}),null);
__d('VideoUploadStartRequestManager',['ArbiterMixin','VideoUploadRequest','FileHasher','performanceNow','mixin','Assert'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o,p,q){'use strict';i.constructor.call(this);this.$VideoUploadStartRequestManager1=k;this.$VideoUploadStartRequestManager2=l;this.$VideoUploadStartRequestManager3=m;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager5=n;this.$VideoUploadStartRequestManager6=o;this.$VideoUploadStartRequestManager7=p;this.$VideoUploadStartRequestManager8=q;this.$VideoUploadStartRequestManager9=0}j.prototype.getRequest=function(){'use strict';return this.$VideoUploadStartRequestManager10};j.prototype.sendRequest=function(k){'use strict';if(this.$VideoUploadStartRequestManager11||this.$VideoUploadStartRequestManager10)return;this.$VideoUploadStartRequestManager12=k;if(this.$VideoUploadStartRequestManager5&&this.$VideoUploadStartRequestManager12.getFile().getFile()&&this.$VideoUploadStartRequestManager12.getFile().getFile().size<this.$VideoUploadStartRequestManager6&&c('FileHasher').isSupported()){this.$VideoUploadStartRequestManager13=c('performanceNow')();this.$VideoUploadStartRequestManager11=new (c('FileHasher'))();this.$VideoUploadStartRequestManager11.hash(this.$VideoUploadStartRequestManager12.getFile().getFile(),function(l){this.$VideoUploadStartRequestManager13=c('performanceNow')()-this.$VideoUploadStartRequestManager13;this.$VideoUploadStartRequestManager14=l.hash;this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null;if(!l.hash)this.$VideoUploadStartRequestManager15=l.exception;this.$VideoUploadStartRequestManager16()}.bind(this))}else this.$VideoUploadStartRequestManager16();};j.prototype.$VideoUploadStartRequestManager16=function(){'use strict';this.$VideoUploadStartRequestManager17();this.inform('request-started',{hash_time:this.$VideoUploadStartRequestManager13,hash_exception:this.$VideoUploadStartRequestManager15})};j.prototype.$VideoUploadStartRequestManager17=function(){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null;this.$VideoUploadStartRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(true).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager12,this.$VideoUploadStartRequestManager14)).setWaterfallID(this.$VideoUploadStartRequestManager12.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager19.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager20.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager21.bind(this));this.$VideoUploadStartRequestManager10.send()};j.prototype.__getVideoUploadRequest=function(k){'use strict';return new (c('VideoUploadRequest'))(k)};j.prototype.__getDataToSend=function(k,l){'use strict';return {file_size:k.getFile().getSize(),file_extension:k.getFile().getExtension(),target_id:k.getTargetID(),source:k.getSource(),waterfall_id:k.getWaterfallID(),composer_entry_point_ref:k.getComposerEntryPointRef&&k.getComposerEntryPointRef(),supports_chunking:k.getSupportsChunking(),supports_file_api:k.getSupportsFileAPI(),partition_start_offset:k.getPartitionStartOffset(),partition_end_offset:k.getPartitionEndOffset(),creator_product:k.getCreatorProduct(),original_file_hash:l,spherical:k.getIsSphericalVideo(),spherical_metadata:k.getSphericalMetadata()}};j.prototype.cancelRequest=function(){'use strict';this.$VideoUploadStartRequestManager22()};j.prototype.$VideoUploadStartRequestManager23=function(k){'use strict';clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=setTimeout(this.$VideoUploadStartRequestManager17.bind(this),k)};j.prototype.$VideoUploadStartRequestManager22=function(){'use strict';if(this.$VideoUploadStartRequestManager11){this.$VideoUploadStartRequestManager11.destroy();this.$VideoUploadStartRequestManager11=null}if(this.$VideoUploadStartRequestManager10){this.$VideoUploadStartRequestManager10.abort();this.$VideoUploadStartRequestManager10=null}this.$VideoUploadStartRequestManager9=0;this.$VideoUploadStartRequestManager4=0;this.$VideoUploadStartRequestManager12=null;clearTimeout(this.$VideoUploadStartRequestManager18);this.$VideoUploadStartRequestManager18=null};j.prototype.$VideoUploadStartRequestManager24=function(k,l){'use strict';return Math.pow(k,l)*1000};j.prototype.$VideoUploadStartRequestManager19=function(k){'use strict';var l=k.getPayload();this.inform('request-finished',this.__getSuccessInformData(l));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};j.prototype.__getSuccessInformData=function(k){'use strict';return {video_id:k.video_id,start_offset:k.start_offset,end_offset:k.end_offset,transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,skip_upload:k.skip_upload,hash_time:this.$VideoUploadStartRequestManager13}};j.prototype.$VideoUploadStartRequestManager25=function(k){'use strict';this.inform('request-failed',this.$VideoUploadStartRequestManager26(k));this.$VideoUploadStartRequestManager10=null;c('Assert').isTrue(this.$VideoUploadStartRequestManager11==null,'Unexpected: if file hasher is not null, clean up is required.')};j.prototype.$VideoUploadStartRequestManager20=function(k){'use strict';this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager4=0;if(k.isTransient()&&this.$VideoUploadStartRequestManager9<this.$VideoUploadStartRequestManager7){this.$VideoUploadStartRequestManager9++;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager8,this.$VideoUploadStartRequestManager9))}else this.$VideoUploadStartRequestManager25(k);};j.prototype.$VideoUploadStartRequestManager21=function(k){'use strict';if(this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager4>=this.$VideoUploadStartRequestManager2){this.$VideoUploadStartRequestManager25(k)}else{this.$VideoUploadStartRequestManager4++;this.$VideoUploadStartRequestManager10=null;this.$VideoUploadStartRequestManager23(this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager4))}};j.prototype.$VideoUploadStartRequestManager26=function(k){'use strict';return {error_code:k.getError(),error_description:k.getErrorDescription(),error_summary:k.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager4,server_retries:this.$VideoUploadStartRequestManager9,error_is_transient:k.isTransient()}};f.exports=j}),null);
__d('getVideo64BitAtomLength',['Int64'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=i.getUint32(j+l+k),n=i.getUint32(j+k+l+l);return new (c('Int64'))(n,m).toNumber()}f.exports=h}),null);
__d('VideoUploadMetadataParser',['regeneratorRuntime','Promise','VideoUploadFeatureDetector','VideoUploadSphericalLogger','fileSlice','killswitch','getVideo64BitAtomLength'],(function a(b,c,d,e,f,g){var h=4,i=4,j=5242880,k=24,l=88,m=20,n=16,o=4,p=84,q=20,r=62,s=4,t=[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],u=12,v=12,w=16,x=36,y=1,z=1,aa=4,ba=1,ca=1,da=4,ea=4,fa=1000;function ga(ha,ia){'use strict';this.$VideoUploadMetadataParser1=ha;this.$VideoUploadMetadataParser2=ia}ga.prototype.getHandler=function(){'use strict';return this.$VideoUploadMetadataParser2};ga.prototype.parse=function(){'use strict';if(!c('VideoUploadFeatureDetector').supportsFileReading()){this.$VideoUploadMetadataParser2(null);return null}switch(this.$VideoUploadMetadataParser1.getExtension()){case 'mp4':case 'mov':case 'm4v':case '3gp':case '3g2':c('VideoUploadSphericalLogger').setFileExtension(this.$VideoUploadMetadataParser1.getExtension());break;default:this.$VideoUploadMetadataParser2(null);return null;}return this.$VideoUploadMetadataParser3(0,Math.min(j,this.$VideoUploadMetadataParser1.getSize()),null)};ga.prototype.$VideoUploadMetadataParser3=function ha(ia,ja,ka){var la,ma,na;return c('regeneratorRuntime').async(function oa(pa){while(1)switch(pa.prev=pa.next){case 0:'use strict';la=new FileReader();ma=new (c('Promise'))(function(qa,ra){la.onload=function ta(event){var ua;return c('regeneratorRuntime').async(function va(wa){while(1)switch(wa.prev=wa.next){case 0:wa.prev=0;ua=this.$VideoUploadMetadataParser4(new DataView(la.result),0,ja-ia,ia,ka);if(!ua.completed){wa.next=8;break}ua=this.$VideoUploadMetadataParser5(ua);ua.completed=true;qa(ua);wa.next=13;break;case 8:wa.next=10;return c('regeneratorRuntime').awrap(this.$VideoUploadMetadataParser3(ia+ua.nextOffset,Math.min(this.$VideoUploadMetadataParser1.getSize(),ia+ua.nextOffset+j),ua));case 10:ua=wa.sent;ua.completed=false;qa(ua);case 13:wa.next=18;break;case 15:wa.prev=15;wa.t0=wa['catch'](0);ra(wa.t0);case 18:case 'end':return wa.stop();}},null,this,[[0,15]])}.bind(this);var sa=this.$VideoUploadMetadataParser1.getFile();la.readAsArrayBuffer(c('fileSlice').call(sa,ia,ja))}.bind(this));na=this.$VideoUploadMetadataParser6();return pa.abrupt('return',new (c('Promise'))(function(qa,ra){try{c('Promise').all([ma,na]).then(function(sa){var ta=sa[0];if(ta.completed){var ua=sa[1];ta.videoPlayerData=ua;this.$VideoUploadMetadataParser2(ta)}qa(ta)}.bind(this),function(sa){this.$VideoUploadMetadataParser2(null);ra(sa)}.bind(this)).done()}catch(sa){this.$VideoUploadMetadataParser2(null);ra(sa)}}.bind(this)));case 5:case 'end':return pa.stop();}},null,this)};ga.prototype.$VideoUploadMetadataParser6=function(){'use strict';if(c('killswitch')('VIDEO_DIMENSIONS_FROM_PLAYER_IN_UPLOAD_DIALOG')||!b.URL||!b.URL.createObjectURL)return null;var ha=this.$VideoUploadMetadataParser1.getFile(),ia=document.createElement('video'),ja=new (c('Promise'))(function(la,ma){var na=setTimeout(function(){clearTimeout(na);ma('Video onloadedmetadata timed out')},fa)}),ka=new (c('Promise'))(function(la,ma){ia.onloadedmetadata=function(){try{var na={width:ia.videoWidth,height:ia.videoHeight};la(na)}catch(oa){ma(oa)}};try{ia.src=b.URL.createObjectURL(ha)}catch(na){ma(na)}});return c('Promise').race([ka,ja])};ga.prototype.$VideoUploadMetadataParser7=function(ha,ia,ja){'use strict';var ka=[];for(var la=0;la<ja;la++)ka.push(String.fromCharCode(ha.getUint8(ia+la)));return ka.join('')};ga.prototype.$VideoUploadMetadataParser8=function(ha,ia,ja){'use strict';var ka={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_maps:[]},la=0;ka.version=ha.getUint8(ia+la);la=y;ka.ambisonic_type=ha.getUint8(ia+la);la+=z;ka.ambisonic_order=ha.getUint32(ia+la);la+=aa;ka.ambisonic_channel_ordering=ha.getUint8(ia+la);la+=ba;ka.ambisonic_normalization=ha.getUint8(ia+la);la+=ca;ka.num_channels=ha.getUint32(ia+la);la+=da;for(var ma=0;ma<ka.num_channels;ma++){ka.channel_maps.push(ha.getUint32(ia+la));la+=ea;if(la>ja)return null;}return JSON.stringify(ka)};ga.prototype.$VideoUploadMetadataParser9=function(ha,ia,ja,ka){'use strict';try{var la=i+h;if(la+t.length<ja&&this.$VideoUploadMetadataParser10(ha,ia+la)){la+=t.length;if(la<ja){var ma=this.$VideoUploadMetadataParser7(ha,ia+la,ja-la),na;if(window.DOMParser){var oa=new DOMParser();na=oa.parseFromString(ma,'text/xml')}else{na=new window.ActiveXObject('Microsoft.XMLDOM');na.async='false';na.loadXML(ma)}var pa=na.getElementsByTagNameNS('*','Spherical')[0].childNodes[0].nodeValue;if(pa.toLowerCase()==='true'){ka.sphericalMetadata.spherical=true;ka.sphericalMetadata.sphericalMetadataXml=ma}}}}catch(qa){}};ga.prototype.$VideoUploadMetadataParser10=function(ha,ia){'use strict';for(var ja=0;ja<t.length;ja++)if(ha.getUint8(ia+ja)!==t[ja])return false;return true};ga.prototype.$VideoUploadMetadataParser4=function(ha,ia,ja,ka,la){'use strict';if(!la)la={widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:false,sphericalMetadata:{sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:false,endOfMediaInformationAtomOffset:null};var ma=null;while(ia<ja){var na=ha.getUint32(ia),oa=this.$VideoUploadMetadataParser7(ha,ia+h,i);if(na===1)na=c('getVideo64BitAtomLength')(ha,ia,i,h);if(ia+na>ja){la.completed=false;la.nextOffset=ia;if(na>ja)la.nextOffset+=na;return la}if(la.isParsingInMediaInformationAtom&&ia>=la.endOfMediaInformationAtomOffset){la.isParsingInMediaInformationAtom=false;la.endOfMediaInformationAtomOffset=null}if(ia+ka===0&&oa!=='ftyp')throw new Error('No ftyp atom');if(na===0)throw new Error('len is 0');var pa=function db(){var eb=ha.getUint32(ia+m),fb=ha.getUint32(ia+k);return fb/eb};switch(oa){case 'moov':case 'trak':case 'mdia':case 'stbl':ia+=h+i;break;case 'mvhd':la.duration=pa();ia+=na;break;case 'tkhd':var qa=ha.getUint16(ia+p),ra=ha.getUint16(ia+l);la.widths.push(qa);la.heights.push(ra);ma=ha.getUint32(ia+q);ia+=na;break;case 'hdlr':if(!la.isParsingInMediaInformationAtom){var sa=this.$VideoUploadMetadataParser7(ha,ia+n,o);switch(sa){case 'vide':sa='video';break;case 'soun':sa='audio';break;case 'subt':sa='subtitle';break;default:sa='data';}la.streamTypes.push(sa)}ia+=na;break;case 'mdhd':la.streamDurations.push(pa());ia+=na;break;case 'uuid':this.$VideoUploadMetadataParser9(ha,ia,na,la);ia+=na;break;case 'meta':var ta=v+u+s,ua=this.$VideoUploadMetadataParser7(ha,ia+ta,4);if(ua!=='face'){ia+=na;break}var va=h+i+r,wa=this.$VideoUploadMetadataParser7(ha,ia+va,na-va);if(wa!==null){if(la.sphericalMetadata.fbSpatialAudioMetadataXml===null)la.sphericalMetadata.fbSpatialAudioMetadataXml='<fb360_spatial_audio>';if(ma){la.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+ma.toString()+'">\n                  '+wa+'\n                </track>\n              '}else la.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <spatial_audio_formatting>\n                  '+wa+'\n                </spatial_audio_formatting>\n              ';}ia+=na;break;case 'minf':var xa=this.$VideoUploadMetadataParser7(ha,ia+2*h+i,i);if(xa==='smhd'){ia+=h+i;la.isParsingInMediaInformationAtom=true;la.endOfMediaInformationAtomOffset=ia+na}else ia+=na;break;case 'stsd':var ya=this.$VideoUploadMetadataParser7(ha,ia+i+w,i);if(ya==='mp4a'){ia+=w}else ia+=na;break;case 'mp4a':var za=ha.getUint32(ia+x),ab=ha.getUint32(ia+x+za),bb=this.$VideoUploadMetadataParser7(ha,ia+x+za+h,i);if(bb==='SA3D'){var cb=this.$VideoUploadMetadataParser8(ha,ia+x+za+h+i,ab);if(cb!==null)if(la.sphericalMetadata.ytSa3dMetadataJson===null)la.sphericalMetadata.ytSa3dMetadataJson=cb;}ia+=na;break;default:ia+=na;}}la.completed=true;if(la.sphericalMetadata.fbSpatialAudioMetadataXml)la.sphericalMetadata.fbSpatialAudioMetadataXml+='</fb360_spatial_audio>';return la};ga.prototype.$VideoUploadMetadataParser5=function(ha){'use strict';var ia={streams:{numAudioTracks:0},format:{},metadata:{}},ja=ha.widths.length,ka=ha.heights.length,la=ha.streamTypes.length,ma=ha.streamDurations.length;if(ja!==ka||ja!==la||ja!==ma)return null;for(var na=0;na<ja;na++){var oa={width:ha.widths[na],height:ha.heights[na],duration:ha.streamDurations[na],type:ha.streamTypes[na]};if(oa.type==='video'){var pa=oa.width*oa.height,qa=ia.streams.primaryVideo;if(!qa||qa.width*qa.height>pa)ia.streams.primaryVideo=oa;}else if(oa.type==='audio'){var ra=ia.streams.primaryAudio;if(!ra||ra.duration<oa.duration)ia.streams.primaryAudio=oa;ia.streams.numAudioTracks++}}ia.format.duration=ha.duration;ia.format.isSpherical=ha.sphericalMetadata.spherical;if(ha.sphericalMetadata.spherical){ia.metadata.sphericalMetadataXml=ha.sphericalMetadata.sphericalMetadataXml;ia.metadata.fbSpatialAudioMetadataXml=ha.sphericalMetadata.fbSpatialAudioMetadataXml;ia.metadata.ytSa3dMetadataJson=ha.sphericalMetadata.ytSa3dMetadataJson}c('VideoUploadSphericalLogger').setHasSphericalMetadata(ha.sphericalMetadata.spherical);return ia};f.exports=ga}),null);
__d('VideoUploadSession',['ArbiterMixin','AsyncRequest','VideoUploadCrashMonitor','VideoUploadFeatureDetector','VideoUploadFileValidator','VideoUploadLogger','VideoUploadMetadataParser','VideoUploadPostRequestManager','VideoUploadReceiveRequestManager','VideoUploadRequestContext','VideoUploadStartRequestManager','WaterfallIDGenerator','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploadSession1=k.source;this.$VideoUploadSession2=k.target_id;this.$VideoUploadSession3=k.logging_delay;this.$VideoUploadSession4=k.silent_file_validation;this.$VideoUploadSession5=k.background_upload;this.$VideoUploadSession6=k.actor_id;this.$VideoUploadSession7=k.composer_entry_point_ref;this.$VideoUploadSession8=k.monitor_crashes;this.$VideoUploadSession9=k.isMultiMediaPost;this.$VideoUploadSession10=k.container_type;this.$VideoUploadSession11=k.number_of_partitions;this.$VideoUploadSession12=k.multi_partitioning_enabled;this.$VideoUploadSession13=k.recurring_logging_interval;this.$VideoUploadSession14=k.change_default_chunk_size;this.$VideoUploadSession15=new (c('VideoUploadFileValidator'))({minSize:k.min_size,maxSize:k.max_size,minLength:k.min_length,maxLength:k.max_length,minWidth:k.min_width,minHeight:k.min_height,extensions:k.extensions,source:k.source,require16to9AspectRatio:k.require_16to9_aspect_ratio,minAspectRatio:k.min_aspect_ratio,maxAspectRatio:k.max_aspect_ratio});this.$VideoUploadSession16=c('VideoUploadFeatureDetector').supportsChunking();this.$VideoUploadSession17=c('VideoUploadFeatureDetector').supportsFileAPI();if(this.$VideoUploadSession16){this.$VideoUploadSession18=k.parallel_chunk_uploads;if(this.$VideoUploadSession18){this.$VideoUploadSession19=k.parallel_chunk_upload_filesize;this.$VideoUploadSession20=k.default_chunk_size}}else this.$VideoUploadSession18=false;this.$VideoUploadSession21=this.$VideoUploadSession22(k);this.$VideoUploadSession23=this.$VideoUploadSession24(k);if(this.$VideoUploadSession18)if(this.$VideoUploadSession12){var l=0;this.$VideoUploadSession25=[];for(l=0;l<this.$VideoUploadSession11-1;l++)this.$VideoUploadSession25[l]=this.$VideoUploadSession24(k);}else this.$VideoUploadSession25=this.$VideoUploadSession24(k);this.$VideoUploadSession26=this.$VideoUploadSession27(k);this.$VideoUploadSession28=0;this.$VideoUploadSession29=0;this.$VideoUploadSession30=0;this.$VideoUploadSession31=0;this.$VideoUploadSession32=0;this.$VideoUploadSession33=0;this.$VideoUploadSession34=0;this.$VideoUploadSession35=0;this.$VideoUploadSession36=0}j.prototype.$VideoUploadSession37=function(){'use strict';this.$VideoUploadSession38=[];this.$VideoUploadSession39=[];this.$VideoUploadSession40=[];this.$VideoUploadSession41=[];this.$VideoUploadSession42=[];var k=0;for(k=0;k<this.$VideoUploadSession43-1;k++)this.$VideoUploadSession38.push(false);};j.prototype.$VideoUploadSession44=function(){'use strict';this.$VideoUploadSession45=c('WaterfallIDGenerator').generate();this.$VideoUploadSession46=new (c('VideoUploadLogger'))({actor_id:this.$VideoUploadSession6,source:this.$VideoUploadSession1,waterfall_id:this.$VideoUploadSession45,target_id:this.$VideoUploadSession2,delay:this.$VideoUploadSession3,is_chunked_upload:this.$VideoUploadSession16,composer_entry_point_ref:this.$VideoUploadSession7,container_type:this.$VideoUploadSession10});this.inform('set-waterfall-id',{waterfallID:this.$VideoUploadSession45})};j.prototype.createTestLogger=function(){'use strict';this.$VideoUploadSession44()};j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploadSession46)return null;return this.$VideoUploadSession46};j.prototype.start=function(k){'use strict';this.$VideoUploadSession47=null;this.$VideoUploadSession48=false;this.$VideoUploadSession49=false;this.$VideoUploadSession50=k;this.$VideoUploadSession51=0;this.$VideoUploadSession52=false;this.$VideoUploadSession53={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession54=false;this.$VideoUploadSession44();if(this.$VideoUploadSession12)this.$VideoUploadSession43=Math.min(this.$VideoUploadSession11,Math.ceil(this.$VideoUploadSession50.getSize()/this.$VideoUploadSession19));this.__logEvent(c('VideoUploadLogger').EVENT_REQUESTED_UPLOADING);this.inform('upload-requested');var l=new (c('VideoUploadMetadataParser'))(this.$VideoUploadSession50,this.$VideoUploadSession55.bind(this));l.parse()};j.prototype.post=function(k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_POST_REQUEST);this.inform('post-started',k);var l=this.__createPostRequestContext(k);this.$VideoUploadSession26.sendRequest(l);this.$VideoUploadSession56=k};j.prototype.__createPostRequestContext=function(k){'use strict';var l=new (c('VideoUploadRequestContext'))();this.__setupPostRequestContext(l,k);return l};j.prototype.__setupPostRequestContext=function(k,l){'use strict';k.setMetadata(l).setVideoID(this.$VideoUploadSession47).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession45).setSupportsChunking(this.$VideoUploadSession16).setCreatorProduct(this.$VideoUploadSession50.getCreatorProduct()).setFile(this.$VideoUploadSession50);if(l){if(l.spherical){this.$VideoUploadSession52=true;k.setIsSphericalVideo(this.$VideoUploadSession52)}if(l.enable_omnistab){this.$VideoUploadSession54=true;k.setEnableOmnistab(this.$VideoUploadSession54)}}if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploadSession48)return;var k=this.__fetchReceiveRequestManagerStateLogData();if(this.$VideoUploadSession13!==-1){this.$VideoUploadSession57(k);clearInterval(this.$VideoUploadSession58)}this.$VideoUploadSession59();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession49)this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);if(this.$VideoUploadSession60){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession60=false}}else{this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k)}};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploadSession48)return;var k=this.__fetchReceiveRequestManagerStateLogData();if(this.$VideoUploadSession13!==-1){this.$VideoUploadSession57(k);clearInterval(this.$VideoUploadSession58)}this.$VideoUploadSession59();if(this.$VideoUploadSession5){if(!this.$VideoUploadSession49)this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);if(this.$VideoUploadSession60){this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k);this.$VideoUploadSession60=false}}else{this.__logEvent(c('VideoUploadLogger').EVENT_ABANDONED_UPLOADING);this.__logEvent(c('VideoUploadLogger').EVENT_CANCELED_FLOW,k)}};j.prototype.isPostInProgress=function(){'use strict';return this.$VideoUploadSession26.isInProgress()};j.prototype.isInProgress=function(){'use strict';return this.$VideoUploadSession48};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploadSession47};j.prototype.getUploadTime=function(){'use strict';return this.$VideoUploadSession61};j.prototype.getExPartitionNumber=function(k){'use strict';var l=0;for(l=0;l<this.$VideoUploadSession43-1;l++)if(k>=this.$VideoUploadSession39[l]&&k<this.$VideoUploadSession40[l])break;if(l===this.$VideoUploadSession43)return -1;return l};j.prototype.startFlow=function(){'use strict';if(!this.$VideoUploadSession5||this.$VideoUploadSession60)return;this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession52?'true':null});this.$VideoUploadSession60=true;if(this.$VideoUploadSession62)this.$VideoUploadSession62.flowStarted();};j.prototype.$VideoUploadSession55=function(k){'use strict';var l,m;if(this.$VideoUploadSession4){var n=this.$VideoUploadSession15.getValidationErrorMessage(this.$VideoUploadSession50,k);if(n){m={error_summary:n.summary,error_description:n.description};l=false}else l=true;}else l=this.$VideoUploadSession15.validate(this.$VideoUploadSession50,k);if(!l){this.__logEvent(c('VideoUploadLogger').EVENT_INVALIDATED_UPLOADING);this.inform('upload-failed',m);return}if(k&&k.format){this.$VideoUploadSession52=k.format.isSpherical;if(k.metadata){this.$VideoUploadSession53.sphericalMetadataXml=k.metadata.sphericalMetadataXml;this.$VideoUploadSession53.fbSpatialAudioMetadataXml=k.metadata.fbSpatialAudioMetadataXml;this.$VideoUploadSession53.ytSa3dMetadataJson=k.metadata.ytSa3dMetadataJson}}if(!this.$VideoUploadSession5)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession52?'true':null});this.$VideoUploadSession63=this.$VideoUploadSession18&&this.$VideoUploadSession50.getSize()>=this.$VideoUploadSession19;this.$VideoUploadSession64=false;this.$VideoUploadSession65=0;this.$VideoUploadSession66=this.$VideoUploadSession65;this.$VideoUploadSession67=0;if(this.$VideoUploadSession12){this.$VideoUploadSession37()}else this.$VideoUploadSession38=false;if(this.$VideoUploadSession63){if(this.$VideoUploadSession12){var o=0;this.$VideoUploadSession68=Math.ceil(this.$VideoUploadSession50.getSize()/this.$VideoUploadSession43);var p=this.$VideoUploadSession68,q=this.$VideoUploadSession68;for(o=0;o<this.$VideoUploadSession43-1;o++){this.$VideoUploadSession39[o]=p;p=Math.min(this.$VideoUploadSession39[o]+q,this.$VideoUploadSession50.getSize());this.$VideoUploadSession40[o]=p;this.$VideoUploadSession41[o]=this.$VideoUploadSession39[o];this.$VideoUploadSession42[o]=0}}else{this.$VideoUploadSession68=Math.floor(this.$VideoUploadSession50.getSize()/2);this.$VideoUploadSession39=this.$VideoUploadSession68;this.$VideoUploadSession41=this.$VideoUploadSession39;this.$VideoUploadSession42=0;this.$VideoUploadSession40=this.$VideoUploadSession50.getSize()}}else this.$VideoUploadSession68=this.$VideoUploadSession50.getSize();var r=new (c('VideoUploadRequestContext'))().setFile(this.$VideoUploadSession50).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession45).setSupportsChunking(this.$VideoUploadSession16).setSupportsFileAPI(this.$VideoUploadSession17).setCreatorProduct(this.$VideoUploadSession50.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession65).setPartitionEndOffset(this.$VideoUploadSession68);if(this.$VideoUploadSession18)r.setUseParallelChunks(this.$VideoUploadSession18);if(this.$VideoUploadSession52){r.setIsSphericalVideo(this.$VideoUploadSession52);r.setSphericalMetadata(this.$VideoUploadSession53)}if(r.setComposerEntryPointRef)r.setComposerEntryPointRef(this.$VideoUploadSession7);this.$VideoUploadSession69();this.$VideoUploadSession21.sendRequest(r);this.inform('metadata-parsed',k)};j.prototype.$VideoUploadSession22=function(k){'use strict';var l=this.$VideoUploadSession16?k.chunk_start_uri:k.start_uri,m=this.__getVideoUploadStartRequestManager(l,k.start_max_transport_retries,k.start_transport_retry_interval_base,k.skip_upload_enabled,k.skip_upload_file_size_limit,k.start_max_server_retries,k.start_server_retry_interval_base);m.subscribe('request-started',this.$VideoUploadSession70.bind(this));m.subscribe('request-finished',this.$VideoUploadSession71.bind(this));m.subscribe('request-failed',this.$VideoUploadSession72.bind(this));return m};j.prototype.$VideoUploadSession24=function(k){'use strict';var l=this.$VideoUploadSession16?k.chunk_receive_uri:k.receive_uri,m=this.__getVideoUploadReceiveRequestManager(l,k);m.subscribe('request-started',this.$VideoUploadSession73.bind(this));m.subscribe('request-progressed',this.$VideoUploadSession74.bind(this));m.subscribe('request-finished',this.$VideoUploadSession75.bind(this));m.subscribe('request-failed',this.$VideoUploadSession76.bind(this));m.subscribe('request-timeout',this.$VideoUploadSession77.bind(this));m.subscribe('online',this.$VideoUploadSession78.bind(this));m.subscribe('offline',this.$VideoUploadSession79.bind(this));m.subscribe('resumable-called',this.$VideoUploadSession80.bind(this));m.subscribe('resumable-started',this.$VideoUploadSession81.bind(this));m.subscribe('resumable-success',this.$VideoUploadSession82.bind(this));m.subscribe('resumable-failed',this.$VideoUploadSession83.bind(this));return m};j.prototype.$VideoUploadSession27=function(k){'use strict';var l=this.$VideoUploadSession16?k.chunk_post_uri:k.post_uri,m=this.__getVideoUploadPostRequestManager(l,k);m.subscribe('request-finished',this.__handlePostRequestFinished.bind(this));m.subscribe('request-failed',this.$VideoUploadSession84.bind(this));return m};j.prototype.$VideoUploadSession70=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_UPLOADING,{hash_time:k.hash_time,hash_exception:k.hash_exception});this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_START_REQUEST);this.$VideoUploadSession85=Date.now();this.inform('upload-started')};j.prototype.$VideoUploadSession71=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:k.transport_retries,hash_time:k.hash_time,skip_upload:k.skip_upload?1:null});this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_START_REQUEST);this.$VideoUploadSession47=k.video_id;this.$VideoUploadSession86=k.skip_upload;if(!k.skip_upload){var l;l=this.__createReceiveRequestContext(k,false);if(this.$VideoUploadSession13!==-1)this.$VideoUploadSession58=setInterval(this.$VideoUploadSession87.bind(this,c('VideoUploadLogger').EVENT_RECURRING_LOG_PROGRESS),this.$VideoUploadSession13);this.$VideoUploadSession23.sendRequest(l);if(this.$VideoUploadSession63)if(this.$VideoUploadSession12){var m=0;for(m=0;m<this.$VideoUploadSession43-1;m++){l=this.__createReceiveRequestContext(k,true,m);this.$VideoUploadSession25[m].sendRequest(l)}}else{l=this.__createReceiveRequestContext(k,true);this.$VideoUploadSession25.sendRequest(l)}}else{this.inform('upload-progressed',{start_offset:0,end_offset:this.$VideoUploadSession50.getSize(),file_size:this.$VideoUploadSession50.getSize(),sent_bytes:this.$VideoUploadSession50.getSize(),video_id:k.video_id,skip_upload:k.skip_upload});if(this.$VideoUploadSession5)this.__logFinishedUploading();this.inform('upload-finished',{start_offset:0,end_offset:this.$VideoUploadSession50.getSize(),video_id:k.video_id,is_spherical_video:this.$VideoUploadSession52})}};j.prototype.__fetchReceiveRequestManagerStateLogData=function(){'use strict';var k={};if(this.$VideoUploadSession23!=null){this.$VideoUploadSession23.appendStateLogData(k,'requestManager_');k.request_manager_state=k.requestManager_last_log_state}if(this.$VideoUploadSession12){var l=0;for(l=0;l<this.$VideoUploadSession43-1;l++)if(this.$VideoUploadSession25[l]!=null)this.$VideoUploadSession25[l].appendStateLogData(k,'requestManagerEx_'+l.toString());}else if(this.$VideoUploadSession25!=null)this.$VideoUploadSession25.appendStateLogData(k,'requestManagerEx_');return k};j.prototype.__createReceiveRequestContext=function(k,l,m){'use strict';if(!l)l=false;var n=new (c('VideoUploadRequestContext'))();this.$VideoUploadSession12?this.__setupReceiveRequestContext(n,k,l,m):this.__setupReceiveRequestContext(n,k,l);return n};j.prototype.__setupReceiveRequestContext=function(k,l,m,n){'use strict';var o,p,q,r;if(!m){o=this.$VideoUploadSession65;p=this.$VideoUploadSession68;if(this.$VideoUploadSession14){q=this.$VideoUploadSession65;r=this.$VideoUploadSession68}else{q=l.start_offset;r=l.end_offset}}else if(this.$VideoUploadSession12){if(this.$VideoUploadSession14)this.$VideoUploadSession20=this.$VideoUploadSession40[n]-this.$VideoUploadSession39[n];o=this.$VideoUploadSession39[n];p=this.$VideoUploadSession40[n];q=this.$VideoUploadSession39[n];r=this.$VideoUploadSession39[n]+this.$VideoUploadSession20>=this.$VideoUploadSession40[n]?this.$VideoUploadSession40[n]:this.$VideoUploadSession39[n]+this.$VideoUploadSession20}else{if(this.$VideoUploadSession14)this.$VideoUploadSession20=this.$VideoUploadSession40-this.$VideoUploadSession39;o=this.$VideoUploadSession39;p=this.$VideoUploadSession40;q=this.$VideoUploadSession39;r=this.$VideoUploadSession39+this.$VideoUploadSession20>=this.$VideoUploadSession40?this.$VideoUploadSession40:this.$VideoUploadSession39+this.$VideoUploadSession20}k.setFile(this.$VideoUploadSession50).setVideoID(l.video_id).setStartOffset(q).setEndOffset(r).setPartitionStartOffset(o).setPartitionEndOffset(p).setTargetID(this.$VideoUploadSession2).setSource(this.$VideoUploadSession1).setWaterfallID(this.$VideoUploadSession45).setSupportsChunking(this.$VideoUploadSession16);if(this.$VideoUploadSession18)k.setUseParallelChunks(this.$VideoUploadSession18);if(k.setComposerEntryPointRef)k.setComposerEntryPointRef(this.$VideoUploadSession7);};j.prototype.$VideoUploadSession72=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_START_REQUEST,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession60){this.__logEvent(m);this.$VideoUploadSession60=false}}else this.__logEvent(m);this.$VideoUploadSession88();this.inform('upload-failed',k)};j.prototype.$VideoUploadSession73=function(event,k){'use strict';if(!k.start_offset&&!k.transport_retries&&!k.server_retries)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession50.getSize()});if(this.$VideoUploadSession36===0)this.$VideoUploadSession36=Date.now();if(this.$VideoUploadSession16)this.__logEvent(c('VideoUploadLogger').EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,total_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state});};j.prototype.$VideoUploadSession74=function(event,k){'use strict';if(k.start_offset<this.$VideoUploadSession68){this.$VideoUploadSession66=k.start_offset;this.$VideoUploadSession67=k.sent_bytes;this.$VideoUploadSession33=k.transport_retries}else if(this.$VideoUploadSession12){var l=0;l=this.getExPartitionNumber(k.start_offset);if(l>-1){this.$VideoUploadSession41[l]=k.start_offset;this.$VideoUploadSession42[l]=k.sent_bytes}}else{this.$VideoUploadSession41=k.start_offset;this.$VideoUploadSession42=k.sent_bytes;this.$VideoUploadSession34=k.transport_retries}k.start_offset=this.$VideoUploadSession66;k.sent_bytes=this.$VideoUploadSession67;if(this.$VideoUploadSession63)if(this.$VideoUploadSession12){for(l=0;l<this.$VideoUploadSession43-1;l++){k.start_offset+=this.$VideoUploadSession41[l]-this.$VideoUploadSession39[l];k.sent_bytes+=this.$VideoUploadSession42[l]}}else{k.start_offset+=this.$VideoUploadSession41-this.$VideoUploadSession39;k.sent_bytes+=this.$VideoUploadSession42}var m=Math.min(k.start_offset+k.sent_bytes,k.file_size);if(m>this.$VideoUploadSession51){this.$VideoUploadSession51=m;this.inform('upload-progressed',k)}this.$VideoUploadSession28=k.start_offset+k.sent_bytes;var n=Date.now();this.$VideoUploadSession29=n-this.$VideoUploadSession30;this.$VideoUploadSession30=n;this.$VideoUploadSession31=n-this.$VideoUploadSession36;this.$VideoUploadSession32=this.$VideoUploadSession28/this.$VideoUploadSession31;this.$VideoUploadSession35=this.$VideoUploadSession28*100/k.file_size};j.prototype.$VideoUploadSession87=function(k){'use strict';this.__logEvent(k,{data_sent:this.$VideoUploadSession28,progress_event_time_delta:this.$VideoUploadSession29,last_progress_event_time:this.$VideoUploadSession30,time_spent_in_receive:this.$VideoUploadSession31,upload_speed:this.$VideoUploadSession32,transport_retries_primary:this.$VideoUploadSession33,transport_retries_ex:this.$VideoUploadSession34,progress_percentage:this.$VideoUploadSession35})};j.prototype.$VideoUploadSession57=function(k){'use strict';k.data_sent=this.$VideoUploadSession28;k.progress_event_time_delta=this.$VideoUploadSession29;k.last_progress_event_time=this.$VideoUploadSession30;k.time_spent_in_receive=this.$VideoUploadSession31;k.upload_speed=this.$VideoUploadSession32;k.transport_retries_primary=this.$VideoUploadSession33;k.transport_retries_ex=this.$VideoUploadSession34;k.progress_percentage=this.$VideoUploadSession35};j.prototype.$VideoUploadSession75=function(event,k){'use strict';if(this.$VideoUploadSession16)this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state});var l=false;if(k.start_offset<this.$VideoUploadSession68){this.$VideoUploadSession64=k.end_offset>=this.$VideoUploadSession68}else if(this.$VideoUploadSession12){var m=0;m=this.getExPartitionNumber(k.start_offset);if(m===-1){var n={error_summary:'Invalid offset',error_description:'Offset doesn\'t fall in any exPartition range.'};this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING);this.inform('upload-failed',n);return}this.$VideoUploadSession38[m]=k.end_offset>=this.$VideoUploadSession40[m]}else this.$VideoUploadSession38=k.end_offset>=this.$VideoUploadSession40;if(this.$VideoUploadSession12){for(m=0;m<this.$VideoUploadSession43-1;m++)if(this.$VideoUploadSession38[m]===false){l=false;break}else l=true;}else l=this.$VideoUploadSession38;if(!this.$VideoUploadSession17||this.$VideoUploadSession64&&(!this.$VideoUploadSession63||l)){if(this.$VideoUploadSession13!==-1){this.$VideoUploadSession31=Date.now()-this.$VideoUploadSession36;this.$VideoUploadSession57(k);clearInterval(this.$VideoUploadSession58)}this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession50.getSize()});this.$VideoUploadSession61=Date.now()-this.$VideoUploadSession85;if(this.$VideoUploadSession5)this.__logFinishedUploading();k.video_id=this.$VideoUploadSession47;k.is_spherical_video=this.$VideoUploadSession52;this.inform('upload-finished',k);if(this.$VideoUploadSession9){this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW,k);this.$VideoUploadSession60=false;this.$VideoUploadSession88();this.inform('multimedia-upload-finished',k)}}};j.prototype.$VideoUploadSession76=function(event,k){'use strict';var l=this.__getLogErrorData(k);if(this.$VideoUploadSession13!==-1){this.$VideoUploadSession57(l);clearInterval(this.$VideoUploadSession58)}if(this.$VideoUploadSession16)this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_SENDING_CHUNK_BYTES,l);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;if(this.$VideoUploadSession5){if(this.$VideoUploadSession60){this.__logEvent(m);this.$VideoUploadSession60=false}}else this.__logEvent(m);this.$VideoUploadSession88();this.inform('upload-failed',k)};j.prototype.$VideoUploadSession77=function(event,k){'use strict';var l={start_offset:k.start_offset,sent_bytes:k.end_offset-k.start_offset,transport_retries:k.transport_retries,server_retries:k.server_retries,timeout_retries:k.timeout_retries,upload_speed:k.upload_speed,request_manager_state:k.request_manager_state};if(this.$VideoUploadSession13!==-1)this.$VideoUploadSession57(l);this.__logEvent(c('VideoUploadLogger').EVENT_TIMEOUT_SENDING_CHUNK_BYTES,l)};j.prototype.$VideoUploadSession78=function(event,k){'use strict';this.inform('online',k)};j.prototype.$VideoUploadSession79=function(event,k){'use strict';this.inform('offline',k)};j.prototype.$VideoUploadSession80=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_CALLED,k)};j.prototype.$VideoUploadSession81=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_STARTED,k)};j.prototype.$VideoUploadSession82=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_SUCCESS,k)};j.prototype.$VideoUploadSession83=function(event,k){'use strict';if(this.$VideoUploadSession13!==-1)this.$VideoUploadSession57(k);this.__logEvent(c('VideoUploadLogger').EVENT_RESUMABLE_FAILED,k)};j.prototype.__handlePostRequestFinished=function(event,k){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_POST_REQUEST);if(!k.video_id)k.video_id=this.$VideoUploadSession47;if(!this.$VideoUploadSession5)this.__logFinishedUploading();this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_FLOW);this.$VideoUploadSession60=false;this.$VideoUploadSession88();var l=babelHelpers['extends']({},k,this.$VideoUploadSession56);this.inform('post-finished',l)};j.prototype.__logFinishedUploading=function(){'use strict';this.__logEvent(c('VideoUploadLogger').EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession61,skip_upload:this.$VideoUploadSession86?1:null});this.$VideoUploadSession49=true};j.prototype.$VideoUploadSession84=function(event,k){'use strict';var l=this.__getLogErrorData(k);this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_POST_REQUEST,l);if(this.$VideoUploadSession48){this.__logEvent(c('VideoUploadLogger').EVENT_FAILED_UPLOADING,l);var m=k.error_is_transient?c('VideoUploadLogger').EVENT_RESIGNED_FLOW:c('VideoUploadLogger').EVENT_FAILED_FLOW;this.__logEvent(m)}this.$VideoUploadSession88();this.inform('post-failed',k)};j.prototype.$VideoUploadSession59=function(){'use strict';this.$VideoUploadSession21.cancelRequest();this.$VideoUploadSession23.cancelRequest();if(this.$VideoUploadSession63)if(this.$VideoUploadSession12){var k=0;for(k=0;k<this.$VideoUploadSession43-1;k++)this.$VideoUploadSession25[k].cancelRequest();}else this.$VideoUploadSession25.cancelRequest();this.$VideoUploadSession88();if(this.$VideoUploadSession47){new (c('AsyncRequest'))('/ajax/video/actions/delete').setData({fbid:this.$VideoUploadSession47,redirect:false}).send();this.$VideoUploadSession47=null}};j.prototype.$VideoUploadSession69=function(){'use strict';this.$VideoUploadSession48=true;if(this.$VideoUploadSession8){this.$VideoUploadSession62=new (c('VideoUploadCrashMonitor'))(this.$VideoUploadSession45,this.$VideoUploadSession6,this.$VideoUploadSession1,this.$VideoUploadSession2,this.$VideoUploadSession3,this.$VideoUploadSession16,this.$VideoUploadSession7,!this.$VideoUploadSession5||this.$VideoUploadSession60);this.$VideoUploadSession62.startSession()}};j.prototype.$VideoUploadSession88=function(){'use strict';this.$VideoUploadSession48=false;if(this.$VideoUploadSession62){this.$VideoUploadSession62.endSession();this.$VideoUploadSession62=null}};j.prototype.__getLogErrorData=function(k){'use strict';return {error:k.error_summary,error_code:k.error_code,error_description:k.error_description,transport_retries:k.transport_retries,server_retries:k.server_retries,request_manager_state:k.request_manager_state}};j.prototype.__logEvent=function(event,k){'use strict';var l=this.getLogger();k=k||{};if(this.$VideoUploadSession50){k.file_size=this.$VideoUploadSession50.getSize();k.file_extension=this.$VideoUploadSession50.getExtension();k.sent_bytes=this.$VideoUploadSession51}l.logEvent(event,k)};j.prototype.__getVideoUploadStartRequestManager=function(k,l,m,n,o,p,q){'use strict';return new (c('VideoUploadStartRequestManager'))(k,l,m,n,o,p,q)};j.prototype.__getVideoUploadReceiveRequestManager=function(k,l){'use strict';return new (c('VideoUploadReceiveRequestManager'))(k,l.max_transport_retries,l.max_server_retries,l.response_timeout_enabled,l.max_response_timeout_retries,l.response_timeout_speed_variation_factor_ppt,l.transport_retry_interval_base,l.server_retry_interval_base,l.receive_errors_force_retry,l.access_token,l.resumability_enabled)};j.prototype.__getVideoUploadPostRequestManager=function(k,l){'use strict';return new (c('VideoUploadPostRequestManager'))(k,l.post_max_transport_retries,l.post_transport_retry_interval_base,l.post_max_server_retries,l.post_server_retry_interval_base)};f.exports=j}),null);
__d('VideoUploader',['ArbiterMixin','VideoUploadCrashMonitor','VideoUploadSession','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoUploader1=k;this.$VideoUploader2=null;if(k.monitor_crashes){this.$VideoUploader3=new (c('VideoUploadCrashMonitor'))();this.$VideoUploader3.logKnownCrashes()}}j.prototype.getLogger=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger();};j.prototype.upload=function(k){'use strict';if(this.$VideoUploader2)return;this.$VideoUploader2=this.__getVideoUploadSession(this.$VideoUploader1);this.$VideoUploader2.subscribe(this.__getEventsWhichShouldListenFromSession(),function(event,l){return this.$VideoUploader4(event,l)}.bind(this));this.$VideoUploader2.start(k)};j.prototype.__getVideoUploadSession=function(k){'use strict';return new (c('VideoUploadSession'))(k)};j.prototype.__getEventsWhichShouldListenFromSession=function(){'use strict';return ['upload-requested','upload-started','upload-progressed','upload-finished','upload-failed','post-started','post-finished','post-failed','online','offline','metadata-parsed','set-waterfall-id']};j.prototype.postUserRequest=function(){'use strict';if(!this.$VideoUploader2)return;if(this.$VideoUploader2.startFlow)this.$VideoUploader2.startFlow();};j.prototype.post=function(k){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.post(k)};j.prototype.getVideoID=function(){'use strict';return this.$VideoUploader2.getVideoID()};j.prototype.cancel=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.cancel();this.$VideoUploader2=null};j.prototype.abandon=function(){'use strict';if(!this.$VideoUploader2)return;this.$VideoUploader2.abandon();this.$VideoUploader2=null};j.prototype.reset=function(){'use strict';this.$VideoUploader2=null};j.prototype.getUploadSession=function(){'use strict';return this.$VideoUploader2};j.prototype.getLoggerData=function(){'use strict';return {waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader5:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};j.prototype.isPostInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};j.prototype.isSessionInProgress=function(){'use strict';return !!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};j.prototype.getUploadParameters=function(){'use strict';return this.$VideoUploader1};j.prototype.__getSession=function(){'use strict';return this.$VideoUploader2};j.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){'use strict';return ['upload-failed','post-finished','multimedia-upload-finished']};j.prototype.$VideoUploader4=function(event,k){'use strict';if(this.__getEventsForWhichSessionShouldBeSetToNull().includes(event))this.$VideoUploader2=null;this.__delegateEvent(event,k)};j.prototype.__delegateEvent=function(event,k){'use strict';this.inform(event,k)};f.exports=j}),null);