if (self.CavalryLogger) { CavalryLogger.start_js(["yPXtT"]); }

__d("MessengerDotComPromotionActionURL",[],(function a(b,c,d,e,f,g){f.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("MessengerEmojiConfig",[],(function a(b,c,d,e,f,g){f.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d('EmojiDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('ExplicitRegistrationDispatcher'))({strict:false})}),null);
__d('EmojiActions',['EmojiDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null}),i={Types:h,loadedTrayData:function j(){c('EmojiDispatcher').dispatch({type:i.Types.TRAY_DATA_READY})},updateTrayData:function j(){c('EmojiDispatcher').dispatch({type:i.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function j(k){c('EmojiDispatcher').dispatch({type:i.Types.CHANGE_EMOJI_COLOR,color:k})},changeCurrentCategory:function j(k){c('EmojiDispatcher').dispatch({type:i.Types.CHANGE_CURRENT_CATEGORY,currentCategory:k})},getEmojiColor:function j(){c('EmojiDispatcher').dispatch({type:i.Types.GET_EMOJI_COLOR})},emojiColorReady:function j(k){c('EmojiDispatcher').dispatch({type:i.Types.EMOJI_COLOR_READY,color:k})}};f.exports=i}),null);
__d("XMessagingGetEmojiRecentUsageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/emoji_recent_usage\/",{})}),null);
__d('EmojiServerRequests',['Promise','AsyncRequest','XMessagingGetEmojiRecentUsageController'],(function a(b,c,d,e,f,g){'use strict';var h={fetchTrayData:function j(k){return i(c('XMessagingGetEmojiRecentUsageController').getURIBuilder().getURI(),k,true)}};function i(j,k,l){return new (c('Promise'))(function(m,n){return new (c('AsyncRequest'))(j).setHandler(function(o){return m(o.getPayload())}).setAllowCrossPageTransition(l).send()}).then(k)}f.exports=h}),null);
__d("XMessagingGetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/get_emoji_color\/",{})}),null);
__d("XMessagingSetEmojiColorPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/set_emoji_color\/",{})}),null);
__d('EmojiState',['fbt','AsyncRequest','EmojiActions','EmojiServerRequests','MessengerSupportedEmojiUtils','XMessagingGetEmojiColorPrefController','XMessagingSetEmojiColorPrefController'],(function a(b,c,d,e,f,g,h){'use strict';var i=null,j=null,k=void 0,l={onTrayDataReady:function m(n){if(!k)k=c('EmojiServerRequests').fetchTrayData(function(o){j=o});k.then(function(){n();c('EmojiActions').loadedTrayData()});k.done()},getEmojiColor:function m(){var n=c('XMessagingGetEmojiColorPrefController').getURIBuilder().getURI();new (c('AsyncRequest'))(n).setMethod('POST').setHandler(function(o){c('EmojiActions').emojiColorReady(o.payload)}).send()},changeEmojiColor:function m(n){var o=c('XMessagingSetEmojiColorPrefController').getURIBuilder().getURI();new (c('AsyncRequest'))(o).setMethod('POST').setData({color:n}).send()},addMRUCategory:function m(){if(j){var n=j.map(function(o){return c('MessengerSupportedEmojiUtils').getSupportedEmojiCodesArray(o)}).filter(function(o){return !!o});i={name:h._("Recently Sent"),emojis:n,icon:[128340]};c('EmojiActions').updateTrayData();j=null}},_addRecentlyUsedEmoji:function m(n){var o,p=i&&i.emojis;if(!p)return;var q=function s(t){var u=n[t];for(var v=0;v<p.length;++v)if(p[v].length==u.length&&p[v].every(function(w,x){return w===u[x]})){p.splice(v,1);break}p.unshift(u)};for(var r=0;r<n.length;++r)q(r);c('EmojiActions').updateTrayData()},getMRUCategory:function m(){if(!i)this.addMRUCategory();return i},updateRecentlyUsed:function m(n){if(!i){this.addMRUCategory();return}this._addRecentlyUsedEmoji(n)}};f.exports=l}),null);
__d('EmojiStateStore',['EmojiActions','EmojiDispatcher','EmojiState','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('EmojiDispatcher'));this.$EmojiStateStore2=false}j.prototype.getState=function(){var k=c('EmojiState').getMRUCategory();return {currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[k],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};j.prototype.__onDispatch=function(k){var l=c('EmojiActions').Types;switch(k.type){case l.GET_EMOJI_COLOR:c('EmojiState').getEmojiColor();break;case l.EMOJI_COLOR_READY:this.$EmojiStateStore3=k.color;break;case l.CHANGE_EMOJI_COLOR:c('EmojiState').changeEmojiColor(k.color);this.$EmojiStateStore3=k.color;break;case l.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=k.currentCategory;break;case l.UPDATE_TRAY_DATA:break;case l.TRAY_DATA_READY:this.$EmojiStateStore2=true;break;}this.__emitChange()};f.exports=new j()}),null);
__d('MessagingThreadEventTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessagingThreadEventLoggerConfig',this.$MessagingThreadEventTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessagingThreadEventLoggerConfig',this.$MessagingThreadEventTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$MessagingThreadEventTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessagingThreadEventTypedLogger1=babelHelpers['extends']({},this.$MessagingThreadEventTypedLogger1,j);return this};h.prototype.setActiveTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.active_time_ms=j;return this};h.prototype.setClientEventTimeMs=function(j){this.$MessagingThreadEventTypedLogger1.client_event_time_ms=j;return this};h.prototype.setEvent=function(j){this.$MessagingThreadEventTypedLogger1.event=j;return this};h.prototype.setPageData=function(j){this.$MessagingThreadEventTypedLogger1.page_data=c('GeneratedLoggerUtils').serializeMap(j);return this};h.prototype.setPageID=function(j){this.$MessagingThreadEventTypedLogger1.page_id=j;return this};h.prototype.setScriptPath=function(j){this.$MessagingThreadEventTypedLogger1.script_path=j;return this};h.prototype.setSource=function(j){this.$MessagingThreadEventTypedLogger1.source=j;return this};h.prototype.setThreadID=function(j){this.$MessagingThreadEventTypedLogger1.thread_id=j;return this};h.prototype.setVC=function(j){this.$MessagingThreadEventTypedLogger1.vc=j;return this};var i={active_time_ms:true,client_event_time_ms:true,event:true,page_data:true,page_id:true,script_path:true,source:true,thread_id:true,vc:true};f.exports=h}),null);
__d('MessengerContentSearchDataTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$MessengerContentSearchDataTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerContentSearchDataTypedLogger1=babelHelpers['extends']({},this.$MessengerContentSearchDataTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$MessengerContentSearchDataTypedLogger1.appid=j;return this};h.prototype.setClienttime=function(j){this.$MessengerContentSearchDataTypedLogger1.clienttime=j;return this};h.prototype.setCountry=function(j){this.$MessengerContentSearchDataTypedLogger1.country=j;return this};h.prototype.setMessageID=function(j){this.$MessengerContentSearchDataTypedLogger1.message_id=j;return this};h.prototype.setMessageTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.message_timestamp=j;return this};h.prototype.setNumResults=function(j){this.$MessengerContentSearchDataTypedLogger1.num_results=j;return this};h.prototype.setReadableTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.readable_timestamp=j;return this};h.prototype.setResultIndex=function(j){this.$MessengerContentSearchDataTypedLogger1.result_index=j;return this};h.prototype.setSearchOutcome=function(j){this.$MessengerContentSearchDataTypedLogger1.search_outcome=j;return this};h.prototype.setSearchTerm=function(j){this.$MessengerContentSearchDataTypedLogger1.search_term=j;return this};h.prototype.setSearchType=function(j){this.$MessengerContentSearchDataTypedLogger1.search_type=j;return this};h.prototype.setThreadFbid=function(j){this.$MessengerContentSearchDataTypedLogger1.thread_fbid=j;return this};h.prototype.setVC=function(j){this.$MessengerContentSearchDataTypedLogger1.vc=j;return this};var i={appid:true,clienttime:true,country:true,message_id:true,message_timestamp:true,num_results:true,readable_timestamp:true,result_index:true,search_outcome:true,search_term:true,search_type:true,thread_fbid:true,vc:true};f.exports=h}),null);
__d('MercurySendMessageHandler',['MercuryMessageActions','MercuryMessageObject','MercurySingletonProvider'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$MercurySendMessageHandler1=j;this.$MercurySendMessageHandler2=c('MercuryMessageActions').getForFBID(this.$MercurySendMessageHandler1);this.$MercurySendMessageHandler3=c('MercuryMessageObject').getForFBID(this.$MercurySendMessageHandler1)}h.prototype.sendPlainTextMessage=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructUserGeneratedMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m)};h.prototype.sendSticker=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructStickerMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m)};h.prototype.sendAttachment=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructAttachmentMessageObject(l,j);this.$MercurySendMessageHandler2.addAttachmentPlaceholder(m,k.upload_id,k)};var i=new (c('MercurySingletonProvider'))(h);f.exports=h}),null);
__d('ChatPageComposerNullState.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){return c('React').createElement('div',{className:"_2xh0"},c('React').createElement('div',{className:"_2xh4 _59w_"},c('React').createElement(c('Link.react'),{className:"_2xh6"+(' '+"_2xh7")+(l.disabled?' '+"_5vsu":''),onClick:l.onClick},i._("{name}",[i.param('name',l.title)]))))};f.exports=j}),null);
__d('ChatEmojiPickerButton.react',['cx','fbt','Image.react','ImmutableObject','Keys','React','MessengerHotLikePreviewEvents','MessengerHotLikeUtils','MercuryMessageObject','MercuryTriodeSourceUtil','StickerConstants','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryMessageObject').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ChatEmojiPickerButton1=null,this.$ChatEmojiPickerButton2=null,this.$ChatEmojiPickerButton3=null,this.$ChatEmojiPickerButton5=function(t){t.stopPropagation();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton6=function(t){if(t.keyCode===c('Keys').RETURN){t.preventDefault();this.props.onClick(this.props.emojiData.emojiCodes,this.refs.div)}}.bind(this),this.$ChatEmojiPickerButton7=function(t){t.preventDefault();t.stopPropagation();if(t.button!==0)return;if(!this.props.enableHotEmoji){this.$ChatEmojiPickerButton1=setTimeout(this.$ChatEmojiPickerButton9,1000)}else{this.$ChatEmojiPickerButton1=setTimeout(function(){this.$ChatEmojiPickerButton3=Date.now();this.$ChatEmojiPickerButton10();this.$ChatEmojiPickerButton11()}.bind(this),500);this.props.onMouseDown&&this.props.onMouseDown()}}.bind(this),this.$ChatEmojiPickerButton10=function(){this.$ChatEmojiPickerButton9();if(!this.props.threadID)return;var t=this.$ChatEmojiPickerButton12();c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').START,t,this.props.threadID,this.props.emojiData.emojiCodes)}.bind(this),this.$ChatEmojiPickerButton8=function(t){t.stopPropagation();clearTimeout(this.$ChatEmojiPickerButton1);if(this.props.enableHotEmoji){if(!(this.props.threadID&&this.$ChatEmojiPickerButton3))return;this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton14()}}.bind(this),this.$ChatEmojiPickerButton9=function(){this.props.onLongPress(this.props.emojiData.emojiCodes,this.refs.div)}.bind(this),this.$ChatEmojiPickerButton14=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.props.threadID,true)}.bind(this),this.$ChatEmojiPickerButton15=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').POP,this.props.threadID)}.bind(this),this.$ChatEmojiPickerButton11=function(){this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton2=c('setTimeoutAcrossTransitions')(this.$ChatEmojiPickerButton15,c('MessengerHotLikeUtils').SizeTimes.large)}.bind(this),this.$ChatEmojiPickerButton13=function(){clearTimeout(this.$ChatEmojiPickerButton2)}.bind(this),this.$ChatEmojiPickerButton4=function(){if(this.$ChatEmojiPickerButton3){this.$ChatEmojiPickerButton3=0;this.$ChatEmojiPickerButton13();this.$ChatEmojiPickerButton15()}}.bind(this),p}n.prototype.componentWillUnmount=function(){this.$ChatEmojiPickerButton4();clearTimeout(this.$ChatEmojiPickerButton1);clearTimeout(this.$ChatEmojiPickerButton2)};n.prototype.render=function(){return c('React').createElement('div',{'aria-label':i._("Pick an Emoji"),onClick:this.$ChatEmojiPickerButton5,onKeyDown:this.$ChatEmojiPickerButton6,onMouseDown:this.$ChatEmojiPickerButton7,onMouseLeave:this.$ChatEmojiPickerButton4,onMouseUp:this.$ChatEmojiPickerButton8,ref:'div',role:'button',tabIndex:'1'},c('React').createElement(c('Image.react'),{className:"_1lih _1ift _1ifu",style:{margin:0},src:this.props.emojiData.uri}))};n.prototype.$ChatEmojiPickerButton12=function(){if(!this.props.threadID)return null;var o=l.constructStickerMessageObject(c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.threadID);l.normalizeNewMessage(o);o.is_like_preview=true;o.like_preview_since=this.$ChatEmojiPickerButton3;o.customLike=this.props.emojiData;o.body='';return new (c('ImmutableObject'))(o)};n.propTypes={emojiData:m.object.isRequired,enableHotEmoji:m.bool,onClick:m.func.isRequired,onLongPress:m.func.isRequired,threadID:m.string};f.exports=n}),null);
__d("emojiFormatRe",["EmojiFormat"],(function a(b,c,d,e,f,g){'use strict';function h(m){return m.length}var i=c("EmojiFormat").codeStringToCodeArray;function j(m){return c("EmojiFormat").codeArrayToCodeString(m)}var k=c("EmojiFormat").codeArrayToUnicode,l=c("EmojiFormat").codeStringToUnicode;g.numSegments=h;g.codeStringToCodeArray=i;g.codeArrayToCodeString=j;g.codeArrayToUnicode=k;g.codeStringToUnicode=l}),null);
__d('skinToneEmojiRe',['bs_caml_array','emojiFormatRe','MessengerEmojiConfig'],(function a(b,c,d,e,f,g){'use strict';function h(s){switch(s){case "1f385":case "1f3c3":case "1f3c4":case "1f3ca":case "1f3cb":case "1f442":case "1f443":case "1f446":case "1f447":case "1f448":case "1f449":case "1f44a":case "1f44b":case "1f44c":case "1f44d":case "1f44e":case "1f44f":case "1f450":case "1f466":case "1f467":case "1f468":case "1f469":case "1f46e":case "1f470":case "1f471":case "1f472":case "1f473":case "1f474":case "1f475":case "1f476":case "1f477":case "1f478":case "1f47c":case "1f481":case "1f482":case "1f483":case "1f485":case "1f486":case "1f487":case "1f4aa":case "1f575":case "1f590":case "1f595":case "1f596":case "1f645":case "1f646":case "1f647":case "1f64b":case "1f64c":case "1f64d":case "1f64e":case "1f64f":case "1f6a3":case "1f6b4":case "1f6b5":case "1f6b6":case "1f6c0":case "1f918":case "261d":case "26f9":case "270a":case "270b":case "270c":case "270d":return 1;default:return 0;}}function i(s){var t=+(c('bs_caml_array').caml_array_get(s,s.length-1|0)===65039);if(t!==0){return c('bs_caml_array').caml_array_get(s,s.length-1|0)}else return 0;}function j(s){if(c('bs_caml_array').caml_array_get(s,s.length-1|0)===65039){return s}else{var t=s.slice(0);return t.concat(65039)}}function k(s){var t=+(i(s)===0);if(t!==0){return s}else return s.slice(0,s.length-1|0);}function l(s){var t=c('MessengerEmojiConfig').emoji_colors,u=t.filter(function(v){return +(v===s)});return +(u.length!==0)}function m(s){var t=k(s);if(t.length<=1||!l(c('bs_caml_array').caml_array_get(t,t.length-1|0))){return 0}else return c('bs_caml_array').caml_array_get(t,t.length-1|0);}function n(s){var t=i(s),u=+(t===0),v=u!==0?m(s):m(s.slice(0,s.length-1|0));if(v!==0){var w=+(t===0);if(w!==0){return s.slice(0,s.length-1|0)}else return j(s.slice(0,s.length-2|0));}else return s;}function o(s,t){if(t!==0){var u=i(s),v=+(u===0),w=v!==0?s.slice(0):s.slice(0,s.length-1|0),x=m(w);if(x!==0){return s}else{var y=w.concat(t),z=+(u===0);if(z!==0){return y}else return y.concat(u);}}else return s;}function p(s){return n(k(s))}function q(s){return h(c('emojiFormatRe').codeArrayToCodeString(n(k(s))))}var r=65039;g.emoji_modifier_code=r;g.emoji=h;g.getEmojiModifier=i;g.addEmojiModifier=j;g.removeEmojiModifier=k;g.isToneModifier=l;g.getTone=m;g.removeTone=n;g.applyTone=o;g.removeAllModifiers=p;g.hasVariations=q}),null);
__d('ChatEmojiPicker.react',['cx','ChatEmojiPickerButton.react','ChatEmojiSkinToneSelector.react','EmojiActions','EmojiFormat','EmojiLikeConstants','Grid.react','MessengerHotLikePreviewEvents','MessengerScrollableArea.react','MessengerSupportedEmojiUtils','React','skinToneEmojiRe','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Grid.react').GridItem,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ChatEmojiPicker1=false,this.$ChatEmojiPicker2=null,this.state={clickedEmoji:null,selectedEmoji:[],toneSelectorShown:false,toneSelectorContext:null},this.componentDidMount=function(){this.$ChatEmojiPicker2=new (c('SubscriptionsHandler'))();this.$ChatEmojiPicker2.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(s,t,u){if(u&&this.props.useSkinToneSelector&&!c('skinToneEmojiRe').hasVariations(u)&&this.state.toneSelectorShown)this.$ChatEmojiPicker3();}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(s,t,u){if(s===this.props.threadID)if(u&&this.state.clickedEmoji&&this.props.sendCustomEmoji){this.props.sendCustomEmoji({emoji:c('EmojiFormat').codeArrayToUnicode(this.state.clickedEmoji)},u,c('EmojiLikeConstants').source.PICKER);this.setState({clickedEmoji:null})}}.bind(this)))}.bind(this),this.componentWillUnmount=function(){this.$ChatEmojiPicker2&&this.$ChatEmojiPicker2.release()}.bind(this),this.scrollToTop=function(s){this.refs.scrollable.scrollToTop(s)}.bind(this),this.$ChatEmojiPicker7=function(s){if(this.props.shouldSaveEmojiColorChoice){var t=c('skinToneEmojiRe').getTone(s);c('EmojiActions').changeEmojiColor(t)}this.props.onSelect&&this.props.onSelect(s)}.bind(this),this.$ChatEmojiPicker8=function(s,t){this.setState({toneSelectorShown:true,selectedEmoji:s,toneSelectorContext:t})}.bind(this),this.$ChatEmojiPicker4=function(s,t){if(this.props.shouldSaveEmojiColorChoice&&this.props.useSkinToneSelector&&c('skinToneEmojiRe').hasVariations(s)){this.$ChatEmojiPicker8(s,t);this.$ChatEmojiPicker1=false}else if(this.$ChatEmojiPicker1){this.$ChatEmojiPicker1=false}else this.$ChatEmojiPicker7(s);}.bind(this),this.$ChatEmojiPicker5=function(s,t){if(this.props.useSkinToneSelector&&c('skinToneEmojiRe').hasVariations(s)){this.$ChatEmojiPicker8(s,t)}else this.setState({clickedEmoji:s});this.$ChatEmojiPicker1=true}.bind(this),this.$ChatEmojiPicker6=function(){if(!this.$ChatEmojiPicker1)this.$ChatEmojiPicker3();}.bind(this),this.$ChatEmojiPicker3=function(){this.setState({toneSelectorShown:false})}.bind(this),o}m.prototype.render=function(){var n=this.props.emojiChoices.map(function(o){var p=String.fromCodePoint.apply(String,o),q=c('MessengerSupportedEmojiUtils').getUrl(c('EmojiFormat').codeArrayToCodeString(o),c('EmojiLikeConstants').size.SMALL),r=this.props.enableHotEmoji||!c('skinToneEmojiRe').hasVariations(o);return q?c('React').createElement(k,{key:o.join('_'),className:"_3-sy"},c('React').createElement('div',{className:(p===this.props.currentEmoji?"_4rlt":'')+(' '+"_4rlu")},c('React').createElement(c('ChatEmojiPickerButton.react'),{emojiData:{emojiCodes:o,uri:q},enableHotEmoji:r,onClick:this.$ChatEmojiPicker4,onLongPress:this.$ChatEmojiPicker5,threadID:this.props.threadID}))):null}.bind(this)).filter(function(o){return !!o});return c('React').createElement(c('MessengerScrollableArea.react'),{className:this.props.className,height:this.props.height,onScroll:this.$ChatEmojiPicker3,ref:'scrollable'},c('React').createElement(c('Grid.react'),{cols:this.props.columns,className:"_3-s_"},n),this.props.useSkinToneSelector?c('React').createElement(c('ChatEmojiSkinToneSelector.react'),{context:this.state.toneSelectorContext,emojiCodes:this.state.selectedEmoji,onBlur:this.$ChatEmojiPicker6,onSelect:this.$ChatEmojiPicker7,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,shown:this.state.toneSelectorShown,threadID:this.props.threadID}):null)};m.propTypes={className:l.string,columns:l.number,currentEmoji:l.string,emojiChoices:l.arrayOf(l.arrayOf(l.number)).isRequired,enableHotEmoji:l.bool,height:l.string,onSelect:l.func,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string,useSkinToneSelector:l.bool};m.defaultProps={columns:7,useSkinToneSelector:false};f.exports=m}),null);
__d('ChatEmojiSkinToneFlyout.react',['cx','fbt','ChatEmojiPicker.react','MessengerEmojiConfig','React','skinToneEmojiRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n,o=this,p=[];if(this.props.emojiCodes.length>0)(function(){var r=c('skinToneEmojiRe').removeTone(o.props.emojiCodes);p=c('MessengerEmojiConfig').emoji_colors.map(function(s){return c('skinToneEmojiRe').applyTone(r,s)})})();var q=null;if(this.props.shouldSaveEmojiColorChoice)q=c('React').createElement('div',{className:"_4gww"},i._("Pick one. You can change it anytime in Settings."));return c('React').createElement('div',null,q,c('React').createElement(c('ChatEmojiPicker.react'),{className:this.props.className,columns:6,emojiChoices:p,enableHotEmoji:true,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,threadID:this.props.threadID}))};function m(){j.apply(this,arguments)}m.propTypes={className:l.string,emojiCodes:l.arrayOf(l.number).isRequired,onSelect:l.func.isRequired,sendCustomEmoji:l.func,shouldSaveEmojiColorChoice:l.bool,threadID:l.string};f.exports=m}),null);
__d('ChatEmojiSkinToneSelector.react',['cx','ChatEmojiSkinToneFlyout.react','ContextualLayerAutoFlip','React','XUIContextualDialog.react','emptyFunction'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=220;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c('React').createElement(c('XUIContextualDialog.react'),{behaviors:{ContextualLayerAutoFlip:c('ContextualLayerAutoFlip')},context:this.props.context,contextRef:c('emptyFunction'),onBlur:this.props.onBlur,onToggle:this.$ChatEmojiSkinToneSelector1,shown:this.props.shown,width:l},c('React').createElement(c('ChatEmojiSkinToneFlyout.react'),{className:"_2ejf",emojiCodes:this.props.emojiCodes,onSelect:this.props.onSelect,sendCustomEmoji:this.props.sendCustomEmoji,shouldSaveEmojiColorChoice:this.props.shouldSaveEmojiColorChoice,threadID:this.props.threadID}))};function m(){i.apply(this,arguments)}m.propTypes={context:k.instanceOf(HTMLElement),emojiCodes:k.arrayOf(k.number).isRequired,onBlur:k.func.isRequired,onSelect:k.func.isRequired,sendCustomEmoji:k.func,shouldSaveEmojiColorChoice:k.bool,shown:k.bool,threadID:k.string};f.exports=m}),null);
__d('ChatEmojiSkinTonePreferencePicker.react',['ChatEmojiPicker.react','MessengerEmojiConfig','React','skinToneEmojiRe'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=128077;h=babelHelpers.inherits(l,c('React').PureComponent);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$ChatEmojiSkinTonePreferencePicker1=function(r){var s=c('skinToneEmojiRe').getTone(r);this.props.onSelect&&this.props.onSelect(s)}.bind(this),n}l.prototype.render=function(){var m=null;try{m=this.props.currentPreference?String.fromCodePoint.apply(String,c('skinToneEmojiRe').applyTone([k],this.props.currentPreference)):String.fromCodePoint(k)}catch(n){m=String.fromCodePoint(k)}return c('React').createElement(c('ChatEmojiPicker.react'),{className:this.props.className,columns:this.props.columns,currentEmoji:m,emojiChoices:c('MessengerEmojiConfig').emoji_colors.map(function(n){return c('skinToneEmojiRe').applyTone([k],n)}),onSelect:this.$ChatEmojiSkinTonePreferencePicker1})};l.propTypes={className:j.string,columns:j.number,currentPreference:j.number,onSelect:j.func};l.defaultProps={columns:6};f.exports=l}),null);
__d('MontageThreadViewContainer.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('MontageThreadViewContainerImpl.react').__setRef('MontageThreadViewContainer.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('MessengerDesktopNotificationPermissions',[],(function a(b,c,d,e,f,g){var h={DEFAULT:'default',DENIED:'denied',GRANTED:'granted'};f.exports=h}),null);
__d('MessengerDesktopNotifications',['Map','MessengerDesktopNotificationPermissions','Run','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=5000,i=new (c('Map'))();function j(){i.forEach(function(l,m,n){l.close&&l.close()})}var k={_closeTimer:null,isSupported:function l(){return !!window.Notification},checkPermission:function l(){if(window.Notification)return window.Notification.permission;},hasDefaultSound:function l(){return c('UserAgent').isBrowser('FireFox')&&c('UserAgent').isPlatform('Mac OS X')},isDenied:function l(){return this.checkPermission()===c('MessengerDesktopNotificationPermissions').DENIED},isGranted:function l(){return this.checkPermission()===c('MessengerDesktopNotificationPermissions').GRANTED},requestPermission:function l(m){if(window.Notification)window.Notification.requestPermission(m);},showNotification:function l(m){if(this.isGranted()){var n=window.Notification?new window.Notification(m.title,{body:m.body,icon:m.icon,tag:m.tag}):{};i.set(m.tag,n);n.onclick=m.onClick;n.onclose=function(){i['delete'](m.tag)};this._closeTimer=setTimeout(function(){n.close()},m.closeTime||h);return n}else return null;}};c('Run').onUnload(j);f.exports=k}),null);
__d("XMessengerDotComSettingsEditController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/settings\/edit\/",{})}),null);
__d('MessengerSettingsActions',['AsyncRequest','CurrentEnvironment','MessengerDispatcher','MessengerDesktopNotifications','MessengerDesktopNotificationPermissions','MessengerURIConstants','XMessengerDotComSettingsEditController','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null}),i={Types:h,changeSettings:function j(k){var l=c('XMessengerDotComSettingsEditController').getURIBuilder().getURI();if(c('CurrentEnvironment').facebookdotcom)l.setPath(c('MessengerURIConstants').FACEBOOK_PREFIX+l.getPath());new (c('AsyncRequest'))().setData({settings:k}).setURI(l).send();c('MessengerDispatcher').dispatch({type:h.CHANGE_SETTINGS,newSettings:k})},changeDesktopNotifs:function j(k,l){if(k&&!c('MessengerDesktopNotifications').isGranted()){c('MessengerDesktopNotifications').requestPermission(function(m){if(m!==c('MessengerDesktopNotificationPermissions').GRANTED){if(c('MessengerDesktopNotifications').checkPermission()===c('MessengerDesktopNotificationPermissions').DENIED)l&&l();return}c('MessengerDispatcher').dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k})})}else c('MessengerDispatcher').dispatch({type:h.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:k});}};f.exports=i}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logging\/promotion\/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("messengerSignalsRe",["EventEmitter"],(function a(b,c,d,e,f,g){'use strict';var h=new (c("EventEmitter"))(),i="resize";function j(){h.emit(i);return 0}function k(l){return h.addListener(i,l)}g.emitter=h;g.resizeEvent=i;g.resize=j;g.onResize=k}),null);
__d('MessengerNotificationBanner.react',['cx','ix','AsyncRequest','Image.react','messengerButtonReact','MessengerDesktopNotifications','MessengerDotComPromotionActionURL','MessengerSettingsActions','messengerSignalsRe','React','XMessengerDotComNUXLoggingController','XQuickPromotionSimpleLoggingController','goURI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerButtonReact').jsComponent,m=c('React').PropTypes,n=i("86832"),o=i("86833");j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={bannerClosed:false},this.$MessengerNotificationBanner1=function(){return c('MessengerDesktopNotifications').isGranted()||c('MessengerDesktopNotifications').isDenied()||this.state.bannerClosed}.bind(this),this.$MessengerNotificationBanner3=function(){return c('React').createElement(l,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$MessengerNotificationBanner4,type:'primary'})}.bind(this),this.$MessengerNotificationBanner4=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID){new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','primary').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();if(this.props.primaryActionURI===c('MessengerDotComPromotionActionURL').turn_on_notification){c('MessengerSettingsActions').changeDesktopNotifs(true)}else window.open(this.props.primaryActionURI);}else if(this.props.primaryActionURI)c('goURI')(this.props.primaryActionURI,true);}.bind(this),this.$MessengerNotificationBanner2=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID)new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','dismiss').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();}.bind(this),this.$MessengerNotificationBanner5=function(){this.setState({bannerClosed:true},function(){c('messengerSignalsRe').resize()})}.bind(this),r}p.prototype.componentWillReceiveProps=function(q){if(!q.promotionID)this.setState({bannerClosed:false});};p.prototype.componentDidMount=function(){if(this.$MessengerNotificationBanner1()||!this.props.promotionID)return;new (c('AsyncRequest'))().setURI(c('XMessengerDotComNUXLoggingController').getURIBuilder().setInt('promotion_id',this.props.promotionID).setStringToStringMap('instance_log_data',this.props.instanceLogData).getURI()).send()};p.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event('resize'))};p.prototype.render=function(){if(this.$MessengerNotificationBanner1())return null;return c('React').createElement('div',{className:"_2cij"},c('React').createElement(c('Image.react'),{className:"_2cik",onClick:this.$MessengerNotificationBanner2,src:n}),c('React').createElement(c('Image.react'),{className:"_2cil",src:o}),this.props.promotionContent,' ',this.$MessengerNotificationBanner3())};p.propTypes={promotionID:m.number,promotionContent:m.string,primaryActionTitle:m.string,primaryActionURI:m.string,instanceLogData:m.object};f.exports=p}),null);
__d('MessengerRefreshPrompt',['fbt','Visibility','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i=1000*60*60,j=1000*60*60*24*3,k=function l(m){var n=Date.now();c('setIntervalAcrossTransitions')(function(){if(Date.now()-n>j)c('Visibility').once(c('Visibility').VISIBLE,function(){m({promotionID:null,promotionContent:h._("A new version of Messenger is available."),primaryActionTitle:h._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href});n=Date.now()});},i)};f.exports=k}),null);
__d('MessengerBanner.react',['MessengerNotificationBanner.react','MessengerRefreshPrompt','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={promotionData:this.props.initialPromotionData},m}k.prototype.componentDidMount=function(){c('MessengerRefreshPrompt')(function(l){return this.setState({promotionData:l})}.bind(this))};k.prototype.render=function(){var l=this.state.promotionData;if(l&&l.primaryActionURI)return c('React').createElement(c('MessengerNotificationBanner.react'),{promotionID:l.promotionID,promotionContent:l.promotionContent,primaryActionTitle:l.primaryActionTitle,primaryActionURI:l.primaryActionURI,instanceLogData:l.instanceLogData});return null};k.propTypes={initialPromotionData:j.object,isFirstRedirect:j.bool};f.exports=k}),null);
__d('MessengerSettingsStore',['CacheStorage','MessengerSettingsActions','MessengerStore','MessengerDotComSettingsInitialData'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('CacheStorage'))('localstorage'),k='desktopNotifsEnabled';h=babelHelpers.inherits(l,c('MessengerStore'));i=h&&h.prototype;function l(){i.constructor.call(this);this.$MessengerSettingsStore1=babelHelpers['extends']({},c('MessengerDotComSettingsInitialData'),{desktopNotifsEnabled:this.$MessengerSettingsStore2()})}l.prototype.getSettings=function(){return this.$MessengerSettingsStore1};l.prototype.$MessengerSettingsStore2=function(){return j.get(k,false)};l.prototype.$MessengerSettingsStore3=function(m){j.set(k,m)};l.prototype.__onDispatch=function(m){switch(m.type){case c('MessengerSettingsActions').Types.CHANGE_SETTINGS:this.$MessengerSettingsStore1=babelHelpers['extends']({},this.$MessengerSettingsStore1,m.newSettings);this.emitChange();break;case c('MessengerSettingsActions').Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore1=babelHelpers['extends']({},this.$MessengerSettingsStore1,{desktopNotifsEnabled:m.desktopNotifsEnabled});this.$MessengerSettingsStore3(m.desktopNotifsEnabled);this.emitChange();break;}};f.exports=new l()}),null);
__d("MessagingThreadEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"})}),null);
__d("MessagingThreadSourceName",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHAT_NUB:"chat_nub",MESSENGER:"messenger"})}),null);
__d('MessengerLoggerUtils',['MercuryIDs','MessagingThreadEventType','MessagingThreadEventTypedLogger','MessagingThreadSourceName','ScriptPath','pageID'],(function a(b,c,d,e,f,g){var h={logThreadChangeEvent:function i(j,k,l,m){if(l.activeThreadID&&j)this.log({activeThreadID:l.activeThreadID,event:c('MessagingThreadEventType').INACTIVE,clientEventTimeMs:k,activeTimeMs:k-j});if(m.activeThreadID)this.log({activeThreadID:m.activeThreadID,event:c('MessagingThreadEventType').ACTIVE,clientEventTimeMs:k,activeTimeMs:0});},log:function i(j){var k=c('MercuryIDs').tokenize(j.activeThreadID.toString()),l=c('ScriptPath').getPageInfo();new (c('MessagingThreadEventTypedLogger'))().setEvent(j.event).setClientEventTimeMs(j.clientEventTimeMs).setActiveTimeMs(j.activeTimeMs).setPageID(c('pageID')).setPageData(l?l.extraData:{}).setThreadID(k.value).setSource(c('MessagingThreadSourceName').MESSENGER).log()}};f.exports=h}),null);
__d('MessengerStateStore',['MessengerActions','MessengerLoggerUtils','MessengerStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){i.constructor.call(this);this.$MessengerStateStore1={activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null};this.$MessengerStateStore2=babelHelpers['extends']({},this.$MessengerStateStore1);this.$MessengerStateStore4=this.$MessengerStateStore3=null}j.prototype.getState=function(){return this.$MessengerStateStore1};j.prototype.getPrevState=function(){return this.$MessengerStateStore2};j.prototype.__onDispatch=function(k){switch(k.type){case c('MessengerActions').Types.REPLACE_STATE:this.$MessengerStateStore2=this.$MessengerStateStore1;this.$MessengerStateStore4=this.$MessengerStateStore3;this.$MessengerStateStore1=babelHelpers['extends']({activeThreadID:null,detailView:null,filter:null,folder:null,masterView:null,query:null,mid:null,serverThreadID:null,extraQueryParams:null},k.nextState);var l=Date.now();this.$MessengerStateStore3=l;c('MessengerLoggerUtils').logThreadChangeEvent(this.$MessengerStateStore4,l,this.$MessengerStateStore2,this.$MessengerStateStore1);this.emitChange();break;}};f.exports=new j()}),null);
__d('MessengerBrowserAlerts',['fbt','DocumentTitle','Event','ImageSourceRequest','ImageSourceType','Map','MercuryAttachmentSnippetRenderer','mercuryBlockedParticipantsRe','MercuryIDs','MercuryLogMessageType','MercuryParticipants','MercuryThreadInfo','MercuryThreadInformer','MercuryThreads','MercuryUnseenState','MessagingTag','MessengerActions','MessengerConfig','MessengerDesktopNotifications','MessengerEnvironment','MessengerFaviconUrls','MessengerSettingsStore','MessengerStateStore','MercuryNotificationRenderer','PhotoResizeModeConst','Sound','UserActivity'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('mercuryBlockedParticipantsRe').get(),j=8000,k=80,l=3,m=600000,n=new (c('Map'))(),o=0,p=null;function q(){n=new (c('Map'))()}function r(u){if(c('MessengerSettingsStore').getSettings().sound_enabled)c('Sound').play([c('MessengerConfig')['sound.notif_ogg_url'],c('MessengerConfig')['sound.notif_mp3_url']],u,false);}function s(u,v,w){if(!u.snippet_sender)return;var x=n.get(u.thread_id)||0;if(x>=l)return;n.set(u.thread_id,x+1);c('MercuryParticipants').get(u.snippet_sender,function(y){var z=u.snippet,aa=u.custom_nickname&&u.custom_nickname[c('MercuryIDs').getUserIDFromParticipantID(y.id)],ba=aa?aa:y.short_name;if(!z&&u.snippet_attachments&&u.snippet_attachments.length>0)z=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(u.snippet_attachments),false,ba,u.snippet_attachments);var ca=aa?aa:y.name;if(!u.is_canonical)ca=u.name?h._("{sender's name} to {group name}",[h.param('sender\'s name',ba),h.param('group name',u.name)]):h._("{sender's name} to your group",[h.param('sender\'s name',ba)]);c('MessengerDesktopNotifications').showNotification({title:ca,body:z,icon:u.image_src||v||y.big_image_src||y.image_src,closeTime:null,onClick:function da(){window.focus();c('MessengerActions').selectThread(u.thread_id)},tag:w.message_id});if(!c('MessengerDesktopNotifications').hasDefaultSound())r(w.timestamp);})}var t={init:function u(v){this._viewer=v;this._threadInformer=c('MercuryThreadInformer').getForFBID(this._viewer);this._threads=c('MercuryThreads').getForFBID(this._viewer);this._unseenState=c('MercuryUnseenState').getForFBID(this._viewer);this._highResImageMap=new (c('Map'))();c('Event').listen(window,'focus',function(){q();clearInterval(o)});c('Event').listen(window,'blur',function(){o=setInterval(q,m)});this._threadInformer.subscribe('messages-received',function(w,x){for(var y in x)x[y].forEach(function(z){this.handleMessageReceived(z)}.bind(this));}.bind(this));this._threadInformer.subscribe('unseen-updated',this._handleUnseenUpdated.bind(this))},handleMessageReceived:function u(v){if(v.author===this._viewer||!v.is_unread||v.thread_id===c('MessengerStateStore').getState().activeThreadID&&c('UserActivity').isOnTab()||v.folder!=c('MessagingTag').INBOX&&v.folder!=c('MessagingTag').ARCHIVED)return;this._threads.getThreadMeta(v.thread_id,function(w){if(c('MercuryThreadInfo').isMuted(w))if(!c('MercuryThreadInfo').areMentionsMuted(w)){if(!v.profile_ranges||!v.profile_ranges.some||!v.profile_ranges.some(function(x){return x.id===this._viewer}.bind(this)))return;}else return;if(i.isPresentInGroupThread(w))return;if(c('MessengerSettingsStore').getSettings().desktopNotifsEnabled&&!c('UserActivity').isOnTab()){this._attemptDesktopNotification(w,v)}else if(v.log_message_type!==c('MercuryLogMessageType').UNSUBSCRIBE)r(v.timestamp);if(!c('UserActivity').isOnTab()&&this._unseenState.getUnseenCount()>0)c('MercuryNotificationRenderer').renderDocumentTitle(v.thread_id,function(x){if(!p)p=c('DocumentTitle').blink(x);});}.bind(this))},showRTCNotification:function u(v,w){if(c('UserActivity').isOnTab()){w(null);return}var x=v.peerID;if(!this._highResImageMap.has(x)){var y=function(z,aa){this._highResImageMap.set(x.toString(),aa.uri);this._displayRTCDesktopNotification(aa.uri,v,w)}.bind(this);new (c('ImageSourceRequest'))().setFBID(x).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(y.bind(null,x)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(x),v,w);},_updateFavicon:function u(v){if(c('MessengerEnvironment').facebookdotcom)return;var w=document.querySelector('link[rel*=icon][href*=".ico"]');if(!w)return;if(v===0){w.href=c('MessengerFaviconUrls')['default']}else w.href=c('MessengerFaviconUrls').unread;},_displayRTCDesktopNotification:function u(v,w,x){var y=c('MercuryIDs').getParticipantIDFromUserID(w.peerID),z=null;c('MercuryParticipants').get(y,function(aa){var ba=void 0;if(w.isVideoCall){if(w.isGroupCall){ba=h._("Incoming group video chat")}else ba=h._("Incoming video call");}else if(w.isGroupCall){ba=h._("Incoming group call")}else ba=h._("Incoming audio call");var ca=h._("{caller} is calling you. Click to answer.",[h.param('caller',aa.short_name)]);z=c('MessengerDesktopNotifications').showNotification({title:ba,body:ca,icon:v,closeTime:j,onClick:function da(){window.focus();w.onNotificationClicked()}});x(z)})},_handleUnseenUpdated:function u(){var v=this._unseenState.getUnseenCount();if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()&&v>0){this._updateFavicon(0);this._unseenState.markAsSeen();return}var w=c('DocumentTitle').get(),x=v?'('+v+') '+w:w;c('DocumentTitle').set(x,true);this._updateFavicon(v);if(p&&v===0){p.stop();p=null}if(!this._focusToken&&v>0)this._focusToken=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this._focusToken&&this._focusToken.unsubscribe();this._focusToken=null;this._unseenState.markAsSeen()}}.bind(this));},_attemptDesktopNotification:function u(v,w){if(!v.snippet_sender)return;if(!this._highResImageMap.has(v.snippet_sender)){var x=function(y,z){this._highResImageMap.set(v.snippet_sender,z.uri);s(v,z.uri,w)}.bind(this);new (c('ImageSourceRequest'))().setFBID(c('MercuryIDs').getUserIDFromParticipantID(v.snippet_sender)).setType(c('ImageSourceType').PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c('PhotoResizeModeConst').COVER).setCallback(x.bind(null,v.snippet_sender)).send()}else s(v,this._highResImageMap.get(v.snippet_sender),w);}};f.exports=t}),null);
__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d('MessengerEditorStateManager',['CacheStorage','ComposedEntityMutability','ComposedEntityMutabilityToName','ComposedEntityTypeToName','DraftEntityInstance','EditorState','MessengerConstants','SelectionState','decodeBlocks','encodeBlocks','mapObject'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('CacheStorage'))('localstorage'),i=c('ComposedEntityMutability').IMMUTABLE,j=void 0,k={get:function l(m){if(!m)return this._getEmptyEditorState();if(m===c('MessengerConstants').NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c('mapObject')(o.entityMap,function(s,t){return new (c('DraftEntityInstance'))({type:c('ComposedEntityTypeToName')[s.type],mutability:c('ComposedEntityMutabilityToName')[i],data:s.data})}),q=c('decodeBlocks')(o.blocks,p),r=c('EditorState').createWithContent(q);return c('EditorState').acceptSelection(r,new (c('SelectionState'))(n.selection))},set:function l(m,n){if(m===c('MessengerConstants').NEW_THREAD_KEY){j=n;return}var o=c('encodeBlocks')(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p})},_getEmptyEditorState:function l(){var m=c('EditorState').createEmpty();return c('EditorState').forceSelection(m,m.getSelection())}};f.exports=k}),null);
__d('MessengerComposerActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null}),i={Types:h,addToken:function j(k){c('MessengerDispatcher').dispatch({type:h.ADD_TOKEN,entry:k})},moveDraftToNextThread:function j(k){c('MessengerDispatcher').dispatch({type:h.MOVE_DRAFT,threadID:k})},removeToken:function j(k){c('MessengerDispatcher').dispatch({type:h.REMOVE_TOKEN,entry:k})},focusComposer:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_COMPOSER})},focusTypeahead:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_TYPEAHEAD})},exitComposeState:function j(){c('MessengerDispatcher').dispatch({type:h.EXIT_COMPOSE_STATE})}};f.exports=i}),null);
__d('MessengerComposerState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Record({step:null,recipients:c('immutable').List()});h.__TCmeta={type:'MessengerComposerState'};f.exports=h}),null);
__d('MessengerComposerSteps',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h}),null);
__d('MessengerComposerStore',['EditorState','immutable','MessengerActions','MessengerComposerActions','MessengerComposerState','MessengerComposerSteps','MessengerConstants','MessengerDispatcher','MessengerEditorStateManager','MessengerStateStore','MessengerStore','MessengerView'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('MessengerComposerState'))({step:c('MessengerComposerSteps').NULL,recipients:c('immutable').List()});h=babelHelpers.inherits(k,c('MessengerStore'));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j}k.prototype.getState=function(){return this.$MessengerComposerStore1};k.prototype.__onDispatch=function(l){c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var m=c('MessengerStateStore').getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c('MessengerComposerActions').Types.ADD_TOKEN:if(n.some(function(v){return v.getUniqueID()===l.entry.getUniqueID()}))break;p=n.push(l.entry);break;case c('MessengerComposerActions').Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r});if(s!==-1)p=n['delete'](s);break;case c('MessengerComposerActions').Types.FOCUS_COMPOSER:if(o===c('MessengerComposerSteps').SELECT_RECIPIENTS)q=c('MessengerComposerSteps').COMPOSE;break;case c('MessengerComposerActions').Types.FOCUS_TYPEAHEAD:if(o===c('MessengerComposerSteps').COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerActions').Types.REPLACE_STATE:var t=c('MessengerStateStore').getPrevState().detailView;if(t!==c('MessengerView').DETAIL.COMPOSE&&m===c('MessengerView').DETAIL.COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerComposerActions').Types.MOVE_DRAFT:c('MessengerEditorStateManager').set(l.threadID,c('MessengerEditorStateManager').get(c('MessengerConstants').NEW_THREAD_KEY));break;case c('MessengerComposerActions').Types.EXIT_COMPOSE_STATE:var u=c('EditorState').createEmpty();setTimeout(function(){c('MessengerEditorStateManager').set(c('MessengerConstants').NEW_THREAD_KEY,c('EditorState').forceSelection(u,u.getSelection()))},0);q=c('MessengerComposerSteps').NULL;p=c('immutable').List();break;}if(p||q){this.$MessengerComposerStore1=new (c('MessengerComposerState'))({step:q||o,recipients:p||n});this.emitChange()}};f.exports=new k()}),null);
__d('MessengerMDotMeReferralStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null}}j.prototype.getState=function(){'use strict';return this.$MessengerMDotMeReferralStore1};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange();}};f.exports=new j()}),null);
__d('MessengerPage',['EventEmitter','EventEmitterWithHolding','EventHolder','keyMirror','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){'use strict';var h={Events:c('keyMirror')({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l)},emit:function j(k){i.emitAndHold(k,c('performanceAbsoluteNow')())},removeCurrentListener:function j(){i.removeCurrentListener()}},i=new (c('EventEmitterWithHolding'))(new (c('EventEmitter'))(),new (c('EventHolder'))());f.exports=h}),null);
__d('MessengerRTCMessageHandler',['Bootloader','FBRTCCallSummaryUploader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j={init:function m(){if(c('FBRTCSupport').isReceiveWebrtcSupported()){c('FBRTCCallSummaryUploader').init();c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(n){k()});c('FBRTCMessageListener').once('multiwayMessageReceived',function(n){l(n)})}}};function k(){if(!h)c('Bootloader').loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(m,n,o,p){h=new m(n,p,o);c('FBRTCMessageListener').setMessageHandler(h.onMessageReceived,h)},'MessengerRTCMessageHandler');}function l(m){if(!i)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(n,o){i=new n(o);c('FBRTCMessageListener').setMultiwayMessageHandler(i.onMessageReceived,i);i.onMessageReceived(m)},'MessengerRTCMessageHandler');}f.exports=j}),null);
__d('MercurySearchContextResults',['KeyedCallbackManager','MercuryAPIArgsSource','MercuryIDs','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor','WebMessengerConstants'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=c('MercuryServerPayloadPreprocessor').get(),j=new (c('KeyedCallbackManager'))(),k=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=c('WebMessengerConstants').MORE_SEARCH_CONTEXT_COUNT,m={getSearchContext:function q(r,s,t){if(r){var u=j.executeOrEnqueue(r,function(z){var aa=o(z,r);t(aa)}),v=j.getUnavailableResources(u);if(v.length){var w={message_id:r,limit:k+1},x=h.getServerIDFromClientIDNow(s),y=c('MercuryIDs').tokenize(s);if(y.type=='user'){w.other_user_fbid=x}else w.thread_fbid=x;p(w)}return u}},getMoreSearchContext:function q(r,s,t,u){if(r){var v=j.getResource(r);if(v){var w=t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP?v.up_message_ids:v.down_message_ids,x=w.getCurrentArraySize()+l,y=w.executeOrEnqueue(0,x,function(){var da=o(v,r);u(da)}),z=w.getUnavailableResources(y);if(z.length){var aa={message_id:r,limit:x,direction:t},ba=h.getServerIDFromClientIDNow(s),ca=c('MercuryIDs').tokenize(s);if(ca.type=='user'){aa.other_user_fbid=ba}else aa.thread_fbid=ba;p(aa)}return y}}},handleUpdate:function q(r){if(r.mercury_payload)i.handleUpdate(r.mercury_payload);var s=r.search_context||{};for(var t in s){var u=s[t],v=u.other_user_fbid||u.thread_fbid,w=h.getClientIDFromServerIDNow(v),x=!j.getResource(t),y=x?{thread_id:w,up_message_ids:new (c('RangedCallbackManager'))(),down_message_ids:new (c('RangedCallbackManager'))()}:j.getResource(t),z=x?k+1:l;if(u.up_message_ids&&(y.up_message_ids.getCurrentArraySize()===0||u.up_message_ids.length>=y.up_message_ids.getCurrentArraySize()))n(y.up_message_ids,u.up_message_ids,z);if(u.down_message_ids&&(y.down_message_ids.getCurrentArraySize()===0||u.down_message_ids.length>=y.down_message_ids.getCurrentArraySize()))n(y.down_message_ids,u.down_message_ids,z);if(x)j.setResource(t,y);}},unsubscribe:function q(r,s,t){if(s){var u=j.getResource(s);if(u){if(t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP){u.up_message_ids.unsubscribe(r)}else u.down_message_ids.unsubscribe(r);}else j.unsubscribe(r);}}};function n(q,r,s){var t=q.getCurrentArraySize(),u=r.length<t+s;if(r.length){q.removeAllResources();q.addResourcesWithoutSorting(r,0)}if(u)q.setReachedEndOfArray();}function o(q,r){var s=q.up_message_ids.hasReachedEndOfArray(),t=q.up_message_ids.getAllResources();if(!s)t.shift();var u=q.down_message_ids.hasReachedEndOfArray(),v=q.down_message_ids.getAllResources();if(!u)v.pop();return {thread_id:q.thread_id,message_id:r,up_message_ids:t,up_exhausted:s,down_message_ids:v,down_exhausted:u}}function p(q){q.client=c('MercuryAPIArgsSource').WEBMESSENGER;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_context.php',q)}c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_context.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,handler:m.handleUpdate}});f.exports=m}),null);
__d('MessengerThreadSearchActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null}),i={Types:h,selectPrevious:function j(){c('MessengerDispatcher').dispatch({type:h.CHANGE_RESULT_INDEX,delta:1})},selectNext:function j(){c('MessengerDispatcher').dispatch({type:h.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function j(k){c('MessengerDispatcher').dispatch({type:h.GET_MORE_CONTEXT,direction:k})},loadMoreThreads:function j(){c('MessengerDispatcher').dispatch({type:h.GET_MORE_THREADS})}};f.exports=i}),null);
__d('MessengerThreadSearchStore',['cx','immutable','ImmutableObject','MercuryIDs','MercuryMessages','MercurySearchContextResults','MercurySearchSnippetResults','MercuryThreads','MessengerContentSearchDataTypedLogger','MessengerDispatcher','MessengerStateStore','MessengerStore','MessengerActions','MessengerThreadSearchActions','MessengerView'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('immutable').Record,m=l({downExhausted:null,loading:false,messages:null,query:null,results:k(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});i=babelHelpers.inherits(n,c('MessengerStore'));j=i&&i.prototype;function n(){j.constructor.call(this);this.$MessengerThreadSearchStore3=new m()}n.prototype.getForFBID=function(o){this.$MessengerThreadSearchStore4=new (c('MercurySearchSnippetResults'))(o);this.$MessengerThreadSearchStore1=c('MercuryMessages').getForFBID(o);this.$MessengerThreadSearchStore2=c('MercuryThreads').getForFBID(o)};n.prototype.getState=function(){return this.$MessengerThreadSearchStore3};n.prototype.__onDispatch=function(o){if(!this.$MessengerThreadSearchStore4)return;c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var p=c('MessengerStateStore').getState(),q=p.activeThreadID,r=p.masterView,s=p.mid,t=p.query,u=r===c('MessengerView').MASTER.SEARCH;switch(o.type){case c('MessengerActions').Types.REPLACE_STATE:if(s!=this.$MessengerThreadSearchStore3.mid&&q!=this.$MessengerThreadSearchStore3.activeThreadID){if(s&&q){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:q,mid:s});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y)}.bind(this))}else this.$MessengerThreadSearchStore3=new m();return}else if(this.$MessengerThreadSearchStore3.query!==t||this.$MessengerThreadSearchStore3.threadID!==q){if(t&&!s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,0].concat(z))}.bind(this))}else{if(this.$MessengerThreadSearchStore3.query&&this.$MessengerThreadSearchStore3.results.size===0)this.logCurrentResult(null,'no_results_found','single_thread_search');var v=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);if(v!==undefined)this.logCurrentResult(v.toObject(),'search_ended','single_thread_search');this.$MessengerThreadSearchStore6()}if(u){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);if(t!==this.$MessengerThreadSearchStore3.query){this.$MessengerThreadSearchStore4.getAllThreadSearchResults(t,function(y,z){return this.setAllThreadResults(y,z)}.bind(this))}else this.$MessengerThreadSearchStore4.getAllLocalThreadSearchResults(t,function(y,z){return this.setAllThreadResults(y,z)}.bind(this));}else this.$MessengerThreadSearchStore7();this.emitChange()}break;case c('MessengerThreadSearchActions').Types.CHANGE_RESULT_INDEX:var w=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+o.delta),0);if(w===this.$MessengerThreadSearchStore3.selectedIndex)break;if(w>=this.$MessengerThreadSearchStore3.results.size){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,w].concat(z))}.bind(this))}else{this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:true,selectedIndex:w});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y)}.bind(this))}this.emitChange();var x=this.$MessengerThreadSearchStore3.results.get(w).toObject();this.logCurrentResult(x,'result_loaded','single_thread_search');break;case c('MessengerThreadSearchActions').Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);c('MercurySearchContextResults').getMoreSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,o.direction,function(y){return this.setMessages(y)}.bind(this));this.emitChange();break;case c('MessengerThreadSearchActions').Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(t,function(y,z){return this.setAllThreadResults(y,z)}.bind(this));this.emitChange();break;}};n.prototype.logCurrentResult=function(o,p,q){var r=new (c('MessengerContentSearchDataTypedLogger'))().setSearchTerm(this.$MessengerThreadSearchStore3.query).setThreadFbid(c('MercuryIDs').getThreadFBIDFromThreadID(this.$MessengerThreadSearchStore3.threadID)).setNumResults(this.$MessengerThreadSearchStore3.results.size).setSearchOutcome(p).setSearchType(q);if(o!==undefined&&o!==null)r.setMessageID(o.message_id).setMessageTimestamp(o.timestamp).setResultIndex(this.$MessengerThreadSearchStore3.selectedIndex+1);r.log()};n.prototype.setAllThreadResults=function(o,p){var q=Object.keys(o),r=q.map(function(s){var t=this.$MessengerThreadSearchStore2.getThreadMetaNow(s);if(!t)return;var u=o[t.thread_id];if(!u)return;return new (c('ImmutableObject'))(babelHelpers['extends']({},t,{snippetCount:u.num_total_snippets}))}.bind(this)).filter(function(s){return s});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:r,threadsExhausted:p,loading:false});this.emitChange()};n.prototype.$MessengerThreadSearchStore7=function(){this.$MessengerThreadSearchStore8(['threads','threadsExhausted','loading'])};n.prototype.accumulateSearchResultsAndEmitChange=function(o,p,q,r,s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:o,threadID:p,selectedIndex:q,results:r,totalCount:s});if(this.$MessengerThreadSearchStore3.results.size){c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(u){return this.setMessages(u)}.bind(this));var t=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.logCurrentResult(t.toObject(),'search_started','single_thread_search')}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange()};n.prototype.$MessengerThreadSearchStore6=function(){this.$MessengerThreadSearchStore8(['query','threadID','selectedIndex','results','totalCount','downExhausted','loading','messages','upExhausted'])};n.prototype.$MessengerThreadSearchStore8=function(o){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(p){o.forEach(function(q){return p.remove(q)})})};n.prototype.setMessages=function(o){var p=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(o.up_message_ids,o.message_id,o.down_message_ids)).map(function(q){var r,s=this;if(q&&q.message_id===o.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var r=function(){var t=s.$MessengerThreadSearchStore3.results.get(s.$MessengerThreadSearchStore3.selectedIndex).toJS(),u=t.matched_keywords,v=q.body.indexOf(t.body),w=Object.keys(t.matched_keywords).map(function(x){return {offset:v+Number(x),length:u[x].length,entity:{url:''},className:"__in"}});return {v:new (c('ImmutableObject'))(babelHelpers['extends']({},q,{ranges:q.ranges?q.ranges.concat(w):w}))}}();if(typeof r==="object")return r.v;}else return new (c('ImmutableObject'))(babelHelpers['extends']({},q,{isSelected:true}));return q}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:o.down_exhausted,loading:false,messages:p,upExhausted:o.up_exhausted});this.emitChange()};n.prototype.$MessengerThreadSearchStore5=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,'message_id'])};f.exports=new n()}),null);
__d('MessengerURIListener',['MessengerActions','MessengerURISerializer','PageTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={start:function k(){if(!h)c('PageTransitions').registerHandler(j,6);h=true},stop:function k(){c('PageTransitions').removeHandler(j,6);h=false}};function j(k){var l=c('MessengerURISerializer').deserialize(k);if(l.notMessenger)return false;c('PageTransitions').transitionComplete();c('MessengerActions').changeState(l);return true}f.exports=i}),null);
__d('fBPaymentsDialogContainerReact',['reasonReact','FBPaymentsDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('FBPaymentsDialogContainer.react'),{},i)}g.make=h}),null);
__d('mNCommerceDialogContainerReact',['reasonReact','MNCommerceDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('MNCommerceDialogContainer.react'),{},i)}g.make=h}),null);
__d('messengerBannerReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerBanner.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerBanner.react'),{initialPromotionData:c('bs_js_null_undefined').from_opt(i),isFirstRedirect:c('utilsRe').optionBoolToNullUndefinedBoolean(j)},k)}g.make=h}),null);
__d('messengerBugNubReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerBugNub.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerBugNub.react'),{isBetaEnabled:c('utilsRe').optionBoolToNullUndefinedBoolean(i),unixName:c('bs_js_null_undefined').from_opt(j)},k)}g.make=h}),null);
__d('MercuryCanonicalGroupThreadActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({THREAD_SEARCH_UPDATED:null})}),null);
__d('MercuryCanonicalGroupThreadStore',['MercuryCanonicalGroupThreadActionTypes','FluxStore','MercuryCanonicalGroupThreadManager','MessengerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MercuryCanonicalGroupThreadStore1=c('MercuryCanonicalGroupThreadManager').get()}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break;}};j.prototype.getOrFetch=function(k){var l=this.$MercuryCanonicalGroupThreadStore1.getNow(k);if(!l)this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(k,function(){c('MessengerDispatcher').dispatch({type:c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED})});return l};f.exports=new j()}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback_ref\/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}})}),null);
__d('MNCommercePostbackRefSendManager',['AsyncRequest','MessengerActions','MessengerMDotMeReferralStore','XMNCommercePostbackRefSendController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c('XMNCommercePostbackRefSendController').getURIBuilder().setString('page_id',i).setString('ref',k).getURI();new (c('AsyncRequest'))().setURI(l).setMethod('POST').send();c('MessengerActions').changeMDotMeReferral()}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j)};h.prototype.hasMDotMeRef=function(i){var j=c('MessengerMDotMeReferralStore').getState();return !!(j.refCode&&i&&j.refThreadID&&j.refThreadID.toString()===i)};h.prototype.getMdotMeRef=function(){var i=c('MessengerMDotMeReferralStore').getState();return i.refCode};function h(){}f.exports=new h()}),null);
__d('MercuryReadOnlyReason',['fbt','Link.react','MercuryConfig','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i={getReason:function j(){var k=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(k){var l=c('MercuryConfig').DYIDeepLink;return h._("Sorry, this conversation isn't active any more because messages can no longer be sent to email addresses. After 1 May 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[h.param('download your information',c('React').createElement('a',{href:l},h._("Learn more")))])}else if(c('MercuryConfig').ViewerIsReadOnly){return h._("You've been temporarily blocked from sending messages. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))])}else if(c('MercuryConfig').ColdOpenBlock){return h._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))])}else return h._("You cannot reply to this conversation.");}};f.exports=i}),null);
__d('DebouncedMentionsTextEditor.react',['AbstractMentionsTextEditor.react','clearImmediate','debounce','setImmediate'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractMentionsTextEditor.react'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.__maybeSearch=function(){var l,m=this,n=this.props.editorState,o=n.getSelection();if(o.getHasFocus()&&o.isCollapsed())(function(){var p=n.getCurrentContent(),q=m.props.mentionsSource;if(q){if(m.$DebouncedMentionsTextEditor1)c('clearImmediate')(m.$DebouncedMentionsTextEditor1);m.$DebouncedMentionsTextEditor1=c('setImmediate')(function(){q.search(p,o,this.__onShowMentions)}.bind(m))}})();}.bind(this);this.__debouncedSearch=c('debounce')(this.__maybeSearch,50)}j.prototype.componentDidUpdate=function(k){'use strict';if(this.props.editorState!==k.editorState)this.__debouncedSearch();};j.prototype.componentWillUnmount=function(){'use strict';if(this.$DebouncedMentionsTextEditor1)c('clearImmediate')(this.$DebouncedMentionsTextEditor1);i.componentWillUnmount.call(this)};f.exports=j}),null);
__d('MessengerSingleSectionContactList.react',['cx','MessengerContactAdapters','MessengerContactList.react','MessengerTypeaheadUtils','React','TypeaheadViewPropTypes','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.entries,n=l.viewProps,o=(!m.length?"_599s":'')+(' '+"_29hl")+(' '+"_8i1")+(' '+"_11_d")+(' '+"_4p-s");return c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,o,n.className),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:true,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:false,listSections:c('MessengerTypeaheadUtils').buildSingleSection(m),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:n.viewer})};function k(){i.apply(this,arguments)}k.propTypes=c('TypeaheadViewPropTypes');k.defaultProps={role:'listbox'};f.exports=k}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/message_share_attachment\/fromURI\/",{})}),null);
__d('MessengerURLUploader',['AsyncRequest','Event','MercuryConfig','MessengerActions','SubscriptionsHandler','URLMatcher','XShareScrapeAttachmentAsyncController','debounce'],(function a(b,c,d,e,f,g){'use strict';var h=c('XShareScrapeAttachmentAsyncController').getURIBuilder().getURI(),i=920,j=920;function k(l,m,n){this.handleInputValueChange=function(o){var p=this.$MessengerURLUploader3(),q=c('URLMatcher').match(p);if(!!q){if(this.$MessengerURLUploader5!==q){this.$MessengerURLUploader5=q;this.$MessengerURLUploader2=null;if(c('MercuryConfig').WWWMessengerURLPreview)c('MessengerActions').loadingPreview(this.$MessengerURLUploader7,q);this.loadShare()}}else if(!c('MercuryConfig').WWWMessengerURLPreview){this.$MessengerURLUploader5=null;this.$MessengerURLUploader2=null}}.bind(this);this.$MessengerURLUploader3=l;this.$MessengerURLUploader6=new (c('SubscriptionsHandler'))();this.$MessengerURLUploader7=n;this.$MessengerURLUploader4=c('debounce')(this.handleInputValueChange,200);this.initInput(m)}k.prototype.getData=function(){return this.$MessengerURLUploader2};k.prototype.getMatchedURL=function(){return this.$MessengerURLUploader5};k.prototype.initInput=function(l){this.$MessengerURLUploader6.addSubscriptions(c('Event').listen(l,'keyup',this.$MessengerURLUploader4),c('Event').listen(l,'paste',this.$MessengerURLUploader4))};k.prototype.loadShare=function(){if(this.$MessengerURLUploader1&&this.$MessengerURLUploader1.abort)this.$MessengerURLUploader1.abort();var l=this.$MessengerURLUploader5;if(l)this.$MessengerURLUploader1=new (c('AsyncRequest'))().setMethod('POST').setURI(h).setData({uri:l,image_width:j,image_height:i,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,l)).send();};k.prototype.handleShareLoad=function(l,m){if(l===this.$MessengerURLUploader5)this.$MessengerURLUploader2=(m.payload||0).share_data;};k.prototype.setThreadID=function(l){this.$MessengerURLUploader7=l};k.prototype.clearShareData=function(){this.$MessengerURLUploader5=null;this.$MessengerURLUploader2=null};f.exports=k}),null);
__d('AtSignAllowEmptyMentionsStrategy',['DocumentMentionsRegex'],(function a(b,c,d,e,f,g){var h=c('DocumentMentionsRegex').PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s|\\()('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={name:'AtSignAllowEmptyMentionsStrategy',findMentionableString:function n(o){var p=l.exec(o);if(p!==null){var q=p[2];return {matchingString:q,leadOffset:p[1].length}}return null}};f.exports=m}),null);
__d('FourLetterMentionsStrategy',['DocumentMentionsRegex'],(function a(b,c,d,e,f,g){'use strict';var h=3,i='\\b[a-z][^\\s'+c('DocumentMentionsRegex').PUNCTUATION+']',j=new RegExp('(^|[^#])((?:'+i+'{'+h+',})$)'),k={name:'FourLetterMentionsStrategy',findMentionableString:function l(m){var n=j.exec(m);if(n!==null)return {matchingString:n[2],leadOffset:n[2].length};return null}};f.exports=k}),null);
__d('createMentionsSearchSourceFromParticipants',['fbt','ix','AtSignAllowEmptyMentionsStrategy','CapitalizedNameMentionsStrategy','DocumentCompositeMentionsSource','DocumentMentionsSource','FourLetterMentionsStrategy','LogHistory','SearchableEntry','StaticSearchSource','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('LogHistory').getInstance('messenger_mentions'),k=i("91674").uri;function l(n,o,p,q){if(!n||!o||o.length<=2)return null;var r=o.reduce(function(t,u){if(!u||u.fbid===n)return t;var v=p&&p.custom_nickname&&p.custom_nickname[u.fbid]?p.custom_nickname[u.fbid]:'';t.push(new (c('SearchableEntry'))({uniqueID:u.fbid,title:'@'+u.name,subtitle:v,photo:u.image_src,keywordString:v}));return t},[]);if(q&&p&&p.thread_fbid)r.push(m(p.thread_fbid));var s=new (c('StaticSearchSource'))(r);j.debug('constructed_search_source',JSON.stringify({participants:o.map(function(t){return t&&t.fbid})}));return new (c('DocumentCompositeMentionsSource'))([new (c('DocumentMentionsSource'))(c('AtSignAllowEmptyMentionsStrategy'),s),new (c('DocumentMentionsSource'))(c('CapitalizedNameMentionsStrategy'),s),new (c('DocumentMentionsSource'))(c('FourLetterMentionsStrategy'),s)])}function m(n){var o=h._("everyone").toString(),p=h._("Mention everyone in this chat").toString();return new (c('SearchableEntry'))({photo:k,title:'@'+o,uniqueID:c('nullthrows')(n),subtitle:p})}f.exports=l}),null);
__d('MessengerComposerInput.react',['cx','fbt','Bootloader','CompositeDraftDecorator','DebouncedMentionsTextEditor.react','DraftModifier','DOMDimensions','EditorState','EmojiFormat','MessengerActions','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerSingleSectionContactList.react','Event','immutable','MentionsLayer.react','MercuryConfig','MercuryIDs','MercuryThreadIDMap','MercuryThreadSnippet.react','MercuryThreadTitle.react','MercuryTimestamp','MercuryTriodeSourceUtil','MessengerBotMenuButton.react','MessengerConstants','messengerDomIDsRe','MessengerEditorStateManager','MessengerMentionSource','MessengerTabIndices','messengerUploadFilesUtilRe','MessengerURLUploader','React','ReactDOM','Run','TypingDetectorController','URLMatcher','clearImmediate','createMessengerMentionDraftEntity','createMentionsSearchSourceFromParticipants','debounce','getEntityMatcher','getEveryoneMentionIndex','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMentionIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','shouldNotRenderSegoe','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDialogBodyReact').jsComponent,m=c('messengerDomIDsRe').ids,n=c('React').PropTypes,o=1,p=/^image\//,q='handled',r=8,s='not-handled';j=babelHelpers.inherits(t,c('React').PureComponent);k=j&&j.prototype;function t(w){k.constructor.call(this,w);u.call(this);this.$MessengerInput11=this.$MessengerInput11.bind(this);this.state=this.$MessengerInput12();this.$MessengerInput6=c('debounce')(function(x){if(this.props.isComposing&&x.isComposing)return;if(!this.props.thread||!x.thread||v(this.props,x))this.$MessengerInput13();}.bind(this),300);this.$MessengerInput7=c('throttle')(function(){if(this.$MessengerInput10){var x=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;if(this.$MessengerInput1!==x)this.props.onResize&&this.props.onResize();this.$MessengerInput1=x}}.bind(this),100)}t.prototype.$MessengerInput12=function(w){return {editorState:this.$MessengerInput14(c('MessengerEditorStateManager').get(this.props.threadID),w)}};t.prototype.componentDidMount=function(){this.$MessengerInput10=true;this.$MessengerInput1=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;this.$MessengerInput13();this.$MessengerInput2=new (c('MessengerURLUploader'))(this.getValue,c('ReactDOM').findDOMNode(this.refs.input),this.props.threadID);c('Run').onUnload(this.$MessengerInput15);this.$MessengerInput3=c('Event').listen(window,'blur',this.$MessengerInput15);this.$MessengerInput4=c('Event').listen(window,'focus',this.$MessengerInput16);this.$MessengerInput5=c('debounce')(function(){this.$MessengerInput17()}.bind(this),1000)};t.prototype.componentWillUpdate=function(w){if(this.props.threadID!==w.threadID)this.$MessengerInput17();};t.prototype.componentDidUpdate=function(w,x){this.$MessengerInput9=c('setImmediate')(this.$MessengerInput7);if(this.props.threadID!==w.threadID){this.$MessengerInput13()}else this.$MessengerInput6(w);if(x.editorState!==this.state.editorState)this.props.onChange&&this.props.onChange(this.getValue());};t.prototype.componentWillUnmount=function(){this.$MessengerInput10=false;this.$MessengerInput8&&this.$MessengerInput8.destroy();this.props.threadID&&this.$MessengerInput17();this.$MessengerInput9&&c('clearImmediate')(this.$MessengerInput9);this.$MessengerInput3&&this.$MessengerInput3.remove();this.$MessengerInput4&&this.$MessengerInput4.remove()};t.prototype.insertEmoticon=function(w){var x=c('insertEmoticonIntoEditorState')(w,this.state.editorState);if(x!==this.state.editorState)this.$MessengerInput18(x);};t.prototype.insertEmoji=function(w){var x=this.state.editorState,y=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(w),x.getCurrentContent(),x.getSelection(),x.getCurrentInlineStyle()),z=c('EditorState').push(x,y,'insert-characters');if(z!==this.state.editorState)this.$MessengerInput18(c('EditorState').forceSelection(z,y.getSelectionAfter()));};t.prototype.$MessengerInput20=function(){var w=this.props.fileUploader;return Boolean(w&&w.get('uploadedFiles').size>0)};t.prototype.$MessengerInput13=function(){if(!this.$MessengerInput10)return;this.$MessengerInput21();this.$MessengerInput22();if(this.$MessengerInput2){this.$MessengerInput2.setThreadID(this.props.threadID);this.$MessengerInput2.clearShareData()}var w=this.$MessengerInput12();if(this.props.mentionsEnabled){var x=this.props,y=x.participants,z=x.viewer,aa=x.thread;w.mentionsSource=c('createMentionsSearchSourceFromParticipants')(z,y&&y.toArray(),aa,c('MercuryConfig').MEME)}this.setState(w,function(){if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY)c('setImmediate')(function(){if(!this.props.disableAutofocus)this.focus();}.bind(this));}.bind(this))};t.prototype.$MessengerInput17=function(){if(!this.props.threadID)return;c('MessengerEditorStateManager').set(this.props.threadID,this.state.editorState)};t.prototype.$MessengerInput21=function(w){if(this.$MessengerInput2)this.$MessengerInput2.clearShareData();this.setState({editorState:this.$MessengerInput14(c('EditorState').createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null,showEveryoneMentionDialog:false},w)};t.prototype.$MessengerInput22=function(){this.$MessengerInput8&&this.$MessengerInput8.destroy();this.$MessengerInput8=null;var w=this.props.viewer;if(!w)return;var x=c('ReactDOM').findDOMNode(this.refs.input);if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY&&x)this.$MessengerInput8=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),x,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),null,c('MercuryThreadIDMap').getForFBID(w).getServerIDFromClientIDNow(this.props.threadID),this.getValue);};t.prototype.$MessengerInput23=function(){var w=this.props.fileUploader;if(w){c('messengerUploadFilesUtilRe').sendAttchments(w,this.props.onFileUpload);c('MessengerActions').cleanFiles(this.props.threadID)}};t.prototype.onEveryoneWarningAccept=function(){this.setState({showEveryoneMentionDialog:false},function(){if(this.props.thread){var w=this.getMentions(this.props.thread.thread_fbid);this.$MessengerInput24(w)}}.bind(this))};t.prototype.hideWarningDialog=function(){this.setState({showEveryoneMentionDialog:false})};t.prototype.getEveryoneMentionWarningDialog=function(){var w=i._("Mention everyone?").toString(),x=i._("Doing so will send a mention to everyone in this group.").toString();return c('React').createElement(c('MessengerDialog.react'),{onToggle:function(y){if(!y)this.hideWarningDialog();}.bind(this)},c('React').createElement(c('MessengerDialogHeader.react'),null,w),c('React').createElement(l,null,x),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:i._("Cancel"),type:'secondary',onClick:function(){return this.hideWarningDialog()}.bind(this)}),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("OK"),type:'primary',use:'default',onClick:function(){return this.onEveryoneWarningAccept()}.bind(this)})))};t.prototype.$MessengerInput25=function(){if(this.props.thread){var w=this.getMentions(this.props.thread.thread_fbid),x=c('getEveryoneMentionIndex')(w)>-1;if(x){this.setState({showEveryoneMentionDialog:x})}else this.$MessengerInput24(w);}else this.$MessengerInput24();};t.prototype.$MessengerInput24=function(w){if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:w},function(x){var y,z=this;if(c('MercuryConfig').WWWMessengerURLPreview)c('MessengerActions').removeSharePreview(this.props.threadID);if(x&&this.props.mentionsEnabled&&(w&&w.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var aa=z.state,ba=aa.addedMentionsCount,ca=aa.mentionsTriggeredCount,da=aa.mentionsTriggerSource,ea=z.props,fa=ea.thread,ga=ea.participants,ha=x;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(ia,ja){new ia().setEvent(ja.MENTION).setGroupSize(ga&&ga.size).setNumDelivered(w&&w.length||0).setNumSelects(ba).setNumTriggers(ca).setThreadid(fa&&fa.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(fa&&fa.thread_type)).setOfflineThreadid(ha.offline_threading_id).updateExtraData({source:da}).log()},'MessengerComposerInput.react')})();}.bind(this)))this.$MessengerInput21(function(){this.$MessengerInput17();this.$MessengerInput8&&this.$MessengerInput8.resetState()}.bind(this));};t.prototype.getMentions=function(w){return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent(),w)};t.prototype.getInput=function(){return this.refs.input};t.prototype.render=function(){var w=this.props,x=w.participants,y=w.thread,z=w.viewer,aa=null;if(x&&y&&z){aa=i._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[i.param('participantListAsShownInThreadList',this.$MessengerInput26(y,z)),i.param('lastUpdatedTime',c('MercuryTimestamp').getAbsoluteTimestamp(y.timestamp)),i.param('recentUpdateStringAsShownInThreadList',this.$MessengerInput27(x,y,z))])}else aa=i._("Composing a new message");var ba=null;if(this.props.threadID&&this.props.pageID)ba=c('React').createElement('div',{ref:'botsMenuContainer',className:"_3km1"},c('React').createElement(c('MessengerBotMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"}));var ca='';if(this.props.disableInput){ca=i._("Composer is disabled for this thread.").toString()}else if(this.props.thread&&!this.props.thread.is_canonical){ca=i._("Type a message, \u0040name...").toString()}else ca=i._("Type a message...").toString();var da=this.getEveryoneMentionWarningDialog();return c('React').createElement('div',{className:"_kmc"+(this.props.smallerEqual640?' '+"_2swd":'')+(c('shouldNotRenderSegoe')(this.state.editorState.getCurrentContent().getPlainText())?' '+"_2por":'')+(' '+"navigationFocus"),onClick:this.focus,role:'presentation'},this.state.showEveryoneMentionDialog?da:null,this.props.showMenu?ba:null,c('React').createElement('div',{className:"_3-8x"+(this.props.showMenu?' '+"_3km3":'')+(' '+"_3oh-")},c('React').createElement(c('DebouncedMentionsTextEditor.react'),{autoHighlight:true,ariaControls:m.CONVERSATION,ariaDescribedBy:m.COMPOSER_INPUT_DESCRIPTION,ariaLabel:ca,editorState:this.state.editorState,handleBeforeInput:this.$MessengerInput28,handleContentReturn:this.$MessengerInput19,handlePastedFiles:this.$MessengerInput11,handleReturn:this.$MessengerInput19,maxResults:r,readOnly:this.props.disableInput,mentionCreationFn:this.$MessengerInput29,mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:c('MessengerSingleSectionContactList.react'),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:'above',autoflip:true},mentionsSource:this.state.mentionsSource,onChange:this.$MessengerInput18,placeholder:ca,ref:'input',spellCheck:true,stripPastedStyles:true,tabIndex:this.props.threadID===c('MessengerConstants').NEW_THREAD_KEY?c('MessengerTabIndices').COMPOSER_INPUT:0,textAlignment:'left',onAddMention:this.$MessengerInput30,onShowMentions:this.$MessengerInput31}),c('React').createElement('div',{className:"_5ca7",id:m.COMPOSER_INPUT_DESCRIPTION},aa)))};t.prototype.$MessengerInput26=function(w,x){return c('React').createElement(c('MercuryThreadTitle.react'),{thread:w,viewer:x})};t.prototype.$MessengerInput27=function(w,x,y){return c('React').createElement(c('MercuryThreadSnippet.react'),{participants:w,shouldAlwaysRenderSender:true,shouldRenderYou:true,thread:x,viewer:y})};t.prototype.$MessengerInput14=function(w,x){var y=this.$MessengerInput32(w),z=c('EditorState').set(w,{decorator:y});return x||this.props.disableAutofocus?z:c('EditorState').moveFocusToEnd(z)};t.prototype.$MessengerInput32=function(w){var x=c('MessengerEmoticonSpan.react'),y=w.getCurrentContent(),z=[{strategy:c('getEntityMatcher')(function(aa){return aa.getType()==='EMOTICON'},y.getEntity),component:x}];z.push({strategy:c('getEntityMatcher')(function(aa){return aa.getType()==='EMOJI'},y.getEntity),component:c('MessengerEmojiSpan.react')});z.push({strategy:c('getEntityMatcher')(function(aa){return aa.getType()==='MENTION'},y.getEntity),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(z)};t.prototype.$MessengerInput33=function(w,x){var y=c('handleBeforeInputForMessengerEmoticon')(x,w);if(y===x)return false;this.setState({editorState:y});return true};t.prototype.$MessengerInput34=function(w,x){var y=c('handleBeforeInputForMessengerEmoji')(x,w);if(y===x)return false;this.setState({editorState:y});return true};t.prototype.handleTextDropped=function(w){var x=this.state.editorState,y=x.getSelection();if(y.get('hasFocus'))return;var z=c('DraftModifier').replaceText(x.getCurrentContent(),y,w,x.getCurrentInlineStyle()),aa=c('EditorState').push(x,z,'insert-fragment');this.$MessengerInput18(aa)};t.prototype.getShareData=function(){if(c('MercuryConfig').WWWMessengerURLPreview){var w=this.props.sharePreview;if(w&&w.type&&w.params)return {share_type:w.type,share_params:w.params.get('data')};return null}var x=c('URLMatcher').match(this.getValue());if(x===this.$MessengerInput2.getMatchedURL())return this.$MessengerInput2.getData();return null};t.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};t.prototype.$MessengerInput35=function(){var w=this.props.sharePreview;return !!(w&&w.params&&w.type)};t.prototype.addMention=function(w){var x=c('insertMentionIntoEditorState')(w,this.state.editorState,0,this.$MessengerInput29);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c('MessengerMentionSource').REPLY});this.$MessengerInput18(x);this.$MessengerInput30()};t.propTypes={disableAutofocus:n.bool,fileUploader:n.object,handleOnlyImageUploads:n.bool.isRequired,isComposing:n.bool,mentionsEnabled:n.bool,pageID:n.string,participants:n.instanceOf(c('immutable').Map),sharePreview:n.object,showMenu:n.bool,disableInput:n.bool,smallerEqual640:n.bool,thread:n.object,threadID:n.string,viewer:n.string,onBeforeInput:n.func,onChange:n.func,onFileUpload:n.func,onResize:n.func,onMessageSend:n.func};var u=function w(){this.$MessengerInput10=false;this.$MessengerInput18=function(x){if(x!==this.state.editorState)this.setState({editorState:x},function(){this.$MessengerInput5()}.bind(this));}.bind(this);this.$MessengerInput19=function(event,x){if(c('isSoftNewlineEvent')(event)){var y=c('handleSoftNewlineForMessengerEmoticon');this.setState({editorState:y(x)});return q}this.setState({},this.triggerSend);return q}.bind(this);this.getValue=function(){return c('getVisibleValueForContentStateWithMessengerEmoji')(this.state.editorState.getCurrentContent())}.bind(this);this.focus=function(){this.refs.input&&this.refs.input.focus()}.bind(this);this.$MessengerInput28=function(x,y){this.props.onBeforeInput&&this.props.onBeforeInput(x,y);var z=this.$MessengerInput33(x,y),aa=this.$MessengerInput34(x,y);return z||aa?q:s}.bind(this);this.$MessengerInput11=function(x){var y=this.props.handleOnlyImageUploads?x.filter(function(z){return z&&p.test(z.type)}):x;if(y.length){c('MercuryConfig').WWWMessengerUploadFilesPreview?c('MessengerActions').prepareFilesForSend(this.props.threadID,y):this.props.onFileUpload(y);return q}return s}.bind(this);this.$MessengerInput15=function(){this.$MessengerInput17()}.bind(this);this.$MessengerInput16=function(){this.setState(this.$MessengerInput12(true))}.bind(this);this.triggerSend=function(){if(this.$MessengerInput20())this.$MessengerInput23();if(this.getValue().trim().length>0||this.$MessengerInput35())this.$MessengerInput25();}.bind(this);this.$MessengerInput30=function(){var x=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:x})}.bind(this);this.$MessengerInput31=function(x,y){var z=(this.state.mentionsTriggeredCount||0)+1,aa={mentionsTriggeredCount:z};if(!this.state.mentionsTriggerSource)aa.mentionsTriggerSource=y===o?c('MessengerMentionSource').ATSIGN:c('MessengerMentionSource').TYPEAHEAD;this.setState(aa)}.bind(this);this.$MessengerInput29=function(x){return c('createMessengerMentionDraftEntity')(this.state.editorState.getCurrentContent(),x)}.bind(this)};function v(w,x){var y=w.participants,z=x.participants;if(!y||!z)return true;var aa=y.filter(Boolean),ba=z.filter(Boolean);return aa.size!==ba.size||!aa.equals(ba)}f.exports=t}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/page\/nullstate\/",{})}),null);
__d('messengerFileSizeErrorDialogReact',['fbt','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';function i(o){switch(o){case "size-exceeded":return 1;case "wrong-type":return 0;default:return 2;}}var j=c('reasonReact').statelessComponent("MessengerFileSizeErrorDialogReact");function k(o){if(o){return 0}else return c('messengerDialogsRe').removeDialog(0);}function l(o){switch(o){case 0:return h._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return h._("The file you have selected is too large. The maximum size is 25 MB.");case 2:return null;}}function m(o,p){var q=j.slice();q[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,k,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[h._("Failed to upload files")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[l(o)])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return q}var n=c('reasonReact').wrapReasonForJs(j,function(o){return m(i(o.error),[])});g.errorOfString=i;g.component=j;g.handleToggle=k;g.renderDialogBody=l;g.make=m;g.jsComponent=n}),null);
__d('bs_marshal',['bs_caml_string','bs_caml_missing_polyfill','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(p,q,r,s,t){if(q<0||r<0||q>(p.length-r|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Marshal.to_buffer: substring out of bounds"]}else return c('bs_caml_missing_polyfill').not_implemented("caml_output_value_to_buffer not implemented by bucklescript yet\n");}function i(p,q){if(q<0||q>(p.length-20|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Marshal.data_size"]}else return c('bs_caml_missing_polyfill').not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");}function j(p,q){return 20+i(p,q)|0}function k(p,q){if(q<0||q>(p.length-20|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Marshal.from_bytes"]}else{var r=c('bs_caml_missing_polyfill').not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");if(q>(p.length-(20+r|0)|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Marshal.from_bytes"]}else return c('bs_caml_missing_polyfill').not_implemented("caml_input_value_from_string not implemented by bucklescript yet\n");}}function l(p,q){return k(c('bs_caml_string').bytes_of_string(p),q)}function m(p,q,r){return c('bs_caml_missing_polyfill').not_implemented("caml_output_value not implemented by bucklescript yet\n")}function n(){return c('bs_caml_missing_polyfill').not_implemented("caml_input_value not implemented by bucklescript yet\n")}var o=20;g.to_channel=m;g.to_buffer=h;g.from_channel=n;g.from_bytes=k;g.from_string=l;g.header_size=o;g.data_size=i;g.total_size=j}),null);
__d('bs_obj',['bs_marshal','bs_caml_array','bs_caml_missing_polyfill','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';var h=c('bs_caml_array').caml_array_get,i=c('bs_caml_array').caml_array_set;function j(){return c('bs_caml_missing_polyfill').not_implemented("caml_output_value_to_string not implemented by bucklescript yet\n")}function k(ga,ha){return [c('bs_marshal').from_bytes(ga,ha),ha+c('bs_marshal').total_size(ga,ha)|0]}function l(ga){var ha=ga.length!==undefined&&(ga.tag|0)!==248&&ga.length>=1?ga[0]:ga,ia;if(ha.length!==undefined&&ha.tag===248){ia=ha[0]}else throw c('bs_caml_builtin_exceptions').not_found;if(ia.tag===252){return ha}else throw c('bs_caml_builtin_exceptions').not_found;}function m(ga){try{var ha=l(ga);return ha[0]}catch(ia){if(ia===c('bs_caml_builtin_exceptions').not_found){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Obj.extension_name"]}else throw ia;}}function n(ga){try{var ha=l(ga);return ha[1]}catch(ia){if(ia===c('bs_caml_builtin_exceptions').not_found){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Obj.extension_id"]}else throw ia;}}function o(ga){try{return l(ga)}catch(ha){if(ha===c('bs_caml_builtin_exceptions').not_found){throw [c('bs_caml_builtin_exceptions').invalid_argument,"Obj.extension_slot"]}else throw ha;}}var p=0,q=245,r=246,s=247,t=248,u=249,v=250,w=251,x=251,y=252,z=253,aa=254,ba=255,ca=255,da=1000,ea=1001,fa=1002;g.double_field=h;g.set_double_field=i;g.first_non_constant_constructor_tag=p;g.last_non_constant_constructor_tag=q;g.lazy_tag=r;g.closure_tag=s;g.object_tag=t;g.infix_tag=u;g.forward_tag=v;g.no_scan_tag=w;g.abstract_tag=x;g.string_tag=y;g.double_tag=z;g.double_array_tag=aa;g.custom_tag=ba;g.final_tag=ca;g.int_tag=da;g.out_of_heap_tag=ea;g.unaligned_tag=fa;g.extension_name=m;g.extension_id=n;g.extension_slot=o;g.marshal=j;g.unmarshal=k}),null);
__d('bs_camlinternalLazy',['bs_obj','bs_curry','bs_caml_exceptions'],(function a(b,c,d,e,f,g){'use strict';var h=c('bs_caml_exceptions').create("CamlinternalLazy.Undefined");function i(){throw h}function j(n){var o=n[0];n[0]=i;try{var p=c('bs_curry')._1(o,0);n[0]=p;n.tag=c('bs_obj').forward_tag;return p}catch(q){n[0]=function(){throw q};throw q}}function k(n){var o=n[0];n[0]=i;var p=c('bs_curry')._1(o,0);n[0]=p;n.tag=c('bs_obj').forward_tag;return p}function l(n){var o=n.tag|0;if(o===c('bs_obj').forward_tag){return n[0]}else if(o!==c('bs_obj').lazy_tag){return n}else return j(n);}function m(n){var o=n.tag|0;if(o===c('bs_obj').forward_tag){return n[0]}else if(o!==c('bs_obj').lazy_tag){return n}else return k(n);}g.Undefined=h;g.force_lazy_block=j;g.force_val_lazy_block=k;g.force=l;g.force_val=m}),null);
__d('messengerSendButtonReact',['fbt','bs_block','linkReact','reasonReact','bs_js_primitive','bs_camlinternalLazy'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerSendButtonReact"),j=c('bs_block').__(246,[function(){return h._("Press Enter to send")+("\n"+h._("Press Shift + Enter to add a new paragraph"))}]);function k(m,n,o,p){var q=i.slice();q[9]=function(){var r=n?[{color:n[0]}]:0,s=j.tag|0;return c('reasonReact').element(0,0,c('linkReact').make(0,[m],["tooltip"],[s===250?j[0]:s===246?c('bs_camlinternalLazy').force_lazy_block(j):j],0,0,[o],0,0,0,r,0,0,0,[h._("Send")]))};return q}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.className,c('bs_js_primitive').null_undefined_to_opt(m.customColor),m.onClick,[])});g.component=i;g.title=j;g.make=k;g.jsComponent=l}),null);
__d('MessengerComposer.react',['cx','cssVar','fbt','invariant','AsyncRequest','AutoFocusableLink.react','BootloadedComponent.react','MercuryBootloadOnInteraction.react','BootloadOnRender.react','Bootloader','ChatPhotoUploader.react','ChatConfig','CurrentUser','EmoticonsList','immutable','JSResource','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryReadOnlyReason','MercuryThreadActions','MessageRequestUtils','MessagingTag','MessengerActions','MessengerBotMenuDataFetcher','messengerButtonReact','MessengerComposerInput.react','ChatPageComposerNullState.react','MessengerConstants','MessengerContextualDialog.react','messengerDialogsRe','MessengerMessageRequestsTypedLogger','messengerFileSizeErrorDialogReact','MessengerHotLikeButton.react','MessengerHotLikeUtils','MessengerQuickCamOrigins','MessengerResponsiveBlock.react','messengerSendButtonReact','MessengerView','MNCommercePageSetting','MNCommercePostbackCTADataManager','MNCommercePostbackRefSendManager','P2PGKValues','React','MercuryShareAttachmentRenderLocations','WorkQEWorkChatFileAttachmentIcon','XMessagingUnblockMessagesController','XMNCommercePageNullStateCTAController','XUISpinner.react','getPageIDFromThreadID','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('messengerButtonReact').jsComponent,o=c('messengerFileSizeErrorDialogReact').jsComponent,p=c('messengerSendButtonReact').jsComponent,q=c('React').PropTypes,r=640,s=360,t=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;l=babelHelpers.inherits(u,c('React').PureComponent);m=l&&l.prototype;function u(v){m.constructor.call(this,v);this.handleFileUpload=function(w){this.refsUploader&&this.refsUploader.uploadFiles(w);this.exitCurrentMode()}.bind(this);this.$MessengerComposer29=function(w){var x=c('EmoticonsList').symbols[w];if(!x)return;this.refsInput&&this.refsInput.insertEmoticon(x)}.bind(this);this.focusInput=function(){this.refsInput&&this.refsInput.focus()}.bind(this);this.$MessengerComposer45=function(){var w=c('XMessagingUnblockMessagesController').getURIBuilder().getURI(),x=this.props.threadID;new (c('AsyncRequest'))(w).setMethod('POST').setData({fbid:c('MercuryIDs').getUserIDFromThreadID(x)}).send()}.bind(this);this.$MessengerComposer43=function(){var w=this.props.thread,x=!!w&&c('MessageRequestUtils').isFiltered(w);this.$MessengerComposer41()['delete'](this.props.threadID);c('MessengerActions').selectThread(null);new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_delete_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(x?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint('inbox_banner').log()}.bind(this);this.$MessengerComposer42=function(){this.$MessengerComposer41().archive(this.props.threadID);c('MessengerActions').selectThread(null)}.bind(this);this.$MessengerComposer44=function(w){var x=this.props.thread,y=!!x&&c('MessageRequestUtils').isFiltered(x);if(!w)new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_cancel').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(y?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint('inbox_banner').log();}.bind(this);this.$MessengerComposer39=function(w,x){if(w.platformFBID.toString()===c('MercuryConfig').MessengerAppID){this.props.onStickerSelect(w.resultID.toString())}else this.refsGifUploader&&this.refsGifUploader.uploadURL({attribution_app_id:w.platformFBID,external_image_url:w.source.url,preview_url:w.media.preview?w.media.preview.url:w.media.thumbnail.url,source:w.source});}.bind(this);this.$MessengerComposer40=function(w){this.focusInput();this.refsInput&&this.refsInput.insertEmoji(w)}.bind(this);this.$MessengerComposer13=function(w){this.setState({currentValue:w})}.bind(this);this.$MessengerComposer12=function(w,x,y){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(w,x,y)}.bind(this);this.$MessengerComposer38=function(w){this.refsInput&&this.refsInput.triggerSend()}.bind(this);this.$MessengerComposer9=function(){if(this.state.nullStateCTA!==null){this.setState({disableNullState:true});if(c('MNCommercePostbackRefSendManager').hasMDotMeRef(this.$MessengerComposer4())){c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1,c('MNCommercePostbackRefSendManager').getMdotMeRef());c('MessengerActions').changeMDotMeReferral()}else c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1);}}.bind(this);this.$MessengerComposer1=function(){this.setState({showNullState:true,disableNullState:false})}.bind(this);this.$MessengerComposer1=this.$MessengerComposer1.bind(this);this.state=this.$MessengerComposer2()}u.prototype.componentWillReceiveProps=function(v){if(v.threadID!==this.props.threadID){this.setState(this.$MessengerComposer2());if(v.thread)this.$MessengerComposer3(v.thread.message_count,c('getPageIDFromThreadID')(v.threadID));}if(v.thread&&v.thread.message_count>0)this.setState({showNullState:false});};u.prototype.componentWillMount=function(){if(this.props.thread)this.$MessengerComposer3(this.props.thread.message_count,this.$MessengerComposer4());};u.prototype.componentDidUpdate=function(v){if(v.canReply!==this.props.canReply)this.props.onResize&&this.props.onResize();if(this.props.thread){this.$MessengerComposer5();this.$MessengerComposer6()}};u.prototype.render=function(){if(!this.props.canReply){return this.$MessengerComposer7()}else if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$MessengerComposer8();var v=this.props.thread&&this.props.thread.message_count;c('MNCommercePostbackRefSendManager').sendMDotMeRef(this.$MessengerComposer4(),v);if(this.state.showNullState&&this.state.nullStateCTA!==null)return c('React').createElement(c('ChatPageComposerNullState.react'),{title:this.state.nullStateCTA.title,onClick:this.$MessengerComposer9,disabled:this.state.disableNullState});var w=this.$MessengerComposer10();return c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function x(y){return [y!=null&&y<=r,y]}},function(x){var y=x[0],z=x[1];return c('React').createElement('div',{'aria-label':j._("New message"),className:"_4rv3",role:'region'},c('MercuryConfig').WWWMessengerUploadFilesPreview&&this.$MessengerComposer11(this.props.threadID),c('React').createElement('div',{className:"_5irm"+(y?' '+"_1_73":'')},c('React').createElement(c('MessengerComposerInput.react'),{disableAutofocus:!!this.props.disableAutofocus,fileUploader:this.props.fileUploader,handleOnlyImageUploads:false,isComposing:w,mentionsEnabled:this.props.mentionsEnabled,ref:function(aa){return this.refsInput=aa}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout()}.bind(this),onResize:this.props.onResize,onMessageSend:this.$MessengerComposer12,participants:this.props.participants,sharePreview:this.props.sharePreview,smallerEqual640:y,thread:this.props.thread,threadID:w?c('MessengerConstants').NEW_THREAD_KEY:this.props.threadID,pageID:this.$MessengerComposer4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$MessengerComposer13,showMenu:this.state.showMenu,disableInput:this.state.disableInput}),this.$MessengerComposer14(z)))}.bind(this))};u.prototype.$MessengerComposer11=function(v){if(!v)return null;var w=this.props.fileUploader;if(!w)return null;var x=w.get('uploadedFiles');if(x.size==0)return null;var y=this.props.thread,z=y&&y.custom_color?y.custom_color:"#0084ff";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{files:x,small:false,threadID:v,threadCustomColor:z,onClick:this.$MessengerComposer15,onResize:this.props.onResize}),loader:c('JSResource')('MercuryStageFilePreviewReactComponent').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('XUISpinner.react'),{className:"_2qf"})})};u.prototype.$MessengerComposer15=function(v,w){c('MessengerActions').cancelFileUpload(v,w)};u.prototype.$MessengerComposer14=function(v){return this.state.disableInput===true?null:c('React').createElement('div',{ref:function(w){this.refsButtonsContainer=w}.bind(this),className:"_4rv4"},this.$MessengerComposer16(v),this.$MessengerComposer17())};u.prototype.$MessengerComposer16=function(v){if(this.props.hideActions)return null;if(v&&v<s)return c('React').createElement('div',null,c('React').createElement('ul',{className:"_39bj"},this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21()),c('React').createElement('ul',{className:"_39bj"},this.$MessengerComposer22(),this.$MessengerComposer23(),this.$MessengerComposer24(),this.$MessengerComposer25(),this.$MessengerComposer26()));return c('React').createElement('ul',{className:"_39bj"},c('CurrentUser').isWorkUser()&&c('WorkQEWorkChatFileAttachmentIcon').showIcon?this.$MessengerComposer27():null,this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22(),this.$MessengerComposer23(),this.$MessengerComposer24(),this.$MessengerComposer25(),this.$MessengerComposer26())};u.prototype.$MessengerComposer28=function(v){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(o,{error:v.error})})};u.prototype.handleTextDropped=function(v){this.refsInput&&this.refsInput.handleTextDropped(v)};u.prototype.$MessengerComposer23=function(){return c('React').createElement('li',null,this.$MessengerComposer30())};u.prototype.$MessengerComposer30=function(){if(!c('P2PGKValues').P2PVisible||!this.props.threadID||this.$MessengerComposer31()||!this.props.p2pPaymentConfig)return null;var v="_30yy _25pc _39bk";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:v,ContextualDialog:c('MessengerContextualDialog.react'),threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:c('JSResource')('P2PSendMoneyContainerBootloader.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:v,role:'button'})})};u.prototype.$MessengerComposer26=function(){if(c('ChatConfig').get('messenger_www_quickcam')&&c('ChatConfig').get('messenger_www_html5_quickcam')&&this.props.threadID)return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_4rv5"+(' '+"_39bk")+(this.state.flyoutOpen?' '+"_5jhb":''),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv5 _39bk",role:'button'})});return null};u.prototype.$MessengerComposer22=function(){if(!t)return null;return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:c('JSResource')('MessengerVoiceClipButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv7 _39bk _30yy",role:'button'})}))};u.prototype.$MessengerComposer24=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;if(!this.props.threadFBID)return null;return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGroupPollingButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_39bk _30yy _2o-b",role:'button'})}))};u.prototype.$MessengerComposer25=function(){var v=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')();return v&&this.props.threadFBID&&!this.$MessengerComposer31()?c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGamesButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_39bk _30yy _4ce_",role:'button'})})):null};u.prototype.$MessengerComposer32=function(v){return c('React').createElement('li',{className:"_39bk"},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:!(this.props.threadID||this.$MessengerComposer33()),ref:function(w){return this.refsUploader=w}.bind(this),imageClassName:(v=='files'?"_5vn8":'')+(v=='attachment'?' '+"_46si":''),imagesOnly:false,inputClassname:"_260t",linkClassName:"_30yy _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer28,threadID:this.props.threadID}))};u.prototype.$MessengerComposer18=function(){return this.$MessengerComposer32('files')};u.prototype.$MessengerComposer27=function(){return this.$MessengerComposer32('attachment')};u.prototype.$MessengerComposer34=function(){return this.state.currentValue.length>0||this.$MessengerComposer35()||this.$MessengerComposer36()};u.prototype.$MessengerComposer35=function(){var v=this.props.fileUploader;return Boolean(v&&v.get('uploadedFiles').size>0)};u.prototype.$MessengerComposer36=function(){var v=this.props.sharePreview;return !!(v&&v.params&&v.type)};u.prototype.$MessengerComposer37=function(){var v=this.props.fileUploader;return Boolean(v&&v.get('uploadingFiles').size>0)};u.prototype.$MessengerComposer17=function(){var v=!(this.props.threadID||this.$MessengerComposer33());if(!v&&this.$MessengerComposer34()&&!this.$MessengerComposer37())return c('React').createElement(p,{className:(this.props.threadID?"_30yy":'')+(' '+"_38lh")+(' '+"_39bl"),customColor:this.props.thread&&this.props.thread.custom_color,onClick:this.$MessengerComposer38});return c('React').createElement(c('MessengerHotLikeButton.react'),{className:"_4rv9"+(this.props.threadID?' '+"_30yy":'')+(' '+"_39bl"),disabled:v,customColor:this.props.thread&&this.props.thread.custom_color,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24})};u.prototype.$MessengerComposer19=function(){var v=(this.props.threadID?"_30yy":'')+(' '+"_4rv6")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:v,ContextualDialogClass:c('MessengerContextualDialog.react'),disabled:!(this.props.threadID||this.$MessengerComposer33()),getInput:function(){return this.refsInput}.bind(this),flyoutAlignment:'right',flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$MessengerComposer29,threadID:this.props.threadID}),loader:c('JSResource')('ChatStickerButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:v,role:'button'})}))};u.prototype.$MessengerComposer20=function(){var v=(this.props.threadID?"_30yy":'')+(' '+"_yht")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement('div',{style:{display:'none'}},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:false,ref:function(w){return this.refsGifUploader=w}.bind(this),imagesOnly:false,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer28})),c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:v,ContextualDialogClass:c('MessengerContextualDialog.react'),getInput:function(){return this.refsInput}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():''}.bind(this),location:c('MercuryShareAttachmentRenderLocations').MESSENGER,onSelect:this.$MessengerComposer39}),loader:c('JSResource')('ChatContentSearchButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:v,role:'button'})}))};u.prototype.$MessengerComposer21=function(){var v=(this.props.threadID?"_30yy":'')+(' '+"_5s2p")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:v,ContextualDialogClass:c('MessengerContextualDialog.react'),flyoutAlignment:'right',getInput:function(){return this.refsInput}.bind(this),onSelect:this.$MessengerComposer40,onMount:function(w){return this.refsEmojiButton=w}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:c('JSResource')('ChatEmojiButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:v,role:'button'})}))};u.prototype.$MessengerComposer8=function(){var v=this.props.thread,w=!!v&&c('MessageRequestUtils').isFiltered(v);return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:51}}),bootloadLoader:c('JSResource')('MessengerPendingActions.react').__setRef('MessengerComposer.react'),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$MessengerComposer41().changeFolder(this.props.threadID,c('MessagingTag').INBOX);this.setState({pendingActionsBypassed:true},new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_accept_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType(w?'other':'pending').setThreadKeyWeb(this.props.threadID).setEntryPoint(null).log())}.bind(this),onDeclineClick:function(){c('Bootloader').loadModules(["messengerDeleteDialogReact"],function(x){var y=x.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(y,{onArchive:this.$MessengerComposer42,onDelete:this.$MessengerComposer43,onToggle:this.$MessengerComposer44})}.bind(this));new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_attempt').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType('pending').setThreadKeyWeb(this.props.threadID).setEntryPoint('inbox_banner').log()}.bind(this),'MessengerComposer.react')}.bind(this),onDeleteClick:function(){c('Bootloader').loadModules(["messengerFilteredDeleteDialogReact"],function(x){var y=x.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(y,{onDelete:this.$MessengerComposer43,onToggle:this.$MessengerComposer44})}.bind(this))}.bind(this),'MessengerComposer.react');new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_attempt').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID)).setSurface('thread').setFolderType('other').setThreadKeyWeb(this.props.threadID).setEntryPoint('inbox_banner').log()}.bind(this)})};u.prototype.$MessengerComposer7=function(){if(!this.props.thread||this.props.view===c('MessengerView').DETAIL.COMPOSE)return null;var v=this.props.thread,w=this.props.participants,x=false,y=false;if(v.cannot_reply_reason==='blocked'){x=true;v.is_canonical===true||k(0);w!=null||k(0);var z=v.other_user_fbid;z!=null||k(0);var aa=w.get(c('MercuryIDs').getParticipantIDFromUserID(z));aa!=null||k(0);if(aa.is_messenger_blocked)y=true;}if(x)if(y){return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},j._("You've blocked messages from this person. {unblock_now_button}",[j.param('unblock_now_button',c('React').createElement(n,{label:j._("Unblock now"),onClick:this.$MessengerComposer45,type:'secondary'}))])))}else return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},j._("This person isn't available at the moment.")));return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},c('MercuryReadOnlyReason').getReason(v.has_email_participant)))};u.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};u.prototype.$MessengerComposer10=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE};u.prototype.$MessengerComposer33=function(){return !!(this.$MessengerComposer10()&&this.props.recipients&&this.props.recipients.size)};u.prototype.$MessengerComposer31=function(){return !!this.$MessengerComposer4()};u.prototype.$MessengerComposer4=function(){return c('getPageIDFromThreadID')(this.props.threadID)};u.prototype.$MessengerComposer5=function(){var v=this.$MessengerComposer4();if(v){c('MessengerBotMenuDataFetcher').getHasPageSetting(v,function(w){this.setState({showMenu:w})}.bind(this),function(){this.setState({showMenu:false})}.bind(this),c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED)}else this.setState({showMenu:false});};u.prototype.$MessengerComposer6=function(){var v=this.$MessengerComposer4();if(v){c('MessengerBotMenuDataFetcher').getHasPageSetting(v,function(w){this.setState({disableInput:w})}.bind(this),function(){this.setState({disableInput:false})}.bind(this),c('MNCommercePageSetting').COMPOSER_INPUT_DISABLED)}else this.setState({disableInput:false});};u.prototype.$MessengerComposer3=function(v,w){var x=v===0,y=!!w;if(y&&x){var z=c('XMNCommercePageNullStateCTAController').getURIBuilder();new (c('AsyncRequest'))().setURI(z.getURI()).setMethod('POST').setData({page_id:w}).setHandler(function(aa){if(aa&&aa.payload){this.setState({showNullState:true,nullStateCTA:aa.payload})}else this.setState({showNullState:false,disableNullState:false});}.bind(this)).send()}else this.setState({showNullState:false,disableNullState:false});};u.prototype.$MessengerComposer2=function(){return {pendingActionsBypassed:false,currentValue:'',nullStateCTA:null,showMenu:false,disableInput:false,showNullState:false,disableNullState:false}};u.prototype.$MessengerComposer41=function(){return c('MercuryThreadActions').getForFBID(this.props.viewer)};u.prototype.testUtils_renderRawP2PSendMoneyButton=function(){return this.$MessengerComposer30()};u.prototype.replyToMention=function(v){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(v)};u.propTypes={canReply:q.bool,disableAutofocus:q.bool,fileUploader:q.object,hideActions:q.bool,mentionsEnabled:q.bool,onCustomLikeSelect:q.func,onMessageSend:q.func,onPhotoUploadComplete:q.func,onPhotoUploadCancel:q.func,onPhotoUploadFail:q.func,onPhotoUploadSubmit:q.func,onResize:q.func,onStickerSelect:q.func.isRequired,onVoiceClipCreate:q.func,p2pPaymentConfig:q.object,participants:q.instanceOf(c('immutable').Map),recipients:q.instanceOf(c('immutable').List),sharePreview:q.object,threadID:q.string,threadFBID:q.string,thread:q.object,view:q.string,viewer:q.string};f.exports=u}),null);
__d('MessengerEmojiUsageUtils',['MessengerSupportedEmojiUtils','Utf16'],(function a(b,c,d,e,f,g){'use strict';var h=65039,i={findAllEmojis:function j(k){var l=[],m=c('MessengerSupportedEmojiUtils').parse(k);m.forEach(function(n){var o=[];n.emoji.forEach(function(p){var q=c('Utf16').decode(p);if(q)o.push(q);});o[o.length-1]===h&&o.pop();l.push(o)});return l}};f.exports=i}),null);
__d('messengerSimpleDialogReact',['fbt','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerSimpleDialogReact");function j(m){if(m){return 0}else return c('messengerDialogsRe').removeDialog(0);}function k(m,n,o){var p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[m])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[n])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return p}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.title,m.body,[])});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l}),null);
__d('MessengerComposerContainer.react',['fbt','Arbiter','AsyncUploadRequest','EmojiLikeUtils','EmojiState','EmojiDispatcher','immutable','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryThreadIDMap','MercuryThreadInformer','MercuryIDs','MercuryLocalIDs','MercuryMessageActions','MercuryMessageObject','MercuryParticipants','MercurySendMessageHandler','MercuryThreads','MercuryThreadActions','MercuryTriodeSourceUtil','MessageRequestUtils','MessengerActions','MessengerComposer.react','MessengerComposerActions','messengerDialogsRe','MessengerEmojiUsageUtils','messengerSimpleDialogReact','MessengerView','MNPlatformTagsDataManager','P2PPaymentConfig','PhotosUploadID','React','ReactDOM','SearchableEntry','SubscriptionsHandler','nullthrows','setImmediate','EmojiStateStore'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerSimpleDialogReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerComposerContainer8=function(t,u,v){c('EmojiState').updateRecentlyUsed(c('MessengerEmojiUsageUtils').findAllEmojis(t));if(!this.props.canReply){v&&v(null);return false}var w=null,x=false;if(!this.$MessengerComposerContainer15(t,u))x=this.$MessengerComposerContainer16(function(y){var z=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),y),aa=c('MercuryIDs').getUserIDFromThreadID(y);if(c('MNPlatformTagsDataManager').hasThreadTags(aa)){var ba=c('MNPlatformTagsDataManager').getThreadTags();z.tags=ba}if(u){if(u.shareable_attachment)z.shareable_attachment=u.shareable_attachment;if(u.profile_ranges)z.profile_ranges=z.profile_xmd=u.profile_ranges;}w=z;return z}.bind(this));v&&v(x?w:null);w=null;return x}.bind(this),this.$MessengerComposerContainer10=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u)}.bind(this),this.$MessengerComposerContainer9=function(t,u){this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u.upload_id,u)}.bind(this),this.$MessengerComposerContainer11=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);var v=h._("Photo Upload failed"),w=h._("Please try again. Make sure you are uploading a valid photo.");if(u.errorDialogParams){v=u.errorDialogParams.title||v;w=u.errorDialogParams.body||w}this.$MessengerComposerContainer17(v,w)}.bind(this),this.$MessengerComposerContainer12=function(t,u){this.$MessengerComposerContainer16(function(v){return this.$MessengerComposerContainer2.constructAttachmentMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),v)}.bind(this),function(v){this.$MessengerComposerContainer3.addAttachmentPlaceholder(v,u.upload_id,u);this.handleMessageSentToPendingThread()}.bind(this))}.bind(this),this.handleAudioUpload=function(t){var u='upload_'+c('PhotosUploadID').getNewID();this.$MessengerComposerContainer1.sendAttachment(this.props.threadID,n(u),c('MercuryTriodeSourceUtil').getMercuryTriodeSource());var v={};v[u]=t;var w=new (c('AsyncUploadRequest'))(c('MercuryConfig').upload_url).setAllowCrossOrigin(true).setRelativeTo(c('ReactDOM').findDOMNode(this)).setData({voice_clip:true}).setFiles(v);this.$MessengerComposerContainer4.addSubscriptions(w.subscribe('success',function(x,y){return this.$MessengerComposerContainer18(y)}.bind(this)));w.send()}.bind(this),this.$MessengerComposerContainer13=function(t){return this.$MessengerComposerContainer16(function(u){return this.$MessengerComposerContainer2.constructStickerMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),u)}.bind(this))}.bind(this),this.$MessengerComposerContainer14=function(t,u,v){var w=this.props.threadID,x=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t.emoji,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),w);x.has_attachment=false;return this.$MessengerComposerContainer16(function(y){c('EmojiLikeUtils').setEmojiSize(x,u);return c('EmojiLikeUtils').setEmojiSource(x,v)})}.bind(this),this.handleMessageSentToPendingThread=function(){if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread))c('MercuryThreadActions').getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID);}.bind(this),this.$MessengerComposerContainer7=function(t,event){if(event.threadID===this.props.threadID)c('MercuryParticipants').get(event.participantID,function(u){if(!u||!this.refsComposer)return;var v=new (c('SearchableEntry'))({uniqueID:c('nullthrows')(u.fbid),title:'@'+u.name});c('setImmediate')(function(){if(this.refsComposer){this.refsComposer.focusInput();this.refsComposer&&this.refsComposer.replyToMention&&this.refsComposer.replyToMention(v)}}.bind(this))}.bind(this));}.bind(this),p}m.prototype.componentDidMount=function(){this.$MessengerComposerContainer1=c('MercurySendMessageHandler').getForFBID(this.props.viewer);this.$MessengerComposerContainer3=c('MercuryMessageActions').getForFBID(this.props.viewer);this.$MessengerComposerContainer5=c('MercuryThreads').getForFBID(this.props.viewer);this.$MessengerComposerContainer2=c('MercuryMessageObject').getForFBID(this.props.viewer);this.$MessengerComposerContainer6=c('MercuryThreadInformer').getForFBID(this.props.viewer);this.$MessengerComposerContainer4=new (c('SubscriptionsHandler'))();c('EmojiDispatcher').explicitlyRegisterStores([c('EmojiStateStore')]);if(c('MercuryConfig').MentionsReplyEvent)this.$MessengerComposerContainer4.addSubscriptions(c('Arbiter').subscribe(c('MercuryConfig').MentionsReplyEvent,this.$MessengerComposerContainer7));this.props.onMount&&this.props.onMount(this)};m.prototype.componentWillUnmount=function(){this.$MessengerComposerContainer4.release()};m.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};m.prototype.render=function(){return c('React').createElement(c('MessengerComposer.react'),{canReply:this.props.canReply,fileUploader:this.props.fileUploader,mentionsEnabled:true,onMessageSend:this.$MessengerComposerContainer8,onPhotoUploadComplete:this.$MessengerComposerContainer9,onPhotoUploadCancel:this.$MessengerComposerContainer10,onPhotoUploadFail:this.$MessengerComposerContainer11,onPhotoUploadSubmit:this.$MessengerComposerContainer12,onResize:this.props.onResize,onStickerSelect:this.$MessengerComposerContainer13,onCustomLikeSelect:this.$MessengerComposerContainer14,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:c('P2PPaymentConfig').config,participants:this.props.participants,recipients:this.props.recipients,ref:function(o){return this.refsComposer=o}.bind(this),sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer})};m.prototype.$MessengerComposerContainer15=function(o,p){if(o)return false;return !(p&&(p.shareable_attachment||p.profile_ranges.length>0))};m.prototype.$MessengerComposerContainer18=function(o){var p=o.getName(),q=o.getResponse().payload.metadata[0].audio_id;this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(p,{upload_id:p,audio_ids:[q]})};m.prototype.handleFileUpload=function(o){var p=o.reduce(function(q,r){var s=r.type.split('/')[0];if(q[s]){q[s].push(r)}else q.other.push(r);return q},{audio:[],image:[],other:[]});p.audio.forEach(function(q){return this.handleAudioUpload(q)}.bind(this));if(this.refsComposer)this.refsComposer.handleFileUpload(p.image.concat(p.other));};m.prototype.handleTextDropped=function(o){if(this.refsComposer)this.refsComposer.handleTextDropped(o);};m.prototype.$MessengerComposerContainer16=function(o,p){var q=this.props.threadID,r=this.props.recipients,s=false;if(!q&&r&&r.size>1){q=c('MercuryLocalIDs').generateThreadID();s=true}if(!q)return false;var t=o(q);if(s){var u=r.map(function(v){return c('MercuryIDs').getParticipantIDFromUserID(v.getUniqueID())}).toArray();this.$MessengerComposerContainer5.createNewLocalThread(q,u);t.offline_threading_id=c('MercuryIDs').tokenize(q).value;t.specific_to_list=u}if(p){p(t)}else this.$MessengerComposerContainer3.send(t,this.handleMessageSentToPendingThread);if(this.props.view===c('MessengerView').DETAIL.COMPOSE){if(c('MercuryAttachment').get(t).length>0)c('MessengerComposerActions').moveDraftToNextThread(q);c('MessengerComposerActions').exitComposeState();if(c('MercuryIDs').isLocalThread(q)){this.$MessengerComposerContainer6.subscribeOnce('messages-updated',function(v,w){var x=c('MercuryThreadIDMap').get();if(x.canLinkExternally(q))c('MessengerActions').selectThread(q);})}else c('MessengerActions').selectThread(q);}this.focusInput();return true};m.prototype.resetDrag=function(){if(this.refsComposer)this.refsComposer.exitCurrentMode();};m.prototype.$MessengerComposerContainer17=function(o,p){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{title:o,body:p})})};m.propTypes={canReply:l.bool,fileUploader:l.object,onMount:l.func,onResize:l.func,participants:l.instanceOf(c('immutable').Map),recipients:l.instanceOf(c('immutable').List),sharePreview:l.object,threadID:l.string,threadFBID:l.string,thread:l.object,view:l.string,viewer:l.string};function n(o){return {upload_id:o,preview_attachments:[{upload_id:o,attach_type:c('MercuryAttachmentType').PHOTO,preview_uploading:true}]}}f.exports=m}),null);
__d('MessengerBootloadedLogMessage.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('MessengerLogMessage.react').__setRef('MessengerBootloadedLogMessage.react'),placeholder:c('React').createElement('div',{className:"_497p"},'...')})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MessageThreadAssociatedObjectKey",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ACTION_LINK:"action_link",APPROVAL_MODE_TOGGLEABLE:"approval_mode_toggleable",ID:"id",IS_WORKPLACE_COMMUNITY:"is_workplace_community",NAME:"name",PROFILE_PICTURE:"profile_picture",ROOM_TYPE:"room_type",PRIVACY_MODE:"privacy_mode"})}),null);
__d('TimeSpentRoomTypeEnum$FbtEnum',[],(function a(b,c,d,e,f,g){'use strict';var h={GROUP:'Group',EVENT:'Event'};f.exports=h}),null);
__d('MessengerContextBanner.react',['cx','fbt','Badge.react','CurrentUser','Image.react','ImageBlock.react','immutable','Link.react','MercuryParticipantsConstants','MercuryParticipantsImage.react','MercuryThreadImage.react','MessageThreadAssociatedObjectKey','React','MercuryShareAttachmentRenderLocations','TimeSpentRoomTypeEnum','TimeSpentRoomTypeEnum$FbtEnum','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=void 0;c('requireWeak')('messengerThreadImageReact',function(o){m=o.jsComponent});j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerContextBanner3=function(){return c('React').createElement('div',{className:"_1n-e _36zg"},this.props.connectionContext)}.bind(this),p}n.prototype.render=function(){var o=c('React').createElement(c('ImageBlock.react'),{className:"_llj"+(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER?' '+"_2eu-":'')+(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?' '+"_2eu_":''),spacing:'large',style:this.props.style},this.$MessengerContextBanner1(),c('React').createElement('div',{className:"_lll"},this.$MessengerContextBanner2(),this.$MessengerContextBanner3(),this.$MessengerContextBanner4())),p=this.props.associatedObject;if(p&&p[c('MessageThreadAssociatedObjectKey').ACTION_LINK])o=c('React').createElement(c('Link.react'),{href:p[c('MessageThreadAssociatedObjectKey').ACTION_LINK],target:'_blank',style:{textDecoration:'none'}},o);return o};n.prototype.$MessengerContextBanner1=function(){var o=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,p=this.props.associatedObject,q=null;if(!this.props.contactName&&p&&o){q=c('React').createElement(c('Image.react'),{className:"_4ld- _1wrc",src:p[c('MessageThreadAssociatedObjectKey').PROFILE_PICTURE]})}else if(this.props.thread){var r=m&&o?m:c('MercuryThreadImage.react');q=c('React').createElement(r,{showBadge:false,participants:this.props.participants,size:o?60:null,thread:this.props.thread,viewer:this.props.viewer})}else if(this.props.participantIDs)q=c('React').createElement(c('MercuryParticipantsImage.react'),{participants:this.props.participantIDs,size:c('MercuryParticipantsConstants').BIG_IMAGE_SIZE});return c('React').createElement('div',{className:"_llk"},q)};n.prototype.$MessengerContextBanner2=function(){if(this.props.location!==c('MercuryShareAttachmentRenderLocations').MESSENGER)return null;var o=this.props.isVerified?c('React').createElement(c('Badge.react'),{size:'medium',type:'verified'}):null,p=this.props.contactName;if(!p){var q=this.props.associatedObject;p=q?q[c('MessageThreadAssociatedObjectKey').NAME]:null}return c('React').createElement('div',{className:"_llq"},c('React').createElement('span',{className:"_3oh-"},p,o))};n.prototype.$MessengerContextBanner4=function(){if(!this.props.contextItems.length){var o=this.props.associatedObject;if(o){var p=c('TimeSpentRoomTypeEnum')[o[c('MessageThreadAssociatedObjectKey').ROOM_TYPE]],q=c('CurrentUser').isWorkUser()?'Workplace':'Facebook';return c('React').createElement('div',{className:"_1n-e"},i._({"EVENT":"Go to {productName} event","GROUP":"Go to {productName} group"},[i.param('productName',q),i['enum'](p,c('TimeSpentRoomTypeEnum$FbtEnum'))]))}return null}return c('React').createElement('div',null,this.props.contextItems.map(function(r,s){return c('React').createElement('div',{className:"_1n-e",key:'item:'+s},r)}))};n.propTypes={contactName:l.string,associatedObject:l.object,connectionContext:l.string,contextItems:l.arrayOf(l.string).isRequired,isVerified:l.bool,location:l.string.isRequired,participantIDs:l.arrayOf(l.string),participants:l.instanceOf(c('immutable').Map),thread:l.object,viewer:l.string.isRequired};f.exports=n}),null);
__d("XMessengerContextBannerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/messenger\/context_banner\/",{profile_id:{type:"Int",required:true},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d('MessengerContextInformationStore',['AsyncRequest','EventEmitter','Map','TimeSlice','XMessengerContextBannerController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('Map'))(),k=new (c('Map'))();h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerContextInformationStore1=function(r){if(k.get(r))return;var s=c('XMessengerContextBannerController').getURIBuilder().setInt('profile_id',r).getURI(),t=new (c('AsyncRequest'))().setAllowCrossPageTransition(true).setURI(s).setHandler(this.$MessengerContextInformationStore2.bind(this,r));k.set(r,t);t.send()}.bind(this),n}l.prototype.getOrFetch=function(m){var n=j.get(m);n||c('TimeSlice').guard(this.$MessengerContextInformationStore1,'Chat Tab Messenger Context Banner Fetch',{isContinuation:false})(m);return n};l.prototype.$MessengerContextInformationStore2=function(m,n){j.set(m,{connectionContext:n.payload.connection_context||'',contextItems:n.payload.context_items||[]});k['delete'](m);this.emit('change')};f.exports=new l()}),null);
__d('PagesMessengerContextBanner.react',['cx','MercuryThreadImage.react','ProfileHeaderCoverPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=83,l=260,m=60;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){var o=this.props.coverPhotoData?c('React').createElement(c('ProfileHeaderCoverPhoto.react'),{coverPhotoData:this.props.coverPhotoData,height:k,width:l}):null;return c('React').createElement('div',{className:"_fj3",style:this.props.style},o,c('React').createElement('div',{className:"_2-0o"},c('React').createElement(c('MercuryThreadImage.react'),{size:m,thread:this.props.thread,viewer:this.props.viewer})))};function n(){i.apply(this,arguments)}f.exports=n}),null);
__d('MessengerContextBannerContainer.react',['DOMDimensions','immutable','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerContextBanner.react','MessengerContextInformationStore','PagesMessagingMercuryChatTabStore','PagesMessengerContextBanner.react','ReactComponentWithPureRenderMixin','React','ReactDOM','MercuryShareAttachmentRenderLocations','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerContextBannerContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'),c('MercuryThreads'),c('MessengerContextInformationStore'),c('PagesMessagingMercuryChatTabStore'))],propTypes:{location:h.string.isRequired,onResize:h.func,otherUserFBIDs:h.arrayOf(h.string),threadID:h.string,viewer:h.string.isRequired},statics:{calculateState:function j(k){var l=null,m=null;if(k.threadID){l=c('MercuryThreads').getForFBID(k.viewer).getOrFetch(k.threadID);m=l&&l.participants}else if(k.otherUserFBIDs&&k.otherUserFBIDs.length===1)m=k.otherUserFBIDs.map(function(s){return c('MercuryParticipants').getIDFromVanityOrFBID(s)});var n=c('immutable').Map();if(m)n=n.withMutations(function(s){m&&m.forEach(function(t){s.set(t,c('MercuryParticipants').getOrFetch(t))})});var o=null,p=null;if(l){o=n.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));p=l.associated_object}else o=m&&n.get(m[0]);var q=c('PagesMessagingMercuryChatTabStore').getStateByThread(k.threadID),r=q.coverPhotoData;return babelHelpers['extends']({associatedObject:p,contact:o,coverPhotoData:r,participantIDs:m,participants:n,thread:l},i.getContextInformation(o&&o.fbid&&o.fbid.toString()))},getContextInformation:function j(k){var l=void 0;if(k)l=c('MessengerContextInformationStore').getOrFetch(k.toString());return l||{connectionContext:'',contextItems:[]}}},componentDidUpdate:function j(){var k=c('ReactDOM').findDOMNode(this);if(!k)return;var l=c('DOMDimensions').getElementDimensions(k).height;if(this.props.onResize)this.props.onResize(l);},render:function j(){if(!this.state.contact){if(this.state.associatedObject&&this.props.location==c('MercuryShareAttachmentRenderLocations').MESSENGER)return c('React').createElement(c('MessengerContextBanner.react'),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer});return null}if(this.state.contact.type==='page'){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT)return c('React').createElement(c('PagesMessengerContextBanner.react'),{coverPhotoData:this.state.coverPhotoData,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer});}return c('React').createElement(c('MessengerContextBanner.react'),{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer})}});f.exports=i}),null);
__d('MessengerFlexArea.react',['cx','CSS','Event','messengerSignalsRe','React','ReactDOM','ResponsiveBlock.react','Style','SubscriptionsHandler','Vector','getScrollPosition','joinClasses','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerFlexArea',propTypes:{beforeResize:i.func,onResize:i.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function k(){return {height:0}},componentDidMount:function k(){var l=new (c('SubscriptionsHandler'))();l.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.recalculateHeight,51)),c('messengerSignalsRe').onResize(function(){this.recalculateHeight()}.bind(this)));this._subscriptions=l;this.recalculateHeight()},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout)},render:function k(){return c('React').createElement(c('ResponsiveBlock.react'),{className:c('joinClasses')(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+'px'}},this.props.children)},recalculateHeight:function k(){if(!this.isMounted())return;var l=c('ReactDOM').findDOMNode(this),m=l.parentNode,n=this.state.height,o=c('Vector').getViewportDimensions().y,p=false;if(m&&c('Style').get(m,'display')==='none'){c('Style').set(m,'display','initial');p=true}var q=false;if(m instanceof Element&&c('CSS').hasClass(m,'hidden_elem')){c('CSS').removeClass(m,'hidden_elem');q=true}o-=c('Vector').getElementPosition(m||l).y;var r=c('getScrollPosition')(window);o+=r.y;if(m){Array.from(m.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c('Style').get(s,'position')==='absolute')return;o-=c('Vector').getElementDimensions(s).y});o+=c('Vector').getElementDimensions(l).y}if(p)c('Style').set(m,'display','');if(q&&m instanceof Element)c('CSS').addClass(m,'hidden_elem');if(isNaN(o)||o<0)o=0;if(o!==n){this.props.beforeResize&&this.props.beforeResize();this.setState({height:o},this.props.onResize)}},_handleResponsiveBlockResize:c('throttle')(function(k,l){if(!this.isMounted())return;if(l===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0);}},51)});f.exports=j}),null);
__d('MessengerFlexScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea3=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea4()}.bind(this),this.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()}.bind(this),this.$MessengerFlexScrollableArea2=function(){this.trackBottomIfRequired()}.bind(this),this.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()}.bind(this),this.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()}.bind(this),this.scrollToTop=function(q){this.refs.scrollable&&this.refs.scrollable.scrollToTop(q)}.bind(this),this.isScrolledToBottom=function(){var q=this.refs.scrollable;return q?q.isScrolledToBottom():true}.bind(this),this.isScrolledToBottomWithHeight=function(q){return this.refs.scrollable.isScrolledToBottomWithHeight(q)}.bind(this),this.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()}.bind(this),this.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0}.bind(this),m}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount()};k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea2,ref:'flexArea'},this.props.flexChildren,c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea3,ref:'scrollable',tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren)};k.prototype.$MessengerFlexScrollableArea4=function(){if(this.isScrolledToBottom()){this.setState({shouldTrackBottom:true});this.$MessengerFlexScrollableArea5()}else{this.setState({shouldTrackBottom:false});this.$MessengerFlexScrollableArea6()}};k.prototype.$MessengerFlexScrollableArea5=function(){if(!this.props.useScrollProtection)return;this.$MessengerFlexScrollableArea6();this.$MessengerFlexScrollableArea1=setInterval(function(){this.trackBottomIfRequired()}.bind(this),500)};k.prototype.$MessengerFlexScrollableArea6=function(){if(this.$MessengerFlexScrollableArea1)clearInterval(this.$MessengerFlexScrollableArea1);};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n)};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number,useScrollProtection:j.bool};f.exports=k}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message"})}),null);
__d("messengerNewMessagesNoticeReact",["cx","ix","fbt","React","linkReact","imageReact","bs_js_boolean","reasonReact"],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=i("86939"),l=j._("New messages"),m=c("reasonReact").statelessComponent("MessengerNewMessagesNoticeReact");function n(p,q,r,s){var t=r?r[0]:l,u=m.slice();u[9]=function(){return c("React").cloneElement(c("React").createElement("div",{className:"_4wzq"+(c("bs_js_boolean").to_js_boolean(p)?" "+"_4wzr":"")+(c("bs_js_boolean").to_js_boolean(1-p)?" "+"_4-je":"")},c("reasonReact").element(0,0,c("linkReact").make(0,["_5f0v _4wzs"],0,0,0,0,[q],0,0,0,0,[p!==0?0:-1],0,0,[c("reasonReact").element(0,0,c("imageReact").make(["_4wzt"],0,[k],0,0,0,0,[])),c("React").createElement("div",{className:"_1bqr"},t)]))),{"aria-hidden":c("bs_js_boolean").to_js_boolean(1-p)})};return u}var o=c("reasonReact").wrapReasonForJs(m,function(p){return n(+p.isOpen,p.onClick,[p.label],[])});g.newMessageSrc=k;g.defaultLabel=l;g.component=m;g.make=n;g.jsComponent=o}),null);
__d('MessengerConversation.react',['cx','csx','fbt','BootloadOnRender.react','ChatTypingIndicators.react','CSS','DOM','DOMDimensions','Event','FluxContainer','immutable','ImmutableObject','JSResource','KeyEventController','LazyComponent.react','MercuryActionType','MercuryConfig','MercuryIDs','MercuryDeliveryReceipts','mercuryRogerRe','MercuryShareAttachmentRenderLocations','MessageList.react','MessengerAttachmentRenderer','messengerButtonReact','MessengerCollapsedLogMessageGroup.react','MessengerConfig','MessengerContextBannerContainer.react','MessengerDateBreak.react','MessengerFlexScrollableArea.react','MessengerBootloadedLogMessage.react','MessengerMessageGroup.react','messengerNewMessagesNoticeReact','MessengerPlatformSubscriptionMessageClassification','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','MessengerSpinner.react','MessengerTypingIndicator.react','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','MNOmniMConstants','OmniMStore','Parent','React','ReactDOM','Set','SubscriptionsHandler','UserActivity','WebMessengerConstants','convertMIGColorToFIGColor','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryDeliveryReceipts').get(),n=c('mercuryRogerRe').get(),o=c('messengerButtonReact').jsComponent,p=c('messengerNewMessagesNoticeReact').jsComponent,q=c('immutable').OrderedMap,r=c('React').PropTypes,s=20,t=100;function u(event,y){return !!(c('KeyEventController').filterEventTypes(event,y)&&c('KeyEventController').filterEventModifiers(event,y)&&event.target instanceof Element&&c('Parent').bySelector(event.target,"._4_j4"))}k=babelHelpers.inherits(v,c('React').PureComponent);l=k&&k.prototype;function v(){var y,z;for(var aa=arguments.length,ba=Array(aa),ca=0;ca<aa;ca++)ba[ca]=arguments[ca];return z=(y=l.constructor).call.apply(y,[this].concat(ba)),this.state={readReceipts:w(this.props),deliveryTimestamp:0,scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,suggestions:null,omniMPrefs:null},this.$MessengerConversation1=null,this.$MessengerConversation2=0,this.$MessengerConversation3=0,this.$MessengerConversation4=null,this.$MessengerConversation6=function(){var da=this.$MessengerConversation14();da&&da.pageUp();return false}.bind(this),this.$MessengerConversation7=function(){var da=this.$MessengerConversation14();da&&da.pageDown();return false}.bind(this),this.$MessengerConversation8=function(da){if(da.target===document.body){this.scrollToTop();return false}return null}.bind(this),this.$MessengerConversation9=function(da){if(da.target===document.body){this.scrollToBottom();return false}return null}.bind(this),this.$MessengerConversation12=function(){if(!this.refs.scrollable)return;var da=this.$MessengerConversation14(),ea=this.refs.quickReply;ea&&c('CSS').conditionClass(ea,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation10();this.$MessengerConversation11();if(da&&this.state.unreadCount&&this.$MessengerConversation18(da))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation26(da)}.bind(this),this.$MessengerConversation25=function(da){da.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation16()}.bind(this),this.$MessengerConversation11=function(){if(!this.isScrolledToBottom()||this.props.messages.size===0)return;if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()){this.props.onRead(this.props.threadID)}else if(!this.$MessengerConversation4)this.$MessengerConversation4=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this.$MessengerConversation13();this.props.onRead(this.props.threadID)}}.bind(this));}.bind(this),this.handleResize=function(){if(this.refs.scrollable){this.refs.scrollable.handleResize();var da=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.scrollable)).width;if(da!==this.state.width)this.setState({width:da});}var ea=this.refs.quickReply;ea&&c('CSS').conditionClass(ea,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),z}v.getStores=function(){return [c('OmniMStore')]};v.calculateState=function(y,z){if(!c('MercuryIDs').isValid(z.threadID))return babelHelpers['extends']({},y);return {suggestions:c('OmniMStore').suggestionsForThread(z.threadID),omniMPrefs:c('OmniMStore').prefs()}};v.prototype.componentDidMount=function(){var y=new (c('SubscriptionsHandler'))();y.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.handleResize,50)),c('KeyEventController').registerKey('PAGE_UP',this.$MessengerConversation6,u),c('KeyEventController').registerKey('PAGE_DOWN',this.$MessengerConversation7,u),c('KeyEventController').registerKey('HOME',this.$MessengerConversation8,u),c('KeyEventController').registerKey('END',this.$MessengerConversation9,u),n.subscribe('change',function(z,aa){aa[this.props.threadID]&&this.setState({readReceipts:w(this.props)})}.bind(this)),m.subscribe('change',function(z,aa){this.setState({deliveryTimestamp:this.props.threadID?m.getDeliveryTime(this.props.threadID):0})}.bind(this)));this.$MessengerConversation1=y;this.$MessengerConversation10();this.handleResize();this.$MessengerConversation11();this.$MessengerConversation5=c('throttle')(this.$MessengerConversation12,t)};v.prototype.componentWillReceiveProps=function(y){var z=y.threadID!==this.props.threadID;if(z){this.$MessengerConversation13();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:y.thread?y.thread.unread_count:0})}if(z||y.messages!==this.props.messages)this.setState({readReceipts:w(y),deliveryTimestamp:y.threadID?m.getDeliveryTime(y.threadID):0});};v.prototype.componentWillUnmount=function(){this.$MessengerConversation13();this.$MessengerConversation1&&this.$MessengerConversation1.release()};v.prototype.componentWillUpdate=function(){var y=this.$MessengerConversation14();if(y){this.$MessengerConversation2=y.getScrollHeight();this.$MessengerConversation3=y.getScrollTop()}};v.prototype.componentDidUpdate=function(y){if(!this.refs.scrollable)return;if(this.props.threadID!==y.threadID||x(y,this.props)){this.scrollToBottom();this.$MessengerConversation15()}else{var z=this.$MessengerConversation14();if(z){var aa=z.getScrollHeight();if(aa!==this.$MessengerConversation2){var ba=z.getScrollHeight()-this.$MessengerConversation2+this.$MessengerConversation3;this.refs.scrollable.scrollToPosition(ba)}else this.$MessengerConversation15();}}if(this.props.messages!==y.messages){this.$MessengerConversation11();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation16();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17())}setTimeout(function(){var ca=this.$MessengerConversation14();this.trackBottomIfRequired();if(ca&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation18(ca)){this.setState({showUnreadNotice:false,unreadCount:0})}else this.setState({showUnreadNotice:true});this.$MessengerConversation10()}.bind(this),0)};v.prototype.render=function(){if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation19();var y=this.props.messages.last(),z=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),aa=null,ba=null,ca=this.state.suggestions||{},da=ca.quickReplies,ea=ca.agentSuggestions;if(!da||!da.length)da=this.$MessengerConversation20(y);if(da&&da.length&&y.author!==z){aa=da;ba=c('MNOmniMConstants').QUICKREPLIES}else if(ea&&ea.length&&c('MercuryConfig').EnableOmniM){aa=ea;ba=c('MNOmniMConstants').OMNIM}var fa=aa&&aa.length&&aa.filter(function(oa){return !oa.dismissed}).length?c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{options:aa,threadID:y.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,source:ba,viewer:this.props.viewer,quickCamOriginLocation:c('MessengerQuickCamOrigins').MESSENGER,omniMPrefs:this.state.omniMPrefs}),loader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MessengerConversation.react'),placeholder:c('React').createElement('div',null)}):null,ga=null;if(y&&y.message_source&&y.author!==z&&c('MercuryConfig').WebCamQuickReply){var ha=y.message_source;if(ha==='camera'){var ia=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):null,ja=c('React').createElement('div',{className:"_1gc5",style:ia&&{color:ia}},j._("Send a photo reply"));ga=c('React').createElement('div',{className:"_1gc6"},c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),{className:"_4rv5"+(' '+"_1gcb"),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:ja}))}}var ka=null,la=null;if(ga||fa){ka=c('React').createElement('div',{className:"_51op"},c('React').createElement('div',{className:"_51oq",onResize:this.handleResize}));la=c('React').createElement('div',{ref:'quickReply'},c('React').createElement('div',{className:"_1mzb",onResize:this.handleResize},ga,fa))}var ma=j._("Messages"),na=j._("Load more...");return c('React').createElement(c('MessengerFlexScrollableArea.react'),{className:this.props.className,flexChildren:this.$MessengerConversation21(),footerChildren:la,onMount:function(){return c('setImmediate')(this.$MessengerConversation11)}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation5,ref:'scrollable',shouldStickToBottom:true,tabIndex:0,useScrollProtection:c('MessengerConfig').ChatScrollInterval},c('React').createElement('div',{'aria-label':ma,className:c('joinClasses')("__i_",this.props.innerClassName),role:'region'},c('React').createElement('h3',{className:"accessible_elem"},ma),this.$MessengerConversation22(),this.props.useManualFetch&&!this.props.upExhausted?c('React').createElement(o,{className:"_41jf",label:na,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP)}.bind(this),type:'primary',use:'default'}):null,this.$MessengerConversation23(),c('React').createElement(c('MessageList.react'),{DateBreak:c('MessengerDateBreak.react'),deliveryTimestamp:this.state.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:c('MessengerBootloadedLogMessage.react'),CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),MessageGroup:c('MessengerMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation24(this.props.threadID),readReceipts:this.state.readReceipts,ref:'messageList',location:c('MercuryShareAttachmentRenderLocations').MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c('React').createElement(o,{className:"_41jf",label:na,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:'primary',use:'default'}):null,c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),ka))};v.prototype.$MessengerConversation20=function(y){var z=null,aa=y&&y.platform_xmd&&JSON.parse(y.platform_xmd),ba=aa&&aa.message_classification===c('MessengerPlatformSubscriptionMessageClassification').AD_MESSAGE;if(ba)z=aa&&aa.quick_replies;return z};v.prototype.$MessengerConversation10=function(){if(this.props.useManualFetch)return;var y=this.$MessengerConversation14();if(y&&y.getScrollTop()<s){this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17())}};v.prototype.isScrolledToBottom=function(){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};v.prototype.isScrolledToBottomWithHeight=function(y){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(y))};v.prototype.$MessengerConversation21=function(){return c('React').createElement(p,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j.plural(this.state.unreadCount,'number')]),onClick:this.$MessengerConversation25})};v.prototype.$MessengerConversation22=function(){if(!this.props.isLoaded)return null;return c('React').createElement(c('MessengerContextBannerContainer.react'),{location:c('MercuryShareAttachmentRenderLocations').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer})};v.prototype.$MessengerConversation23=function(){if(this.props.isLoaded)return null;return c('React').createElement('div',{className:"_2k8v"},this.props.isLoading?c('React').createElement(c('MessengerSpinner.react'),null):null)};v.prototype.$MessengerConversation19=function(){return c('React').createElement('div',{className:"_4xu0"},c('React').createElement(c('MessengerSpinner.react'),{className:"_4xu1",size:c('MessengerSpinner.react').large_size}))};v.prototype.trackBottomIfRequired=function(){this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};v.prototype.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};v.prototype.scrollToTop=function(y){this.refs.scrollable&&this.refs.scrollable.scrollToTop(y)};v.prototype.$MessengerConversation24=function(y){return function(){if(this.props.threadID!==y)return;this.trackBottomIfRequired()}.bind(this)};v.prototype.$MessengerConversation15=function(){c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(y){if(y.complete)return;var z=this.props.threadID,aa=c('Event').listen(y,'load',function(){if(this.props.threadID===z)this.trackBottomIfRequired();aa.remove()}.bind(this))}.bind(this))};v.prototype.$MessengerConversation27=function(){var y=this.props.messages,z=this.state.unreadCount;if(!z||z>y.size)return null;return y.get(y.size-z)};v.prototype.$MessengerConversation18=function(y){var z=this.$MessengerConversation27();if(!z)return false;var aa=this.refs.messageList.getMessageElement(z.message_id);if(!aa)return false;var ba=aa.getBoundingClientRect().top,ca=y.getElement().getBoundingClientRect().top;if(ba-ca<0)return false;return true};v.prototype.$MessengerConversation28=function(y){return !!this.props.messages.find(function(z){return z.message_id===y})};v.prototype.$MessengerConversation16=function(){if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var y=this.$MessengerConversation27();if(!y){this.scrollToTop(false);return}this.$MessengerConversation29(y.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0})}.bind(this))};v.prototype.$MessengerConversation29=function(y,z){var aa=this.refs.messageList.getMessageElement(y,true),ba=this.$MessengerConversation14();if(!aa||!ba)return;var ca=aa.getBoundingClientRect().top,da=c('ReactDOM').findDOMNode(this.refs.messageList).getBoundingClientRect().top,ea=ba.getElement().getBoundingClientRect().top,fa=ca+Math.abs(da)+ea;ba.setScrollTop(fa,true,{callback:z})};v.prototype.$MessengerConversation14=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};v.prototype.$MessengerConversation13=function(){this.$MessengerConversation4&&this.$MessengerConversation4.unsubscribe();this.$MessengerConversation4=null};v.prototype.$MessengerConversation17=function(){return this.props.messages.filter(function(y){return c('MessengerAttachmentRenderer').isSingleVideoAttachment(y)||c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(y)}).reverse().map(function(y){return y.message_id})};v.prototype.$MessengerConversation26=function(y){var z=this.refs.messageList;if(!z||!y)return;var aa=[],ba=y.getElement().getBoundingClientRect(),ca=c('MessengerVideoAutoplayStore').getMessageIDs(this.props.threadID),da=ca||this.$MessengerConversation17()||c('immutable').List();da.map(function(ea){var fa=c('MessengerAttachmentRenderer').getVideoElem(ea,z);if(fa)aa.push([ea,fa.getBoundingClientRect()]);});if(aa.length)c('MessengerVideoAutoplayActions').onScroll(this.props.threadID,ca?null:da,c('immutable').Map(aa),ba);};v.propTypes={contact:r.instanceOf(c('ImmutableObject')),downExhausted:r.bool,fetchMessages:r.func.isRequired,innerClassName:r.string,isCanonical:r.bool,isLoaded:r.bool,isLoading:r.bool,messages:r.instanceOf(c('immutable').List).isRequired,onVoiceClipCreate:r.func,participants:r.instanceOf(c('immutable').Map),thread:r.object,threadID:r.string.isRequired,upExhausted:r.bool,useManualFetch:r.bool,viewer:r.string.isRequired};function w(y){var z=c('MercuryIDs').getParticipantIDFromUserID(y.viewer),aa=n.getSeenTimestamps(y.threadID),ba=new (c('Set'))(y.thread?y.thread.participants:aa.keys());ba['delete'](z);var ca=null;c('immutable').Seq(y.messages).reverse().forEach(function(da){if(da.action_type!==c('MercuryActionType').LOG_MESSAGE){ca=da;return false}return true});return aa.withMutations(function(da){c('immutable').Seq(y.messages).reverse().forEach(function(ea){if(ba.size===0)return false;if(!ba.has(ea.author))return;da.update(ea.author,function(fa){var ga=fa;if(!fa||fa.watermark<=ea.timestamp)ga={watermark:ea.timestamp,action:ea.timestamp};if(ca&&ca.timestamp<ga.watermark)ga={watermark:ca.timestamp,action:ca.timestamp};return ga});ba['delete'](ea.author)})})}function x(y,z){var aa=c('MercuryIDs').getParticipantIDFromUserID(z.viewer);return z.threadID===y.threadID&&z.messages!==y.messages&&!z.messages.isEmpty()&&z.messages.last()!==y.messages.last()&&z.messages.last().author===aa}f.exports=c('FluxContainer').create(v,{withProps:true})}),null);
__d('MessengerLeaveGroupAction',['MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadInfo','MercuryTriodeSourceUtil'],(function a(b,c,d,e,f,g){var h={leaveGroup:function i(j,k){if(c('MercuryThreadInfo').isEmptyLocalThread(j))return;var l=c('MercuryMessageObject').getForFBID(k),m=l.constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),j.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(k)]}),n=c('MercuryMessageActions').getForFBID(k);n.send(m)}};f.exports=h}),null);
__d('messengerBlockedGroupThreadWarningDialogReact',['fbt','bs_curry','reasonReact','CacheStorage','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=h._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group."),j=h._("See conversation?"),k=h._("Cancel"),l=h._("Leave Group"),m=h._("See Conversation"),n=new (c('CacheStorage'))("localstorage");function o(v){return "see_blocked_group:"+v}function p(v,w){n.set("see_blocked_group:"+v,w,true);return 0}function q(v){return n.get("see_blocked_group:"+v,false)}var r=c('reasonReact').statelessComponent("MessengerBlockedGroupThreadWarningDialogReact");function s(v){if(v){return 0}else return c('messengerDialogsRe').removeDialog(0);}function t(v,w,x,y,z){var aa=function ea(fa){fa.stopPropagation();c('bs_curry')._1(v,0);return c('messengerDialogsRe').removeDialog(0)},ba=function ea(fa){fa.stopPropagation();c('bs_curry')._1(w,y);return c('messengerDialogsRe').removeDialog(0)},ca=function ea(fa){fa.stopPropagation();c('bs_curry')._1(x,y);return c('messengerDialogsRe').removeDialog(0)},da=r.slice();da[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,s,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Title[0](0,[j]))])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[i])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([1],[k],0,0,[ca],[1],0,0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([1],[l],0,0,[ba],[1],0,0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([1],[m],0,["danger"],[aa],[0],0,0,[]))]))]))};return da}var u=c('reasonReact').wrapReasonForJs(r,function(v){return t(v.onSee,v.onLeave,v.onCancel,v.prevThreadID,[])});g.bodyText=i;g.titleText=j;g.cancelText=k;g.leaveText=l;g.seeConvoText=m;g.storage=n;g.getSeeConversationCacheKey=o;g.setWantsToSee=p;g.getWantsToSee=q;g.component=r;g.handleToggle=s;g.make=t;g.jsComponent=u}),null);
__d('messengerServerErrorDialogReact',['fbt','bs_curry','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerServerErrorDialog");function j(o){if(o){return 0}else return c('messengerDialogsRe').removeDialog(0);}var k=h._("An unexpected problem was encountered. Please try again later."),l=h._("Temporary failure");function m(o,p){var q=i.slice();q[4]=function(){return c('bs_curry')._1(o,0)};q[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[l])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[k])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return q}var n=c('reasonReact').wrapReasonForJs(i,function(o){return m(o.onMount,[])});g.component=i;g.handleToggle=j;g.message=k;g.title=l;g.make=m;g.jsComponent=n}),null);
__d('MessengerConversationContainer.react',['immutable','ImmutableObject','mercuryBlockedParticipantsRe','MercuryIDs','MercuryLogMessageType','MercuryMessageStore','MessengerActions','messengerBlockedGroupThreadWarningDialogReact','MessengerConfig','MessengerConversation.react','messengerDialogsRe','MessengerHotLikePreviewEvents','MessengerLeaveGroupAction','React','SubscriptionsHandler','messengerServerErrorDialogReact'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('mercuryBlockedParticipantsRe').get(),k=c('messengerServerErrorDialogReact').jsComponent,l=c('React').PropTypes,m=c('messengerBlockedGroupThreadWarningDialogReact').jsComponent;h=babelHelpers.inherits(n,c('React').PureComponent);i=h&&h.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.state={isLoaded:false,isLoading:true,messages:c('immutable').List()},this.$MessengerConversationContainer2=undefined,this.$MessengerConversationContainer3=false,this.$MessengerConversationContainer4=undefined,this.$MessengerConversationContainer5=undefined,this.$MessengerConversationContainer6=undefined,this.$MessengerConversationContainer7=false,this.$MessengerConversationContainer12=function(){var t=this.props.thread;if(t==null)return;c('messengerBlockedGroupThreadWarningDialogReact').setWantsToSee(t.thread_id,true)}.bind(this),this.$MessengerConversationContainer13=function(t){var u=this.props.thread;if(u==null)return;c('MessengerLeaveGroupAction').leaveGroup(u,this.props.viewer);this.$MessengerConversationContainer15(t)}.bind(this),this.$MessengerConversationContainer14=function(t){this.$MessengerConversationContainer15(t)}.bind(this),this.$MessengerConversationContainer11=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this.$MessengerConversationContainer1.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true});}.bind(this),p}n.prototype.componentWillUnmount=function(){this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();clearTimeout(this.$MessengerConversationContainer6)};n.prototype.componentDidMount=function(){this.$MessengerConversationContainer8(this.props.threadID);if(this.$MessengerConversationContainer9())this.$MessengerConversationContainer10();};n.prototype.componentDidUpdate=function(o){var p=this.props.threadID!==o.threadID;if(p&&this.$MessengerConversationContainer9())this.$MessengerConversationContainer10(o.threadID);};n.prototype.componentWillReceiveProps=function(o){if(this.props.threadID!==o.threadID){this.setState({isLoading:true,messages:c('immutable').List()});this.$MessengerConversationContainer8(o.threadID)}};n.prototype.render=function(){var o=this.state.messages,p=o.some(function(q){return q.log_message_type===c('MercuryLogMessageType').SERVER_ERROR});if(c('MessengerConfig').ErrorDialog&&p&&!this.$MessengerConversationContainer7)c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{onMount:function(){return this.$MessengerConversationContainer7=true}.bind(this)})}.bind(this));return c('React').createElement(c('MessengerConversation.react'),{className:this.props.className,contact:this.props.contact,fetchMessages:this.$MessengerConversationContainer11,isCanonical:c('MercuryIDs').isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,participants:this.props.participants,ref:'conversation',thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};n.prototype.handleResize=function(){this.refs.conversation.handleResize()};n.prototype.isScrolledToBottom=function(){return !!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};n.prototype.$MessengerConversationContainer9=function(){var o=this.props.thread;if(o==null)return false;if(c('MercuryIDs').isCanonical(this.props.threadID))return false;if(!o.is_subscribed)return false;if(!j.isPresentInGroupThread(o))return false;var p=c('messengerBlockedGroupThreadWarningDialogReact').getWantsToSee(o.thread_id);if(p)return false;return true};n.prototype.$MessengerConversationContainer10=function(o){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{onSee:this.$MessengerConversationContainer12,onLeave:this.$MessengerConversationContainer13,onCancel:this.$MessengerConversationContainer14,prevThreadID:o})}.bind(this))};n.prototype.$MessengerConversationContainer15=function(o){if(o==null)c('MessengerActions').selectThread(null);c('MessengerActions').selectThread(o)};n.prototype.$MessengerConversationContainer8=function(o){if(!o)return;this.setState({isLoaded:false});this.$MessengerConversationContainer1&&this.$MessengerConversationContainer1.destroy();this.$MessengerConversationContainer7=false;this.$MessengerConversationContainer1=new (c('MercuryMessageStore'))(o,c('MessengerConfig').MessageLoadCount);clearTimeout(this.$MessengerConversationContainer6);this.$MessengerConversationContainer6=setTimeout(function(){if(this.props.thread&&this.props.thread.message_count<1)this.setState({isLoaded:true,isLoading:false});}.bind(this),6000);this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();this.$MessengerConversationContainer2=new (c('SubscriptionsHandler'))();this.$MessengerConversationContainer2.addSubscriptions(this.$MessengerConversationContainer1.subscribe(function(p){this.setState({messages:this.$MessengerConversationContainer16(c('immutable').List(p.messages)),isLoading:false})}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(p){this.$MessengerConversationContainer3=true;this.$MessengerConversationContainer4=p;this.setState({messages:this.$MessengerConversationContainer16(this.state.messages)});clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer5=setInterval(this.refs.conversation.scrollToBottom,50)}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(p){clearInterval(this.$MessengerConversationContainer5)}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(p){clearInterval(this.$MessengerConversationContainer5)}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(){clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer3=false;this.setState({messages:this.$MessengerConversationContainer16(this.state.messages)})}.bind(this)))};n.prototype.$MessengerConversationContainer16=function(o){if(this.$MessengerConversationContainer3){o=o.set(o.size,this.$MessengerConversationContainer4)}else{o=o.filterNot(function(p){return p.is_like_preview});this.$MessengerConversationContainer4=null}return o};n.propTypes={contact:l.instanceOf(c('ImmutableObject')),onMarkRead:l.func.isRequired,onVoiceClipCreate:l.func,participants:l.instanceOf(c('immutable').Map),thread:l.object,threadID:l.string.isRequired,viewer:l.string.isRequired};f.exports=n}),null);
__d("archiveWarningReact",["cx","ix","React","imageReact","bs_js_boolean","reasonReact","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("ArchiveWarningReact");function k(m,n,o){var p=j.slice();p[9]=function(){var q=c("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(m!==0){var r=m!==0?i("28105"):i("28106");return c("React").cloneElement(c("reasonReact").element(0,0,c("imageReact").make(["titanArchiveWarning"+(" "+"button")+(c("bs_js_boolean").to_js_boolean(1-n)?" "+"hidden_elem":"")],0,[r],0,0,0,0,[])),{"data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))})}else if(n!==0){var s=c("React").createElement("i",{className:"_3olv _14lt"});return c("React").cloneElement(c("React").createElement("div",{className:"_3a61"},s),{"data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))})}else return null;};return p}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(+m.isFBAtWork,+m.shown,[])});g.component=j;g.make=k;g.jsComponent=l}),null);
__d('mercuryThreadTitleReact',['utilsRe','reasonReact','bs_js_null_undefined','MercuryThreadTitle.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('reasonReact').wrapJsForReason(c('MercuryThreadTitle.react'),{className:c('bs_js_null_undefined').from_opt(i),thread:j,viewer:k,isNewThread:c('utilsRe').optionBoolToNullUndefinedBoolean(l),showUnreadCount:c('utilsRe').optionBoolToNullUndefinedBoolean(m),useShortName:c('utilsRe').optionBoolToNullUndefinedBoolean(n),useAndSeparator:c('utilsRe').optionBoolToNullUndefinedBoolean(o)},p)}g.make=h}),null);
__d('messengerCalculateTruncationState',['Style'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c('Style').set(i,'text-align','center');c('Style').set(j,'width','auto');c('Style').set(j,'margin-left','auto')}else{if(document.body.dir==='rtl'){c('Style').set(i,'text-align','right')}else{c('Style').set(i,'text-align','left');c('Style').set(j,'margin-left',n+'px')}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c('Style').set(j,'width',q+'px')}}f.exports=h}),null);
__d("messengerCustomColorUtilsRe",["cssVar","CurrentUser"],(function a(b,c,d,e,f,g,h){'use strict';function i(j){var k=j.custom_color,l=0;if(k==null){l=1}else if(k===""){l=1}else return k;if(l===1){var m=+c("CurrentUser").isWorkUser();if(m!==0){return "#1479fb"}else return "#0084ff";}}g.customColorOrBlue=i}),null);
__d("messengerInfoPanelButtonReact",["React"],(function a(b,c,d,e,f,g){'use strict';var h={height:"32px",width:"32px"};function i(l){return c("React").createElement("svg",{viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{style:{fill:l},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function j(l){var m={fill:l};return c("React").createElement("svg",{style:{stroke:l},viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("polygon",{style:m,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),c("React").createElement("circle",{style:m,cx:"32",cy:"22",r:"3"})),c("React").createElement("path",{style:{fill:"none",stroke:l,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function k(l,m){return c("React").createElement("div",{style:h},m!==0?j(l):i(l))}g.svgWrapperStyle=h;g.selected=i;g.notSelected=j;g.make=k}),null);
__d("messengerPresenceStatusReact",["fbt","React","reasonReact","bs_js_primitive"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reasonReact").statelessComponent("MessengerPresenceStatusReact");function j(l,m,n,o,p){var q=i.slice();q[9]=function(){var r,s=0;if(m!==0&&o){r=h._("Active on {platform}",[h.param("platform",o[0])])}else s=1;if(s===1)r=n?h._("Active {time} ago",[h.param("time",n[0])]):o?o[0]:null;var t={};if(l)t.className=l[0];return c("React").createElement("span",t,r)};return q}var k=c("reasonReact").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.className),+l.isUserActive,c("bs_js_primitive").null_undefined_to_opt(l.lastActive),c("bs_js_primitive").null_undefined_to_opt(l.platform),[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d('MessengerRTCGroupCallUnsupportedBrowserDialog.react',['fbt','Link.react','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerDialogBodyReact').jsComponent,j=function n(o){var p=o.hasVideo,q=o.onUnmount;return c('React').createElement(c('MessengerDialog.react'),{onToggle:q},c('React').createElement(c('MessengerDialogHeader.react'),null,k(p)),c('React').createElement(i,null,l(p)),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{label:h._("OK"),onClick:q,type:'primary'})))};function k(n){return n?h._("Switch Browsers to Make Group Video Chats"):h._("Switch browsers to make group calls")}function l(n){return n?h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video chat, open in {link to install chrome}.",[h.param('browser name, i.e. Internet Explorer or Safari',m()),h.param('link to install chrome',c('React').createElement(c('Link.react'),{href:'https://www.google.com/chrome/index.html',target:'_blank'},'Google Chrome'))]):h._("Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}.",[h.param('browser name, i.e. Internet Explorer or Safari',m()),h.param('link to install chrome',c('React').createElement(c('Link.react'),{href:'https://www.google.com/chrome/index.html',target:'_blank'},'Google Chrome'))])}function m(){if(c('UserAgent').isBrowser('Firefox')){return h._("Firefox")}else if(c('UserAgent').isBrowser('IE')){return h._("Internet Explorer")}else if(c('UserAgent').isBrowser('Safari')){return h._("Safari")}else return h._("your browser");}f.exports=j}),null);
__d('MessengerRTCGroupCallUnsupportedBrowserDialogController',['DOM','MessengerRTCGroupCallUnsupportedBrowserDialog.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={_container:c('DOM').create('div'),render:function i(j){var k=j.hasVideo;c('ReactDOM').render(c('React').createElement(c('MessengerRTCGroupCallUnsupportedBrowserDialog.react'),{hasVideo:k,onUnmount:function(){return this.unmount()}.bind(this)}),this._container)},unmount:function i(){c('ReactDOM').unmountComponentAtNode(this._container)}};f.exports=h}),null);
__d('MessengerRTCUnavailableDialog.react',['fbt','messengerDialogsRe','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRTCUnavailableDialog2=function(){return c('React').createElement('div',null,h._("{name} is not available at the moment.",[h.param('name',this.props.name)]))}.bind(this),o}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerRTCUnavailableDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Can't make call")),c('React').createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("OK"),type:'primary'})))};m.prototype.$MessengerRTCUnavailableDialog1=function(n){if(!n)c('messengerDialogsRe').removeDialog();};m.propTypes={name:l.string.isRequired};f.exports=m}),null);
__d("messengerRTCVideoCallButtonReact",["fbt","React","reasonReact"],(function a(b,c,d,e,f,g,h){'use strict';var i={height:"32px",width:"32px"};function j(o,p){return {clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"}}var k=j("#888888",0),l=c("reasonReact").statelessComponent("MessengerRTCVideoCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group video chat"):h._("Start a video chat"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))))};return s}var n=c("reasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[])});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n}),null);
__d("messengerRTCVoiceCallButtonReact",["fbt","React","reasonReact"],(function a(b,c,d,e,f,g,h){'use strict';var i={height:"32px",width:"32px"};function j(o,p){return {clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"}}var k=j("#888888",0),l=c("reasonReact").statelessComponent("MessengerRTCVoiceCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group call"):h._("Start a voice call"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})))};return s}var n=c("reasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[])});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n}),null);
__d('MessengerRTCCallButton.react',['invariant','immutable','ImmutableObject','Link.react','MercuryIDs','MercuryThreadIDMap','messengerDialogsRe','MessengerRTCUnavailableDialog.react','messengerRTCVideoCallButtonReact','messengerRTCVoiceCallButtonReact','MNRTCCallabilityStore','React','StoreAndPropBasedStateMixin','FBRTCLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryThreadIDMap').get(),j=c('messengerRTCVideoCallButtonReact').jsComponent,k=c('messengerRTCVoiceCallButtonReact').jsComponent,l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerRTCCallButton',mixins:[c('StoreAndPropBasedStateMixin')(c('MNRTCCallabilityStore'))],statics:{calculateState:function o(p){if(c('MercuryIDs').isGroupChat(p.threadID))return {isCallable:true};var q=c('MercuryIDs').getUserIDFromThreadID(p.threadID);q||h(0);return {isCallable:c('MNRTCCallabilityStore').isCallable(q)}}},propTypes:{className:m.string.isRequired,customColor:m.string.isRequired,isVideo:m.bool.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,thread:m.instanceOf(c('ImmutableObject')).isRequired,threadID:m.string.isRequired,viewer:m.string.isRequired,calleeName:m.string.isRequired},render:function o(){var p={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c('MercuryIDs').isGroupChat(this.props.threadID)};return c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c('React').createElement(j,p):c('React').createElement(k,p))},_handleStartCall:function o(p){p.preventDefault();if(this.state.isCallable){if(c('MercuryIDs').isGroupChat(this.props.threadID)){e(['FBRTCCore','FBRTCSupport','MessengerRTCGroupCallUnsupportedBrowserDialogController','MessengerRTCGroupCallParticipantsPickerDialogController'],function(q,r,s,t){var u=this.props.thread.rtc_call_data;if(u&&u.call_state!=='NO_ONGOING_CALL'&&u.server_info_data){q.startGroupCall({conferenceName:'GROUP:'+this.props.thread.thread_fbid,hasVideo:this.props.isVideo,serverInfoData:u.server_info_data,trigger:u.call_state!=='AUDIO_GROUP_CALL'?this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!r.isGroupCallWebtrcSupported()){s.render({hasVideo:this.props.isVideo});return}var v=function(w){t.render({participants:this.props.participants.filter(function(x){var y=x.fbid;return y!==this.props.viewer}.bind(this)),thread:this.props.thread,viewerID:this.props.viewer,trigger:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:'GROUP:'+w,hasVideo:this.props.isVideo})}.bind(this);if(c('MercuryIDs').isLocalThread(this.props.threadID)){i.getServerIDFromClientID(this.props.threadID,function(w){return v(w)})}else v(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID));}.bind(this))}else e(['FBRTCCore'],function(q){var r=c('MercuryIDs').getUserIDFromThreadID(this.props.threadID);r||h(0);q.startOutgoingCall(r,'messenger_dot_com',!this.props.isVideo)}.bind(this));}else c('messengerDialogsRe').showDialog(function(){return c('React').createElement(c('MessengerRTCUnavailableDialog.react'),{name:this.props.calleeName})}.bind(this));}});f.exports=n}),null);
__d('messengerRTCCallButtonReact',['bs_js_boolean','reasonReact','MessengerRTCCallButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerRTCCallButton.react'),{className:i,customColor:j,isVideo:c('bs_js_boolean').to_js_boolean(k),participants:l,thread:m,threadID:n,viewer:o,calleeName:p},q)}g.make=h}),null);
__d('montageThreadViewContainerReact',['reasonReact','bs_js_null_undefined','MontageThreadViewContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MontageThreadViewContainer.react'),{threadID:i,onResize:c('bs_js_null_undefined').from_opt(j)},k)}g.make=h}),null);
__d('messengerDetailViewHeaderReact',['cx','fbt','bs_curry','Event','React','ReactDOM','debounce','linkReact','RTCConfig','bs_js_boolean','reasonReact','FBRTCSupport','bs_js_primitive','MercuryConfig','WorkModeConfig','bs_js_null_undefined','MercuryThreadInfo','messengerDomIDsRe','archiveWarningReact','MercuryParticipantTypes','mercuryThreadTitleReact','messengerLocalTimeReact','WorkFocusModeController','MessengerJoinableModeType','MessengerWebDriverTestIDs','messengerCustomColorUtilsRe','messengerRTCCallButtonReact','messengerPresenceStatusReact','messengerInfoPanelButtonReact','montageThreadViewContainerReact','messengerCalculateTruncationState'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('WorkFocusModeController').MessengerWorkAvailabilityStatus;function k(w){var x=c('bs_js_null_undefined').from_opt(w[0][0]),y=c('bs_js_null_undefined').from_opt(w[1][0]),z=c('bs_js_null_undefined').from_opt(w[2][0]),aa=c('bs_js_null_undefined').from_opt(w[3][0]),ba=c('bs_js_null_undefined').from_opt(w[4][0]);return c('messengerCalculateTruncationState')(x,y,z,aa,ba)}function l(w,x){x[4][3][0]=w!==null?[c('ReactDOM').findDOMNode(w)]:0;return 0}function m(w,x){x[4][1][0]=w===null?0:[w];return 0}function n(w,x){x[4][0][0]=w===null?0:[w];return 0}function o(w,x){x[4][2][0]=w===null?0:[w];return 0}function p(w,x){x[4][4][0]=w===null?0:[w];return 0}function q(w,x){if(w.has_montage&&c('MercuryConfig').MontageThreadViewer){return c('React').createElement("div",{ref:c('bs_curry')._1(x[0],p),className:"_1cwz"},c('reasonReact').element(0,0,c('montageThreadViewContainerReact').make(w.thread_id,0,[])))}else return null;}function r(w,x){var y=x.filter(function(ba,ca,da){if(ba==null){return false}else{var ea=ba.fbid;if(ea==null){return false}else return c('bs_js_boolean').to_js_boolean(+(ea!==w));}}),z=y.count(),aa=y.first();if(z!==1||aa===undefined){return null}else return c('reasonReact').element(0,0,c('messengerLocalTimeReact').make("_5eu7",c('bs_js_primitive').null_undefined_to_opt(aa.timezone),[]));}function s(w,x,y){var z=+(c('FBRTCSupport').isWebrtcSupported()&&c('FBRTCSupport').isOSSupported()),aa=w?+(w[0].contact.type===c('MercuryParticipantTypes').PAGE):0,ba=x?+(x[0].joinable_mode===c('MessengerJoinableModeType').JOINABLE):0,ca;if(x){var da=x[0];ca=+(da.participants.length>1)&&+c('MercuryThreadInfo').canReply(da)&&(+da.is_canonical||y&&+c('RTCConfig').RtcConferencingVideoGK||1-y&&c('RTCConfig').RtcConferencingGK)}else ca=0;if(z&&!aa&&!ba){return ca}else return 0;}var t=c('reasonReact').reducerComponent("MessengerDetailViewHeaderReact");function u(w,x,y,z,aa,ba,ca){var da=function ga(){if(s(w,aa,0)){if(aa){var ha=aa[0],ia=ha.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ha),0,z,ha,ia,ba,w?w[0].contact.name:"",[])))}else return null;}else return null;},ea=function ga(){if(s(w,aa,1)){if(aa){var ha=aa[0],ia=ha.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ha),1,z,ha,ia,ba,w?w[0].contact.name:"",[])))}else return null;}else return null;},fa=function ga(){var ha;if(j!==null){var ia=+j.displayFocusBanner(ba,z);ha=ia!==0?[j]:0}else ha=0;if(ha){return [0,c('React').createElement(ha[0],{className:"_2v6o",viewer:ba,thread:c('bs_js_null_undefined').from_opt(aa),participants:z})]}else if(w){var ja=w[0];return [0,c('reasonReact').element(0,0,c('messengerPresenceStatusReact').make(["_2v6o"],+ja.isUserActive,c('bs_js_primitive').null_undefined_to_opt(ja.lastActive),[ja.platform],[]))]}else return [1,null];};return [t[0],t[1],t[2],t[3],function(ga){var ha=ga[4];ha[5][0]=[c('Event').listen(window,"resize",c('debounce')(function(){return k(ha)},20))];return 0},function(ga){return k(ga[1][4])},function(ga){var ha=ga[4][5][0];if(ha){return ha[0].remove()}else return 0;},t[7],t[8],function(ga){if(aa){var ha=aa[0],ia=1- +z.isEmpty()&&+z.every(function(la,ma,na){if(la==null){return false}else return la.employee;}),ja=i._("Conversation information"),ka=fa(0);return c('React').createElement("div",{ref:c('bs_curry')._1(ga[0],n),className:"_5742"+(c('bs_js_boolean').to_js_boolean(ka[0])?' '+"_1_fz":'')},q(ha,ga),c('React').createElement("div",{key:"threadTitle",ref:c('bs_curry')._1(ga[0],m),className:"_5743"},c('React').createElement("h2",{className:"_17w2",id:c('messengerDomIDsRe').ids.THREAD_TITLE},c('reasonReact').element(0,[c('bs_curry')._1(ga[0],l)],c('mercuryThreadTitleReact').make(["_3oh-"],ha,ba,0,0,0,0,[]))),ka[1],r(ba,z)),c('React').createElement("ul",{key:"buttonsContainer",ref:c('bs_curry')._1(ga[0],o),className:"_fl2"},c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('archiveWarningReact').make(+c('WorkModeConfig').is_work_user,ia,[]))),da(0),ea(0),c('React').createElement("li",undefined,c('React').cloneElement(c('reasonReact').element(0,0,c('linkReact').make(0,["_30yy"],0,0,0,0,[y],0,0,["button"],0,0,0,[ja],[])),{"aria-expanded":x!==0?false:true,"aria-label":ja,"data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_BUTTON},c('messengerInfoPanelButtonReact').make(c('messengerCustomColorUtilsRe').customColorOrBlue(ha),x)),c('React').createElement("div",{"aria-owns":c('messengerDomIDsRe').ids.THREAD_INFO_PANEL}))))}else return null;},function(){return [[0],[0],[0],[0],[0],[0]]},t[11],function(ga,ha){return 0},t[13]]}var v=c('reasonReact').wrapReasonForJs(t,function(w){return u(c('bs_js_primitive').null_undefined_to_opt(w.contactData),+w.infoPanelCollapsed,w.onInfoPanelToggle,w.participants,c('bs_js_primitive').null_undefined_to_opt(w.thread),w.viewer,[])});g.messengerWorkAvailabilityStatus_=j;g.calculateTruncationState=k;g.findMercuryTitle=l;g.findTitle=m;g.findRoot=n;g.findButtons=o;g.findMontage=p;g.renderMontageThread=q;g.renderLocalTime=r;g.shouldShowCallButton=s;g.component=t;g.make=u;g.jsComponent=v}),null);
__d('MessengerDetailViewHeaderContainer.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadIDMap','MercuryTypeaheadConstants','MessengerActions','MessengerComposerActions','MessengerComposeViewHeader.react','messengerDetailViewHeaderReact','MessengerView','React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDetailViewHeaderReact').jsComponent,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerDetailViewHeaderContainer1=function(r){var s=r.getUniqueID(),t=r.getType();if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){var u=c('MercuryThreadIDMap').getForFBID(this.props.viewer);u.getClientIDFromServerID(s,function(v){c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerActions').selectThread(v)});c('MessengerComposerActions').exitComposeState()}else if(s===this.props.viewer||t===c('MercuryTypeaheadConstants').PAGE_TYPE){c('MessengerComposerActions').moveDraftToNextThread(c('MercuryIDs').getThreadIDFromUserID(s));c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(c('MercuryIDs').getThreadIDFromUserID(s))}else c('MessengerComposerActions').addToken(r);}.bind(this),this.$MessengerDetailViewHeaderContainer2=function(r){c('MessengerComposerActions').removeToken(r)},n}l.prototype.shouldComponentUpdate=function(m){var n=m.contactData,o=babelHelpers.objectWithoutProperties(m,['contactData']),p=this.props,q=p.contactData,r=babelHelpers.objectWithoutProperties(p,['contactData']);return !c('shallowEqual')(o,r)||!c('shallowEqual')(n,q)};l.prototype.render=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE?c('React').createElement(c('MessengerComposeViewHeader.react'),{forceHideClearButton:true,onAddRecipient:this.$MessengerDetailViewHeaderContainer1,onRemoveRecipient:this.$MessengerDetailViewHeaderContainer2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):c('React').createElement(j,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})};l.propTypes={contactData:k.object,infoPanelCollapsed:k.bool.isRequired,onInfoPanelToggle:k.func.isRequired,onResize:k.func.isRequired,participants:k.instanceOf(c('immutable').Map).isRequired,recipients:k.instanceOf(c('immutable').List).isRequired,thread:k.instanceOf(c('ImmutableObject')),view:k.string,viewer:k.string.isRequired};f.exports=l}),null);
__d('MessengerPresenceStatusUtils',['fbt','AvailableListConstants','CurrentUser','LastActiveTimes','MercuryIDs','PresenceStatus'],(function a(b,c,d,e,f,g,h){'use strict';var i={getStatusFromCanonicalThread:function j(k,l){var m=null;if(l&&l.is_canonical){var n=k.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=void 0;if(n.is_messenger_user){o=c('CurrentUser').isWorkUser()?h._("Work Chat"):h._("Messenger")}else o=c('CurrentUser').isWorkUser()?h._("Workplace"):h._("Facebook");var p=c('PresenceStatus').get(n.fbid),q=void 0,r=void 0;if(p!==c('AvailableListConstants').ACTIVE){q=c('LastActiveTimes').get(n.fbid);r=c('LastActiveTimes').getShortDisplay(n.fbid)}m={contact:n,platform:o,isUserActive:p===c('AvailableListConstants').ACTIVE,lastActiveTS:q,lastActive:r}}}return m}};f.exports=i}),null);
__d('customColorHighlightingReact',['reasonReact','bs_js_null_undefined','CustomColorHighlighting.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('CustomColorHighlighting.react'),{customColor:c('bs_js_null_undefined').from_opt(i)},j)}g.make=h}),null);
__d('messengerMenuReact',['reasonReact','bs_js_null_undefined','MessengerMenu.react'],(function a(b,c,d,e,f,g){'use strict';function h(n){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react'),{},n)}var i=[h];function j(n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react').Item,{href:c('bs_js_null_undefined').from_opt(n),label:o,onclick:c('bs_js_null_undefined').from_opt(p),target:c('bs_js_null_undefined').from_opt(q)},r)}var k=[j];function l(n){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react').Separator,{},n)}var m=[l];g.Menu=i;g.MenuItem=k;g.MenuSeparator=m}),null);
__d('messengerPopoverMenuReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerPopoverMenu.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('MessengerPopoverMenu.react'),{disableArrowKeyActivation:c('utilsRe').optionBoolToNullUndefinedBoolean(i),isOpen:c('utilsRe').optionBoolToNullUndefinedBoolean(j),menu:k,onHide:c('bs_js_null_undefined').from_opt(l),onShow:c('bs_js_null_undefined').from_opt(m)},n)}g.make=h}),null);
__d("messengerInfoPanelSectionReact",["cx","fbt","React","utilsRe","bs_js_boolean","Link.react","reasonReact","bs_js_primitive","bs_js_null_undefined","messengerMenuReact","MessengerMenu.react","messengerPopoverMenuReact","MessengerWebDriverTestIDs","customColorHighlightingReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerInfoPanelSectionReact");function k(o,p){var q=c("utilsRe").isSomeTrue(o),r=q!==0?i._("Show section"):i._("Hide section");return c("reasonReact").element(0,0,c("messengerMenuReact").Menu[0]([c("React").createElement(c("MessengerMenu.react").Item,{"data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_TOGGLER_OPTION,label:r,onclick:c("bs_js_null_undefined").from_opt(p)},r)]))}function l(o,p,q,r){var s=c("utilsRe").isSomeTrue(o);if(s!==0){return c("reasonReact").element(0,0,c("messengerPopoverMenuReact").make(0,0,k(p,q),0,0,[c("React").createElement(c("Link.react"),{"aria-haspopup":1,"aria-label":i._("Info panel options for {sectionName}",[i.param("sectionName",r)]),className:"_1lj1",role:"button"})]))}else return null;}function m(o,p,q,r,s,t){var u=j.slice();u[9]=function(){var v;if(s){var w=s[0];v=c("React").createElement("h4",{className:"_1lj0"},w,l(p,q,r,w))}else v=null;return c("React").createElement("div",{className:"_1lix"+(c("bs_js_boolean").to_js_boolean(c("utilsRe").isSomeTrue(p))?" "+"_1liy":"")+(c("bs_js_boolean").to_js_boolean(c("utilsRe").isSomeTrue(p)&&c("utilsRe").isSomeTrue(q))?" "+"_1liz":"")},c("React").createElement("div",{className:"_1li-"}),v,c("React").createElement("div",{className:"_1li_"},c("reasonReact").element(0,0,c("customColorHighlightingReact").make(o,t))))};return u}var n=c("reasonReact").wrapReasonForJs(j,function(o){return m(c("bs_js_primitive").null_undefined_to_opt(o.customColor),c("utilsRe").nullUndefinedBooleanToOptionBool(o.isCollapsible),c("utilsRe").nullUndefinedBooleanToOptionBool(o.isCollapsed),c("bs_js_primitive").null_undefined_to_opt(o.onToggle),c("bs_js_primitive").null_undefined_to_opt(o.title),o.children)});g.component=j;g.renderMenu=k;g.renderToggle=l;g.make=m;g.jsComponent=n}),null);
__d('MessengerInfoPanelAssociatedObjectSection.react',['cx','fbt','CurrentUser','Image.react','Link.react','MessageThreadAssociatedObjectKey','messengerInfoPanelSectionReact','React','TimeSpentRoomTypeEnum','TimeSpentRoomTypeEnum$FbtEnum'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerInfoPanelSectionReact').jsComponent,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){var o=this.props,p=o.isCollapsed,q=o.onToggle,r=o.associatedObject,s=o.customColor,t=r[c('MessageThreadAssociatedObjectKey').ACTION_LINK];return c('React').createElement(l,{customColor:s,isCollapsible:true,isCollapsed:p,onToggle:q,title:i._("Part of")},c('React').createElement(c('Link.react'),{href:t,target:'_blank',style:{textDecoration:'none'},className:"_35-k"},this.$MessengerInfoPanelAssociatedObjectSection1(),this.$MessengerInfoPanelAssociatedObjectSection2()))};n.prototype.$MessengerInfoPanelAssociatedObjectSection1=function(){var o=this.props.associatedObject,p=o[c('MessageThreadAssociatedObjectKey').PROFILE_PICTURE];return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_35-n",src:p}))};n.prototype.$MessengerInfoPanelAssociatedObjectSection2=function(){var o=this.props.associatedObject,p=o[c('MessageThreadAssociatedObjectKey').NAME],q=c('TimeSpentRoomTypeEnum')[o[c('MessageThreadAssociatedObjectKey').ROOM_TYPE]],r=c('CurrentUser').isWorkUser()?'Workplace':'Facebook';return c('React').createElement('div',{className:"_35-o"},c('React').createElement('div',{className:"_35-p"},p),c('React').createElement('div',{className:"_35-q"},i._({"EVENT":"Go to {productName} event","GROUP":"Go to {productName} group"},[i.param('productName',r),i['enum'](q,c('TimeSpentRoomTypeEnum$FbtEnum'))])))};function n(){j.apply(this,arguments)}n.propTypes={isCollapsed:m.bool.isRequired,onToggle:m.func.isRequired,customColor:m.string,associatedObject:m.instanceOf(Object).isRequired};f.exports=n}),null);
__d('MessengerApprovalRequester.react',['cx','fbt','Link.react','MercuryThreadActions','messengerContactImageReact','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerContactImageReact').jsComponent,n=32;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props,q=p.isMessengerUser,r=p.imageSRC,s=p.name,t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq _4fq"},c('React').createElement(m,{className:"_5l39 _5rmm",isMessengerUser:q,size:n,src:r}),c('React').createElement('span',{className:"_3tkx"},t)),c('React').createElement('div',{className:"_3ihq _4fs"},c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester1.bind(this)},i._("Accept")),c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester2.bind(this)},i._("Ignore"))))};o.prototype.$MessengerApprovalRequester1=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.acceptToJoinableGroup(q,r)};o.prototype.$MessengerApprovalRequester2=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.rejectToJoinableGroup(q,r)};function o(){j.apply(this,arguments)}f.exports=o}),null);
__d('MessengerInfoPanelGroupSection.react',['cx','fbt','FBToggleSwitch.react','immutable','MercuryIDs','MercuryParticipants','MercuryThreadActions','MessengerAdminGroupUtils','MessengerApprovalModeTypes','MessengerApprovalRequester.react','messengerInfoPanelSectionReact','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerInfoPanelSectionReact').jsComponent;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={approvalQueue:c('immutable').Map()}}n.prototype.componentDidMount=function(){this.$MessengerInfoPanelGroupSection1(this.props.thread)};n.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:i._("Group options")},c('React').createElement('div',{className:"_3iho"},this.$MessengerInfoPanelGroupSection2(),this.$MessengerInfoPanelGroupSection3())),this.$MessengerInfoPanelGroupSection4())};n.prototype.componentWillReceiveProps=function(o){this.$MessengerInfoPanelGroupSection1(o.thread)};n.prototype.$MessengerInfoPanelGroupSection1=function(o){var p=o&&o.approval_queue_ids;if(p)c('MercuryParticipants').getMulti(p,function(q){this.setState({approvalQueue:c('immutable').Map(q)})}.bind(this));};n.prototype.$MessengerInfoPanelGroupSection2=function(){var o=this.props.thread,p=o.joinable_mode.link;if(!c('MessengerAdminGroupUtils').showJoinableLink(o))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("Share the link"),c('React').createElement('div',{className:"_3ihp _3oh-"},p)))};n.prototype.$MessengerInfoPanelGroupSection3=function(){var o=this.props,p=o.viewer,q=o.thread,r=c('MessengerAdminGroupUtils').isApprovalOpenThread(q);if(!c('MessengerAdminGroupUtils').showJoinableApprovalToggle(q,p))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("New member approval"),c('React').createElement('div',{className:"_3ihp"},i._("Approve who can join the group"))),c('React').createElement('div',{className:"_3ihq"},c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:!r,onToggle:function s(t){return l.setApprovalMode(t?c('MessengerApprovalModeTypes').APPROVALS:c('MessengerApprovalModeTypes').OPEN,q)}})))};n.prototype.$MessengerInfoPanelGroupSection4=function(){var o=this.props,p=o.viewer,q=o.thread,r=0;if(q&&q.approval_queue_ids&&q.approval_queue_ids.length)r=q.approval_queue_ids.length;if(!c('MessengerAdminGroupUtils').showApprovalQueue(q,p))return null;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:i._("Pending requests ({pendingRequestCount})",[i.param('pendingRequestCount',r)])},c('React').createElement('div',{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(s){return c('React').createElement(c('MessengerApprovalRequester.react'),{key:s.id,imageSRC:s.image_src,isMessengerUser:s.is_messenger_user,name:s.name,threadFBID:this.props.thread.thread_fbid,userID:c('MercuryIDs').getUserIDFromParticipantID(s.id)})}.bind(this)).toArray()))};f.exports=n}),null);
__d('MessengerAddIconSVG.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=function j(k){return c('React').createElement('div',{className:k.className},c('React').createElement('svg',{viewBox:'-8 -8 48 48'},c('React').createElement('title',null,'add to group'),c('React').createElement('path',{d:'M16,0 V32 M0,16 H32',fillRule:'evenodd',clipRule:'evenodd',fill:'none',stroke:k.customColor,strokeWidth:2,strokeMiterlimit:10,strokeLinecap:'round'})))};i.propTypes={className:h.string,customColor:h.string.isRequired};f.exports=i}),null);
__d('messengerMakeAsOwnerDialogReact',['bs_curry','bs_js_boolean','reasonReact','bs_js_primitive','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerMakeAsOwnerDialogReact");function i(k,l,m,n,o){var p=function r(s){c('bs_curry')._1(l,false);if(k){return c('bs_curry')._1(k[0],s)}else return 0;},q=h.slice();q[9]=function(){var r=c('bs_js_boolean').to_js_boolean(n),s=c('MessengerAdminGroupUtils').getMakeOwnerTitleText(r,m),t=c('MessengerAdminGroupUtils').getMakeOwnerBodyText(r,m),u=c('MessengerAdminGroupUtils').getMakeOwnerButtonText(r,m);return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,l,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[s])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[u],0,["danger"],[p],[0],0,0,[]))]))]))};return q}var j=c('reasonReact').wrapReasonForJs(h,function(k){return i(c('bs_js_primitive').null_undefined_to_opt(k.onMakeOwner),k.onToggle,k.name,+k.isUserViewer,[])});g.component=h;g.make=i;g.jsComponent=j}),null);
__d('messengerRemoveAsOwnerDialogReact',['fbt','bs_curry','bs_js_boolean','reasonReact','bs_js_primitive','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerRemoveAsOwnerDialogReact");function j(l,m,n,o,p,q){var r=function t(u){c('bs_curry')._1(m,false);if(l){return c('bs_curry')._1(l[0],u)}else return 0;},s=i.slice();s[9]=function(){var t=c('MessengerAdminGroupUtils').getRemoveOwnerBodyText(c('bs_js_boolean').to_js_boolean(o),c('bs_js_boolean').to_js_boolean(p),n);return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,m,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[h._("Remove as group owner?")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[h._("Remove Owner")],0,["danger"],[r],[0],0,0,[]))]))]))};return s}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.onRemove),l.onToggle,l.name,+l.isUserViewer,+l.isLastAdminInThread,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d('messengerRemoveFromGroupDialogReact',['fbt','bs_curry','reasonReact','bs_js_primitive','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerRemoveFromGroupDialogReact");function j(l,m,n){var o=function q(r){c('bs_curry')._1(m,false);if(l){return c('bs_curry')._1(l[0],r)}else return 0;},p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,m,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[h._("Remove from group")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[h._("Are you sure that you want to remove this person from the group? They will no longer be able to send or receive new messages.")])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[h._("Remove")],0,["danger"],[o],[0],0,0,[]))]))]))};return p}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.onRemove),l.onToggle,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d('MessengerInfoPanelContactActions.react',['cx','fbt','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerAdminGroupUtils','messengerContactActionsRe','messengerDialogsRe','messengerMakeAsOwnerDialogReact','MessengerMenu.react','MessengerPopoverMenu.react','messengerRemoveAsOwnerDialogReact','messengerRemoveFromGroupDialogReact','MessengerStateStore','ReactComponentWithPureRenderMixin','React','ShimButton.react','StoreAndPropBasedStateMixin','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerContactActionsRe').actions,k=c('messengerMakeAsOwnerDialogReact').jsComponent,l=c('messengerRemoveAsOwnerDialogReact').jsComponent,m=c('messengerRemoveFromGroupDialogReact').jsComponent,n=c('MessengerMenu.react').Item,o=c('MessengerMenu.react').Separator,p=c('React').PropTypes,q=c('React').createClass({displayName:'MessengerInfoPanelContactActions',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerStateStore'))],propTypes:{adminIds:p.arrayOf(p.string),extrasEnabled:p.bool.isRequired,contact:p.instanceOf(c('ImmutableObject')).isRequired,isOpen:p.bool,onAction:p.func.isRequired,onToggle:p.func.isRequired,viewer:p.string.isRequired},statics:{calculateState:function r(s){var t=c('MercuryThreads').getForFBID(s.viewer),u=c('MessengerStateStore').getState().activeThreadID,v=u?t.getOrFetch(u):null;return {thread:v}}},render:function r(){var s=this._isViewerAdmin(),t=c('MessengerAdminGroupUtils').isAdmin(this.props.adminIds,this.props.contact.uid),u=this._isUserViewer(),v=c('MessengerAdminGroupUtils').canRemoveAdmin(s,t,this.state.thread)?c('React').createElement(n,{label:i._("Remove as admin"),onclick:this._handleRemoveAsOwnerClick}):null,w=null,x=c('MessengerAdminGroupUtils').canMakeOthersAdmins(s,t,this.state.thread),y=c('MessengerAdminGroupUtils').canMakeSelfAdmin(u,this.state.thread);if(x||y)w=c('React').createElement(n,{label:i._("Make admin"),onclick:this._hanleMakeOwnerClick});var z=void 0;if(u){if(w||v){z=c('React').createElement(c('MessengerMenu.react'),null,w,v)}else return null;}else z=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(n,{label:i._("Message"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c('React').createElement(n,{label:i._("View Profile"),onclick:this._makeActionHandler(j.PROFILE)}):null,w,v,this._renderExtras());return c('React').createElement(c('MessengerPopoverMenu.react'),{menu:z,onHide:function(){return this.props.onToggle(false)}.bind(this),onShow:function(){return this.props.onToggle(true)}.bind(this)},c('React').createElement(c('ShimButton.react'),{className:c('joinClasses')(this.props.className,"_57gs"+(this.props.isOpen?' '+"_57gt":'')),onClick:this._handleClick}))},_renderExtras:function r(){if(!this.props.extrasEnabled)return null;var s=[c('React').createElement(o,{key:'separator'})],t=this._isViewerAdmin();if(c('MessengerAdminGroupUtils').canRemoveFromGroup(t,this.state.thread))s.push(c('React').createElement(n,{key:'remove-from-group',label:i._("Remove from group"),onclick:this._handleRemoveClick}));return s.length>=2?s:null},_handleClick:function r(s){s.stopPropagation();s.preventDefault()},_makeActionHandler:function r(s){return function(t){this._handleClick(t);this.props.onAction(s,t)}.bind(this)},_handleRemoveClick:function r(s){this._handleClick(s);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick})}.bind(this))},_handleRemoveAsOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:t&&t.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1})}.bind(this))},_handleDialogRemoveClick:function r(s){this.props.onAction(j.REMOVE,s)},_handleOwnerRemoveClick:function r(s){this.props.onAction(j.REMOVE_OWNER,s)},_hanleMakeOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:t&&t.name,isUserViewer:this._isUserViewer()})}.bind(this))},_handleOwnerAddClick:function r(s){this.props.onAction(j.ADD_OWNER,s)},_handleDialogToggle:function r(s){if(!s)c('messengerDialogsRe').removeDialog();},_isUserViewer:function r(){return c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isViewerAdmin:function r(){return c('MessengerAdminGroupUtils').isViewerAdmin(this.props.adminIds,this.props.viewer)}});f.exports=q}),null);
__d("MessengerSortParticipants",[],(function a(b,c,d,e,f,g){var h={sortAlphabeticalWithAdmins:function i(j,k){var l=k.filter(function(n){return !!n&&j&&j.indexOf(n.id)!==-1}).toArray().sort(function(n,o){return n.name.localeCompare(o.name)}),m=k.filter(function(n){return !!n&&(!j||j.indexOf(n.id)===-1)}).toArray().sort(function(n,o){return n.name.localeCompare(o.name)});return l.concat(m)}};f.exports=h}),null);
__d('MessengerInfoPanelPeopleSection.react',['cssVar','cx','fbt','immutable','ImmutableObject','Link.react','MessengerAddIconSVG.react','MessengerAdminGroupUtils','MessengerContactList.react','MessengerInfoPanelContactActions.react','messengerInfoPanelSectionReact','MessengerSortParticipants','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerInfoPanelSectionReact').jsComponent,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var p=this.props,q=p.adminIds,r=p.contactAdapter,s=p.isCollapsed,t=p.isViewerSubscribed,u=p.onContactAction,v=p.onContactSelect,w=p.onToggle,x=p.participants,y=p.thread,z=p.viewer;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:s,onToggle:w,title:j._("People")},this.$MessengerInfoPanelPeopleSection1(),c('React').createElement(c('MessengerContactList.react'),{actionsClass:c('MessengerInfoPanelContactActions.react'),className:"_4wc-",contactAdapter:r,disableRole:true,extraActionsEnabled:t,listSections:c('immutable').OrderedMap([[null,c('MessengerSortParticipants').sortAlphabeticalWithAdmins(q,x)]]),onSelect:v,onAction:u,viewer:z,adminIds:q,thread:y}))};o.prototype.$MessengerInfoPanelPeopleSection1=function(){if(!this.props.canViewerReply)return null;var p=c('MessengerAdminGroupUtils').shouldInvite(this.props.thread)?j._("Invite"):j._("Add People"),q=this.props.thread.custom_color||"#0084ff";return c('React').createElement(c('Link.react'),{className:"_4rph",onClick:this.props.onAddPeopleClick},c('React').createElement(c('MessengerAddIconSVG.react'),{className:"_4rpi",customColor:q}),c('React').createElement('div',{className:"_4rpj"},p))};function o(){k.apply(this,arguments)}o.propTypes={adminIds:n.arrayOf(n.string),canViewerReply:n.bool.isRequired,contactAdapter:n.func.isRequired,isCollapsed:n.bool.isRequired,isViewerSubscribed:n.bool.isRequired,onAddPeopleClick:n.func.isRequired,onContactAction:n.func.isRequired,onContactSelect:n.func.isRequired,onToggle:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired};f.exports=o}),null);
__d('MessengerSharedFile.react',['cx','Link.react','MercuryAttachment','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.filename,o=m.url,p=m.mimetype,q=c('MercuryAttachment').getAttachIconClassByMime(p);return c('React').createElement('li',{className:"_2a42"},c('React').createElement(c('Link.react'),{className:c('joinClasses')("_2a43",q),target:'_blank',href:o},c('React').createElement('div',{className:"_2a44"},c('React').createElement('i',{className:'img'}),c('React').createElement('span',{className:"_2a45"},n))))};function l(){i.apply(this,arguments)}l.propTypes={filename:k.string.isRequired,url:k.string.isRequired,mimetype:k.string.isRequired};f.exports=l}),null);
__d('MessengerSharedFiles.react',['cx','fbt','Link.react','MessengerSharedFile.react','MessengerSpinner.react','React','RelayClassic','RelayQL'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$MessengerSharedFiles1=function(){return c('React').createElement('div',{className:"_omn"},c('React').createElement(c('MessengerSpinner.react'),null))};m.prototype.$MessengerSharedFiles2=function(){return i._("Show all")};m.prototype.$MessengerSharedFiles3=function(){return i._("Show less")};m.prototype.$MessengerSharedFiles4=function(){var n=this.props.isLoadingFiles?this.$MessengerSharedFiles1():null,o=this.props.isExpanded?this.$MessengerSharedFiles3():this.$MessengerSharedFiles2();return c('React').createElement('li',{className:"_2a42 _omo"},c('React').createElement(c('Link.react'),{className:"_2a43",target:'_blank',onClick:this.props.toggleExpand},c('React').createElement('div',{className:"_2a44"},n,o)))};m.prototype.render=function(){var n=this.props.sharedFiles,o=n.edges,p=this.props.hasOverflow?this.$MessengerSharedFiles4():null;return c('React').createElement('ul',{className:"_2o39"},o.map(function(q){var r=q.node;return c('React').createElement(c('MessengerSharedFile.react'),{key:r.legacy_attachment_id,filename:r.filename,url:r.url,mimetype:r.mimetype})}),p)};function m(){j.apply(this,arguments)}m.propTypes={sharedFiles:l.object.isRequired,threadFBID:l.string.isRequired,toggleExpand:l.func.isRequired};f.exports=c('RelayClassic').createContainer(m,{fragments:{sharedFiles:function n(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'SiteEnum'},name:'site',value:{kind:'CallValue',callValue:'www'}}],fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{fieldName:'mimetype',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageFile',type:'MessageFile'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedMedia'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedMediaEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedFiles_react_SharedFilesRelayQL',type:'MessageSharedMediaConnection'}}()}}})}),null);
__d('MessengerSharedFilesContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedFiles.react','React','RelayClassic','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').jsComponent,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedFilesContainer',propTypes:{sharedFiles:j.object,threadFBID:j.string,isCollapsed:j.bool,onToggle:j.func,relay:j.object},getInitialState:function m(){var n=true;if(this.props.sharedFiles)n=this.props.sharedFiles.message_shared_media.count<=k;return {isAllFilesShown:n,isLoadingFiles:false}},_toggleExpand:function m(){if(this.state.isLoadingFiles||!this.props.sharedFiles)return;var n=this.props.sharedFiles.message_shared_media,o=n.count,p=this.state.isAllFilesShown;this.setState({isLoadingFiles:true},function(){if(this.props.relay)this.props.relay.setVariables({count:p?k:o},function(q){if(q.done||q.aborted)this.setState({isAllFilesShown:!p,isLoadingFiles:false});}.bind(this));}.bind(this))},render:function m(){var n=this.props,o=n.sharedFiles,p=n.threadFBID,q=n.isCollapsed,r=n.onToggle;if(!p||!o)return null;var s=o.message_shared_media;if(!s||s.count===0)return null;return c('React').createElement(i,{isCollapsible:true,isCollapsed:q,onToggle:r,title:h._("Shared files")},c('React').createElement(c('MessengerSharedFiles.react'),{isExpanded:this.state.isAllFilesShown,hasOverflow:s.count>k,isLoadingFiles:this.state.isLoadingFiles,toggleExpand:this._toggleExpand,sharedFiles:s,threadFBID:p}))}});f.exports=c('RelayClassic').createContainer(l,{initialVariables:{count:k},fragments:{sharedFiles:function m(){return function(n){return {children:[{calls:[{kind:'Call',metadata:{type:'MessageMediaType'},name:'message_shared_media_type',value:{kind:'CallValue',callValue:'FILE'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(n)]),fieldName:'message_shared_media',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedMediaConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedFilesContainer_react_SharedFilesRelayQL',type:'MessageThread'}}(c('MessengerSharedFiles.react').getFragment('sharedFiles'))}}})}),null);
__d('MessengerSharedFilesContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName='MessengerSharedFilesContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true}};j.queries={sharedFiles:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedFilesContainerRoute',type:'MessageThread'}}(l.getFragment('sharedFiles'))}};f.exports=j}),null);
__d('MessengerSharedPhotos.react',['cx','MessengerSharedPhoto.react','MessengerSpinner.react','MessengerSharedPhotosAlbumViewContainer.react','React','RelayClassic','RelayQL','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react','Vector','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={albumView:null,imagesLoaded:l,shownID:null},this.$MessengerSharedPhotos1=null,this.$MessengerSharedPhotos3=function(t){var u=c('Vector').getViewportDimensions().x,v=this.props.sharedPhotoAndVideos.edges.length,w=this.props.sharedPhotoAndVideos.edges.find(function(aa){return aa.node.id===t});if(!w)return;var x=this.props.sharedPhotoAndVideos.edges.indexOf(w),y=(v-x)*m;if(y>u/2)return;var z=Math.ceil((u/2-y)/m);this.props.fetchMore(z)}.bind(this),this.$MessengerSharedPhotos4=function(t){var u=this.props.sharedPhotoAndVideos,v=u.edges.find(function(w){var x=w.node;return x.id===t});return v.node}.bind(this),this.$MessengerSharedPhotos5=function(t){this.setState({shownID:t})}.bind(this),this.$MessengerSharedPhotos6=function(t){this.setState({shownID:t},function(){this.$MessengerSharedPhotos3(this.state.shownID);this.$MessengerSharedPhotos7()}.bind(this))}.bind(this),this.$MessengerSharedPhotos8=function(t){this.setState({shownID:t})}.bind(this),this.$MessengerSharedPhotos7=function(){this.setState({albumView:null})}.bind(this),this.$MessengerSharedPhotos9=function(t){this.setState({albumView:t,shownID:null})}.bind(this),this.$MessengerSharedPhotos10=function(t){this.setState({albumView:null,shownID:t})}.bind(this),this.$MessengerSharedPhotos11=function(){this.setState({shownID:null})}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerSharedPhotos2()};n.prototype.componentWillReceiveProps=function(o){if(o.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:l});};n.prototype.componentDidUpdate=function(){this.$MessengerSharedPhotos2()};n.prototype.componentWillUnmount=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1)};n.prototype.shouldComponentUpdate=function(o,p){var q=o.sharedPhotoAndVideos,r=q.edges,s=q.pageInfo&&q.pageInfo.has_next_page,t=r.find(function(u){var v=u.node;return v.id===p.shownID});if(!t&&s&&r.length<p.imagesLoaded){setTimeout(function(){return this.props.fetchMore(p.imagesLoaded)}.bind(this),1000);return false}return true};n.prototype.$MessengerSharedPhotos2=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);var o=this.props.sharedPhotoAndVideos;if(this.state.imagesLoaded<o.edges.length){this.$MessengerSharedPhotos1=c('requestAnimationFrame')(function(){this.setState({imagesLoaded:Math.min(o.edges.length,this.state.imagesLoaded+l)})}.bind(this))}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();};n.prototype.$MessengerSharedPhotos12=function(){return c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{onClosePhotoView:this.$MessengerSharedPhotos11,openAlbum:this.$MessengerSharedPhotos9,photoID:this.state.shownID,rootClassName:'',threadID:this.props.threadFBID,disableForward:false})};n.prototype.$MessengerSharedPhotos13=function(){return c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerSharedPhotos7,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerSharedPhotos10,onCloseSharedPhotos:this.$MessengerSharedPhotos7,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};n.prototype.$MessengerSharedPhotos14=function(){return c('React').createElement('div',{className:"_2n20"},c('React').createElement(c('MessengerSpinner.react'),null))};n.prototype.render=function(){var o=this.props,p=o.isLoadingImages,q=o.sharedPhotoAndVideos,r=q,s=r.edges,t=this.state.imagesLoaded,u="_3m31",v=this.$MessengerSharedPhotos5,w=p?this.$MessengerSharedPhotos14():null,x=this.state.shownID?this.$MessengerSharedPhotos12():null,y=this.state.albumView?this.$MessengerSharedPhotos13():null;return c('React').createElement('div',null,x,y,c('React').createElement('div',{className:"_40jj _5l-3"},s.slice(0,t).filter(function(z){var aa=z.node;return !!aa.image}).map(function(z){var aa=z.node;return c('React').createElement(c('MessengerSharedPhoto.react'),{className:u,fbid:aa.legacy_attachment_id,key:aa.legacy_attachment_id,onClick:v,photoID:aa.id,uri:aa.image.uri})})),w)};n.propTypes={allPhotosDisplayed:k.bool.isRequired,isLoadingImages:k.bool.isRequired,fetchMore:k.func.isRequired,onAllPhotosDisplayed:k.func.isRequired,sharedPhotoAndVideos:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c('RelayClassic').createContainer(n,{fragments:{sharedPhotoAndVideos:function o(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'Node',type:'Node'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedPhotoAndVideo'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedPhotoAndVideoEdge'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotos_react_SharedPhotoAndVideosRelayQL',type:'MessageSharedPhotoAndVideoConnection'}}()}}})}),null);
__d('MessengerSharedPhotosContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedPhotos.react','React','RelayClassic','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').jsComponent,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedPhotosContainer',propTypes:{customColor:j.string,clearForceFetch:j.func.isRequired,getIsScrolledToBottom:j.func.isRequired,getScrollableHeight:j.func.isRequired,isCollapsed:j.bool.isRequired,onToggle:j.func.isRequired,sharedPhotos:j.object,threadFBID:j.string},getInitialState:function m(){return {allPhotosDisplayed:false,isLoadingImages:false}},componentWillReceiveProps:function m(n){if(n.threadFBID!==this.props.threadFBID)this.setState({allPhotosDisplayed:false});},componentDidMount:function m(){this._maybeLoadMore()},componentDidUpdate:function m(){this._maybeLoadMore()},_maybeLoadMore:function m(){var n=this.props,o=n.getIsScrolledToBottom,p=n.getScrollableHeight,q=n.isCollapsed,r=n.sharedPhotos,s=this.state.isLoadingImages;if(s||q||!r||!this.state.allPhotosDisplayed||!o()||!p())return;var t=r.message_shared_photo_and_video.page_info.has_next_page;if(!t)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+k},function(u){if(u.done||u.aborted)if(this.isMounted()){this.props.clearForceFetch();this.setState({allPhotosDisplayed:false,isLoadingImages:false})}}.bind(this))}.bind(this))},_loadMore:function m(n){if(n<=0)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+n},function(o){if(o.done||o.aborted)this.setState({isLoadingImages:false});}.bind(this))}.bind(this))},_handleAllPhotosDisplayed:function m(){this.setState({allPhotosDisplayed:true})},render:function m(){var n=this.props,o=n.isCollapsed,p=n.onToggle,q=n.sharedPhotos,r=n.threadFBID,s=this.state.isLoadingImages;if(!r||!q)return null;var t=q.message_shared_photo_and_video;if(!t.page_info.has_next_page&&t.count===0)return null;return c('React').createElement(i,{customColor:this.props.customColor,isCollapsible:true,isCollapsed:o,onToggle:p,title:h._("Shared Photos")},c('React').createElement(c('MessengerSharedPhotos.react'),{allPhotosDisplayed:this.state.allPhotosDisplayed,fetchMore:this._loadMore,isLoadingImages:s,sharedPhotoAndVideos:t,onAllPhotosDisplayed:this._handleAllPhotosDisplayed,threadFBID:r}))}});f.exports=c('RelayClassic').createContainer(l,{initialVariables:{count:k},fragments:{sharedPhotos:function m(){return function(n){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true},type:'PageInfo'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(n)]),fieldName:'message_shared_photo_and_video',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedPhotoAndVideoConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotosContainer_react_SharedPhotosRelayQL',type:'MessageThread'}}(c('MessengerSharedPhotos.react').getFragment('sharedPhotoAndVideos'))}}})}),null);
__d('MessengerSharedPhotosContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName='MessengerSharedPhotosContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true}};j.queries={sharedPhotos:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedPhotosContainerRoute',type:'MessageThread'}}(l.getFragment('sharedPhotos'))}};f.exports=j}),null);
__d('messengerGraphQLTokenizerReact',['utilsRe','bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerGraphQLTokenizer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){return c('reasonReact').wrapJsForReason(c('MessengerGraphQLTokenizer.react'),{autoFocus:c('bs_js_boolean').to_js_boolean(i),className:c('bs_js_null_undefined').from_opt(j),context:c('bs_js_null_undefined').from_opt(k),defaultEntries:c('bs_js_null_undefined').from_opt(l),enableMessageSearch:c('bs_js_boolean').to_js_boolean(m),entries:n,excludeGroups:c('bs_js_boolean').to_js_boolean(o),excludePages:c('bs_js_boolean').to_js_boolean(p),forceHideClearButton:c('utilsRe').optionBoolToNullUndefinedBoolean(q),hasHoverState:c('bs_js_boolean').to_js_boolean(r),onAddEntryAttempt:s,onClear:c('bs_js_null_undefined').from_opt(t),onRemoveEntryAttempt:u,originalEntryIDs:v,placeholder:w,roomAssociatedObject:c('bs_js_null_undefined').from_opt(x),scrollableViewClassName:c('bs_js_null_undefined').from_opt(y),shouldQueryInternalBot:c('bs_js_boolean').to_js_boolean(z),shouldQueryVCEndpoint:c('bs_js_boolean').to_js_boolean(aa),tabIndex:c('bs_js_null_undefined').from_opt(ba),threadFBID:c('bs_js_null_undefined').from_opt(ca),useLayer:c('bs_js_boolean').to_js_boolean(da),viewer:ea,width:fa},ga)}g.make=h}),null);
__d('messengerAddToConversationDialogReact',['cx','fbt','bs_array','bs_block','bs_curry','React','utilsRe','immutable','bs_js_boolean','MercuryIDs','bs_pervasives','CurrentUser','reasonReact','bs_js_primitive','messengerDialogsRe','MercuryMessageObject','messengerDialogReact','MercuryLogMessageType','MercuryMessageActions','MercuryTriodeSourceUtil','MessengerAdminGroupUtils','messengerGraphQLTokenizerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(s,t){if(typeof s==="number"){return c('bs_block').__(0,[[c('immutable').List([])]])}else if(s.tag){var u=s[0];return c('bs_block').__(0,[[t[0].filter(function(v){return c('bs_js_boolean').to_js_boolean(+(v.getUniqueID()!==u))})]])}else return c('bs_block').__(0,[[t[0].push(s[0])]]);}function k(s){return c('bs_block').__(0,[s])}function l(s){return c('bs_block').__(1,[s.getUniqueID()])}function m(){return 0}var n=c('reasonReact').reducerComponent("MessengerAddToConversationDialogReact");function o(s){if(s){return 0}else return c('messengerDialogsRe').removeDialog(0);}function p(s,t,u){var v=function x(y,z){var aa=z[4],ba=aa[0].count(),ca=+c('MessengerAdminGroupUtils').isJoinableThread(s),da=+c('MessengerAdminGroupUtils').shouldInvite(s),ea=0;if(ba!==0)if(ca!==0){if(da!==0){aa[0].forEach(function(fa,ga,ha){var ia=c('MercuryIDs').getThreadIDFromUserID(fa.getUniqueID());c('MercuryMessageActions').getForFBID(t).send(c('MercuryMessageObject').getForFBID(t).constructUserGeneratedMessageObject(s.joinable_mode.link,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),ia,[]),undefined,undefined);return true})}else ea=1;}else if(da!==0){throw c('bs_pervasives').invalid_arg("Only joinable threads can invite")}else ea=1;if(ea===1)c('MercuryMessageActions').getForFBID(t).send(c('MercuryMessageObject').getForFBID(t).constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),s.thread_id,c('MercuryLogMessageType').SUBSCRIBE,{added_participants:aa[0].map(function(fa,ga,ha){return c('MercuryIDs').getParticipantIDFromUserID(fa.getUniqueID())}).toArray()}),undefined,undefined);y.preventDefault();return c('messengerDialogsRe').removeDialog(0)},w=n.slice();w[9]=function(x){var y=+c('MessengerAdminGroupUtils').shouldInvite(s),z=c('immutable').Set(c('utilsRe').arrayCompact(c('bs_array').map(function(aa){return c('bs_js_primitive').null_undefined_to_opt(c('MercuryIDs').getUserIDFromParticipantID(aa))},s.participants)));return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,o,0,[1],0,["default"],[460],[c('React').createElement("div",{className:"_4jgp"},c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Title[0](0,[y!==0?i._("Invite more people"):i._("Add more people")])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[i._("Done")],0,0,[c('bs_curry')._1(x[0],v)],[0],0,0,[]))])),c('reasonReact').element(0,0,c('messengerGraphQLTokenizerReact').make(1,["_4jgt"],0,0,0,x[4][0],1,1- +c('CurrentUser').isWorkUser(),[1],0,c('bs_curry')._1(x[3],k),[c('bs_curry')._1(x[3],m)],c('bs_curry')._1(x[3],l),z,y!==0?i._("Invite to group:"):i._("Add to group:"),c('bs_js_primitive').null_undefined_to_opt(s.associated_object),["_4jgu"],0,0,0,c('bs_js_primitive').null_undefined_to_opt(s.thread_fbid),0,t,460,[])))]))};w[10]=function(){return [c('immutable').List([])]};w[12]=j;return w}var q=c('reasonReact').wrapReasonForJs(n,function(s){return p(s.thread,s.viewer,[])}),r=460;g.reducer=j;g.handleAddEntryAttempt=k;g.handleRemoveEntryAttempt=l;g.handleClear=m;g.component=n;g.dialogWidth=r;g.handleToggle=o;g.make=p;g.jsComponent=q}),null);
__d("messengerInfoPanelContactNameSectionReact",["cx","React","reasonReact","bs_js_primitive","messengerLocalTimeReact","messengerPresenceStatusReact"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reasonReact").statelessComponent("MessengerInfoPanelContactNameSectionReact");function j(k,l,m,n,o,p){var q=i.slice();q[9]=function(){return c("React").createElement("div",{className:"_2jnq"},o,c("React").createElement("div",{className:"_2jnt"},c("React").createElement("div",{className:"_3eur"},c("React").createElement("span",{className:"_3oh-"},k.name)),c("React").createElement("div",{className:"_3eus"},c("reasonReact").element(0,0,c("messengerPresenceStatusReact").make(0,l,m,n,[]))),c("React").createElement("div",undefined,c("reasonReact").element(0,0,c("messengerLocalTimeReact").make("_5uh",c("bs_js_primitive").null_undefined_to_opt(k.timezone),[])))))};return q}g.component=i;g.make=j}),null);
__d("MercuryGenericConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MAX_THREAD_NAME_LENGTH:250})}),null);
__d('keysRe',[],(function a(b,c,d,e,f,g){'use strict';var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,aa=48,ba=96,ca=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=aa;g.numpad_0=ba;g.numpad_9=ca}),null);
__d('createContentStateForTextWithMessengerEmoji',['ContentState','DraftModifier','MessengerSupportedEmojiUtils','insertMessengerEmojiIntoContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('ContentState').createFromText('');while(i){var k=c('MessengerSupportedEmojiUtils').getEmojiMatchObj(i);if(k){var l=k.offset+k.length,m=i.substr(0,k.is_supported?k.offset:l),n=i.substr(l);j=c('DraftModifier').insertText(j,j.getSelectionAfter(),m);if(k.is_supported)j=c('insertMessengerEmojiIntoContentState')(k.emoji_key,j,j.getSelectionAfter(),j.getFirstBlock().getInlineStyleAt(0));i=n}else break;}if(i)j=c('DraftModifier').insertText(j,j.getSelectionAfter(),i);return j}f.exports=h}),null);
__d('getVisibleValueForContentState',['DraftEntity','emptyFunction'],(function a(b,c,d,e,f,g){function h(i){var j=i.getBlockMap().map(function(k){var l=k.getText(),m='';k.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=k.getEntityAt(n);if(p===null){m+=l.slice(n,o)}else{var q=c('DraftEntity').get(p);if(q.getType()==='EMOTICON'){m+=q.getData().originalEmoticon}else if(q.getType()==='EMOJI'){m+=q.getData().emoji.join('')}else m+=l.slice(n,o);}});return m});return j.join('\n')}f.exports=h}),null);
__d('MessengerTextWithEmojiInput.react',['cx','CompositeDraftDecorator','ContentState','DraftEditor.react','EditorState','MessengerEmojiSpan.react','React','XUICloseButton.react','createContentStateForTextWithMessengerEmoji','getEntityMatcher','getVisibleValueForContentState','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerTextWithEmojiInput5=function(r){if(r!==this.state.editorState){var s=!r.getCurrentContent().hasText();this.setState({editorState:r,isEmpty:s});this.props.onChange&&this.props.onChange(r)}}.bind(this),this.$MessengerTextWithEmojiInput2=function(){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(r){return r.getType()==='EMOJI'}),component:c('MessengerEmojiSpan.react')}])},this.focusInput=function(){this.refs.input.focus();this.$MessengerTextWithEmojiInput5(c('EditorState').moveFocusToEnd(this.state.editorState))}.bind(this),this.$MessengerTextWithEmojiInput3=function(r,s){if(this.props.maxLength&&this.props.maxLength<=this.getValue().length)return 'handled';var t=c('handleBeforeInputForMessengerEmoji')(s,r);if(t===s)return 'not-handled';this.setState({editorState:t});return 'handled'}.bind(this),this.$MessengerTextWithEmojiInput4=function(r,s){this.props.onReturn&&this.props.onReturn(r,s);return 'handled'}.bind(this),this.$MessengerTextWithEmojiInput6=function(){this.setState({editorState:this.$MessengerTextWithEmojiInput1('')})}.bind(this),this.state={editorState:this.$MessengerTextWithEmojiInput1(this.props.initialValue),isEmpty:!this.props.initialValue||this.props.initialValue.length===0},n}l.prototype.$MessengerTextWithEmojiInput1=function(m){return c('EditorState').createWithContent(c('createContentStateForTextWithMessengerEmoji')(m||''),this.$MessengerTextWithEmojiInput2())};l.prototype.componentDidMount=function(){this.focusInput()};l.prototype.render=function(){var m=this.props.placeholder&&this.props.placeholder.toString();return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_30e7")},c('React').createElement('div',{className:"_5j5f _3oh-"},c('React').createElement(c('DraftEditor.react'),{editorState:this.state.editorState,handleBeforeInput:this.$MessengerTextWithEmojiInput3,handleReturn:this.$MessengerTextWithEmojiInput4,onChange:this.$MessengerTextWithEmojiInput5,placeholder:m,ref:'input',spellCheck:false,stripPastedStyles:true,textAlignment:'left'})),c('React').createElement(c('XUICloseButton.react'),{size:'small',onMouseDown:this.$MessengerTextWithEmojiInput6,className:(this.state.isEmpty?"hidden_elem":'')+(' '+"_5j5l")}))};l.prototype.getValue=function(){var m=this.state.editorState.getCurrentContent();return c('getVisibleValueForContentStateWithMessengerEmoji')(m)};l.propTypes={onReturn:k.func,maxLength:k.number,onChange:k.func,placeholder:k.node,initialValue:k.string};f.exports=l}),null);
__d('messengerTextWithEmojiInputReact',['reasonReact','bs_js_null_undefined','MessengerTextWithEmojiInput.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o){return c('reasonReact').wrapJsForReason(c('MessengerTextWithEmojiInput.react'),{className:c('bs_js_null_undefined').from_opt(i),onReturn:c('bs_js_null_undefined').from_opt(j),maxLength:c('bs_js_null_undefined').from_opt(k),onChange:c('bs_js_null_undefined').from_opt(l),placeholder:c('bs_js_null_undefined').from_opt(m),initialValue:c('bs_js_null_undefined').from_opt(n)},o)}g.make=h}),null);
__d('MessengerThreadPhotoUploader.react',['cx','fbt','FileInput','FileInputUploader','Link.react','MercuryConfig','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadPhotoUploader',_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:false,propTypes:{onComplete:j.func.isRequired,onFail:j.func,onStart:j.func,uri:j.string},getDefaultProps:function l(){return {uri:c('MercuryConfig').upload_url}},componentDidMount:function l(){var m=c('ReactDOM').findDOMNode(this.refs.input),n=new (c('FileInput'))(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.uploadButton),m),o=new (c('FileInputUploader'))(m).setURI(this.props.uri).setAllowCrossOrigin(true).setAllowCrossPageTransition(true).setData({images_only:true}),p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('success',this._handleAllUploadsCompleted),o.subscribe('failure',this._handleLastUploadFailed));this._subscriptions=p;this._uploader=o;this._fileInput=n},componentWillUnmount:function l(){if(!this._uploadIsInProgress)this._doUnmountComponents();},render:function l(){var m=i._("Click to change the image");return c('React').createElement('form',{action:this.props.uri,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:'true'}),c('React').createElement('div',{className:"_m _4q60 _2lyy"},c('React').createElement(c('Link.react'),{className:"_4q61 _2lyz",ref:'uploadButton'},i._("edit")),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',accept:'.jpg,.png,.jpeg,.bmp,.tif,.tiff',ref:'input',onChange:this._handleFileInputChange,title:m})))},_handleAllUploadsCompleted:function l(m,n){this._uploadIsInProgress=false;this.props.onComplete&&this.props.onComplete(n.response.payload);if(!this.isMounted())this._doUnmountComponents();},_handleLastUploadFailed:function l(m,n){this._uploadIsInProgress=false;this.props.onFail&&this.props.onFail(n);if(!this.isMounted())this._doUnmountComponents();},_handleFileInputChange:function l(m){if(m.target.value&&this._uploader){this._uploader.send();this._uploadIsInProgress=true;this.props.onStart&&this.props.onStart()}},_doUnmountComponents:function l(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader}});f.exports=k}),null);
__d('messengerThreadPhotoUploaderReact',['reasonReact','bs_js_null_undefined','MessengerThreadPhotoUploader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){return c('reasonReact').wrapJsForReason(c('MessengerThreadPhotoUploader.react'),{onComplete:i,onFail:c('bs_js_null_undefined').from_opt(j),onStart:c('bs_js_null_undefined').from_opt(k),uri:c('bs_js_null_undefined').from_opt(l)},m)}g.make=h}),null);
__d('messengerInfoPanelThreadNameSectionReact',['cx','fbt','bs_block','bs_curry','React','keysRe','bs_string','bs_js_boolean','reasonReact','setImmediate','messengerButtonReact','messengerSpinnerReact','MercuryGenericConstants','mercuryThreadTitleReact','messengerTextWithEmojiInputReact','messengerThreadPhotoUploaderReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(q,r){var s=r[4][1];if(s){return s[0].focusInput()}else return 0;}function k(){return c('React').createElement("div",{className:"_2jnw"},c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])))}function l(q,r){var s=r[4][2];if(s){return s[0].focus()}else return 0;}function m(q,r){r[4][1]=q===null?0:[q];return 0}function n(q,r){r[4][2]=q===null?0:[q];return 0}var o=c('reasonReact').reducerComponentWithRetainedProps("MessengerInfoPanelThreadNameSectionReact");function p(q,r,s,t,u,v,w,x,y){var z=function ea(fa,ga){fa.stopPropagation();var ha=ga[4][1];if(ha)c('bs_curry')._1(r,c('bs_string').trim(ha[0].getValue()));return c('bs_curry')._1(c('setImmediate'),c('bs_curry')._1(ga[0],l))},aa=function ea(fa,ga){if(fa.currentTarget.contains(fa.relatedTarget)){fa.stopPropagation();return 0}else if(w>=2){return c('bs_curry')._1(v,0)}else return c('bs_curry')._1(v,1);},ba=function ea(fa){return c('React').createElement("div",{className:"_2jnx",onBlur:c('bs_curry')._1(fa[0],aa)},c('React').createElement("div",{className:"_2jny"},c('reasonReact').element(0,[c('bs_curry')._1(fa[0],m)],c('messengerTextWithEmojiInputReact').make(["_2jnz"],[c('bs_curry')._1(fa[0],z)],[c('MercuryGenericConstants').MAX_THREAD_NAME_LENGTH],0,[i._("Name this conversation")],[u.name],[]))),c('React').createElement("div",{className:"_2jn-"},c('reasonReact').element(0,0,c('messengerButtonReact').make(0,["button"],0,0,[c('bs_curry')._1(fa[0],z)],0,0,0,0,i._("Done"),0,0,0,0,[]))))},ca=function ea(fa,ga){fa.stopPropagation();if(q!==0&&w===1){return c('bs_curry')._1(v,0)}else return 0;},da=function ea(fa,ga){var ha=fa.charCode;if(w!==1||!(ha===c('keysRe').$$return||ha===c('keysRe').space)){return 0}else{fa.preventDefault();fa.stopPropagation();if(q){return c('bs_curry')._1(v,0)}else return 0;}};return [o[0],o[1],o[2],function(ea){var fa=ea[4],ga=+(ea[5][1]!==u);return [ga!==0?0:fa[0],fa[1],fa[2]]},o[4],function(ea){var fa=ea[0],ga=fa[5][0];if(ga!==1||w===1){return 0}else{setTimeout(c('bs_curry')._1(fa[0],j),1);return 0}},o[6],o[7],o[8],function(ea){var fa=ea[4],ga=ea[3],ha=ea[0],ia=w!==1?1:0,ja=fa[0];return c('React').createElement("div",{className:"_2jnq"},c('React').createElement("div",{className:"_2jnr"+(c('bs_js_boolean').to_js_boolean(fa[0])?' '+"_2jns":'')},t,ja!==0?k(0):null,q!==0?c('reasonReact').element(0,0,c('messengerThreadPhotoUploaderReact').make(c('bs_curry')._1(ga,function(ka){return [ka]}),[c('bs_curry')._1(ga,function(){return 0})],[c('bs_curry')._1(ga,function(){return 1})],0,[])):null),c('React').createElement("div",{ref:c('bs_curry')._1(ha,n),className:"_2jnt"+(c('bs_js_boolean').to_js_boolean(1-ia)?' '+"_1sw_":'')+(c('bs_js_boolean').to_js_boolean(1-q)?' '+"disabled":''),role:ia!==0?"":"button",tabIndex:0,onKeyPress:c('bs_curry')._1(ha,da),onClick:c('bs_curry')._1(ha,ca)},c('React').createElement("div",{className:"_2jnu"},ia!==0?ba(ea):c('reasonReact').element(0,0,c('mercuryThreadTitleReact').make(["_2jnv"],u,x,0,[0],[0],0,[])))))},function(){return [0,0,0]},[w,u],function(ea,fa){if(typeof ea==="number"){if(ea!==0){return c('bs_block').__(0,[[1,fa[1],fa[2]]])}else return c('bs_block').__(0,[[0,fa[1],fa[2]]]);}else{var ga=ea[0];return c('bs_block').__(3,[[0,fa[1],fa[2]],function(){return c('bs_curry')._1(s,[u.thread_id,ga])}])}},o[13]]}g.focusThreadNameInput=j;g.renderSpinner=k;g.focusEditThreadNameButton=l;g.setRefThreadNameInput=m;g.setRefEditThreadNameButton=n;g.component=o;g.make=p}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerPlatformAbuseReportType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"})}),null);
__d("XMNReportPageConversationActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messenger_platform\/report_page_conversation\/submit\/",{page_id:{type:"FBID",required:true},report_type:{type:"String",required:true}})}),null);
__d('MNCommerceReportConversationDialog.react',['cx','fbt','AsyncRequest','Link.react','MercuryIDs','MercuryParticipants','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','messengerDialogsRe','MessengerPlatformAbuseReportType','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','React','XMNReportPageConversationActionController','XUIRadioList.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={error:false,pageName:'',reportType:c('MessengerPlatformAbuseReportType').SPAM},this.$MNCommerceReportConversationDialog9=function(){this.$MNCommerceReportConversationDialog1();var t=function v(w,x){return c('MNCommercePromotionBlockDataManager').block(w,x)},u=this.props.pageID;c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:u,onConfirmButtonClick:t})}.bind(this),this.$MNCommerceReportConversationDialog7=function(t){this.setState({reportType:t})}.bind(this),this.$MNCommerceReportConversationDialog1=function(){if(this.props.onToggle){this.props.onToggle()}else c('messengerDialogsRe').removeDialog();}.bind(this),this.$MNCommerceReportConversationDialog6=function(){var t=c('XMNReportPageConversationActionController').getURIBuilder().setFBID('page_id',this.props.pageID).setString('report_type',this.state.reportType).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(){this.$MNCommerceReportConversationDialog1()}.bind(this)).setErrorHandler(function(){this.setState({error:true})}.bind(this)).send()}.bind(this),p}n.prototype.componentWillMount=function(){var o=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:o?o.short_name:''})};n.prototype.render=function(){if(this.props.showDialog===false)return null;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MNCommerceReportConversationDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,i._("Report")),this.$MNCommerceReportConversationDialog2(),this.$MNCommerceReportConversationDialog3())};n.prototype.$MNCommerceReportConversationDialog2=function(){var o=c('React').createElement('div',{className:"_5zjy"},i._("Help us understand what's happening:")),p=this.$MNCommerceReportConversationDialog4(),q=c('React').createElement('div',{className:"_5zjz"},i._("Reporting this conversation will also turn off all messages from {page name}.",[i.param('page name',this.state.pageName)])),r=this.$MNCommerceReportConversationDialog5();return this.state.error?c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj-"},i._("Sorry, something went wrong.")):c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj_"},o,p,q,r)};n.prototype.$MNCommerceReportConversationDialog3=function(){var o=i._("Report"),p=i._("Cancel"),q=i._("OK");if(this.state.error)return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:q,onClick:this.$MNCommerceReportConversationDialog1,type:'primary',use:'default'}));return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:p,type:'secondary',onClick:this.$MNCommerceReportConversationDialog1,use:'default'}),c('React').createElement(c('MessengerDialogButton.react'),{label:o,onClick:this.$MNCommerceReportConversationDialog6,type:'primary',use:'default'}))};n.prototype.$MNCommerceReportConversationDialog4=function(){return c('React').createElement(c('XUIRadioList.react'),{selectedValue:this.state.reportType,onValueChange:this.$MNCommerceReportConversationDialog7},c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').SPAM},i._("It's spam")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').INAPPROPRIATE},i._("It's inappropriate")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').OTHER_ABUSE},i._("Other")))};n.prototype.$MNCommerceReportConversationDialog5=function(){return c('React').createElement('div',{className:"_5zk1"},i._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[i.param('page name',this.state.pageName)]),this.$MNCommerceReportConversationDialog8())};n.prototype.$MNCommerceReportConversationDialog8=function(){return c('React').createElement(c('Link.react'),{className:"_5zk2",onClick:this.$MNCommerceReportConversationDialog9},i._("Manage"))};n.propTypes={pageID:m.string.isRequired,showDialog:m.bool,onToggle:m.func};f.exports=n}),null);
__d('mNCommerceReportConversationDialogReact',['reasonReact','MNCommerceReportConversationDialog.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MNCommerceReportConversationDialog.react'),{pageID:i},j)}g.make=h}),null);
__d('messengerBlockDialogReact',['cx','fbt','bs_curry','React','utilsRe','linkReact','reasonReact','bs_js_primitive','messengerDialogReact','messengerDialogBodyReact','IgnoreMessagesTypedLogger'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statelessComponent("MessengerBlockDialogReact");function k(n,o){return c('React').createElement("div",{className:"_1q73"},i._("If you want, you can also {link}",[i.param("link",c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,[o],0,0,0,0,0,0,["_blank"],0,[i._("block {short_name_or_description} on Facebook.",[i.param("short_name_or_description",c('utilsRe').$pipe$unknown(n,i._("this person")))])])))]))}function l(n,o,p,q,r){var s=j.slice();s[9]=function(){var t=function z(){c('bs_curry')._1(n,0);return c('bs_curry')._1(o,false)},u;if(p){var v=p[0];u=[[v.short_name],c('bs_js_primitive').null_undefined_to_opt(v.href)]}else u=[0,0];var w=u[1],x=u[0];if(!(q==null)){var y=new (c('IgnoreMessagesTypedLogger'))().setEvent("block_clicked").setThreadID(q).setPlatform("messengerdotcom");y.log()}return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,o,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[i._("Block messages")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_1q73"},i._("Stop getting messages and calls from {short_name_or_description} in Messenger.",[i.param("short_name_or_description",c('utilsRe').$pipe$unknown(x,i._("this person")))])),w?k(x,w[0]):null,c('React').createElement("div",undefined,c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,["_blank"],0,[i._("Learn more")])))])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[i._("Block messages")],0,["danger"],[t],[0],0,0,[]))]))]))};return s}var m=c('utilsRe').$pipe$unknown;g.$pipe$unknown=m;g.component=j;g.renderBlockOnFacebook=k;g.make=l}),null);
__d('MessengerDeleteDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('messengerDeleteDialogReactComponent').__setRef('MessengerDeleteDialogBootloader.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('messengerDeleteDialogBootloaderReact',['reasonReact','MessengerDeleteDialogBootloader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MessengerDeleteDialogBootloader.react'),{onArchive:i,onDelete:j,onToggle:k},l)}g.make=h}),null);
__d('messengerIgnoreDialogReact',['cx','fbt','bs_curry','React','utilsRe','reasonReact','messengerDialogReact','messengerDialogBodyReact','IgnoreMessagesTypedLogger'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statelessComponent("MessengerIgnoreDialogReact");function k(m,n,o,p,q){var r=j.slice();r[9]=function(){var s=function v(){c('bs_curry')._1(m,0);return c('bs_curry')._1(n,false)},t=o?[o[0].short_name]:0;if(!(p==null)){var u=new (c('IgnoreMessagesTypedLogger'))().setEvent("ignore_clicked").setThreadID(p).setPlatform("messengerdotcom");u.log()}return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,n,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[i._("Ignore this conversation?")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_1q73"},i._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will move to Message requests. We won't tell {sameParam} that the messages have been ignored.",[i.param("short_name_or_description",c('utilsRe').$pipe$unknown(t,i._("this person"))),i.param("sameParam",c('utilsRe').$pipe$unknown(t,i._("this person")))]))])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[i._("Ignore Messages")],0,["danger"],[s],[0],0,0,[]))]))]))};return r}var l=c('utilsRe').$pipe$unknown;g.$pipe$unknown=l;g.component=j;g.make=k}),null);
__d('MessengerMarkSpamDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('messengerMarkSpamDialogReactComponent').__setRef('MessengerMarkSpamDialogBootloader.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('messengerMarkSpamDialogBootloaderReact',['reasonReact','MessengerMarkSpamDialogBootloader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerMarkSpamDialogBootloader.react'),{onMarkSpam:i,onToggle:j},k)}g.make=h}),null);
__d('messengerMoveToWorkplaceDialogReact',['fbt','reasonReact','MercuryViewer','MercuryThreads','MercurySourceType','messengerDialogsRe','MercuryMessageObject','messengerDialogReact','MercuryLogMessageType','MercuryMessageActions','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerMoveToWorkplaceDialogReact");function j(l){if(l){return 0}else return c('messengerDialogsRe').removeDialog(0);}function k(l,m){var n=function p(){var q=c('MercuryThreads').get();if(!q.isEmptyLocalThread(l)){var r=c('MercuryMessageObject').get(),s=c('MercuryMessageActions').get(),t=r.constructLogMessageObject(c('MercurySourceType').MESSENGER_WEB,l,c('MercuryLogMessageType').SWITCH_TO_WORK,{removed_participants:[c('MercuryViewer').getID()]});s.send(t,undefined,undefined)}return j(false)},o=i.slice();o[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[h._("Move conversation to Workplace?")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[h._("Do you want to move this conversation to Workplace?")])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[h._("Move Conversation")],0,0,[n],[1],0,0,[]))]))]))};return o}g.component=i;g.handleToggle=j;g.make=k}),null);
__d('MessengerMuteDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('messengerMuteDialogReactComponent').__setRef('MessengerMuteDialogBootloader.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('messengerMuteDialogBootloaderReact',['reasonReact','MessengerMuteDialogBootloader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerMuteDialogBootloader.react'),{onMute:i,onToggle:j},k)}g.make=h}),null);
__d('messengerThreadlistRowActionsReact',['cx','fbt','bs_block','bs_curry','React','keysRe','utilsRe','MercuryIDs','AsyncDialog','CurrentUser','reasonReact','joinClasses','AsyncRequest','bs_js_primitive','MoveToWorkUtils','MercuryThreadIDMap','messengerDialogsRe','messengerMenuReact','MercuryParticipants','messengerBlockDialogReact','messengerPopoverMenuReact','messengerIgnoreDialogReact','messengerMuteDialogBootloaderReact','messengerMoveToWorkplaceDialogReact','XNFXStartForMessageThreadController','messengerDeleteDialogBootloaderReact','messengerMarkSpamDialogBootloaderReact','mNCommerceReportConversationDialogReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(r){if(r){return 0}else return c('messengerDialogsRe').removeDialog(0);}function k(r){r.preventDefault();r.stopPropagation();return 0}function l(r){if(r.length){return +r.every(function(s){var t=c('MercuryParticipants').getNow(s);if(t==null){return 0}else return +t.employee;})}else return 0;}var m=c('reasonReact').reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),n="_5blh"+(' '+"_4-0h"),o="_5blh"+(' '+"_4-0h")+(' '+"_4-0i");function p(r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua){var va=r?r[0]:"",wa=function lb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerDeleteDialogBootloaderReact').make(z,aa,j,[]))})},xa=function lb(){if(v){return c('bs_curry')._1(ia,0)}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMuteDialogBootloaderReact').make(fa,j,[]))});},ya=function lb(){if(x){return c('bs_curry')._1(ca,0)}else return c('bs_curry')._1(ea,0);},za=function lb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMarkSpamDialogBootloaderReact').make(da,j,[]))})},ab=function lb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerIgnoreDialogReact').make(ja,j,s,ta.thread_fbid,[]))})},bb=function lb(){if(y){return c('bs_curry')._1(la,0)}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerBlockDialogReact').make(ka,j,s,ta.thread_fbid,[]))});},cb=function lb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMoveToWorkplaceDialogReact').make(ta.thread_id,[]))})},db=function lb(){var mb=c('MercuryThreadIDMap').get();mb.getServerIDFromClientID(ta.thread_id,function(nb){c('AsyncDialog').send(new (c('AsyncRequest'))(c('XNFXStartForMessageThreadController').getURIBuilder().setString("thread_fbid",nb).getURI()));return 0});return 0},eb=function lb(){var mb=ta.other_user_fbid;if(mb==null){return 0}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('mNCommerceReportConversationDialogReact').make(mb,[]))});},fb=function lb(){return [ab,bb,wa,ya,za,xa,eb,db,cb,0]},gb=function lb(){return 0},hb=function lb(mb){var nb=+(mb.keyCode===c('keysRe').$$return);if(nb!==0){return 0}else return 2;},ib=function lb(){return 1},jb=function lb(mb){return [mb===null?0:[mb]]},kb=m.slice();kb[8]=function(lb){var mb=lb[1],nb=lb[0];if(mb[5]||mb[5]!==nb[5]){return 1}else return +(mb[4]!==nb[4]);};kb[9]=function(lb){var mb=lb[4],nb=lb[3];if(w){var ob=u!==0?t!==0?i._("Leave chat"):i._("Leave room"):i._("Leave Group"),pb=i._("Ignore messages"),qb=y!==0?i._("Unblock messages"):i._("Block messages"),rb=i._("Move to Workplace"),sb=c('utilsRe').isSomeTrue(qa),tb=na||c('utilsRe').isSomeTrue(qa),ub=c('utilsRe').isSomeTrue(ra),vb=c('utilsRe').isSomeTrue(ra),wb=1- +c('CurrentUser').isWorkUser()&&oa&&pa&&1-y,xb=1- +c('CurrentUser').isWorkUser()&&pa,yb=+c('MoveToWorkUtils').isViewerEligible()&&+c('MercuryIDs').isGroupChat(ta.thread_id)&&l(ta.participants),zb=c('reasonReact').element(0,0,c('messengerMenuReact').Menu[0]([na!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,v!==0?i._("Unmute"):i._("Mute"),[mb[5]],0,[])):null,sb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Rename"),ga,0,[])):null,tb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuSeparator[0]([])):null,ma!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,ob,ba,0,[])):null,c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Archive"),[z],0,[])),c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Delete"),[mb[2]],0,[])),c('reasonReact').element(0,0,c('messengerMenuReact').MenuSeparator[0]([])),c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,x!==0?i._("Mark as Read"):i._("Mark as Unread"),[mb[3]],0,[])),ub!==0?null:c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Mark as Spam"),[mb[4]],0,[])),vb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Report..."),[mb[6]],0,[])):c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,i._("Report Spam or Abuse..."),[mb[7]],0,[])),wb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,pb,[mb[0]],0,[])):null,xb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,qb,[mb[1]],0,[])):null,yb!==0?c('reasonReact').element(0,0,c('messengerMenuReact').MenuItem[0](0,rb,[mb[8]],0,[])):null])),ac=+(va===""),bc=ac!==0?o:c('joinClasses')(va,o);return c('React').createElement("div",{className:"_3d85"},c('reasonReact').element(0,[c('bs_curry')._1(nb,jb)],c('messengerPopoverMenuReact').make([1],[w],zb,[c('bs_curry')._1(nb,ib)],[c('bs_curry')._1(nb,gb)],[c('React').cloneElement(c('React').createElement("div",{ref:"button",className:bc,role:"button",tabIndex:0,onClick:k}),{"aria-label":i._("Conversation actions")})])))}else{var cc=+(va===""),dc=cc!==0?n:c('joinClasses')(va,n);return c('React').createElement("div",{className:"_3d85"},c('React').createElement("div",{"aria-label":i._("Conversation actions"),className:dc,onClick:c('bs_curry')._1(nb,gb),onKeyUp:c('bs_curry')._1(nb,hb),role:"button",ref:"button",tabIndex:sa}))}};kb[10]=fb;kb[11]=w;kb[12]=function(lb,mb){if(typeof lb==="number"){switch(lb){case 0:var nb=fb(0).slice();return c('bs_block').__(3,[(nb[9]=1,nb),function(){return c('bs_curry')._1(ha,true)}]);case 1:var ob=mb.slice();return c('bs_block').__(3,[(ob[9]=0,ob),function(){return c('bs_curry')._1(ha,false)}]);case 2:return 0;}}else{var pb=lb[0],qb=mb[9];if(qb!==0){if(pb){var rb=pb[0],sb=mb.slice();return c('bs_block').__(4,[(sb[9]=0,sb),function(){return rb.showPopover()}])}else return 0;}else return 0;}};return kb}var q=c('reasonReact').wrapReasonForJs(m,function(r){return p(c('bs_js_primitive').null_undefined_to_opt(r.className),c('bs_js_primitive').null_undefined_to_opt(r.contact),+r.isGroupChat,+r.isJoinableThread,+r.isMuted,+r.isOpen,+r.isUnread,+r.isBlocked,r.onArchive,r.onDelete,c('bs_js_primitive').null_undefined_to_opt(r.onLeaveGroup),r.onMarkRead,r.onMarkSpam,r.onMarkUnread,r.onMute,c('bs_js_primitive').null_undefined_to_opt(r.onRename),r.onToggle,r.onUnmute,r.onIgnore,r.onBlock,r.onUnblock,+r.showLeaveGroup,+r.showMute,+r.showIgnore,+r.showBlock,c('utilsRe').nullUndefinedBooleanToOptionBool(r.showRename),c('utilsRe').nullUndefinedBooleanToOptionBool(r.showReport),r.tabIndex,r.thread,[])});g.handleReasonDialogToggle=j;g.handleClick=k;g.isEmployeesOnly=l;g.component=m;g.actionButtonClassesClosed=n;g.actionButtonClassesOpen=o;g.make=p;g.jsComponent=q}),null);
__d('messengerInfoPanelNameSectionReact',['cx','bs_block','bs_curry','React','reasonReact','bs_js_primitive','MercuryThreadInfo','MessengerAdminGroupUtils','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerInfoPanelThreadNameSectionReact','messengerInfoPanelContactNameSectionReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').reducerComponentWithRetainedProps("MessengerInfoPanelNameSectionReact");function j(r,s){s[4][2][0]=r===null?0:[r];return 0}function k(r,s,t){return c('React').createElement("div",{className:"_1jt8"},c('reasonReact').element(0,0,c('messengerThreadImageReact').make(0,0,[50],r,s,t,[])))}function l(r){return c('bs_block').__(0,[r])}function m(r){return c('bs_block').__(1,[+r])}function n(){return 0}function o(r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){var ra=function va(wa){if(wa!==oa.name)c('bs_curry')._1(ca,wa);return 1},sa=function va(wa){var xa=wa[3],ya=+oa.is_subscribed&&1- +oa.is_canonical&&+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(oa,pa);return c('React').createElement("div",{className:"_3-ne"},c('reasonReact').element(0,0,c('messengerThreadlistRowActionsReact').make(0,r,+c('MessengerAdminGroupUtils').isGroupChat(oa),+c('MessengerAdminGroupUtils').isJoinableThread(oa),+c('MercuryThreadInfo').isMuted(oa),wa[4][0],+(oa.unread_count>0),t,ba,v,w,x,y,z,aa,[c('bs_curry')._1(xa,n)],c('bs_curry')._1(xa,m),ea,fa,ga,ha,ma,0,ia,ja,[ya],[na],0,oa,[])))},ta=function va(wa){return c('bs_curry')._2(da,wa[0],wa[1])},ua=i.slice();ua[3]=function(va){var wa=va[4],xa=+(va[5]===oa);return [wa[0],xa!==0?wa[1]:1,wa[2]]};ua[9]=function(va){var wa=+(oa.is_subscribed||oa.is_canonical),xa;if(r){xa=c('reasonReact').element(0,0,c('messengerInfoPanelContactNameSectionReact').make(r[0],s,u,la,k(ka,oa,pa),[]))}else{var ya=+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(oa,pa);xa=c('reasonReact').element(0,[c('bs_curry')._1(va[0],j)],c('messengerInfoPanelThreadNameSectionReact').make(ya,c('bs_curry')._1(va[3],ra),ta,k(ka,oa,pa),oa,c('bs_curry')._1(va[3],l),va[4][1],pa,[]))}return c('React').createElement("div",{className:"_1jt6"},xa,wa!==0?sa(va):null)};ua[10]=function(){return [0,1,[0]]};ua[11]=oa;ua[12]=function(va,wa){if(typeof va==="number"){if(va){return c('bs_block').__(0,[[wa[0],1,wa[2]]])}else{var xa=wa[2][0];if(xa){return c('bs_block').__(0,[[wa[0],0,wa[2]]])}else return 0;}}else if(va.tag){return c('bs_block').__(0,[[va[0],wa[1],wa[2]]])}else return c('bs_block').__(0,[[wa[0],va[0],wa[2]]]);};return ua}var p=c('reasonReact').wrapReasonForJs(i,function(r){return o(c('bs_js_primitive').null_undefined_to_opt(r.contact),+r.isUserActive,+r.isBlocked,c('bs_js_primitive').null_undefined_to_opt(r.lastActive),r.onDelete,c('bs_js_primitive').null_undefined_to_opt(r.onLeaveGroup),r.onMarkRead,r.onMarkSpam,r.onMarkUnread,r.onMute,r.onArchive,r.onThreadNameChange,r.onThreadPhotoChange,r.onUnmute,r.onIgnore,r.onBlock,r.onUnblock,+r.showIgnore,+r.showBlock,r.participants,c('bs_js_primitive').null_undefined_to_opt(r.platform),+r.showLeaveGroup,+r.showReport,r.thread,r.viewer,[])}),q=50;g.component=i;g.imageSize=q;g.setThreadSectionRef=j;g.renderImage=k;g.handleToggleIsEditingName=l;g.handleActionsToggle=m;g.handleRename=n;g.make=o;g.jsComponent=p}),null);
__d("MessagingThreadCustomizationSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADMIN_MSG_CHANGE_LINK:"admin_msg",THREAD_INLINE:"thread_inline",JOURNEY_PROMPT:"journey_prompt",JOURNEY_PROMPT_WRITE_IN:"journey_prompt_write_in",PROMO_LINK:"promo_link",SETTINGS:"thread_settings",USER_INFO_ACTION_SHEET:"user_info_action_sheet",ROOM_CREATION:"room_creation"})}),null);
__d('gridReact',['utilsRe','Grid.react','reasonReact','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(l,m,n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('Grid.react'),{className:c('bs_js_null_undefined').from_opt(l),cols:m,fixed:c('utilsRe').optionBoolToNullUndefinedBoolean(n),alignv:c('bs_js_null_undefined').from_opt(o),alignh:c('bs_js_null_undefined').from_opt(p),spacing:c('bs_js_null_undefined').from_opt(q)},r)}var i=[h];function j(l,m,n,o){return c('reasonReact').wrapJsForReason(c('Grid.react').GridItem,{className:c('bs_js_null_undefined').from_opt(l),alignv:c('bs_js_null_undefined').from_opt(m),alignh:c('bs_js_null_undefined').from_opt(n)},o)}var k=[j];g.Grid=i;g.Item=k}),null);
__d('messengerCustomThreadColorButtonReact',['cx','bs_curry','React','keysRe','reasonReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerCustomThreadColorButton");function j(l,m,n,o,p){var q=function t(u,v){u.preventDefault();return c('bs_curry')._1(o,l)},r=function t(u,v){if(u.keyCode===c('keysRe').$$return){u.preventDefault();return c('bs_curry')._1(o,l)}else return 0;},s=i.slice();s[9]=function(t){return c('React').cloneElement(c('React').createElement("div",{className:"_5dr3",role:"button",tabIndex:0,onKeyDown:c('bs_curry')._1(t[0],r),onClick:c('bs_curry')._1(t[0],q)},c('React').createElement("div",{className:"_5dr4",style:{backgroundColor:l}})),{"aria-label":m,"aria-pressed":n})};return s}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(l.colorChoice,l.colorName,l.isSelected,l.onChoose,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d('messengerChangeColorDialogReact',['ix','cx','fbt','cssVar','bs_array','bs_curry','React','bs_string','gridReact','imageReact','fbglyph','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact','MessagingThreadCustomizationConfig','messengerCustomThreadColorButtonReact'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('reasonReact').statelessComponent("MessengerChangeColorDialogReact"),m="Unknown Color";function n(o,p,q,r){var s=function v(w){if(w){return 0}else{if(q)c('bs_curry')._1(q[0],0);return c('messengerDialogsRe').removeDialog(0)}},t=function v(w){var x=+(w===o);if(!x)if(p)c('bs_curry')._1(p[0],w);return s(false)},u=l.slice();u[9]=function(){var v=c('bs_array').concat([["#0084ff"],[c('MessagingThreadCustomizationConfig').colorChoices,0]]),w=c('bs_array').map(function(x){var y=c('MessagingThreadCustomizationConfig').colorNames[x],z=y!==undefined?y:m,aa=+(c('bs_string').lowercase(x)===c('bs_string').lowercase(o));return c('reasonReact').element([x],0,c('gridReact').Item[0](["_gs0"],0,0,[c('React').createElement("div",undefined,aa!==0?c('reasonReact').element(0,0,c('imageReact').make(["_gs2"],0,[h("140201")],0,0,0,0,[])):null,c('reasonReact').element(0,0,c('messengerCustomThreadColorButtonReact').make(x,z,+(x===o),t,[])))]))},v);return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](["_gs3"],s,0,0,0,0,[335],[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[j._("Pick a colour for this conversation")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_28he"},j._("Everyone in this conversation will see this.")),c('reasonReact').element(0,0,c('gridReact').Grid[0](["_gs4"],5,0,0,0,0,[w]))])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[]))]))]))};return u}g.component=l;g.unknownColor=m;g.make=n}),null);
__d("messengerChangeColorIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"-1 -1 47 47"},c("React").createElement("title",undefined,"colors@2x"),c("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:j,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})))}g.make=h}),null);
__d('messengerInfoPanelCustomColorReact',['cx','fbt','bs_curry','React','keysRe','reasonReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerChangeColorDialogReact','messengerChangeColorIconSVGReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').reducerComponent("MessengerInfoPanelCustomColorReact");function k(n,o){var p=o[4][0][0];if(p){return p[0].focus()}else return 0;}function l(n,o){o[4][0][0]=n===null?0:[n];return 0}function m(n,o,p){var q=function u(v){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerChangeColorDialogReact').make(c('messengerCustomColorUtilsRe').customColorOrBlue(n),[o],[c('bs_curry')._1(v,k)],[]))})},r=function u(v,w){v.preventDefault();return q(w[0])},s=function u(v,w){if(v.keyCode===c('keysRe').$$return){v.preventDefault();return q(w[0])}else return 0;},t=j.slice();t[9]=function(u){if(n.customization_enabled){var v=c('messengerCustomColorUtilsRe').customColorOrBlue(n);return c('React').createElement("div",{ref:c('bs_curry')._1(u[0],l),className:"_3szn _3szo",tabIndex:0,onKeyDown:c('bs_curry')._1(u[0],s),onClick:c('bs_curry')._1(u[0],r)},c('React').createElement("div",{className:"_3szp"},c('messengerChangeColorIconSVGReact').make("_17vc",v)),c('React').createElement("div",{className:"_3szq"},i._("Change Colour")))}else return null;};t[10]=function(){return [[0]]};t[12]=function(u,v){return 0};return t}g.component=j;g.handleDialogClose=k;g.setTheRef=l;g.make=m}),null);
__d('MessengerInfoPanelEmoji.react',['cx','fbt','Bootloader','EmojiLikeConstants','Image.react','ImmutableObject','Keys','MercuryShareAttachmentRenderLocations','MessengerHotLikeOutlineSVG.react','MessengerSupportedEmojiUtils','React','messengerDialogsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelEmoji2=function(event){event.preventDefault();this.$MessengerInfoPanelEmoji5()}.bind(this),this.$MessengerInfoPanelEmoji3=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.$MessengerInfoPanelEmoji5()}}.bind(this),this.$MessengerInfoPanelEmoji6=function(){if(this.$MessengerInfoPanelEmoji1)this.$MessengerInfoPanelEmoji1.focus();}.bind(this),this.$MessengerInfoPanelEmoji4=function(s){this.$MessengerInfoPanelEmoji1=s}.bind(this),o}m.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var n=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?c('MessengerSupportedEmojiUtils').getNewEmojiData(this.props.thread.custom_like_icon.emoji,c('EmojiLikeConstants').size.SMALL):null,o=n&&n.url?c('React').createElement(c('Image.react'),{src:n.url,className:"_12cp"}):c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{className:"_12cq",color:this.props.thread.custom_color?this.props.thread.custom_color:'',height:'60%',location:c('MercuryShareAttachmentRenderLocations').MESSENGER});return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelEmoji2,onKeyDown:this.$MessengerInfoPanelEmoji3,ref:this.$MessengerInfoPanelEmoji4,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},o),c('React').createElement('div',{className:"_3szq"},i._("Change Emoji")))};m.prototype.$MessengerInfoPanelEmoji5=function(){c('Bootloader').loadModules(["messengerChangeEmojiDialogReact"],function(n){var o=n.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(o,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,c('EmojiLikeConstants').FB_THUMBS_UP_EMOJI),onClose:this.$MessengerInfoPanelEmoji6,onSave:this.props.onChange})}.bind(this))}.bind(this),'MessengerInfoPanelEmoji.react')};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,onChange:l.func.isRequired};f.exports=m}),null);
__d('messengerInfoPanelEmojiReact',['reasonReact','MessengerInfoPanelEmoji.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MessengerInfoPanelEmoji.react'),{thread:i,viewer:j,onChange:k},l)}g.make=h}),null);
__d('MNCommercePromotionManageBlockDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('MNCommercePromotionManageBlockDialogContainer.react').__setRef('MNCommercePromotionManageBlockDialogBootloader.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('shimButtonReact',['utilsRe','reasonReact','ShimButton.react','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('ShimButton.react'),{className:c('bs_js_null_undefined').from_opt(i),inline:c('utilsRe').optionBoolToNullUndefinedBoolean(j),onClick:c('bs_js_null_undefined').from_opt(k)},l)}g.make=h}),null);
__d("messengerInfoPanelManageMessagesReact",["cx","fbt","React","utilsRe","MercuryIDs","reasonReact","shimButtonReact","MercuryParticipants","MNCommerceDialogStateActions","MNCommercePromotionManageBlockDialogBootloader.react"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerInfoPanelManageMessagesReact");function k(m){var n=c("MercuryIDs").getParticipantIDFromFromThreadID(m.thread_id);if(n==null){return 0}else{var o=c("MercuryParticipants").getNow(n);if(o==null){return 0}else return c("utilsRe").isTruthy(o.is_business_enabled);}}function l(m,n,o){var p=function r(s){s.preventDefault();s.stopPropagation();c("MNCommerceDialogStateActions").showDialog(c("MNCommercePromotionManageBlockDialogBootloader.react"),{pageID:m.other_user_fbid});return 0},q=j.slice();q[9]=function(){if(k(m)){return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szp"}),c("reasonReact").element(0,0,c("shimButtonReact").make(["_3szq"],[1],[p],[i._("Manage Messages")])))}else return null;};return q}g.component=j;g.isBusinessEnabled=k;g.make=l}),null);
__d('MessengerInfoPanelManageReview.react',['cx','fbt','Bootloader','ImmutableObject','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageReview2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommerceReviewDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageReview3})}.bind(this),'MessengerInfoPanelManageReview.react')}.bind(this),o}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageReview1())return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement(c('ShimButton.react'),{className:"_3szq",inline:true,onClick:this.$MessengerInfoPanelManageReview2},i._("Leave feedback")))};m.prototype.$MessengerInfoPanelManageReview1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.accepts_messenger_user_feedback)};m.prototype.$MessengerInfoPanelManageReview3=function(n,o,p){if(o===0)return;c('Bootloader').loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(q){q.review(n,o,p.trim())},'MessengerInfoPanelManageReview.react')};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m}),null);
__d('messengerInfoPanelManageReviewReact',['reasonReact','MessengerInfoPanelManageReview.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerInfoPanelManageReview.react'),{thread:i,viewer:j},k)}g.make=h}),null);
__d('messengerContactListReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerContactList.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('reasonReact').wrapJsForReason(c('MessengerContactList.react'),{contactAdapter:c('bs_js_null_undefined').from_opt(i),disableRole:c('utilsRe').optionBoolToNullUndefinedBoolean(j),listSections:k,onSelect:l,rowClassName:c('bs_js_null_undefined').from_opt(m),viewer:n,thread:c('bs_js_null_undefined').from_opt(o)},p)}g.make=h}),null);
__d('messengerEditNicknameDialogReact',['cx','fbt','bs_curry','React','MercuryIDs','reasonReact','messengerDialogReact','messengerDialogBodyReact','messengerTextWithEmojiInputReact','MessagingThreadCustomizationConfig'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').reducerComponent("MessengerEditNicknameDialogReact");function k(m,n){n[4][0][0]=m===null?0:[m];return 0}function l(m,n,o,p,q,r){var s=function u(v,w){var x=w[4][0][0],y=x?[x[0].getValue()]:0;if(y)if(y[0]===""){if(n)if(y!==n){var z=c('MercuryIDs').getUserIDFromParticipantID(m.id);if(!(z==null))c('bs_curry')._1(o,[z,y[0]]);}}else if(y!==n){var aa=c('MercuryIDs').getUserIDFromParticipantID(m.id);if(!(aa==null))c('bs_curry')._1(o,[aa,y[0]]);}return c('bs_curry')._1(p,false)},t=j.slice();t[9]=function(u){var v=m.name,w=c('MercuryIDs').getUserIDFromParticipantID(m.id),x,y=0;if(!(w==null)&&w===q){x=i._("Edit your nickname")}else y=1;if(y===1)x=i._("Edit nickname for {personName}",[i.param("personName",v)]);return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](["_2c1u"],p,0,0,0,0,[400],[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[x])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_-bo"},i._("Everyone in this conversation will see this.")),c('reasonReact').element(0,[c('bs_curry')._1(u[0],k)],c('messengerTextWithEmojiInputReact').make(["_2c1v"],[c('bs_curry')._1(u[0],s)],[c('MessagingThreadCustomizationConfig').maxNicknameLength],0,[v],n,[]))])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[i._("Save")],0,0,[c('bs_curry')._1(u[0],s)],[0],0,0,[]))]))]))};t[10]=function(){return [[0]]};t[12]=function(u,v){return 0};return t}g.component=j;g.setInput=k;g.make=l}),null);
__d('messengerScrollableAreaReact',['reasonReact','bs_js_null_undefined','MessengerScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerScrollableArea.react'),{height:c('bs_js_null_undefined').from_opt(i)},j)}g.make=h}),null);
__d('messengerEditNicknamesDialogReact',['cx','fbt','bs_curry','immutable','MercuryIDs','reasonReact','bs_js_primitive','ImmutableObject','messengerDialogsRe','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact','messengerContactListReact','messengerScrollableAreaReact','messengerEditNicknameDialogReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(m,n){var o=c('MercuryIDs').getUserIDFromParticipantID(n.id),p;if(o==null){p=[n.name,""]}else if(m!==null){var q=m[o];p=q!==undefined?[q,n.name]:[n.name,""]}else p=[n.name,""];return new (c('ImmutableObject'))({alias:n.alias,uid:n.id,photo:n.image_src,title:p[0],subtitle:p[1],type:n.type,isMessengerUser:n.is_messenger_user,href:n.href,isWorkUser:undefined,timezone:undefined,participants:undefined,thread:undefined})}var k=c('reasonReact').statelessComponent("MessengerEditNicknamesDialogReact");function l(m,n,o,p,q,r){var s=function v(w){if(w){return 0}else{c('bs_curry')._1(p,0);return c('messengerDialogsRe').removeAllDialogs(0)}},t=function v(w,x){var y=c('MercuryIDs').getUserIDFromParticipantID(w.id),z=n.custom_nickname,aa=!(y==null)&&z!==null?c('bs_js_primitive').undefined_to_opt(z[y]):0;return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerEditNicknameDialogReact').make(w,aa,o,s,q,[]))})},u=k.slice();u[9]=function(){var v=m.filter(function(x,y,z){if(x==null){return false}else{var aa=+c('MessengerAdminGroupUtils').isJoinableThread(n),ba=c('MercuryIDs').getUserIDFromParticipantID(x.id);if(aa!==0&&!(!(ba==null)&&ba===q)){return false}else return true;}}).toArray(),w=n.custom_nickname;return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](["_4h9n"],s,0,0,0,["default"],[350],[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Title[0](0,[i._("Edit nicknames")]))])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(["_4h9o"],[c('reasonReact').element(0,0,c('messengerScrollableAreaReact').make(["100%"],[c('reasonReact').element(0,0,c('messengerContactListReact').make([function(x){return j(w,x)}],[1],c('immutable').OrderedMap([[null,v]]),t,["_44kr"],q,[n],[]))]))]))]))};return u}g.fromMercuryParticipant=j;g.component=k;g.make=l}),null);
__d("messengerEditNicknamesIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"0 0 38 37.01"},c("React").createElement("title",undefined,"nicknames"),c("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})))}g.make=h}),null);
__d('messengerInfoPanelNicknamesReact',['cx','fbt','bs_curry','React','keysRe','reasonReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerEditNicknamesDialogReact','messengerEditNicknamesIconSVGReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(n,o){var p=o[4][0][0];if(p){return p[0].focus()}else return 0;}function k(n,o){o[4][0][0]=n===null?0:[n];return 0}var l=c('reasonReact').reducerComponent("MessengerInfoPanelNicknamesReact");function m(n,o,p,q,r){var s=function w(x){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerEditNicknamesDialogReact').make(n,o,q,c('bs_curry')._1(x[0],j),p,[]))})},t=function w(x,y){x.preventDefault();return s(y)},u=function w(x,y){if(x.keyCode===c('keysRe').$$return){x.preventDefault();return s(y)}else return 0;},v=l.slice();v[9]=function(w){if(o.customization_enabled){var x=c('messengerCustomColorUtilsRe').customColorOrBlue(o);return c('React').createElement("div",{ref:c('bs_curry')._1(w[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c('bs_curry')._1(w[0],u),onClick:c('bs_curry')._1(w[0],t)},c('React').createElement("div",{className:"_3szp"},c('messengerEditNicknamesIconSVGReact').make("_5odt",x)),c('React').createElement("div",{className:"_3szq"},i._("Edit Nicknames")))}else return null;};v[10]=function(){return [[0]]};v[12]=function(w,x){return 0};return v}g.handleDialogClose=j;g.setHandleRef=k;g.component=l;g.make=m}),null);
__d("messengerThreadSearchIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"8 8 48 48"},c("React").createElement("title",undefined,"search conversation"),c("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:j,strokeMiterlimit:"10",strokeWidth:"2"}),c("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:j,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}g.make=h}),null);
__d("messengerInfoPanelSearchReact",["cx","fbt","React","keysRe","reasonReact","MessengerActions","MessengerStateStore","messengerCustomColorUtilsRe","messengerThreadSearchIconSVGReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerInfoPanelSearchReact");function k(){var o=c("MessengerStateStore").getState().query,p=+(o==null);c("MessengerActions").changeQuery(p!==0?"":undefined);return 0}function l(o){o.preventDefault();return k(0)}function m(o){if(o.keyCode===c("keysRe").$$return){o.preventDefault();return k(0)}else return 0;}function n(o,p){var q=j.slice();q[9]=function(){var r=c("messengerCustomColorUtilsRe").customColorOrBlue(o);return c("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:m,onClick:l},c("React").createElement("div",{className:"_3szp"},c("messengerThreadSearchIconSVGReact").make("_5odt",r)),c("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")))};return q}g.component=j;g.showQuery=k;g.handleSearchThreadClick=l;g.handleSearchThreadKeyDown=m;g.make=n}),null);
__d('leftRightReact',['reasonReact','LeftRight.react','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('LeftRight.react'),{className:c('bs_js_null_undefined').from_opt(i)},j)}g.make=h}),null);
__d('MessengerCompositeMuteSettingsDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('messengerCompositeMuteSettingsDialogReactComponent').__setRef('MessengerCompositeMuteSettingsDialogBootloader.react'),placeholder:c('React').createElement('div',null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('messengerCompositeMuteSettingsDialogBootloaderReact',['reasonReact','MessengerCompositeMuteSettingsDialogBootloader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerCompositeMuteSettingsDialogBootloader.react'),{isMuted:i,mentionsMuted:j,reactionsMuted:k,showMentions:l,onMentionsMute:m,onReactionsMute:n,onMute:o,onToggle:p},q)}g.make=h}),null);
__d("messengerNotificationsIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},c("React").createElement("defs",undefined,c("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),c("React").createElement("g",{fill:"none",fillRule:"evenodd"},c("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),c("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:j}),c("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:j}))))}g.make=h}),null);
__d('messengerNotificationsButtonReact',['cx','fbt','bs_curry','React','keysRe','formatDate','reasonReact','leftRightReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerNotificationsIconSVGReact','messengerCompositeMuteSettingsDialogBootloaderReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(n,o){if(n){return 0}else{c('messengerDialogsRe').removeDialog(0);var p=o[4][0][0];if(p){return p[0].focus()}else return 0;}}function k(n,o){o[4][0][0]=n===null?0:[n];return 0}var l=c('reasonReact').reducerComponent("MessengerNotificationsButtonReact");function m(n,o,p,q,r,s,t,u,v){var w=function ba(ca){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerCompositeMuteSettingsDialogBootloaderReact').make(n,o,q,1- +u.is_canonical,r,t,s,c('bs_curry')._1(ca[0],j),[]))})},x=function ba(ca,da){ca.preventDefault();ca.stopPropagation();return w(da)},y=function ba(ca,da){if(ca.keyCode===c('keysRe').$$return){ca.preventDefault();ca.stopPropagation();return w(da)}else return 0;},z=function ba(){if(p){var ca=p[0];if(ca!==0){var da;if(ca>0){if(ca<86401){da=0}else{var ea=+(new Date(ca*1000).getDay()===new Date().getDay());da=ea?[i._("Off until {time}",[i.param("time",c('formatDate')(ca,"g:ia"))])]:[i._("Off until {time} tomorrow",[i.param("time",c('formatDate')(ca,"g:ia"))])]}}else da=ca===-1?[i._("Off indefinitely")]:0;if(da){return c('React').createElement("span",{className:"_3x6v"},da[0])}else return null;}else return null;}else return null;},aa=l.slice();aa[9]=function(ba){var ca=i._("Notifications"),da=c('messengerCustomColorUtilsRe').customColorOrBlue(u);return c('React').createElement("div",{ref:c('bs_curry')._1(ba[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c('bs_curry')._1(ba[0],y),onClick:c('bs_curry')._1(ba[0],x)},c('React').createElement("div",{className:"_3szp"},c('messengerNotificationsIconSVGReact').make("_3wh2",da)),c('reasonReact').element(0,0,c('leftRightReact').make(["_3szq"],[ca,z(0)])))};aa[10]=function(){return [[0]]};aa[12]=function(ba,ca){return 0};return aa}g.handleDialogToggle=j;g.setRef=k;g.component=l;g.make=m}),null);
__d('messengerMuteButtonContainerReact',['bs_curry','bs_js_boolean','reasonReact','MercuryThreadInfo','MercuryThreadActions','messengerNotificationsButtonReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerMuteButtonContainerReact");function i(j,k,l){var m=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateMuteSetting(j.thread_id,r);return 0},n=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateMentionsMuteSetting(j.thread_id,c('bs_js_boolean').to_js_boolean(r));return 0},o=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateReactionsMuteSetting(j.thread_id,c('bs_js_boolean').to_js_boolean(r));return 0},p=h.slice();p[9]=function(q){var r=+c('MercuryThreadInfo').isMuted(j),s=c('MercuryThreadInfo').getMuteSetting(j);return c('reasonReact').element(0,0,c('messengerNotificationsButtonReact').make(r,+c('MercuryThreadInfo').areMentionsMuted(j),s==null?0:[s],+c('MercuryThreadInfo').areReactionsMuted(j),c('bs_curry')._1(q[0],n),c('bs_curry')._1(q[0],m),c('bs_curry')._1(q[0],o),j,[]))};return p}g.component=h;g.make=i}),null);
__d('messengerInfoPanelThreadOptionsContainerReact',['fbt','bs_curry','WorkGKs','CurrentUser','reasonReact','bs_js_primitive','MercuryThreadActions','MessengerAdminGroupUtils','messengerInfoPanelEmojiReact','messengerInfoPanelSearchReact','messengerInfoPanelSectionReact','messengerInfoPanelNicknamesReact','messengerMuteButtonContainerReact','MessagingThreadCustomizationSource','messengerInfoPanelCustomColorReact','messengerInfoPanelManageReviewReact','messengerInfoPanelManageMessagesReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerInfoPanelThreadOptionsContainerReact");function j(l,m,n,o,p,q){var r=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadColor(n.thread_id,w,c('MessagingThreadCustomizationSource').SETTINGS);return 0},s=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadEmoji(n.thread_id,w,c('MessagingThreadCustomizationSource').SETTINGS);return 0},t=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadNicknames(n.thread_id,w[0],w[1],c('MessagingThreadCustomizationSource').SETTINGS);return 0},u=i.slice();u[9]=function(v){if(n.is_subscribed){var w=+c('CurrentUser').isWorkUser(),x=+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(n,o),y=x&&(1-w||+c('WorkGKs').workchat_thread_color_customization),z=y!==0?c('reasonReact').element(0,0,c('messengerInfoPanelCustomColorReact').make(n,c('bs_curry')._1(v[0],r),[])):null,aa=x&&(1-w||+c('WorkGKs').workchat_thread_emoji_customization),ba=aa!==0?c('reasonReact').element(0,0,c('messengerInfoPanelEmojiReact').make(n,o,c('bs_curry')._1(v[0],s),[])):null,ca=c('reasonReact').element(0,0,c('messengerInfoPanelSearchReact').make(n,[])),da=1-w||+c('WorkGKs').workchat_thread_nickname_customization,ea=da!==0?c('reasonReact').element(0,0,c('messengerInfoPanelNicknamesReact').make(m,n,o,c('bs_curry')._1(v[0],t),[])):null,fa=c('reasonReact').element(0,0,c('messengerInfoPanelManageMessagesReact').make(n,o,[])),ga=c('reasonReact').element(0,0,c('messengerInfoPanelManageReviewReact').make(n,o,[])),ha=c('reasonReact').element(0,0,c('messengerMuteButtonContainerReact').make(n,o,[]));return c('reasonReact').element(0,0,c('messengerInfoPanelSectionReact').make(c('bs_js_primitive').null_undefined_to_opt(n.custom_color),[1],[l],[p],[h._("Options")],[ca,ea,z,ba,fa,ga,ha]))}else return null;};return u}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(+l.isCollapsed,l.participants,l.thread,l.viewer,l.onToggle,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerDaysInStreakReact",["cx","fbt","React","bs_pervasives","reasonReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerDaysInStreakReact");function k(m,n){var o=j.slice();o[9]=function(){var p=m.days_in_streak;if(p==null){return null}else if(p<1){return null}else{var q=c("bs_pervasives").string_of_int(p);return c("React").createElement("div",{className:"_60oa"},i._("Messaging streak: {daysInStreak}",[i.param("daysInStreak",q)]))}};return o}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(m.thread,[])});g.component=j;g.make=k;g.jsComponent=l}),null);
__d('numberRe',['reasonReact','Number.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('Number.react'),{value:i},j)}g.make=h}),null);
__d('messengerMessageCountReact',['cx','fbt','bs_block','bs_curry','React','numberRe','reasonReact','bs_js_primitive','MercuryThreadInformer'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(p){return c('bs_block').__(0,[p])}function k(p){return c('bs_block').__(1,[p])}var l=c('reasonReact').reducerComponentWithRetainedProps("MessengerMessageCountReact");function m(p,q){if(p==null){return 0}else return c('bs_js_primitive').undefined_to_opt(p[q]);}function n(p,q,r){return [l[0],l[1],l[2],function(s){var t=s[4],u=+(s[5][0]===p.thread_id);return [u!==0?t[0]:p.message_count,t[1],t[2]]},function(s){var t=s[4],u=s[3],v=c('bs_curry')._1(u,j),w=c('bs_curry')._1(u,k),x=c('MercuryThreadInformer').getForFBID(q),y=[x.subscribe("messages-received",function(aa,ba){return c('bs_curry')._1(v,ba)})],z=[x.subscribe("messages-reordered",function(aa,ba){return c('bs_curry')._1(w,ba)})];t[1][0]=y;t[2][0]=z;return 0},l[5],function(s){var t=s[4],u=t[1][0];if(u)u[0].unsubscribe();var v=t[2][0];if(v){v[0].unsubscribe();return 0}else return 0;},l[7],l[8],function(s){return c('React').createElement("div",{className:"_60oa"},i._("Messages sent:"),c('React').createElement("div",{className:"_397l"},c('reasonReact').element(0,0,c('numberRe').make(s[4][0],[]))))},function(){return [p.message_count,[0],[0]]},[p.thread_id],function(s,t){if(s.tag){var u=m(s[0],p.thread_id);if(u&&u[0].source==="client_delete_messages"){return c('bs_block').__(0,[[t[0]-1|0,t[1],t[2]]])}else return 0;}else{var v=m(s[0],p.thread_id);if(v){return c('bs_block').__(0,[[t[0]+v[0].length|0,t[1],t[2]]])}else return 0;}},l[13]]}var o=c('reasonReact').wrapReasonForJs(l,function(p){return n(p.thread,p.viewer,[])});g.received=j;g.deleted=k;g.component=l;g.getThreadPayloadFromInform=m;g.make=n;g.jsComponent=o}),null);
__d('bs_js_dict',[],(function a(b,c,d,e,f,g){'use strict';var h=function n(o,p){delete o[p];return 0};function i(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r){var t=o[r];q[r]=[t,n[t]]}return q}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(n){var o={},p=n;while(true){var q=p;if(q){var r=q[0];o[r[0]]=r[1];p=q[1];continue}else return o;}}function l(n){var o={},p=n.length;for(var q=0,r=p-1|0;q<=r;++q){var s=n[q];o[s[0]]=s[1]}return o}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("messengerMostActiveParticipantReact",["cx","fbt","React","bs_js_dict","bs_caml_array","MercuryIDs","bs_pervasives","reasonReact","MercuryParticipants"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerMostActiveParticipantReact");function k(n){var o=c("bs_js_dict").entries(n).sort(function(r,s){return s[1]-r[1]|0}),p=c("bs_caml_array").caml_array_get(o,0),q=+(p[1]>0);if(q!==0){return p[0]}else return "0";}function l(n,o){var p=j.slice();p[9]=function(){var q=n.participant_message_counts;if(q==null){return null}else if(n.is_canonical){return null}else{var r=k(q);if(r!==c("bs_pervasives").string_of_int(0)){var s=c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(r));if(s==null){return null}else return c("React").createElement("div",{className:"_60oa"},i._("Most active: {participantName}",[i.param("participantName",s.short_name)]));}else return null;}};return p}var m=c("reasonReact").wrapReasonForJs(j,function(n){return l(n.thread,[])});g.component=j;g.getMostActiveParticipantID=k;g.make=l;g.comp=m}),null);
__d("messengerMostReactedToParticipantReact",["cx","fbt","React","bs_js_dict","bs_caml_array","MercuryIDs","bs_pervasives","reasonReact","MercuryParticipants"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerMostReactedToParticipantReact");function k(n){var o=c("bs_js_dict").entries(n).sort(function(r,s){return s[1]-r[1]|0}),p=c("bs_caml_array").caml_array_get(o,0),q=+(p[1]>0);if(q!==0){return p[0]}else return "0";}function l(n,o){var p=j.slice();p[9]=function(){var q=n.participant_reacted_to_counts;if(q==null){return null}else if(n.is_canonical){return null}else{var r=k(q);if(r!==c("bs_pervasives").string_of_int(0)){var s=c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(r));if(s==null){return null}else return c("React").createElement("div",{className:"_60oa"},i._("Most reactions received: {participantName}",[i.param("participantName",s.short_name)]));}else return null;}};return p}var m=c("reasonReact").wrapReasonForJs(j,function(n){return l(n.thread,[])});g.component=j;g.getMostReactedToParticipantID=k;g.make=l;g.comp=m}),null);
__d('messengerTextWithEmoticons',['reasonReact','MessengerTextWithEmoticons.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerTextWithEmoticons.react'),{text:i},j)}g.make=h}),null);
__d("messengerTopEmojisReact",["cx","fbt","React","bs_caml_array","reasonReact","messengerTextWithEmoticons"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerTopEmojisReact");function k(m,n){var o=j.slice();o[9]=function(){var p=m.top_emojis;if(p==null){return null}else{var q=p.length;if(q!==0){if(q!==1){return c("React").createElement("div",{className:"_60oa"},i._("Top emojis:"),c("React").createElement("div",{className:"_4g7a"},c("reasonReact").element(0,0,c("messengerTextWithEmoticons").make(p.join(" "),[]))))}else return c("React").createElement("div",{className:"_60oa"},i._("Top emoji:"),c("React").createElement("div",{className:"_4g7a"},c("reasonReact").element(0,0,c("messengerTextWithEmoticons").make(c("bs_caml_array").caml_array_get(p,0),[]))));}else return null;}};return o}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(m.thread,[])});g.component=j;g.make=k;g.comp=l}),null);
__d('messengerInfoPanelThreadStatsContainerReact',['fbt','reasonReact','bs_js_primitive','MercuryConfig','MessengerConfig','messengerTopEmojisReact','messengerDaysInStreakReact','messengerMessageCountReact','messengerInfoPanelSectionReact','messengerMostActiveParticipantReact','messengerMostReactedToParticipantReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerInfoPanelThreadStatsContainerReact");function j(m){return +(m.message_count<10)}function k(m,n,o,p,q){var r=i.slice();r[9]=function(){if(!n.is_subscribed||n.message_count<10||!(c('MessengerConfig').ThreadStatsMessageCount||c('MessengerConfig').ThreadStatsTopEmojis||c('MessengerConfig').ThreadStatsMostActive||c('MessengerConfig').ThreadStatsMostReactedTo)){return null}else{var s=+c('MessengerConfig').ThreadStatsMessageCount,t=s!==0?c('reasonReact').element(0,0,c('messengerMessageCountReact').make(n,o,[])):null,u=+c('MessengerConfig').ThreadStatsTopEmojis,v=u!==0?c('reasonReact').element(0,0,c('messengerTopEmojisReact').make(n,[])):null,w=+c('MessengerConfig').ThreadStatsMostActive,x=w!==0?c('reasonReact').element(0,0,c('messengerMostActiveParticipantReact').make(n,[])):null,y=+c('MessengerConfig').ThreadStatsMostReactedTo,z=y!==0?c('reasonReact').element(0,0,c('messengerMostReactedToParticipantReact').make(n,[])):null,aa=+c('MercuryConfig').MessengerCanonicalTS,ba=aa!==0?c('reasonReact').element(0,0,c('messengerDaysInStreakReact').make(n,[])):null;return c('reasonReact').element(0,0,c('messengerInfoPanelSectionReact').make(c('bs_js_primitive').null_undefined_to_opt(n.custom_color),[1],[m],[p],[h._("Conversation details")],[t,v,x,z,ba]))}};return r}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(+m.isCollapsed,m.thread,m.viewer,m.onToggle,[])});g.component=i;g.isNewThread=j;g.make=k;g.jsComponent=l}),null);
__d('MessengerThreadInfoPanel.react',['cx','fbt','CurrentUser','immutable','ImmutableObject','Link.react','MercuryAttachment','MercuryConfig','MercuryIDs','MercuryThreadInfo','MercuryMessageStore','MessageThreadAssociatedObjectUtils','messengerAddToConversationDialogReact','MessengerAdminGroupUtils','MessengerConfig','MessengerContactAdapters','messengerDialogsRe','messengerDomIDsRe','MessengerInfoPanelAssociatedObjectSection.react','MessengerInfoPanelGroupSection.react','messengerInfoPanelNameSectionReact','MessengerInfoPanelPeopleSection.react','messengerInfoPanelSectionReact','messengerInfoPanelThreadOptionsContainerReact','messengerInfoPanelThreadStatsContainerReact','MessengerSharedPhotosContainer.react','MessengerSharedPhotosContainerRoute','MessengerSharedFilesContainer.react','MessengerSharedFilesContainerRoute','mercuryBlockedParticipantsRe','React','RelayRootContainer','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerAddToConversationDialogReact').jsComponent,m=c('messengerDomIDsRe').ids,n=c('messengerInfoPanelNameSectionReact').jsComponent,o=c('messengerInfoPanelSectionReact').jsComponent,p=c('messengerInfoPanelThreadOptionsContainerReact').jsComponent,q=c('messengerInfoPanelThreadStatsContainerReact').jsComponent,r=c('mercuryBlockedParticipantsRe').get(),s=c('React').PropTypes;j=babelHelpers.inherits(t,c('React').PureComponent);k=j&&j.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=k.constructor).call.apply(u,[this].concat(x)),this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedPhotoSection:null,sharedFilesSection:null},this.$MessengerThreadInfoPanel11=function(){this.$MessengerThreadInfoPanel3=false}.bind(this),this.$MessengerThreadInfoPanel14=function(z,event){this.props.onContactSelect(c('MessengerContactAdapters').fromMercuryParticipant(z))}.bind(this),this.$MessengerThreadInfoPanel13=function(z,aa){this.props.onContactAction(z,c('MessengerContactAdapters').fromMercuryParticipant(aa))}.bind(this),this.$MessengerThreadInfoPanel12=function(event){event.preventDefault();c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{thread:this.props.thread,viewer:this.props.viewer})}.bind(this))}.bind(this),v}t.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id)};t.prototype.componentWillReceiveProps=function(u){if(u.thread.thread_id!==this.props.thread.thread_id||u.photosSectionCollapsed!==this.props.photosSectionCollapsed||u.filesSectionCollapsed!==this.props.filesSectionCollapsed){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(u.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1000)}};t.prototype.subscribeStoreUpdate=function(u){this.$MessengerThreadInfoPanel1=new (c('MercuryMessageStore'))(u);this.$MessengerThreadInfoPanel2=new (c('SubscriptionsHandler'))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(v){if(v.messages.length<1)return;var w=v.eventType==c('MercuryMessageStore').MESSAGES_RECEIVED,x=v.eventType==c('MercuryMessageStore').MESSAGES_CHANGED,y=v.messages[v.messages.length-1];if(!w&&!x)return;if(y.has_attachment&&y.attachments.length>0){var z=y.attachments.find(function(aa){return c('MercuryAttachment').isPhotoAttachment(aa)||c('MercuryAttachment').isVideoAttachment(aa)});if(z){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1000)}}}.bind(this)))};t.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release()};t.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedPhotoSection:null,sharedFilesSection:null});};t.prototype.render=function(){var u=this.props,v=u.viewer,w=u.thread,x=c('MercuryIDs').getParticipantIDFromUserID(v),y=w.participants&&w.participants.indexOf(x)!==-1,z=null;if(c('MessengerConfig').EnableMessengerSharedFiles)z=this.$MessengerThreadInfoPanel3?this.state.sharedFilesSection:this.$MessengerThreadInfoPanel5(false);var aa=this.$MessengerThreadInfoPanel3?this.state.sharedPhotoSection:this.$MessengerThreadInfoPanel4(false),ba=r.isMessageBlocked(w);return c('React').createElement('div',{className:"_3tkv",id:m.THREAD_INFO_PANEL},c('React').createElement('h3',{className:"accessible_elem"},i._("Conversation information")),c('React').createElement(n,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:ba,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showIgnore:c('MercuryConfig').IgnoreGK,showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$MessengerThreadInfoPanel6(),c('React').createElement(p,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),this.$MessengerThreadInfoPanel7(),c('MessengerAdminGroupUtils').canSeeGroupOptions(y,w,v)?this.$MessengerThreadInfoPanel8():null,this.props.thread.is_canonical?this.$MessengerThreadInfoPanel9():this.$MessengerThreadInfoPanel10(),z,aa)};t.prototype.$MessengerThreadInfoPanel6=function(){var u=c('MessageThreadAssociatedObjectUtils').shouldRender(this.props.thread.associated_object);if(!u)return null;return c('React').createElement(c('MessengerInfoPanelAssociatedObjectSection.react'),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.custom_color,associatedObject:this.props.thread.associated_object})};t.prototype.$MessengerThreadInfoPanel8=function(){return c('React').createElement(c('MessengerInfoPanelGroupSection.react'),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})};t.prototype.$MessengerThreadInfoPanel7=function(){if(c('MercuryConfig').MessengerGrowthThreadStats)return c('React').createElement(q,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadStatsSectionToggle});return null};t.prototype.$MessengerThreadInfoPanel4=function(u){var v=this.props,w=v.getIsScrolledToBottom,x=v.getScrollableHeight,y=v.onPhotosSectionToggle,z=v.photosSectionCollapsed,aa=v.thread,ba=new (c('MessengerSharedPhotosContainerRoute'))({threadFBID:aa.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedPhotosContainer.react'),renderLoading:function ca(){return null},route:ba,forceFetch:u,renderFetched:function(ca){return c('React').createElement(c('MessengerSharedPhotosContainer.react'),babelHelpers['extends']({},ca,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel11,getIsScrolledToBottom:w,getScrollableHeight:x,isCollapsed:z,onToggle:y,threadFBID:aa.thread_fbid}))}.bind(this)})};t.prototype.$MessengerThreadInfoPanel5=function(u){var v=this.props,w=v.filesSectionCollapsed,x=v.thread,y=new (c('MessengerSharedFilesContainerRoute'))({threadFBID:x.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedFilesContainer.react'),renderLoading:function z(){return null},route:y,forceFetch:u,renderFetched:function(z){return c('React').createElement(c('MessengerSharedFilesContainer.react'),babelHelpers['extends']({},z,{isCollapsed:w,onToggle:this.props.onFilesSectionToggle}))}.bind(this)})};t.prototype.$MessengerThreadInfoPanel10=function(){return c('React').createElement(c('MessengerInfoPanelPeopleSection.react'),{canViewerReply:c('MercuryThreadInfo').canReply(this.props.thread),contactAdapter:c('MessengerContactAdapters').fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel12,onContactAction:this.$MessengerThreadInfoPanel13,onContactSelect:this.$MessengerThreadInfoPanel14,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread})};t.prototype.$MessengerThreadInfoPanel9=function(){var u=this.props.contact;if(!u||!u.href||u.fbid.toString()===c('MessengerConfig').MoneyPennyFBID)return null;var v=u.href,w=c('CurrentUser').isWorkUser()?'Workplace':'Facebook',x=u.type==='page'?i._("{productName} Page",[i.param('productName',w)]):i._("{productName} profile",[i.param('productName',w)]);return c('React').createElement(o,{customColor:this.props.thread.custom_color,title:x},c('React').createElement('div',{className:"_4v0l"},c('React').createElement(c('Link.react'),{className:"_3oh-",style:{color:this.props.thread.custom_color},href:v,target:'_blank'},v.replace('www.',''))))};t.propTypes={contact:s.instanceOf(c('ImmutableObject')),getIsScrolledToBottom:s.func.isRequired,getScrollableHeight:s.func.isRequired,isUserActive:s.bool.isRequired,isBusinessEnabled:s.bool,lastActive:s.string,onArchive:s.func.isRequired,onContactAction:s.func.isRequired,onContactSelect:s.func.isRequired,onDelete:s.func.isRequired,onLeaveGroup:s.func,onMarkRead:s.func.isRequired,onMarkSpam:s.func.isRequired,onMarkUnread:s.func.isRequired,onMute:s.func.isRequired,onAssociatedObjectSectionToggle:s.func.isRequired,onPeopleSectionToggle:s.func.isRequired,onPhotosSectionToggle:s.func.isRequired,onFilesSectionToggle:s.func.isRequired,onThreadOptionsSectionToggle:s.func.isRequired,onThreadStatsSectionToggle:s.func.isRequired,onGroupOptionsSectionToggle:s.func.isRequired,onGroupApprovalOptionsSectionToggle:s.func.isRequired,onThreadNameChange:s.func.isRequired,onThreadPhotoChange:s.func.isRequired,onUnmute:s.func.isRequired,onIgnore:s.func.isRequired,onBlock:s.func.isRequired,onUnblock:s.func.isRequired,showBlock:s.bool.isRequired,participants:s.instanceOf(c('immutable').Map).isRequired,associatedObjectSectionCollapsed:s.bool.isRequired,peopleSectionCollapsed:s.bool.isRequired,photosSectionCollapsed:s.bool.isRequired,filesSectionCollapsed:s.bool.isRequired,platform:s.string,prevIsScrolledToBottom:s.bool.isRequired,prevScrollableHeight:s.number.isRequired,showLeaveGroup:s.bool.isRequired,thread:s.instanceOf(c('ImmutableObject')).isRequired,threadOptionsSectionCollapsed:s.bool.isRequired,threadStatsSectionCollapsed:s.bool.isRequired,groupOptionsSectionCollapsed:s.bool.isRequired,groupOptionsApprovalsSectionCollapsed:s.bool.isRequired,viewer:s.string.isRequired};f.exports=t}),null);
__d('MessengerThreadInfoPanelScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={prevHeight:-1,prevIsScrolledToBottom:false},this.$MessengerThreadInfoPanelScrollableArea1=null,this.isScrolledToBottom=function(){return this.refs.scrollable.isScrolledToBottom()}.bind(this),this.getHeight=function(){return c('ReactDOM').findDOMNode(this.refs.scrollable).offsetHeight}.bind(this),this.$MessengerThreadInfoPanelScrollableArea2=function(){var q=this.isScrolledToBottom(),r=this.getHeight();if(this.state.prevIsScrolledToBottom!==q||this.state.prevHeight!==r)this.setState({prevHeight:r,prevIsScrolledToBottom:q});}.bind(this),m}k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerThreadInfoPanelScrollableArea2},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',onScroll:this.$MessengerThreadInfoPanelScrollableArea2,ref:'scrollable'},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};k.propTypes={children:j.func.isRequired};f.exports=k}),null);
__d("XMessagingSetThreadStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/set_thread_state\/",{})}),null);
__d('messengerConfirmLeaveGroupDialogReact',['bs_curry','bs_js_boolean','reasonReact','messengerDialogsRe','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerConfirmLeaveGroupDialogReact");function i(l){if(l){return 0}else return c('messengerDialogsRe').removeDialog(0);}function j(l,m,n,o){var p=function r(s,t){c('bs_curry')._1(m,0);return c('messengerDialogsRe').removeDialog(0)},q=h.slice();q[9]=function(r){var s=c('bs_js_boolean').to_js_boolean(l),t=c('MessengerAdminGroupUtils').getLeaveGroupBodyText(s,n),u=c('MessengerAdminGroupUtils').getLeaveGroupButtonText(s,n),v=c('MessengerAdminGroupUtils').getLeaveGroupTitleText(s,n);return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,i,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[v])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[u],0,["danger"],[c('bs_curry')._1(r[0],p)],[0],0,0,[]))]))]))};return q}var k=c('reasonReact').wrapReasonForJs(h,function(l){return j(+l.isViewerAdmin,l.onLeave,l.thread,[])});g.component=h;g.handleToggle=i;g.make=j;g.jsComponent=k}),null);
__d('MessengerThreadInfoPanelContainer.react',['AsyncRequest','IgnoreMessagesTypedLogger','immutable','ImmutableObject','MercuryAPIArgsSource','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadActions','MercuryThreadInfo','MercuryTriodeSourceUtil','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','messengerContactActionsRe','MessengerAdminGroupUtils','MessengerLeaveGroupAction','MessengerThreadInfoPanelScrollableArea.react','MessengerSettingsActions','MessengerSettingsStore','MessengerThreadInfoPanel.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','URI','XMessagingSetThreadStateController','getPageIDFromThreadID'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerConfirmLeaveGroupDialogReact').jsComponent,i=c('messengerContactActionsRe').actions,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadInfoPanelContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerSettingsStore'))],propTypes:{contactData:j.object,participants:j.instanceOf(c('immutable').Map).isRequired,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired},statics:{calculateState:function l(){var m=c('MessengerSettingsStore').getSettings(),n=m.associated_object_section_collapsed,o=m.people_section_collapsed,p=m.photos_section_collapsed,q=m.files_section_collapsed,r=m.thread_section_collapsed,s=m.thread_stats_section_collapsed,t=m.group_section_collapsed,u=m.group_approval_section_collapsed;return {associated_object_section_collapsed:n,people_section_collapsed:o,photos_section_collapsed:p,files_section_collapsed:q,thread_section_collapsed:r,thread_stats_section_collapsed:s,group_section_collapsed:t,group_approval_section_collapsed:u}}},render:function l(){var m=this.props.contactData||{},n=this.state,o=n.associated_object_section_collapsed,p=n.people_section_collapsed,q=n.photos_section_collapsed,r=n.files_section_collapsed,s=n.thread_section_collapsed,t=n.thread_stats_section_collapsed,u=n.group_section_collapsed,v=n.group_approval_section_collapsed;return c('React').createElement(c('MessengerThreadInfoPanelScrollableArea.react'),{className:this.props.className},function(w,x,y,z){return c('React').createElement(c('MessengerThreadInfoPanel.react'),{contact:m.contact,getIsScrolledToBottom:y,getScrollableHeight:z,isUserActive:m.isUserActive||false,lastActive:m.lastActive,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onThreadStatsSectionToggle:this._handleThreadStatsSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:o,peopleSectionCollapsed:p,photosSectionCollapsed:q,filesSectionCollapsed:r,platform:m.platform,prevIsScrolledToBottom:x,prevScrollableHeight:w,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,threadOptionsSectionCollapsed:s,threadStatsSectionCollapsed:t,groupOptionsSectionCollapsed:u,groupOptionsApprovalsSectionCollapsed:v,viewer:this.props.viewer})}.bind(this))},_handleArchive:function l(){this._getThreadActions().archive(this.props.thread.thread_id);c('MessengerActions').selectThread(null)},_handleDelete:function l(){this._getThreadActions()['delete'](this.props.thread.thread_id);c('MessengerActions').selectThread(null)},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function l(){this._getThreadActions().markSpam(this.props.thread.thread_id);c('MessengerActions').selectThread(null)},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m)},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function l(){this._getThreadActions().changeFolder(this.props.thread.thread_id,'other');c('MessengerActions').selectThread(null);new (c('IgnoreMessagesTypedLogger'))().setEvent('ignore_confirmed').setThreadID(this.props.thread.thread_fbid).setPlatform('messengerdotcom').log()},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id)},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m)},_handleContactSelect:function l(m,event){var n=c('MercuryIDs').getThreadIDFromParticipantID(m.uid);n&&c('MessengerActions').selectThread(n)},_handleContactAction:function l(m,n){if(c('MercuryIDs').getUserIDFromParticipantID(n.uid)!==this.props.viewer)switch(m){case i.MESSAGE:this._handleContactSelect(n);break;case i.PROFILE:var o=this.props.participants.get(n.uid);if(o&&o.href){window.open(o.href)}else this._handleContactSelect(n);break;case i.REMOVE:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var p=new (c('URI'))('/chat/remove_participants/');p.addQueryData({uid:c('MercuryIDs').getUserIDFromParticipantID(n.uid),tid:this.props.thread.thread_fbid});var q=new (c('AsyncRequest'))(p);q.send()}break;}switch(m){case i.REMOVE_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],false);break;case i.ADD_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],true);break;}},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(h,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread})}.bind(n))})();},_onLeaveGroupConfirm:function l(){c('MessengerLeaveGroupAction').leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function l(m){var n=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);if(!n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').THREAD_NAME,{name:m}),null,c('MercuryAPIArgsSource').MESSENGER)}else{var o=c('XMessagingSetThreadStateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setData({thread_id:this.props.thread.thread_fbid,thread_name:m}).send()}},_handleThreadPhotoChange:function l(m,n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),m,c('MercuryLogMessageType').THREAD_IMAGE,{image:n.metadata[0]}))},_handleAssociatedObjectSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer)},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer)},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer)},_isPageChat:function l(){return !!c('getPageIDFromThreadID')(this.props.thread.thread_id)}});f.exports=k}),null);
__d('MessengerDetailView.react',['cx','fbt','invariant','Bootloader','BootloadOnRender.react','CustomColorHighlighting.react','DataTransfer','EventReminderActions','EventRemindersGating','EventReminderStateStore','immutable','JSResource','LazyComponent.react','MercuryIDs','MercuryConfig','MercuryCanonicalGroupThreadStore','MercuryParticipants','MercuryThreadActions','MercuryThreadInfo','MercuryThreads','MessengerActions','MessengerComposerStore','MessengerComposerContainer.react','MessengerConversation.react','MessengerConversationContainer.react','MessengerDetailViewHeaderContainer.react','messengerDomIDsRe','MessengerErrorBoundary.react','MessengerPresenceStatusUtils','MessengerSettingsActions','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerThreadInfoPanelContainer.react','MessengerThreadSearchActions','MessengerView','MessengerWebDriverTestIDs','Parent','PresenceStatus','React','SubscriptionsHandler','AvailableList','emptyFunction','ifRequired','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerDomIDsRe').ids;c('AvailableList');var l=c('React').PropTypes;function m(event,o,p,q){if(!c('EventRemindersGating').shouldShowPlansOnMessengerCom)return null;if(!o)return null;if(!event)return null;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerEventPlanContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:o,participants:p,viewer:q})})}var n=c('React').createClass({displayName:'MessengerDetailView',_composer:undefined,_refsConversationContainer:null,_subscriptionsHandler:new (c('SubscriptionsHandler'))(),propTypes:{activeThreadID:l.string,view:l.string,viewer:l.string.isRequired},calculateState:function o(p){var q=p.activeThreadID,r=c('MercuryThreads').getForFBID(p.viewer),s=c('MessengerComposerStore').getState();if(p.view===c('MessengerView').DETAIL.COMPOSE){!!s.recipients||j(0);var t=s.recipients;if(t.size===1){q=c('MercuryIDs').getThreadIDFromUserID(t.first().getUniqueID().toString())}else if(t.size>1)q=c('MercuryCanonicalGroupThreadStore').getOrFetch(Array.from(t).map(function(z){return z.getUniqueID().toString()}));}var u=q?r.getOrFetch(q):null,v=c('immutable').Map();if(u&&q){v=v.withMutations(function(z){u.participants&&u.participants.forEach(function(aa){z.set(aa,c('MercuryParticipants').getOrFetch(aa))});u.is_subscribed&&z.set(c('MercuryIDs').getParticipantIDFromUserID(p.viewer),c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.viewer)))});if(c('EventRemindersGating').shouldShowPlansOnMessengerCom){var event=u?u.lightweight_event:null;if(event){c('EventReminderActions').updateEventReminder(q,event)}else{var w=c('EventReminderStateStore').getEvent(q);if(w&&w.exists)c('EventReminderActions').deleteEventReminder(q);}}}var x=c('ifRequired')('MessengerUploadFilesStore',function(z){return z.getState()},function(){return c('immutable').Map({})}),y=c('ifRequired')('MessengerSharePreviewStore',function(z){return z.getState()},function(){return c('immutable').Map({})});return {infoPanelCollapsed:c('MessengerSettingsStore').getSettings().info_sidebar_collapsed,activeThreadID:q,composerState:s,messengerState:c('MessengerStateStore').getState(),contactData:c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(v,u),activeThread:u,participants:v,searchResults:c('MessengerThreadSearchStore').getState(),uploadFilesState:x,sharePreivewState:y}},getInitialState:function o(){return babelHelpers['extends']({dropTargetOverlayVisible:false},this.calculateState(this.props))},componentWillMount:function o(){this._subscribeToSubscrptionHandler([c('MessengerComposerStore'),c('MessengerStateStore'),c('MessengerThreadSearchStore'),c('MercuryCanonicalGroupThreadStore'),c('MercuryThreads'),c('MercuryParticipants'),c('PresenceStatus')])},componentDidMount:function o(){if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('Bootloader').loadModules(["MessengerUploadFilesStore"],function(p){this._subscribeToSubscrptionHandler([p])}.bind(this),'MessengerDetailView.react');if(c('MercuryConfig').WWWMessengerURLPreview)c('Bootloader').loadModules(["MessengerSharePreviewStore"],function(p){this._subscribeToSubscrptionHandler([p])}.bind(this),'MessengerDetailView.react');},_subscribeToSubscrptionHandler:function o(p){var q=function(){this.setState(this.calculateState(this.props))}.bind(this),r=[];p.forEach(function(t){if(t.hasChanged&&t.getDispatchToken&&t.addListener){r.push(t.addListener(q))}else if(t.subscribe){r.push(t.subscribe('change',q))}else if(t.addListener){r.push(t.addListener('change',q))}else j(0);});if(r.length>0){var s;this._subscriptionsHandler&&(s=this._subscriptionsHandler).addSubscriptions.apply(s,r)}},shouldComponentUpdate:function o(p,q){return c('shallowCompare')(this,p,q)},componentDidUpdate:function o(){this._handleResize()},componentWillUnmount:function o(){this._subscriptionsHandler&&this._subscriptionsHandler.release();this._subscriptionsHandler=null},componentWillReceiveProps:function o(p){this.setState(this.calculateState(p))},render:function o(){var p=this.state.activeThreadID,q=this._getMainLabelDetails(),r=void 0;if(this.state.activeThread)r=this.props.query==null?m(this.state.activeThread.lightweight_event,p,this.state.participants,this.props.viewer):null;return c('React').createElement('div',{'aria-labelledby':q.labelIDs,className:"_1q5-",role:'main'},c('React').createElement('div',{className:"hidden_elem",id:k.MAIN_LABEL},q.labelText),c('React').createElement(c('CustomColorHighlighting.react'),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.custom_color},c('React').createElement(c('MessengerDetailViewHeaderContainer.react'),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed}),c('React').createElement('div',{className:"_20bp"},this._renderInfoPanel(),c('React').createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:'presentation'},this._renderMainView(p),r,this._renderSearchView(p),this._renderFooterView(p),c('React').createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")}),(c('MercuryConfig').WWWMessengerUploadFilesPreview||c('MercuryConfig').WWWMessengerURLPreview)&&this._renderUploadFiles(p)))))},_renderUploadFiles:function o(p){if(!p)return null;var q=this.state.uploadFilesState.get(p)||{},r=this.state.sharePreivewState.get(p);return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('FantaDragAndDrop.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:p,uploadedFiles:q.uploadedFiles,uploadingFiles:q.uploadingFiles,sharePreview:r})})},_renderSearchView:function o(p){return p&&!this.props.mid&&this.props.query!=null?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerThreadSearchContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',{className:"_33p7 _5iwm"}),component:c('React').createElement(c('LazyComponent.react'),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_assignConversationContainerRef:function o(p){this._refsConversationContainer=p},_renderMainView:function o(p){if(!p)return c('React').createElement('div',{className:"_1ut7"});var q=this.state.contactData?this.state.contactData.contact:null;if(this.state.searchResults.messages)return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversation.react'),{className:"_1wfr",contact:q,downExhausted:this.state.searchResults.downExhausted,fetchMessages:c('MessengerThreadSearchActions').getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:c('MercuryIDs').isCanonical(p),isLoaded:true,isLoading:false,messages:this.state.searchResults.messages,onRead:c('emptyFunction'),participants:this.state.participants,thread:this.state.activeThread,threadID:p,upExhausted:this.state.searchResults.upExhausted,useManualFetch:true,viewer:this.props.viewer}));return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversationContainer.react'),{className:"_1wfr",contact:q,onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:p,viewer:this.props.viewer}))},_renderFooterView:function o(p){var q=c('MercuryConfig').ColdOpenBlock&&this.state.activeThread&&c('MercuryThreadInfo').isColdOpen(this.state.activeThread);return c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3 _2pen",component:'composer'},c('React').createElement(c('MessengerComposerContainer.react'),{canReply:!!(!q&&(this.props.view===c('MessengerView').DETAIL.COMPOSE||this.state.activeThread&&c('MercuryThreadInfo').canReply(this.state.activeThread)&&!c('MercuryConfig').ViewerIsReadOnly)),fileUploader:this.state.uploadFilesState.get(p),onMount:function(r){return this._composer=r}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreivewState.get(p),threadID:p,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}))},_renderInfoPanel:function o(){var p=this.state,q=p.activeThread,r=p.contactData,s=p.infoPanelCollapsed,t=p.participants,u=this.props.view;if(!q||!t||u===c('MessengerView').DETAIL.COMPOSE)return null;return c('React').createElement('div',{className:(s?"hidden_elem":'')+(' '+"_4_j5"),'data-testid':c('MessengerWebDriverTestIDs').INFO_PANEL},c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3",component:'conversation information'},c('React').createElement(c('MessengerThreadInfoPanelContainer.react'),{className:"_4_j9",contactData:r,participants:t,thread:q,viewer:this.props.viewer})))},_getMainLabelDetails:function o(){if(this.props.view===c('MessengerView').DETAIL.COMPOSE)return {labelText:i._("New message"),labelIDs:k.MAIN_LABEL};return {labelText:i._("Conversation with"),labelIDs:k.MAIN_LABEL+' '+k.THREAD_TITLE}},_handleConversationClick:function o(p){var q=this.props.activeThreadID;if(q&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom())this._handleMarkRead(q);if(window.getSelection().toString()!=='')return;var r=p.target;if(r instanceof Node&&c('Parent').byTag(r,'a')!=null)return;var s=this._getComposer();s&&s.focusInput()},handleAudioUpload:function o(p){var q=this._getComposer();if(q!=null&&p!=null){q.handleAudioUpload(p);q.focusInput()}},_showDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:true})},_hideDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:false});var q=this._getComposer();q&&q.resetDrag()},_handleDrop:function o(p){this._hideDropTargetOverlay(p);var q=this._getComposer();if(!q)return;p.nativeEvent.dataTransfer instanceof Object||j(0);if(c('MercuryConfig').WWWMessengerUploadFilesPreview){c('MessengerActions').prepareFilesForSend(this.state.activeThreadID,p.nativeEvent.dataTransfer.files);return}var r=new (c('DataTransfer'))(p.nativeEvent.dataTransfer),s=r.getFiles();if(s.length){q.handleFileUpload(s)}else{var t=r.getText();if(t)q.handleTextDropped(t);}},_handleResize:function o(){var p=this._refsConversationContainer;if(p)p.handleResize();},_handleInfoPanelToggle:function o(){var p=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:p},function(){c('MessengerSettingsActions').changeSettings({info_sidebar_collapsed:p})})},_handleMarkRead:function o(p){c('MercuryThreadActions').getForFBID(this.props.viewer).markRead(p)},_getComposer:function o(){return this._composer}});f.exports=n}),null);
__d('messengerDetailViewReact',['reasonReact','bs_js_null_undefined','MessengerDetailView.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('MessengerDetailView.react'),{activeThreadID:c('bs_js_null_undefined').from_opt(i),mid:c('bs_js_null_undefined').from_opt(j),query:c('bs_js_null_undefined').from_opt(k),view:c('bs_js_null_undefined').from_opt(l),viewer:m},n)}g.make=h}),null);
__d('messengerErrorBoundaryReact',['reasonReact','bs_js_null_undefined','MessengerErrorBoundary.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerErrorBoundary.react'),{className:c('bs_js_null_undefined').from_opt(i),component:c('bs_js_null_undefined').from_opt(j)},k)}g.make=h}),null);
__d('P2PBannerStore',['invariant','EventEmitter','P2PActionConstants','P2PAPI','P2PDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=void 0,l={},m=false,n=false;i=babelHelpers.inherits(o,c('EventEmitter'));j=i&&i.prototype;function o(){j.constructor.call(this);k=c('P2PDispatcher').register(this.onEventDispatched.bind(this))}o.prototype.onEventDispatched=function(p){var q=p.type,r=p.data;switch(q){case c('P2PActionConstants').BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(r);this.emit('change');break;case c('P2PActionConstants').BANNER_DISMISSED:this.handleBannerDismissed(r);this.emit('change');break;case c('P2PActionConstants').BANNER_COMPLETED:this.handleBannerCompleted(r);this.emit('change');break;}};o.prototype.handleBannerStatesUpdated=function(p){m=true;l=p};o.prototype.handleBannerDismissed=function(p){var q=this.getBannerState(p);q.hasBeenDismissed=true};o.prototype.shouldShowBanner=function(p){var q=void 0;if(!n){c('P2PAPI').getBannerStates();n=true;return false}if(!m)return false;q=this.getBannerState(p);return q.eligible&&!q.hasBeenDismissed};o.prototype.handleBannerCompleted=function(p){var q=this.getBannerState(p);q.eligible=false};o.prototype.getBannerState=function(p){var q=l[p];q||h(0);return q};f.exports=new o()}),null);
__d('P2PJewelBanner.react',['cx','fbt','ix','Image.react','Layout.react','P2PButton.react','React','TooltipLink.react','URI','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();}.bind(this),this.handleClick=function(){this.execPrimaryClick()}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick()}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new (c('URI'))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick()}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick()}.bind(this),this.renderCloseButton=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:"_47d8",href:'#',onClick:this.handleCloseClick,position:'above',tooltip:i._("Dismiss")},c('React').createElement(c('Image.react'),{className:"_47dg",height:7,src:j("94375"),width:7}))}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:'#',label:x.text,onClick:this.handleSecondaryActionClick,size:'large',target:'_blank',type:'primary'});return c('React').createElement('div',null,w,c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:v.uri||'#',label:v.text,onClick:this.handlePrimaryClick,size:'large',target:'_blank',type:'primary',use:'confirm'}))}.bind(this),r}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return c('React').createElement('div',{className:"_5d0n",onClick:this.handleClick,role:'presentation'},q,c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_400i"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('Image.react'),{className:"_5d0q",height:50,src:j("94376"),width:50}))),c('React').createElement(m,{className:"_47di"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',weight:'bold'},this.props.titleText),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.bodyText))),c('React').createElement(n,{className:"_400k"},c('React').createElement('div',{className:"_400j"},this.renderActions()))))};p.propTypes={bodyText:o.node,isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.node.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.node.isRequired}),titleText:o.node.isRequired};p.defaultProps={isDismissable:false};f.exports=p}),null);
__d('P2PPendingPaymentRequestJewelBanner.react',['fbt','P2PJewelBanner.react','P2PPaymentRequest','P2PPaymentRequestActionHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'banner')}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("For {What the user paid for}",[h.param('What the user paid for',s)])}.bind(this),n}l.prototype.render=function(){var m=this.props.paymentRequest;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("Pay")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("Decline")},titleText:h._("{requester_name} requested {amount}",[h.param('requester_name',m.requester.name),h.param('amount',m.amountWithSymbol)])})};l.propTypes={paymentRequest:k.instanceOf(c('P2PPaymentRequest')).isRequired};f.exports=l}),null);
__d('P2PPendingPushFailJewelBanner.react',['fbt','P2PJewelBanner.react','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getActionText=function(){return h._("Learn More")},this.getBodyText=function(){var r=this.props.transfer;return h._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[h.param('currency',r.currency),h.param('amount',r.amount),h.param('sender_name',r.sender.name)])}.bind(this),n}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c('P2PLinkConstants').helpTransferPushFailURI},titleText:h._("Update Your Card")})};l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d('P2PTimeBasedAcceptMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1000,o=1000*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1000-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2){t=h._("Add a debit card and it'll go straight to your bank.")}else if(q<=4){t=h._("This money will be sent back in {days left} days. Add a debit card to accept it.",[h.param('days left',s)])}else if(q<=5){t=h._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[h.param('days left',s),h['enum'](s===1?'day':'days',{day:'day',days:'days'}),h.param('sender_name',m.sender.name)])}else t=h._("You have 24 hours to add a debit card before the money is sent back to {sender_name}.",[h.param('sender_name',m.sender.name)]);return c('React').createElement('div',null,t)};function l(){i.apply(this,arguments)}l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d('P2PPendingRecipientNUXJewelBanner.react',['fbt','P2PAcceptMoneyDialog.react','P2PActions','P2PCreditCardStore','P2PJewelBanner.react','P2PTimeBasedAcceptMessage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPendingRecipientNUXJewelBanner',propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return {creditCards:c('P2PCreditCardStore').getAll()}},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange)},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null}},onCreditCardStoreChange:function k(){var l={creditCards:c('P2PCreditCardStore').getAll()};if(this.isMounted())this.setState(l);},handleClick:function k(){this.showAcceptMoneyDialog()},showAcceptMoneyDialog:function k(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.state.creditCards,onClose:c('P2PActions').hideDialog,transfer:this.props.transfer})},renderTimeBasedMessage:function k(){return c('React').createElement(c('P2PTimeBasedAcceptMessage.react'),{transfer:this.props.transfer})},render:function k(){var l=this.props.transfer;if(!c('P2PCreditCardStore').isCreditCardsFetchComplete())return null;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("Add Card")},titleText:h._("Accept {currency}{amount} from {sender_name}.",[h.param('currency',l.currency),h.param('amount',l.amount),h.param('sender_name',l.sender.name)])})}});f.exports=j}),null);
__d('P2PPendingRecipientVerificationJewelBanner.react',['fbt','P2PJewelBanner.react','P2PTransferParam','P2PVerificationFlowHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleClick=function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false)}.bind(this),n}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:h._("To accept the money {sender_name} sent you, please confirm your information.",[h.param('sender_name',this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("Confirm Info")},titleText:h._("Please Confirm Your Info")})};l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d('P2PJewelBannerContainer.react',['cx','CurrentUser','P2PBannerStore','P2PPaymentRequestsStore','P2PPendingPaymentRequestJewelBanner.react','P2PPendingPushFailJewelBanner.react','P2PPendingRecipientNUXJewelBanner.react','P2PPendingRecipientVerificationJewelBanner.react','P2PTransferParam','P2PTransferStatus','P2PTransferStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').createClass({displayName:'P2PJewelBannerContainer',mixins:[c('PureStoreBasedStateMixin')(c('P2PBannerStore'),c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function j(){var k=c('P2PTransferStore').getNUXTransfer(),l=c('P2PPaymentRequestsStore').getPendingPaymentRequest();return {paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c('CurrentUser').getID()}}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c('P2PTransferParam').STATUS];switch(l){case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:return c('React').createElement(c('P2PPendingRecipientNUXJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:return c('React').createElement(c('P2PPendingRecipientVerificationJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_PUSH_FAIL:return c('React').createElement(c('P2PPendingPushFailJewelBanner.react'),{transfer:k});}},renderPaymentRequestBanner:function j(){return c('React').createElement(c('P2PPendingPaymentRequestJewelBanner.react'),{paymentRequest:this.state.paymentRequest})},render:function j(){var k=void 0;if(this.state.transferBannerShown){k=this.renderTransferBanner()}else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return c('React').createElement('div',{className:"_1xfk"},k)}});f.exports=i}),null);
__d('MercuryThreadlistContainer.react',['Bootloader','immutable','MercuryAPIArgsSource','MercuryConfig','MercuryFilters','MercuryThreadlistConstants','MessagingTag','P2PJewelBannerContainer.react','QE2Logger','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=3,k=1000*60*60*24,l=c('React').PropTypes,m='search',n='www_messenger_jewel_perf_h2_2017';h=babelHelpers.inherits(o,c('React').Component);i=h&&h.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=i.constructor).call.apply(p,[this].concat(s)),this.state={isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c('immutable').Map()},this.threadListReqsInFlight=0,this.$MercuryThreadlistContainer17=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,c('MessagingTag').PENDING,c('MercuryFilters').UNREAD,this.$MercuryThreadlistContainer19,true,this.props.source)}.bind(this),this.$MercuryThreadlistContainer13=function(){if(!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer8(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer9(this.props.folder)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);}.bind(this),this.$MercuryThreadlistContainer19=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var u=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').PENDING,c('MercuryFilters').UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(u,function(v){this.setState({unreadMessageRequestThreads:u.map(function(w){return v[w]})})}.bind(this))}.bind(this),this.$MercuryThreadlistContainer15=function(u,v){this.setState({isLoading:v,searchThreads:[]},function(){return this.$MercuryThreadlistContainer7(m,c('MercuryFilters').ALL,u)}.bind(this))}.bind(this),this.$MercuryThreadlistContainer14=function(u){this.setState({isSearching:!!u})}.bind(this),q}o.prototype.componentDidMount=function(){c('QE2Logger').logExposureForUser(n);c('Bootloader').loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(p,q,r){this.$MercuryThreadlistContainer1=p.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=r.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=function(){var s=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').INBOX,this.props.filter);if(s.length===0)return s;var t=this.$MercuryThreadlistContainer2.getThreadMetaNow(s[s.length-1]);if(!t)return s;var u=t.timestamp,v=this.$MercuryThreadlistContainer1.getThreadlistUntilTimestamp(u,c('MessagingTag').PENDING,this.props.filter);v.sort(function(x,y){var z=this.$MercuryThreadlistContainer2.getThreadMetaNow(x),aa=this.$MercuryThreadlistContainer2.getThreadMetaNow(y);return (aa&&aa.timestamp)-(z&&z.timestamp)}.bind(this));var w=this.$MercuryThreadlistContainer4(v);return s.concat(w).sort(function(x,y){var z=typeof x==='string'?this.$MercuryThreadlistContainer2.getThreadMetaNow(x):this.$MercuryThreadlistContainer2.getThreadMetaNow(x[0]),aa=typeof y==='string'?this.$MercuryThreadlistContainer2.getThreadMetaNow(y):this.$MercuryThreadlistContainer2.getThreadMetaNow(y[0]);return (aa&&aa.timestamp)-(z&&z.timestamp)}.bind(this))}.bind(this);this.$MercuryThreadlistContainer5=q.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer6=new (c('SubscriptionsHandler'))();this.$MercuryThreadlistContainer6.addSubscriptions(this.$MercuryThreadlistContainer5.subscribe('threadlist-updated',function(s,t){this.$MercuryThreadlistContainer7(this.props.folder,this.props.filter);if(c('MercuryConfig').MessengerInboxRequests){this.props.folder===c('MessagingTag').INBOX&&this.$MercuryThreadlistContainer7(c('MessagingTag').PENDING,this.props.filter);this.props.folder===c('MessagingTag').PENDING&&this.$MercuryThreadlistContainer7(c('MessagingTag').INBOX,this.props.filter)}}.bind(this)));if(c('MercuryConfig').MessengerInboxRequests)this.$MercuryThreadlistContainer8(c('MessagingTag').PENDING,this.props.filter,this.$MercuryThreadlistContainer9(c('MessagingTag').PENDING)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);this.$MercuryThreadlistContainer10(this.props.folder,this.props.filter)}.bind(this),'MercuryThreadlistContainer.react')};o.prototype.componentWillReceiveProps=function(p){if(p.folder!==this.props.folder||p.filter!==this.props.filter)this.$MercuryThreadlistContainer10(p.folder,p.filter);};o.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer11();this.$MercuryThreadlistContainer12();this.$MercuryThreadlistContainer6&&this.$MercuryThreadlistContainer6.release()};o.prototype.render=function(){var p=this.props,q=p.ChildClass,r=p.folder,s=p.filter,t=babelHelpers.objectWithoutProperties(p,['ChildClass','folder','filter']),u=this.state.isSearching?this.state.threads.get(m)||[]:this.state.threads.get(r)||[];return c('React').createElement(q,babelHelpers['extends']({},t,{filter:this.props.filter,folder:r,isLoaded:!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(r,s),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onLoadMoreRequest:this.$MercuryThreadlistContainer13,onRenderThreads:this.props.onRenderThreads,onQuery:this.$MercuryThreadlistContainer14,onSearchResults:this.$MercuryThreadlistContainer15,onMessageRequestsClick:this.props.onMessageRequestsClick,p2pJewelBannerContainer:this.$MercuryThreadlistContainer16(),threads:u}))};o.prototype.$MercuryThreadlistContainer4=function(p){var q=p.map(function(y){return this.$MercuryThreadlistContainer2.getThreadMetaNow(y).timestamp}.bind(this)),r=[];for(var s=0;s<q.length;s++){var t=q[s],u=q[s+j-1];if(u&&t-u<k){var v=[p[s]];for(var w=s+1;w<q.length;w++){var x=q[w];if(x&&t-x<k){v.push(p[w]);s++}else break;}r.push(v)}else r.push(p[s]);}return r};o.prototype.$MercuryThreadlistContainer16=function(){return c('React').createElement(c('P2PJewelBannerContainer.react'),null)};o.prototype.$MercuryThreadlistContainer10=function(p,q){if(!c('MercuryConfig').MessengerInboxRequests&&p===c('MessagingTag').INBOX&&this.props.source!==c('MercuryAPIArgsSource').JEWEL)this.$MercuryThreadlistContainer17();if(!this.$MercuryThreadlistContainer18(p,q)){this.$MercuryThreadlistContainer8(p,q,this.props.threadCount||c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3)}else if(this.state.isLoading){this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer7(p,q)}.bind(this))}else this.$MercuryThreadlistContainer7(p,q);};o.prototype.$MercuryThreadlistContainer8=function(p,q,r){if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer12();this.threadListReqsInFlight++;this.setState({isLoading:true},function(){var s=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,r,p,q||c('MercuryFilters').ALL,function(t){this.threadListReqsInFlight--;if(this.threadListReqsInFlight===0)this.setState({isLoading:false});}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer20={subscriberID:s,folder:p,filter:q}}.bind(this))};o.prototype.$MercuryThreadlistContainer7=function(p,q,r){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer11();var s=void 0;if(c('MercuryConfig').MessengerInboxRequests&&p===c('MessagingTag').INBOX){s=this.$MercuryThreadlistContainer3()}else s=r||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(p,q);var t=[].concat.apply([],s);this.$MercuryThreadlistContainer21=this.$MercuryThreadlistContainer2.getMultiThreadMeta(t,function(u){this.setState({threads:this.state.threads.set(p,this.$MercuryThreadlistContainer22(s,u))})}.bind(this))};o.prototype.$MercuryThreadlistContainer22=function(p,q){return p.map(function(r){if(Array.isArray(r)){return r.map(function(s){return q[s]})}else return q[r];})};o.prototype.$MercuryThreadlistContainer18=function(p,q){return !!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(p,q)>=c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(p,q)))};o.prototype.$MercuryThreadlistContainer9=function(p){var q=this.state.threads.get(p);return q?q.length:0};o.prototype.$MercuryThreadlistContainer11=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer21&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer21)};o.prototype.$MercuryThreadlistContainer12=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer20&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer20.subscriberID,this.$MercuryThreadlistContainer20.folder,this.$MercuryThreadlistContainer20.filter)};o.propTypes={ChildClass:l.func.isRequired,filter:l.string.isRequired,folder:l.string.isRequired,onMessageRequestsClick:l.func,showCount:l.bool,showPresence:l.bool,source:l.string,threadCount:l.number,viewer:l.string.isRequired,onRenderThreads:l.func};o.defaultProps={source:c('MercuryAPIArgsSource').JEWEL};f.exports=o}),null);
__d('chatSidebarSheetReact',['reasonReact','ChatSidebarSheet.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('ChatSidebarSheet.react'),{className:i},j)}g.make=h}),null);
__d("messageRequestLoggerRe",["MessengerMessageRequestsTypedLogger"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){new (c("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(j).setAction("message_requests_thread_impression").addToExtraData("threads",i).log();return 0}g.logItemImpression=h}),null);
__d('messengerFlexScrollableAreaReact',['reasonReact','bs_js_null_undefined','MessengerFlexScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerFlexScrollableArea.react'),{onScroll:c('bs_js_null_undefined').from_opt(i)},j)}g.make=h}),null);
__d('messengerGraphQLSearchTypeaheadReact',['utilsRe','bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerGraphQLSearchTypeahead.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){return c('reasonReact').wrapJsForReason(c('MessengerGraphQLSearchTypeahead.react'),{className:i,enableMessageSearch:c('bs_js_boolean').to_js_boolean(j),excludeGroups:c('bs_js_boolean').to_js_boolean(k),excludePages:c('bs_js_boolean').to_js_boolean(l),hasHoverState:c('bs_js_boolean').to_js_boolean(m),hideClearButton:c('utilsRe').optionBoolToNullUndefinedBoolean(n),hideResults:c('utilsRe').optionBoolToNullUndefinedBoolean(o),isFocused:c('utilsRe').optionBoolToNullUndefinedBoolean(p),onBlur:q,onChange:r,onClear:s,onFocus:t,onScrollIntoView:u,onSelect:v,placeholder:w,queryString:c('bs_js_null_undefined').from_opt(x),shouldQueryInternalBot:c('bs_js_boolean').to_js_boolean(y),shouldQueryVCEndpoint:c('bs_js_boolean').to_js_boolean(z),typeaheadViewClassName:aa,viewer:ba},ca)}g.make=h}),null);
__d('MessengerMessageRequestsInfo.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(){return c('React').createElement('div',{className:"_5u15"},i._("Open a request to get more info about who's messaging you."),' ',i._("They won't know that you've seen it until you accept."))};f.exports=j}),null);
__d('messengerMessageRequestsInfoReact',['reasonReact','MessengerMessageRequestsInfo.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('MessengerMessageRequestsInfo.react'),{},i)}g.make=h}),null);
__d('MessengerThreadListGridWrapper.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.label;return c('React').createElement('div',null,c('React').createElement('h2',{className:"accessible_elem"},m),c('React').createElement('ul',{'aria-label':m,role:'grid'},this.props.children))};function l(){i.apply(this,arguments)}l.propTypes={label:k.string.isRequired};f.exports=l}),null);
__d('messengerThreadListGridWrapperReact',['reasonReact','MessengerThreadListGridWrapper.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerThreadListGridWrapper.react'),{label:i},j)}g.make=h}),null);
__d("messengerThreadlistLinkRowReact",["cx","fbt","React","linkReact","reasonReact"],(function a(b,c,d,e,f,g,h,i){'use strict';function j(k){return c("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},c("React").createElement("div",{className:"_2ogs"},c("reasonReact").element(0,0,c("linkReact").make(0,["_2ogt"],0,0,0,0,[k],0,0,0,0,0,0,0,[i._("See filtered requests")]))))}g.make=j}),null);
__d('MessengerThreadlistMessageRequestsRow.react',['cx','fbt','ix','Image.react','ImmutableObject','Link.react','MercuryIDs','MercuryParticipants','MessagingTag','MessengerActions','MNAdsLogMessageUtils','React','Keys','shallowEqual'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=50,n=j("86936"),o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow3=function(v){v.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING)},r}p.prototype.shouldComponentUpdate=function(q){return !c('shallowEqual')(this.props,q)};p.prototype.componentDidUpdate=function(q){if(this.props.isFocused)this.$MessengerThreadlistMessageRequestsRow1&&this.$MessengerThreadlistMessageRequestsRow1.focus&&this.$MessengerThreadlistMessageRequestsRow1.focus();};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length;if(q===0)return null;return c('React').createElement('li',{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(r){this.$MessengerThreadlistMessageRequestsRow1=r}.bind(this),onKeyPress:this.$MessengerThreadlistMessageRequestsRow2,role:'row',tabIndex:-1},c('React').createElement(c('Link.react'),{tabIndex:-1,onClick:this.$MessengerThreadlistMessageRequestsRow3,className:"_2il3 _1ht5 _5l-3"},this.$MessengerThreadlistMessageRequestsRow4(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6 _5nxa"},i._({"Request":"New message request","Requests":"New message requests"},[i['enum'](q===1?'Request':'Requests',{Request:'Request',Requests:'Requests'})]))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1htf _5nxb"},this.$MessengerThreadlistMessageRequestsRow5())))))};p.prototype.$MessengerThreadlistMessageRequestsRow4=function(){return c('React').createElement('div',{className:"_5l-3 _1qt3 _5nxe"},c('React').createElement(c('Image.react'),{alt:'',height:m,src:n,width:m}),c('React').createElement('span',{className:"_5nxf"},i._({"*":"{count}"},[i.param('count',this.props.newMessageRequestThreads.length||this.props.aggregatedThreads.length,[0])])))};p.prototype.$MessengerThreadlistMessageRequestsRow5=function(){var q=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads,r=i._({"someone":"From someone you may know","people":"From people you may know"},[i['enum'](q.length===1?'someone':'people',{someone:'someone',people:'people'})]),s=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),t=q[0].participants.find(function(v){return v!==s});if(!t)return r;var u=c('MercuryParticipants').getOrFetch(t);if(!u||!u.name)return r;if(q.length>0)c('MNAdsLogMessageUtils').logAdsThreadListImpression(q[0]);return q.length===1?i._("From {name}",[i.param('name',u.name)]):i._({"*":"From {name} and {count} more"},[i.param('name',u.name),i.param('count',q.length-1,[0])])};p.prototype.$MessengerThreadlistMessageRequestsRow6=function(q){q.preventDefault();var r=this.props.newMessageRequestThreads.length>0?this.props.newMessageRequestThreads:this.props.aggregatedThreads;this.props.onFocus(r[0].thread_id)};p.prototype.$MessengerThreadlistMessageRequestsRow2=function(q){event.preventDefault();var r=q.charCode;if(r===c('Keys').RETURN)c('MessengerActions').changeFolder(c('MessagingTag').PENDING);};p.propTypes={isFocused:o.bool,newMessageRequestThreads:o.arrayOf(o.instanceOf(c('ImmutableObject'))).isRequired,aggregatedThreads:o.arrayOf(o.instanceOf(c('ImmutableObject'))),viewer:o.string.isRequired};f.exports=p}),null);
__d('messengerThreadlistMessageRequestsRowReact',['reasonReact','MessengerThreadlistMessageRequestsRow.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistMessageRequestsRow.react'),{isFocused:i,onFocus:j,newMessageRequestThreads:k,aggregatedThreads:l,viewer:m},n)}g.make=h}),null);
__d('MessengerThreadlistNewMessageRow.react',['cx','fbt','ix','Image.react','Link.react','MercuryIDs','MercuryParticipantListRenderer','MercuryParticipants','MercuryParticipantsImage.react','MessengerActions','MessengerComposerStore','messengerProfileImageWrapperReact','MessengerView','ReactComponentWithPureRenderMixin','PureStoreBasedStateMixin','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerProfileImageWrapperReact').jsComponent,l=50,m=j("86935"),n=c('React').PropTypes,o=c('React').createClass({displayName:'MessengerThreadlistNewMessageRow',mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MercuryParticipants'),c('MessengerComposerStore'))],propTypes:{isActive:n.bool,onClose:n.func.isRequired},statics:{calculateState:function p(){return {participants:c('MessengerComposerStore').getState().recipients.map(function(q){return c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(q.getUniqueID()))}).filter(function(q){return !!q})}}},render:function p(){return c('React').createElement('li',{className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')},c('React').createElement(c('Link.react'),{onClick:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6"},this._renderTitle()),c('React').createElement(c('ShimButton.react'),{className:"_23ct",onClick:this.props.onClose})),c('React').createElement('div',{className:"_1qt5 _5l-3"},'\u00A0'))))},_renderImage:function p(){var q=this.state.participants;if(!q.isEmpty())return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(k,{isMessengerUser:q.size===1&&q.first().is_messenger_user,size:l,showBadge:false},c('React').createElement(c('MercuryParticipantsImage.react'),{participants:q.map(function(r){return r.id}).slice(0,3).toArray(),size:l})));return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('Image.react'),{height:l,src:m,width:l}))},_renderTitle:function p(){if(this.state.participants.isEmpty())return i._("New message");return i._("New message to {List of message recipients}",[i.param('List of message recipients',new (c('MercuryParticipantListRenderer'))().renderParticipantList(this.state.participants.toArray()))])},_handleClickRow:function p(q){q.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE)}});f.exports=o}),null);
__d('messengerThreadlistNewMessageRowReact',['bs_js_boolean','reasonReact','MessengerThreadlistNewMessageRow.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistNewMessageRow.react'),{isActive:c('bs_js_boolean').to_js_boolean(i),onClose:j},k)}g.make=h}),null);
__d('MercuryThreadlistRowContainer.react',['immutable','ImmutableObject','MercuryParticipants','React','StoreAndPropBasedStateMixin','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadlistRowContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{ChildClass:h.func.isRequired,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(k){return {participants:c('immutable').Map(c('immutable').Seq(k.thread.participants).map(function(l){return [l,c('MercuryParticipants').getOrFetch(l)]}))}}},shouldComponentUpdate:function j(k,l){return !c('shallowEqual')(k,this.props)||!c('immutable').is(l.participants,this.state.participants)},render:function j(){var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return c('React').createElement(l,babelHelpers['extends']({},m,{participants:this.state.participants}))}});f.exports=i}),null);
__d('messengerThreadlistRowSeenHeadReact',['cx','imageReact','MercuryIDs','reasonReact','joinClasses','bs_js_primitive','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){'use strict';function i(m,n,o,p){var q=o.snippet_sender;if(p){var r=p[0];if(r.author===m&&n.watermark>=r.timestamp&&!c('MercuryMessageInfo').isSending(r)){return 1- +c('MercuryMessageInfo').hasError(r)}else return 0;}else if(q!==null&&q===m){return +(n.watermark>=o.timestamp)}else return 0;}var j=c('reasonReact').statelessComponent("MessengerThreadlistRowSeenHeadReact");function k(m,n,o,p,q,r,s,t){var u=m?m[0]:"",v=j.slice();v[9]=function(){var w=+r.is_canonical,x=r.other_user_fbid;if(n){if(w!==0){if(x==null){return null}else if(n[0]){return null}else{var y=c('MercuryIDs').getParticipantIDFromUserID(s),z=c('MercuryIDs').getParticipantIDFromUserID(x),aa=q.get(z),ba=p.get(z);if(ba!==undefined&&aa!==undefined&&i(y,aa,r,o)){return c('reasonReact').element(0,0,c('imageReact').make([c('joinClasses')(u,"_2_a2")],0,[ba.image_src],0,[ba.name],0,0,[]))}else return null;}}else return null;}else return null;};return v}var l=c('reasonReact').wrapReasonForJs(j,function(m){return k(c('bs_js_primitive').null_undefined_to_opt(m.className),c('bs_js_primitive').null_undefined_to_opt(m.isHidden),c('bs_js_primitive').null_undefined_to_opt(m.lastMessage),m.participants,m.readReceipts,m.thread,m.viewer,[])});g.shouldRender=i;g.component=j;g.make=k;g.jsComponent=l}),null);
__d('MessengerThreadlistRow.react',['cx','fbt','ix','Bootloader','FBRTCCore','Image.react','immutable','ImmutableObject','Link.react','mercuryBlockedParticipantsRe','MercuryConfig','MercuryIDs','MercuryMessageInfo','MercuryThreadActions','MercuryThreadSnippet.react','mercuryThreadTimestampReact','MercuryThreadTitle.react','MercuryTimestamp','MessagingTag','MessengerActions','MessengerAdminGroupUtils','messengerButtonReact','messengerDialogsRe','MessengerPresenceStatusUtils','MessengerMessageRequestsTypedLogger','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerThreadlistRowSeenHeadReact','messengerURIUtilsRe','MNAdsMessageUtils','React','ReactDOM','RTCConfig','FBRTCLogger','UserAgent','getPageIDFromThreadID','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('mercuryBlockedParticipantsRe').get(),n=c('mercuryThreadTimestampReact').jsComponent,o=c('messengerButtonReact').jsComponent,p=c('messengerThreadImageReact').jsComponent,q=c('messengerThreadlistRowActionsReact').jsComponent,r=c('messengerThreadlistRowSeenHeadReact').jsComponent,s=c('FBRTCLogger').Trigger,t=c('React').PropTypes,u=50,v=j("86913"),w=j("86914"),x=function z(aa){var ba=void 0;switch(aa){case 'pending':case 'other':case 'inbox':case 'thread':ba=aa;break;default:ba=null;}return ba};k=babelHelpers.inherits(y,c('React').PureComponent);l=k&&k.prototype;function y(){var z,aa;for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];return aa=(z=l.constructor).call.apply(z,[this].concat(ca)),this.state={actionsOpen:false},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow16=function(){c('MercuryThreadActions').get()['delete'](this.props.thread.thread_id);if(this.props.isActive)c('MessengerActions').selectThread(null);new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_delete_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType('pending').setThreadKeyWeb(this.props.thread.thread_id).setEntryPoint('inbox_banner').log()}.bind(this),this.$MessengerThreadlistRow17=function(ea){if(!ea){c('messengerDialogsRe').removeDialog();new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_cancel').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType('pending').setThreadKeyWeb(this.props.thread.thread_id).setEntryPoint('inbox_banner').log()}}.bind(this),this.$MessengerThreadlistRow4=function(ea){ea.preventDefault();this.props.onFocus(this.props.thread.thread_id)}.bind(this),this.$MessengerThreadlistRow5=function(ea){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null}.bind(this),1000)}.bind(this),this.$MessengerThreadlistRow6=function(ea){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null}}.bind(this),this.$MessengerThreadlistRow8=function(ea){if(this.props.logClickHandler){var fa=this.props.thread.is_canonical?c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id)||'0':this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(fa)}this.$MessengerThreadlistRow9();this.props.onSelect&&this.props.onSelect();ea.preventDefault();this.$MessengerThreadlistRow3()}.bind(this),this.$MessengerThreadlistRow15=function(ea){this.setState({actionsOpen:ea})}.bind(this),this.$MessengerThreadlistRow18=function(ea){ea.preventDefault();ea.stopPropagation();var fa=this.props.thread,ga=fa.rtc_call_data,ha=fa.thread_fbid;c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+ha,hasVideo:true,serverInfoData:ga.server_info_data,trigger:s.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})}.bind(this),this.$MessengerThreadlistRow3=function(){var ea=c('ReactDOM').findDOMNode(this.refs.link);if(ea.href){ea.setAttribute('data-href',ea.href);ea.removeAttribute('href')}}.bind(this),this.$MessengerThreadlistRow9=function(){var ea=c('ReactDOM').findDOMNode(this.refs.link),fa=ea.getAttribute('data-href');if(fa){ea.setAttribute('href',fa);ea.removeAttribute('data-href')}}.bind(this),aa}y.prototype.componentDidMount=function(){this.$MessengerThreadlistRow3()};y.prototype.componentDidUpdate=function(z){if(this.props.isFocused)if(!z.isFocused){if(this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus()}else c('ReactDOM').findDOMNode(this.refs.link).focus();}else if(!z.isActionsFocused&&this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus()}else if(z.isActionsFocused&&!this.props.isActionsFocused)c('ReactDOM').findDOMNode(this.refs.link).focus();};y.prototype.render=function(){var z=this.props,aa=z.isActive,ba=z.isActionsFocused,ca=z.isTabbable,da=z.participants,ea=z.thread,fa=z.viewer,ga=ea.unread_count>0,ha=c('messengerURIUtilsRe').getURIForThreadID(ea.thread_id);return c('React').createElement('li',{'aria-live':ga?'polite':null,'aria-relevant':aa||ga?'additions text':null,onFocus:this.$MessengerThreadlistRow4,className:"_5l-3"+(' '+"_1ht1")+(ea.folder===c('MessagingTag').PENDING?' '+"_4as3":'')+(this.props.isActive?' '+"_1ht2":'')+(ga?' '+"_1ht3":'')+(this.state.actionsOpen?' '+"_13aa":'')+(this.props.isMuted?' '+"_569x":'')+(this.props.isFocused?' '+"_23_m":'')+(ga&&c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Mac')?' '+"_5fx8":''),onDragEnter:aa?null:this.$MessengerThreadlistRow5,onDragLeave:aa?null:this.$MessengerThreadlistRow6,role:'row',ref:function(ia){return ia&&this.props.registerThreadRefs&&this.props.registerThreadRefs(ia)}.bind(this),tabIndex:-1},c('React').createElement('div',{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow7(ea.thread_id),role:'gridcell',tabIndex:-1},c('React').createElement(c('Link.react'),{href:ha.toString(),onBlur:this.$MessengerThreadlistRow3,onClick:this.$MessengerThreadlistRow8,onFocus:this.$MessengerThreadlistRow9,className:"_1ht5 _2il3 _5l-3",s:'true',ref:'link',role:'link',tabIndex:ca&&!ba?0:-1},c('React').createElement('div',{'aria-hidden':true,className:"_1qt3 _5l-3"},c('React').createElement(p,{participants:da,size:u,thread:ea,viewer:fa})),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_1ht6",showUnreadCount:false,thread:ea,useShortName:false,viewer:fa}),c('React').createElement('div',null,c('MNAdsMessageUtils').isAdsMessageRequest(ea)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessengerThreadlistRow10(ea))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadSnippet.react'),{className:c('joinClasses')("_1htf",c('messengerRTLClasses')(ea.snippet,true)),participants:da,shouldRenderYou:true,thread:ea,viewer:fa})),this.$MessengerThreadlistRow11(),this.$MessengerThreadlistRow12()))),this.$MessengerThreadlistRow13())};y.prototype.$MessengerThreadlistRow13=function(){if(this.props.showActions===false)return null;var z=this.props,aa=z.isActionsFocused,ba=z.isTabbable,ca=z.participants,da=z.thread,ea=z.viewer,fa=c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(this.props.participants,da),ga=fa&&fa.contact,ha=m.isMessageBlocked(da),ia=c('MessengerAdminGroupUtils').isJoinableThread(da),ja=c('MessengerAdminGroupUtils').isGroupChat(da),ka=da.unread_count>0;return c('React').createElement('div',{role:'gridcell'},c('React').createElement('div',{'aria-describedby':this.$MessengerThreadlistRow7(da.thread_id),'aria-haspopup':'true','aria-label':i._("Actions"),className:"_2j6 _5l-3",tabIndex:ba&&aa?0:-1,role:'button'},c('React').createElement(r,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:ca,readReceipts:this.props.readReceipts,thread:da,viewer:ea}),this.$MessengerThreadlistRow14(),c('React').createElement(q,{contact:ga,isGroupChat:ja,isJoinableThread:ia,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:ka,isBlocked:ha,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow15,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:true,showIgnore:c('MercuryConfig').IgnoreGK,showBlock:da.is_canonical_user&&da.other_user_fbid&&ea!==da.other_user_fbid,showReport:c('getPageIDFromThreadID')(this.props.thread.thread_id),tabIndex:-1,thread:da,ref:'actions'}),c('React').createElement('div',{className:"_56ck"})))};y.prototype.$MessengerThreadlistRow14=function(){var z=this.props.lastMessage;if(this.state.actionsOpen||!z)return null;var aa=c('MercuryMessageInfo').isSending(z),ba=c('MercuryMessageInfo').hasError(z);if(!aa&&!ba)return null;return c('React').createElement(c('Image.react'),{className:"_wtw"+(aa?' '+"_3qh2":''),src:aa?w:v})};y.prototype.$MessengerThreadlistRow10=function(z){return c('React').createElement(n,{className:"_1ht7",time:z.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(z.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(z.timestamp)})};y.prototype.$MessengerThreadlistRow11=function(){if(this.props.thread.folder!==c('MessagingTag').PENDING)return null;return c('React').createElement('div',{className:"_5l-3"},c('React').createElement(o,{className:"_3yvh",type:'primary',label:i._("Accept"),onClick:function(z){c('MercuryThreadActions').get().changeFolder(this.props.thread.thread_id,c('MessagingTag').INBOX);new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_accept_request').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType('pending').setThreadKeyWeb(this.props.thread.thread_id).setEntryPoint('inbox_banner').log()}.bind(this)}),c('React').createElement(o,{className:"_3yvh _1d-z",type:'faded',label:i._("Decline"),onClick:function(z){z.preventDefault();z.stopPropagation();c('Bootloader').loadModules(["messengerDeleteDialogReact"],function(aa){var ba=aa.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(ba,{onArchive:this.props.onArchive,onDelete:this.$MessengerThreadlistRow16,onToggle:this.$MessengerThreadlistRow17})}.bind(this));new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_decline_attempt').setThreadID(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(x(this.props.folder)).setFolderType('pending').setThreadKeyWeb(this.props.thread.thread_id).setEntryPoint('inbox_banner').log()}.bind(this),'MessengerThreadlistRow.react')}.bind(this)}))};y.prototype.$MessengerThreadlistRow12=function(){if(!c('RTCConfig').RtcConferencingGK||!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state==='NO_ONGOING_CALL')return null;return c('React').createElement(o,{className:"_4ry5",label:i._("Join Call"),onClick:this.$MessengerThreadlistRow18,type:'primary'})};y.prototype.$MessengerThreadlistRow7=function(z){return 'row_header_id_'+z};y.propTypes={isActive:t.bool.isRequired,isActionsFocused:t.bool,isFocused:t.bool,isMuted:t.bool.isRequired,lastMessage:t.instanceOf(c('ImmutableObject')),logClickHandler:t.func,onArchive:t.func.isRequired,onDelete:t.func.isRequired,onMarkRead:t.func.isRequired,onMarkSpam:t.func.isRequired,onMarkUnread:t.func.isRequired,onMute:t.func.isRequired,onSelect:t.func.isRequired,onUnmute:t.func.isRequired,onIgnore:t.func.isRequired,onBlock:t.func.isRequired,onUnblock:t.func.isRequired,participants:t.instanceOf(c('immutable').Map).isRequired,readReceipts:t.instanceOf(c('immutable').OrderedMap).isRequired,registerThreadRefs:t.func,thread:t.instanceOf(c('ImmutableObject')).isRequired,viewer:t.string.isRequired};f.exports=y}),null);
__d('MessengerThreadlistRowContainer.react',['IgnoreMessagesTypedLogger','ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryMessages','mercuryRogerRe','MercuryThreadActions','MercuryThreadInfo','MercuryThreadlistRowContainer.react','MercuryTriodeSourceUtil','MessagingSourceEnum','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','MessengerAdminGroupUtils','MessengerMessageRequestsTypedLogger','MessengerThreadlistRow.react','MNPlatformTagsDataManager','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('mercuryRogerRe').get(),i=c('messengerConfirmLeaveGroupDialogReact').jsComponent,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryMessages'),h)],propTypes:{isActive:j.bool.isRequired,isTabbable:j.bool,folder:j.string,showActions:j.bool,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired,onOverrideSelect:j.func},statics:{calculateState:function l(m){var n=c('MercuryMessages').getForFBID(m.viewer),o=m.thread.thread_id,p=n.getThreadMessagesRangeNow(o,0,1)[0];return {lastMessage:p||null,readReceipts:h.getSeenTimestamps(o)}}},componentDidUpdate:function l(m){if(this.props.isActive&&!m.isActive)this.props.onScrollIntoView(c('ReactDOM').findDOMNode(this));},render:function l(){return c('React').createElement(c('MercuryThreadlistRowContainer.react'),babelHelpers['extends']({},this.props,{ChildClass:c('MessengerThreadlistRow.react'),isMuted:c('MercuryThreadInfo').isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function l(){var m=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null)},_handleDelete:function l(){var m=this.props.isActive;this._getThreadActions()['delete'](this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null)},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function l(){var m=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null)},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m)},_handleSelect:function l(){if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}c('MessengerActions').selectThread(this.props.thread.thread_id);var m=c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id),n=void 0;switch(this.props.folder){case 'inbox':n='inbox';break;case 'pending':n='pending';break;case 'other':n='other';break;}new (c('MessengerMessageRequestsTypedLogger'))().setAction('message_requests_thread_open').setThreadID(m).setSurface(n).setFolderType(this.props.thread.folder).setThreadKeyWeb(this.props.thread.thread_id).log();c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(c('MessagingSourceEnum').MESSENGER_WEB_SEARCH,m)},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread})}.bind(n))})();},_handleIgnore:function l(){var m=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,'other');m&&c('MessengerActions').selectThread(null);new (c('IgnoreMessagesTypedLogger'))().setEvent('ignore_confirmed').setThreadID(this.props.thread.thread_fbid).setPlatform('messengerdotcom').log()},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id)},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function l(){if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var m=this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(m)}},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer)},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer)},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer)}});f.exports=k}),null);
__d('messengerThreadlistRowContainerReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerThreadlistRowContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistRowContainer.react'),{folder:c('bs_js_null_undefined').from_opt(i),isActive:c('utilsRe').optionBoolToBoolean(j),isFocused:c('utilsRe').optionBoolToBoolean(k),isActionsFocused:c('utilsRe').optionBoolToBoolean(l),isTabbable:c('utilsRe').optionBoolToBoolean(m),onFocus:n,onScrollIntoView:o,thread:p,viewer:q},r)}g.make=h}),null);
__d('messengerThreadlistReact',['cx','csx','fbt','bs_array','bs_block','bs_curry','React','Parent','utilsRe','ReactDOM','debounce','linkReact','bs_caml_array','bs_pervasives','CurrentUser','reasonReact','bs_js_primitive','MessagingTag','MessengerView','MercuryFilters','MessengerActions','MercuryThreadInfo','KeyEventController','SubscriptionsHandler','chatSidebarSheetReact','messengerSpinnerReact','messageRequestLoggerRe','MessengerTypeaheadUtils','MessengerComposerActions','MessengerSearchFunnelLogger','messengerNewMessagesNoticeReact','messengerThreadlistLinkRowReact','messengerFlexScrollableAreaReact','messengerMessageRequestsInfoReact','messengerThreadListGridWrapperReact','messengerGraphQLSearchTypeaheadReact','messengerThreadlistRowContainerReact','messengerThreadlistNewMessageRowReact','messengerThreadlistMessageRequestsRowReact'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(ia,ja,ka){if(ka){if(ia.length>0&&ja.length>0){var la=c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(ia,0),0),ma=c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(ja,0),0);if(la.unread_count>0&&la.thread_id!==ka[0]&&la!==ma){return +c('MercuryThreadInfo').isMuted(la)}else return 0;}else return 0;}else return 0;}function l(ia,ja){var ka=+ia.ctrlKey,la=+ia.metaKey,ma=+ia.shiftKey,na=+c('KeyEventController').filterEventTypes(ia,ja),oa=+c('KeyEventController').filterEventTargets(ia,ja),pa=c('Parent').bySelector(ia.target,"._150g");if(ka!==0||la!==0||ma!==0||!(na!==0&&oa!==0&&pa===null)){return 0}else return 1;}function m(ia){return c('bs_block').__(3,[ia])}function n(ia,ja,ka){var la=ka.findIndex(function(na){var oa=na.length;if(oa!==1){if(oa!==0&&ia&&c('bs_caml_array').caml_array_get(na,0).thread_id===ia[0]){return 1}else return 0;}else{var pa=na[0];if(ia&&pa.thread_id===ia[0]){return 1}else return 0;}}),ma=c('bs_pervasives').min(c('bs_pervasives').max(la+ja|0,0),ka.length-1|0);return c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(ka,ma),0).thread_id}function o(ia){return c('bs_block').__(4,[ia])}function p(ia,ja){ja.preventDefault();return c('bs_block').__(2,[ia])}function q(ia){ia.preventDefault();return 4}function r(){c('MessengerSearchFunnelLogger').startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 0}function s(){c('MessengerSearchFunnelLogger').endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return 1}function t(ia){return c('bs_block').__(1,[ia.target.value])}function u(ia,ja){var ka=ja[4][8];if(ka){c('MessengerTypeaheadUtils').scrollEntryIntoView(ia,ka[0]);return 0}else return 0;}function v(ia){ia.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').OTHER);return 0}function w(ia){ia.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').INBOX);c('MessengerActions').changeFilter(c('MercuryFilters').ALL);return 0}function x(ia,ja,ka){var la=[];c('bs_array').iter(function(ma){var na=ja[ma];if(na!==undefined){if(na!==null){var oa=c('ReactDOM').findDOMNode(na).getBoundingClientRect();if(oa.top>ia.top-10&&oa.bottom<ia.bottom+10){la.push(ma);return 0}else return 0;}else return 0;}else return 0;},Object.keys(ja));if(la.length){return c('messageRequestLoggerRe').logItemImpression(la,ka)}else return 0;}var y=c('debounce')(function(ia){var ja=ia[8];if(ja){var ka=ja[0].getArea().getElement().getBoundingClientRect();x(ka,ia[5],c('MessagingTag').PENDING);return x(ka,ia[6],c('MessagingTag').OTHER)}else return 0;},500);function z(ia,ja,ka){var la=ja[4],ma=la[0],na=ma&&ma[0]===c('bs_caml_array').caml_array_get(ka,0).thread_id?true:false;return c('reasonReact').element([c('bs_caml_array').caml_array_get(ka,0).thread_id],0,c('messengerThreadlistMessageRequestsRowReact').make(na,c('bs_curry')._1(ja[3],m),[],ka,ia,[]))}function aa(ia,ja,ka,la){var ma=la[4];if(ja===c('MessagingTag').PENDING){ma[5][ia]=ka;return 0}else if(ja===c('MessagingTag').OTHER){ma[6][ia]=ka;return 0}else return 0;}function ba(ia,ja,ka,la,ma){var na=ka[4],oa=ia&&ia[0]===ma.thread_id?1:0,pa=na[0],qa=pa?1:0,ra=na[0],sa=ra&&ra[0]===ma.thread_id?1:0,ta=oa!==0?qa!==0&&sa===0?0:1:sa!==0?1:0,ua=+(ma.folder===c('MessagingTag').PENDING||ma.folder===c('MessagingTag').OTHER),va;if(ua!==0){var wa=ma.folder,xa=ma.thread_id;va=c('bs_curry')._1(ka[0],function(ya,za){return aa(xa,wa,ya,za)})}else va=function ya(){return 0};return c('reasonReact').element([ma.thread_id],[va],c('messengerThreadlistRowContainerReact').make([la],[oa],[sa],[na[2]],[ta],c('bs_curry')._1(ka[3],m),c('bs_curry')._1(ka[0],u),ma,ja,[]))}function ca(ia){return c('bs_block').__(0,[ia!==null?[ia]:0])}function da(ia,ja){var ka=ia[1],la=ia[0];c('MessengerActions').selectThread(la,ka);c('MessengerSearchFunnelLogger').logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",ja[4][3],la,ka);return 0}var ea=c('reasonReact').reducerComponentWithRetainedProps("MessengerThreadlistReact");function fa(ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa){var xa=function eb(fb,gb,hb){var ib=hb[5],jb=ib[0],kb=typeof fb==="number"?fb!==0?jb.length-1|0:(-jb.length|0)-1|0:fb[0],lb=+gb.altKey,mb=c('Parent').bySelector(gb.target,"._4rv3"),nb=hb[4][0],ob=c('Parent').bySelector(gb.target,"._1ht1"),pb=0;if(lb!==0){if(mb!==null){var qb=ib[4];if(qb!==0){if(kb===1&&jb.length>0){c('MessengerActions').selectThread(c('bs_caml_array').caml_array_get(c('bs_caml_array').caml_array_get(jb,0),0).thread_id,null);return 0}else return 0;}else{var rb=jb.findIndex(function(tb){if(tb.length!==1){return 0}else{var ub=tb[0],vb=ib[2];if(vb&&vb[0]===ub.thread_id){return 1}else return 0;}});if(rb!==-1){var sb=c('bs_caml_array').caml_array_get(jb,rb+kb|0);c('MessengerActions').selectThread(c('bs_caml_array').caml_array_get(sb,0).thread_id);if(ib[1]&&rb===0&&kb===-1)c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);if(rb===(jb.length-1|0)){return c('bs_curry')._1(ib[3],0)}else return 0;}else return 0;}}else pb=1;}else pb=1;if(pb===1)if(nb&&ob!==null){gb.preventDefault();return c('bs_curry')._2(hb[3],o,kb)}else return 0;},ya=function eb(){c('MessengerSearchFunnelLogger').logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");if(ja)c('bs_curry')._1(ja[0],0);return 2},za=function eb(){return 3},ab=function eb(fb,gb){fb.stopPropagation();c('MessengerComposerActions').exitComposeState();if(pa){var hb=ua.find(function(ib){var jb=ib.length;if(jb!==1){if(jb!==0){return +(c('bs_js_primitive').undefined_to_opt(ib.find(function(lb){return +(lb.unread_count===0)}))===0)}else return 0;}else{var kb=ib[0];return +(kb.unread_count===0)}});c('MessengerActions').selectThread(hb!==undefined?c('bs_caml_array').caml_array_get(hb,0).thread_id:null,null);return 0}else return 0;},bb=function eb(fb,gb){fb.preventDefault();return c('bs_curry')._1(ra,0)},cb=function eb(fb,gb,hb){var ib=0,jb=0;if(fb){if(fb[0]!==0){return null}else jb=2;}else jb=2;if(jb===2)if(gb){if(gb[0]!==0){return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])))}else ib=1;}else ib=1;if(ib===1)return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,["#"],[c('bs_curry')._1(hb[0],bb)],0,0,0,0,[-1],0,0,[j._("Show older")])));},db=function eb(fb){if(ua.length){return c('reasonReact').element(0,0,c('messengerThreadListGridWrapperReact').make(j._("Conversation list"),[c('bs_array').map(function(kb){if(kb.length!==1){return z(va,fb,kb)}else{var lb=kb[0];return ba(ia,va,fb,la,lb)}},ua)]))}else{var gb;if(la===c('MessagingTag').INBOX){var hb=+(ka===c('MercuryFilters').UNREAD);gb=hb!==0?j._("No unread messages found."):j._("No messages found.")}else gb=la===c('MessagingTag').PENDING?j._("No message requests found."):j._("No filtered requests found.");var ib=+(la!==c('MessagingTag').INBOX||ka!==c('MercuryFilters').ALL),jb=ib!==0?c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,0,[w],0,0,0,0,0,0,0,[j._("Return to inbox.")])):null;return c('React').createElement("div",{className:"_3blk"},gb,c('React').createElement("div",{className:"_3bll"},jb))}};return [ea[0],ea[1],ea[2],function(eb){var fb=eb[4],gb=fb[8],hb=gb?+gb[0].isScrolledToTop():0,ib=k(ua,eb[5][0],ia),jb=0;if(hb!==0){jb=1}else if(ib!==0){if(sa){var kb=sa[0],lb=fb.slice(),mb=+(kb.length===0);lb[3]=mb!==0?kb:fb[3];lb[4]=1;return lb}else return fb;}else jb=1;if(jb===1)if(sa){var nb=sa[0],ob=fb.slice(),pb=+(nb.length===0);ob[3]=pb!==0?nb:fb[3];ob[4]=fb[4]&&1-hb;return ob}else return fb;},function(eb){var fb=eb[4],gb=new (c('SubscriptionsHandler'))(),hb=[-1],ib=[1],jb=[-5],kb=[5];gb.addSubscriptions(c('KeyEventController').registerKey("UP",c('bs_curry')._1(eb[0],function(lb,mb){return xa(hb,lb,mb)}),l),c('KeyEventController').registerKey("DOWN",c('bs_curry')._1(eb[0],function(lb,mb){return xa(ib,lb,mb)}),l),c('KeyEventController').registerKey("PAGE_UP",c('bs_curry')._1(eb[0],function(lb,mb){return xa(jb,lb,mb)})),c('KeyEventController').registerKey("PAGE_DOWN",c('bs_curry')._1(eb[0],function(lb,mb){return xa(kb,lb,mb)})),c('KeyEventController').registerKey("HOME",c('bs_curry')._1(eb[0],function(lb,mb){return xa(0,lb,mb)})),c('KeyEventController').registerKey("END",c('bs_curry')._1(eb[0],function(lb,mb){return xa(1,lb,mb)})),c('KeyEventController').registerKey("LEFT",c('bs_curry')._1(eb[3],function(lb){return p(0,lb)})),c('KeyEventController').registerKey("RIGHT",c('bs_curry')._1(eb[3],function(lb){return p(1,lb)})));y(fb);fb[7][0]=[gb];return 0},function(eb){var fb=eb[1],gb=eb[0],hb=+(fb[4][1]!==gb[4][1]),ib=ma&&1-gb[5][1],jb=fb[4][8];if(hb!==0&&ib!==0&&jb){jb[0].scrollToTop();return 0}else return 0;},function(eb){var fb=eb[4][7][0];if(fb){fb[0].release();return 0}else return 0;},ea[7],ea[8],function(eb){var fb=eb[4],gb=fb[4]&&1-fb[1],hb=j._("Conversations"),ib=sa?1:0,jb=function qb(rb,sb){return c('bs_curry')._2(eb[0],da,[rb,sb])},kb=+(la===c('MessagingTag').INBOX),lb;if(kb!==0){var mb=+c('CurrentUser').isWorkUser();lb=c('reasonReact').element(0,0,c('messengerGraphQLSearchTypeaheadReact').make("_5iwm"+(fb[1]||+(fb[3].length>0)?' '+"_5iwn":'')+(' '+"_150g"),1,0,0,0,[+(fb[3]==="")&&1-ib],[ib],[fb[1]],c('bs_curry')._1(eb[3],s),c('bs_curry')._1(eb[3],t),c('bs_curry')._1(eb[3],ya),c('bs_curry')._1(eb[3],r),c('bs_curry')._1(eb[0],u),jb,mb!==0?j._("Search Work Chat"):j._("Search Messenger"),[fb[3]],1,1,"_11_d",va,[]))}else lb=null;var nb=+(la===c('MessagingTag').PENDING),ob=+(la===c('MessagingTag').INBOX&&qa.length>0),pb=+(la===c('MessagingTag').PENDING);return c('React').createElement("div",{className:"_2xhi"},c('reasonReact').element(0,0,c('chatSidebarSheetReact').make("_p0g",[])),c('reasonReact').element(0,0,c('messengerNewMessagesNoticeReact').make(gb,c('bs_curry')._1(eb[3],q),0,[])),c('reasonReact').element(0,[c('bs_curry')._1(eb[3],ca)],c('messengerFlexScrollableAreaReact').make([c('bs_curry')._1(eb[3],za)],[lb,nb!==0?c('reasonReact').element(0,0,c('messengerMessageRequestsInfoReact').make([])):null,c('React').cloneElement(c('React').createElement("div",{className:fb[1]&&1-ib?"accessible_elem":'',role:"navigation"}),{"aria-label":hb},ob!==0?c('reasonReact').element(0,0,c('messengerThreadlistMessageRequestsRowReact').make(false,c('bs_curry')._1(eb[3],m),qa,[],va,[])):null,ma!==0?c('reasonReact').element(0,0,c('messengerThreadlistNewMessageRowReact').make(pa,c('bs_curry')._1(eb[0],ab),[])):null,db(eb),pb!==0?c('messengerThreadlistLinkRowReact').make(v):null,ta?c('bs_curry')._1(ta[0],0):cb(na,oa,eb))])))},function(){return [0,0,0,"",0,{},{},[0],0]},[ua,ma,ia,ra,pa],function(eb,fb){if(typeof eb==="number"){switch(eb){case 0:var gb=fb.slice();return c('bs_block').__(0,[(gb[1]=1,gb)]);case 1:var hb=fb.slice();return c('bs_block').__(0,[(hb[1]=0,hb[3]="",hb)]);case 2:var ib=fb.slice();return c('bs_block').__(0,[(ib[3]="",ib)]);case 3:if(fb[1]){return 0}else{var jb=fb[8];if(jb){var kb=jb[0],lb=+kb.isScrolledToBottom(),mb=+kb.isScrolledToTop(),nb=fb[4];if(lb!==0){var ob=0;if(mb!==0){if(nb!==0){var pb=fb.slice();return c('bs_block').__(3,[(pb[4]=0,pb),function(yb){c('bs_curry')._1(ra,0);return y(yb[4])}])}else ob=1;}else ob=1;if(ob===1)return c('bs_block').__(2,[function(yb){c('bs_curry')._1(ra,0);return y(yb[4])}]);}else{var qb=0;if(mb!==0){if(nb!==0){var rb=fb.slice();return c('bs_block').__(3,[(rb[4]=0,rb),function(yb){return y(yb[4])}])}else qb=1;}else qb=1;if(qb===1)return c('bs_block').__(2,[function(yb){return y(yb[4])}]);}}else return 0;}break;case 4:var sb=fb.slice();return c('bs_block').__(3,[(sb[4]=0,sb),function(yb){var zb=yb[4][8];if(zb){zb[0].scrollToTop();return 0}else return 0;}]);}}else switch(eb.tag|0){case 0:var tb=fb.slice();return c('bs_block').__(1,[(tb[8]=eb[0],tb)]);case 1:var ub=fb.slice();return c('bs_block').__(0,[(ub[3]=eb[0],ub)]);case 2:var vb=fb.slice();return c('bs_block').__(0,[(vb[2]=eb[0],vb)]);case 3:var wb=fb.slice();return c('bs_block').__(0,[(wb[0]=[eb[0]],wb)]);case 4:var xb=fb.slice();return c('bs_block').__(0,[(xb[0]=[n(fb[0],eb[0],ua)],xb)]);}},ea[13]]}var ga=c('reasonReact').wrapReasonForJs(ea,function(ia){var ja=c('utilsRe').nullUndefinedBooleanToOptionBool(ia.isComposing);return fa(c('bs_js_primitive').null_undefined_to_opt(ia.activeThreadID),c('bs_js_primitive').null_undefined_to_opt(ia.clearQuery),ia.filter,ia.folder,ja?ja[0]:0,c('utilsRe').nullUndefinedBooleanToOptionBool(ia.isLoaded),c('utilsRe').nullUndefinedBooleanToOptionBool(ia.isLoading),+ia.isNewMessageActive,ia.newMessageRequestThreads,ia.onLoadMoreRequest,c('bs_js_primitive').null_undefined_to_opt(ia.queryString),c('bs_js_primitive').null_undefined_to_opt(ia.renderLoadMore),c('bs_array').map(function(ka){return [].concat(ka)},ia.threads),ia.viewer,[])}),ha=10;g.hasNewUnreadMessages=k;g.filterKeyEvent=l;g.handleThreadFocus=m;g.getFocusedThreadId=n;g.updateThreadFocus=o;g.handleActionsFocus=p;g.handleNewMessageNoticeClick=q;g.handleFocus=r;g.handleBlur=s;g.handleChange=t;g.handleScrollIntoView=u;g.handleFilteredRequestsClick=v;g.handleReturnToInboxClick=w;g.impressionOffset=ha;g.logNodeImpressions=x;g.checkAndUpdateMessageRequestImpressions=y;g.renderAggregatedRequests=z;g.setter=aa;g.renderThread=ba;g.setScrollable=ca;g.handleSelect=da;g.component=ea;g.make=fa;g.jsComponent=ga}),null);
__d('MessengerRecentContainer.react',['MercuryAPIArgsSource','MercuryThreadlistContainer.react','MessengerComposerSteps','MessengerComposerStore','messengerThreadlistReact','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerThreadlistReact').jsComponent,i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerRecentContainer',mixins:[c('PureStoreBasedStateMixin')(c('MessengerComposerStore'))],propTypes:{activeThreadID:i.string,filter:i.string.isRequired,folder:i.string.isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(){return {isComposing:c('MessengerComposerStore').getState().step!==c('MessengerComposerSteps').NULL}}},render:function k(){return c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:h,activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,isNewMessageActive:this.props.isNewMessageActive,source:c('MercuryAPIArgsSource').WEBMESSENGER,viewer:this.props.viewer})}});f.exports=j}),null);
__d('MessengerSearchContainer.react',['cx','fbt','Link.react','MessengerActions','MessengerSpinner.react','messengerThreadlistReact','MessengerThreadSearchActions','MessengerThreadSearchStore','MessengerView','React','StoreAndPropBasedStateMixin','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerThreadlistReact').jsComponent,k=c('React').PropTypes,l=c('React').createClass({displayName:'MessengerSearchContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MessengerThreadSearchStore'))],propTypes:{activeThreadID:k.string,filter:k.string.isRequired,folder:k.string.isRequired,isComposing:k.bool,isLoaded:k.bool,isLoading:k.bool,isNewMessageActive:k.bool,viewer:k.string.isRequired},statics:{calculateState:function m(n){var o=c('MessengerThreadSearchStore').getState();return {threads:o.threads?o.threads.toArray():[],threadsExhausted:o.threadsExhausted,loading:o.loading,query:o.query}}},_subscriptions:null,render:function m(){return c('React').createElement(j,babelHelpers['extends']({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:false,newMessageRequestThreads:[],onLoadMoreRequest:c('MessengerThreadSearchActions').loadMoreThreads,onQuery:c('MessengerActions').changeQueryAll,onSearchResults:c('emptyFunction'),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,threads:this.state.threads}))},_renderLoadMoreLink:function m(){if(this.state.threadsExhausted)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:this._handleClear},i._("No conversations found")));if(this.state.loading)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('MessengerSpinner.react'),null));return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:c('MessengerThreadSearchActions').loadMoreThreads,tabIndex:-1},i._("Load More")))},_handleClear:function m(){c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT)}});f.exports=l}),null);
__d('messengerDirectRe',['reasonReact','MessengerDirect'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MessengerDirect').module;if(j==null){return null}else return c('reasonReact').element(0,0,c('reasonReact').wrapJsForReason(j,{viewer:i},[]));}g.make=h}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/fb_iframe_target\/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/messenger_dot_com_iframe\/",{redirect_uri:{type:"String",required:true}})}),null);
__d('MessengerSpoof',['Arbiter','DOM','JSXDOM','URI','XSpoofMessengerDotComIFrameController','XMessengerDotComSpoofIFrameController'],(function a(b,c,d,e,f,g){'use strict';var h=6000;function i(k){var l=c('JSXDOM').iframe({src:j().toString(),width:0,height:0});c('DOM').appendContent(document.body,l);c('Arbiter').subscribeOnce('messengerdotcom_spoof',function(){c('DOM').remove(l);k()});setTimeout(function(){c('Arbiter').inform('messengerdotcom_spoof')},h)}function j(){var k=new (c('URI'))(document.URL),l=c('XMessengerDotComSpoofIFrameController').getURIBuilder().getURI().getQualifiedURI().toString(),m=c('XSpoofMessengerDotComIFrameController').getURIBuilder().setString('redirect_uri',l).getURI();return m.setDomain(k.getDomain().replace('messenger.com','facebook.com')).setPort(k.getPort()).setProtocol('https')}f.exports={init:i}}),null);
__d('ServiceWorkerLoginAndLogout',['ClientServiceWorkerMessage'],(function a(b,c,d,e,f,g){function h(j){new (c('ClientServiceWorkerMessage'))(j,null).sendViaController()}var i={login:function j(){h('login')},logout:function j(){h('logout')}};f.exports=i}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logout\/",{next:{type:"String"}})}),null);
__d('abstractPopoverButtonReact',['reasonReact','bs_js_null_undefined','AbstractPopoverButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('AbstractPopoverButton.react'),{config:c('bs_js_null_undefined').from_opt(i),haschevron:c('bs_js_null_undefined').from_opt(j),image:c('bs_js_null_undefined').from_opt(k),label:c('bs_js_null_undefined').from_opt(l),maxwidth:c('bs_js_null_undefined').from_opt(m)},n)}g.make=h}),null);
__d('chatEmojiSkinTonePreferencePickerReact',['reasonReact','ChatEmojiSkinTonePreferencePicker.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('ChatEmojiSkinTonePreferencePicker.react'),{currentPreference:i,onSelect:j},k)}g.make=h}),null);
__d('abstractCheckboxInputReact',['bs_js_boolean','reasonReact','AbstractCheckboxInput.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('AbstractCheckboxInput.react'),{className:i,checked:c('bs_js_boolean').to_js_boolean(j),onChange:k},l)}g.make=h}),null);
__d('messengerCheckboxInputReact',['cx','reasonReact','abstractCheckboxInputReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerCheckboxInputReact");function j(k,l,m){var n=i.slice();n[9]=function(){return c('reasonReact').element(0,0,c('abstractCheckboxInputReact').make("_55sg _4ng2",k,l,[]))};return n}g.component=i;g.make=j}),null);
__d('messengerChatOnOffToggleReact',['cx','fbt','bs_curry','React','linkReact','bs_js_boolean','reasonReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statelessComponent("MessengerChatOnOffToggleReact");function k(l,m,n){var o=function q(r,s){if(m){return c('bs_curry')._1(m[0],c('bs_js_boolean').to_js_boolean(1-l))}else return 0;},p=j.slice();p[9]=function(q){var r=l!==0?i._("Go Offline"):i._("Go Online");return c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,0,[c('bs_curry')._1(q[0],o)],0,0,0,0,0,0,[r],[c('React').createElement("div",{className:"_3dwl"+(l?' '+"_337l":'')},c('React').createElement("div",{className:"_3dwf"+(l?' '+"_3dwk":'')}))]))};return p}g.component=j;g.make=k}),null);
__d("messengerViewerCardReact",["cx","React","reasonReact","joinClasses","imageBlockReact","messengerContactImageReact","messengerChatOnOffToggleReact"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reasonReact").statelessComponent("MessengerViewerCardReact");function j(l,m,n,o,p){var q=l?l[0]:"",r=i.slice();r[9]=function(){if(o){var s=o[0];return c("reasonReact").element(0,0,c("imageBlockReact").make([c("joinClasses")(q,"_1u5d")],0,0,["medium"],[c("reasonReact").element(0,0,c("messengerContactImageReact").StraightJSComponent[0](["_1u5h"],0,[1],0,34,[s.image_src],[])),c("React").createElement("div",{className:"_1u5i"},c("React").createElement("div",{className:"_364g"},s.name)),c("reasonReact").element(0,0,c("messengerChatOnOffToggleReact").make(m,n,[]))]))}else return c("React").createElement("div",undefined);};return r}var k=34;g.imageSize=k;g.component=i;g.make=j}),null);
__d('messengerSettingsDialogReact',['cx','fbt','bs_array','bs_block','bs_curry','React','linkReact','bs_js_boolean','MercuryIDs','CurrentUser','reasonReact','EmojiActions','bs_js_primitive','EmojiStateStore','PresencePrivacy','messengerDialogsRe','MercuryParticipants','messengerDialogReact','SubscriptionsHandler','messengerSpinnerReact','MessengerSettingsStore','MessengerSettingsActions','messengerViewerCardReact','messengerCheckboxInputReact','MessengerDesktopNotifications','chatEmojiSkinTonePreferencePickerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').reducerComponent("MessengerSettingsDialogReact");function k(x){if(x){return 0}else return c('messengerDialogsRe').removeDialog(0);}function l(){return c('messengerDialogsRe').removeDialog(0)}function m(x,y){var z=y[4][1];c('PresencePrivacy').setVisibility(z!==0?c('PresencePrivacy').OFFLINE:c('PresencePrivacy').ONLINE);return 0}function n(x,y){var z=x[2];if(z){return c('reasonReact').element(0,0,c('messengerViewerCardReact').make(["_3xld"],x[1],[c('bs_curry')._1(y,m)],[z[0]],[]))}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function o(x,y){c('MessengerSettingsActions').changeDesktopNotifs(c('bs_js_boolean').to_js_boolean(1- +y[4][3].desktopNotifsEnabled),c('bs_curry')._1(y[3],function(){return 1}));return 0}function p(x){var y=x[4];if(y[4]){return i._("You can allow Messenger to send you desktop notifications from your browser preferences.")}else return c('bs_array').of_list([c('reasonReact').element(["notifications-checkox"],0,c('messengerCheckboxInputReact').make(+y[3].desktopNotifsEnabled&&y[5],c('bs_curry')._1(x[0],o),[])),[c('React').createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},i._("Desktop notifications enabled")),0]]);}function q(x){if(c('MessengerDesktopNotifications').isSupported()){return c('React').createElement("div",{className:"_374b"+(x[4][4]?' '+"_2bd0":'')},c('React').createElement("div",{className:"_374c"},i._("Notifications")),c('React').createElement("div",{className:"_374d"},p(x)))}else return null;}function r(){if(c('CurrentUser').isWorkUser()){return null}else return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Payments")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,["https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))));}function s(){if(c('CurrentUser').isWorkUser()){return null}else return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Blocking")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))));}function t(x,y){var z=y[4][0];if(z&&x===z[0]){return 0}else{c('EmojiActions').changeEmojiColor(x);return 0}}function u(x){var y=x[4][0];if(y){return c('reasonReact').element(0,0,c('chatEmojiSkinTonePreferencePickerReact').make(y[0],c('bs_curry')._1(x[0],t),[]))}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function v(x){var y=x.target;c('MessengerSettingsActions').changeSettings({sound_enabled:y.checked});return 0}function w(x,y){var z=j.slice();z[4]=function(aa){var ba=aa[3],ca=new (c('SubscriptionsHandler'))();ca.addSubscriptions(c('PresencePrivacy').subscribe("privacy-changed",c('bs_curry')._1(ba,function(){return 0})),c('PresencePrivacy').subscribe("privacy-user-presence-changed",c('bs_curry')._1(ba,function(){return 0})),c('MessengerSettingsStore').addListener("change",c('bs_curry')._1(ba,function(){return 0})),c('EmojiStateStore').addListener(c('bs_curry')._1(ba,function(){return 0})),c('MercuryParticipants').addListener("change",c('bs_curry')._1(ba,function(){return 0})));aa[4][6][0]=[ca];return 0};z[6]=function(aa){var ba=aa[4][6][0];if(ba){ba[0].release();return 0}else return 0;};z[9]=function(aa){var ba=aa[4];return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,k,0,0,0,["default"],[544],[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Title[0](0,[i._("Settings")])),c('reasonReact').element(0,0,c('messengerDialogReact').Button[0](0,[i._("Done")],0,0,[l],[0],0,0,[]))])),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Account")),c('React').createElement("div",{className:"_374d"},n(ba,aa[0]))),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Sounds")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('messengerCheckboxInputReact').make(+ba[3].sound_enabled,v,[])),c('React').createElement("span",{className:"_1pr_"},i._("Enabled")))),q(aa),r(0),s(0),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Emoji")),c('React').createElement("div",{className:"_374d _5jb0"},u(aa)))]))};z[10]=function(){return [[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(x))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),[0]]};z[12]=function(aa,ba){if(aa!==0){var ca=ba.slice();return c('bs_block').__(0,[(ca[4]=1,ca)])}else return c('bs_block').__(0,[[[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(x))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),ba[6]]]);};return z}g.component=j;g.handleToggle=k;g.handleDone=l;g.handleTogglePresence=m;g.renderAccountSection=n;g.handleNotificationsChange=o;g.renderNotificationsContent=p;g.renderNotificationsSection=q;g.renderPaymentsSection=r;g.renderBlockingSection=s;g.handleChooseEmojiColor=t;g.renderEmojiColorSection=u;g.handleSoundChange=v;g.make=w}),null);
__d("messengerSettingsMenuReact",["cx","fbt","Run","Form","goURI","linkReact","AsyncDialog","CurrentUser","reasonReact","AsyncRequest","CacheStorage","MessagingTag","MessengerView","MercuryFilters","MessengerSpoof","MessengerConfig","MessengerActions","messengerDialogsRe","messengerMenuReact","MessengerEnvironment","messengerPopoverMenuReact","abstractPopoverButtonReact","ServiceWorkerLoginAndLogout","messengerSettingsDialogReact","XMessengerDotComLogoutController"],(function a(b,c,d,e,f,g,h,i){'use strict';function j(q){q.preventDefault();return 0}function k(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](["https://www.messenger.com/about"],i._("About"),0,["_blank"],[]))}function l(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](["https://www.facebook.com/policies"],i._("Terms"),0,["_blank"],[]))}function m(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](["https://www.facebook.com/privacy/explanation"],i._("Privacy Policy"),0,["_blank"],[]))}function n(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](["https://www.facebook.com/help/cookies"],i._("Cookie Policy"),0,["_blank"],[]))}var o=c("reasonReact").statelessComponent("MessengerSettingsMenuReact");function p(q,r,s,t,u){var v=function ka(la){la.preventDefault();return c("messengerDialogsRe").showDialog(function(){return c("reasonReact").element(0,0,c("messengerSettingsDialogReact").make(t,[]))})},w=function ka(la){la.preventDefault();var ma=+(s===c("MessengerView").MASTER.RECENT);c("MessengerActions").changeMasterView(ma!==0?c("MessengerView").MASTER.PEOPLE:c("MessengerView").MASTER.RECENT);return 0},x=function ka(la){la.preventDefault();var ma=+(r===c("MessagingTag").PENDING);c("MessengerActions").changeFolder(ma!==0?c("MessagingTag").INBOX:c("MessagingTag").PENDING);return 0},y=function ka(la){la.preventDefault();var ma=+(r===c("MessagingTag").ACTION_ARCHIVED);c("MessengerActions").changeFolder(ma!==0?c("MessagingTag").INBOX:c("MessagingTag").ACTION_ARCHIVED);return 0},z=function ka(la){la.preventDefault();c("MessengerSpoof").init(function(){c("goURI")(window.location.href,true,undefined);return 0});return 0},aa=function ka(){var la=new (c("CacheStorage"))("localstorage");c("Run").onUnload(function(){la.clear();c("ServiceWorkerLoginAndLogout").logout();return 0});c("Form").post(c("XMessengerDotComLogoutController").getURIBuilder().getURI(),{});return 0},ba=function ka(la){la.preventDefault();c("AsyncDialog").send(new (c("AsyncRequest"))("/ajax/bugs/report"));return 0},ca=function ka(la){la.preventDefault();var ma=+(q===c("MercuryFilters").UNREAD);c("MessengerActions").changeFilter(ma!==0?c("MercuryFilters").ALL:c("MercuryFilters").UNREAD);return 0},da=function ka(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Log Out"),[aa],0,[]))},ea=function ka(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Message requests"),[x],0,[]))},fa=function ka(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Archived threads"),[y],0,[]))},ga=+c("CurrentUser").isWorkUser(),ha=ga!==0?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",ia=function ka(){return c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,"[FB-Only] Copy Spoofs",[z],0,[]))},ja=o.slice();ja[9]=function(){var ka=+(s===c("MessengerView").MASTER.RECENT),la=+(s===c("MessengerView").MASTER.RECENT),ma=+(s===c("MessengerView").MASTER.RECENT&&r===c("MessagingTag").INBOX),na=+(q===c("MercuryFilters").UNREAD),oa=+c("MessengerEnvironment").messengerdotcom,pa=+c("MessengerEnvironment").messengerdotcom,qa=+c("MessengerEnvironment").messengerdotcom,ra=+c("MessengerEnvironment").messengerdotcom,sa=+c("MessengerEnvironment").messengerdotcom,ta=+c("MessengerConfig").GKSpoof,ua=+c("MessengerEnvironment").messengerdotcom,va=+c("MessengerEnvironment").messengerdotcom,wa=c("reasonReact").element(0,0,c("messengerMenuReact").Menu[0]([c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Settings"),[v],0,[])),c("reasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])),c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,ka!==0?i._("Active contacts"):i._("Recent messages"),[w],0,[])),la!==0?ea(0):null,ma!==0?fa(0):null,c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,na!==0?i._("All threads"):i._("Unread threads"),[ca],0,[])),oa!==0?c("reasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])):null,pa!==0?k(0):null,qa!==0?l(0):null,ra!==0?m(0):null,sa!==0?n(0):null,c("reasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])),c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0]([ha],i._("Help"),0,["_blank"],[])),c("reasonReact").element(0,0,c("messengerMenuReact").MenuItem[0](0,i._("Report a Problem"),[ba],0,[])),ta!==0?ia(0):null,ua!==0?c("reasonReact").element(0,0,c("messengerMenuReact").MenuSeparator[0]([])):null,va!==0?da(0):null])),xa=i._("Settings, help and more"),ya={button:c("reasonReact").element(0,0,c("linkReact").make([xa],["_30yy _2fug"],0,0,0,0,0,0,0,["button"],0,0,0,[xa],[])),defaultMaxWidth:200};return c("reasonReact").element(0,0,c("messengerPopoverMenuReact").make(0,0,wa,0,0,[c("reasonReact").element(0,0,c("abstractPopoverButtonReact").make([ya],[false],0,0,[200],[]))]))};return ja}g.preventDefault=j;g.renderAbout=k;g.renderPolicies=l;g.renderPrivacy=m;g.renderCookies=n;g.component=o;g.make=p}),null);
__d("messengerMasterViewHeaderReact",["cx","fbt","React","linkReact","CurrentUser","reasonReact","MessagingTag","MessengerView","MessengerActions","messengerDirectRe","MessengerURIConstants","messengerSettingsMenuReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerMasterViewHeaderReact");function k(o){o.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);return 0}function l(o){o.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING);return 0}function m(o,p,q,r,s){var t=function z(aa){aa.preventDefault();if(q!==c("MessengerView").MASTER.RECENT)c("MessengerActions").changeMasterView(c("MessengerView").MASTER.RECENT);c("MessengerActions").changeFolder(c("MessagingTag").INBOX);return 0},u=function z(){var aa=+(p===c("MessagingTag").PENDING||p===c("MessagingTag").ACTION_ARCHIVED||q!==c("MessengerView").MASTER.RECENT),ba=aa!==0?t:l,ca=aa!==0?i._("Back to Recent Messages"):i._("Back to Message Requests");return c("reasonReact").element(0,0,c("linkReact").make([ca],["_30yy _2oc9"],0,0,0,0,[ba],0,0,["button"],0,0,0,[ca],[]))},v=function z(){if(p===c("MessagingTag").PENDING){return i._("Message requests")}else if(p===c("MessagingTag").OTHER){return i._("Filtered requests")}else if(q===c("MessengerView").MASTER.PEOPLE){return i._("Active now")}else if(c("CurrentUser").isWorkUser()){return i._("Work Chat")}else return i._("Messenger");},w=function z(){return c("React").createElement("div",{className:"_4kzu"},c("reasonReact").element(0,0,c("messengerSettingsMenuReact").make(o,p,q,r,[])))},x=function z(){var aa=i._("New Message");return c("reasonReact").element(0,0,c("linkReact").make([aa],["_30yy _2oc8"],0,0,0,[c("MessengerURIConstants").COMPOSE_SUBPATH],[k],0,0,["button"],0,0,0,[aa],[]))},y=j.slice();y[9]=function(){var z=+(p!==c("MessagingTag").INBOX||q!==c("MessengerView").MASTER.RECENT),aa=z!==0?u(0):w(0);return c("React").createElement("div",{className:"_36ic _5l-3",role:"banner"},aa,c("messengerDirectRe").make(r),c("React").createElement("div",{className:"_1tqi"},v(0)),x(0))};return y}var n=c("reasonReact").wrapReasonForJs(j,function(o){return m(o.filter,o.folder,o.view,o.viewer,[])});g.component=j;g.handleAddClick=k;g.handleFilteredRequestsBackArrowClick=l;g.make=m;g.jsComponent=n}),null);
__d('MessengerMasterView.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','messengerMasterViewHeaderReact','MessengerRecentContainer.react','MessengerSearchContainer.react','MessengerSpinner.react','MessengerView','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerMasterViewHeaderReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(k,{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView1())};m.prototype.$MessengerMasterView1=function(){var n=this.props.detailView===c('MessengerView').DETAIL.COMPOSE;switch(this.props.view){case c('MessengerView').MASTER.PEOPLE:return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{activeThreadID:n?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerPeopleList.react').__setRef('MessengerMasterView.react'),placeholder:c('React').createElement('div',{className:"_2pif",style:{textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null))});case c('MessengerView').MASTER.PAYMENT:case c('MessengerView').MASTER.RECENT:return c('React').createElement(c('MessengerRecentContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});case c('MessengerView').MASTER.SEARCH:return c('React').createElement(c('MessengerSearchContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});default:throw new Error('Unknown master view: '+this.props.view);}};function m(){i.apply(this,arguments)}m.propTypes={activeThreadID:l.string,detailView:l.string,filter:l.string,folder:l.string.isRequired,view:l.string.isRequired,viewer:l.string.isRequired};f.exports=m}),null);
__d('messengerMasterViewReact',['reasonReact','bs_js_null_undefined','MessengerMasterView.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o){return c('reasonReact').wrapJsForReason(c('MessengerMasterView.react'),{activeThreadID:c('bs_js_null_undefined').from_opt(i),detailView:c('bs_js_null_undefined').from_opt(j),filter:c('bs_js_null_undefined').from_opt(k),folder:l,view:m,viewer:n},o)}g.make=h}),null);
__d('P2PPaymentPickerDialog.react',['cx','fbt','immutable','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerGraphQLTokenizer.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=460,n=c('immutable').Set();j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={entries:c('immutable').Set()},this.$P2PPaymentPickerDialog1=function(){var u=this.state.entries;this.props.handleContinue(u)}.bind(this),this.$P2PPaymentPickerDialog2=function(){var u=this.state.entries;this.props.handleCancel(u)}.bind(this),this.handleAddEntryAttempt=function(u){if(this.props.multiSelect){this.setState({entries:this.state.entries.add(u)})}else this.setState({entries:c('immutable').Set.of(u)});}.bind(this),this.handleRemoveEntryAttempt=function(u){this.setState({entries:this.state.entries['delete'](u)})}.bind(this),q}o.prototype.renderHeader=function(){return c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Send money")),c('React').createElement(c('MessengerDialogButton.react'),{disabled:!this.state.entries.size,label:i._("Continue"),type:'primary',onClick:this.$P2PPaymentPickerDialog1}))};o.prototype.renderTokenizer=function(){return c('React').createElement(c('MessengerGraphQLTokenizer.react'),{autoFocus:true,canViewerSendMoneyFilter:true,className:"_2wsl",context:null,enableMessageSearch:false,entries:this.state.entries.toList(),excludeGroups:true,excludePages:true,forceHideClearButton:true,hasHoverState:false,originalEntryIDs:n,placeholder:i._("Type the name of a person"),scrollableViewClassName:"_2wsm",shouldQueryInternalBot:false,shouldQueryVCEndpoint:false,useLayer:false,viewer:this.props.viewer,width:m,onAddEntryAttempt:this.handleAddEntryAttempt,onClear:null,onRemoveEntryAttempt:this.handleRemoveEntryAttempt})};o.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{className:"_2wsn",type:'default',width:m,onToggle:this.$P2PPaymentPickerDialog2},this.renderHeader(),this.renderTokenizer())};o.propTypes={viewer:l.string.isRequired,handleContinue:l.func.isRequired,handleCancel:l.func.isRequired,multiSelect:l.bool.isRequired};f.exports=o}),null);
__d('MessengerP2PDialogContainer.react',['Bootloader','immutable','MercuryIDs','MercuryOrderedThreadlist','MessagingTag','MessengerActions','MessengerStateStore','MessengerView','P2PActions','P2PDialogContainer.react','P2PPaymentPickerDialog.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.componentDidMount=function(){var l=c('MessengerStateStore').getState();if(l.detailView===c('MessengerView').DETAIL.PAYFRIENDPICKER)this.$MessengerP2PDialogContainer1();var m=l.extraQueryParams;if(m&&m.id)c('Bootloader').loadModules(["P2PSendMoneyDialogStore"],function(){this.$MessengerP2PDialogContainer2(m)}.bind(this),'MessengerP2PDialogContainer.react');};k.prototype.componentDidUpdate=function(){var l=c('MessengerStateStore').getState();if(l.detailView===c('MessengerView').DETAIL.PAYFRIENDPICKER)this.$MessengerP2PDialogContainer1();var m=c('MessengerStateStore').getState().extraQueryParams;if(m&&m.id)this.$MessengerP2PDialogContainer2(m);};k.prototype.$MessengerP2PDialogContainer1=function(){{var l=function n(o){c('P2PActions').hideDialog();var p=o.first().getUniqueID();c('MessengerActions').changeID(p)},m=function(n){c('P2PActions').hideDialog();c('MercuryOrderedThreadlist').getForFBID(this.props.viewer).getThreadlist(0,1,c('MessagingTag').INBOX,function(o){c('MessengerActions').selectThread(o[0])})}.bind(this);c('P2PActions').showDialog(c('P2PPaymentPickerDialog.react'),{viewer:this.props.viewer,handleContinue:l,handleCancel:m,multiSelect:false})}};k.prototype.$MessengerP2PDialogContainer2=function(l){var m=c('MercuryIDs').getThreadIDFromUserID(l.id);c('P2PActions').chatSendViewOpened({referrer:'chat',threadID:m,amount:l.a,memoText:l.m})};k.prototype.render=function(){return c('React').createElement(c('P2PDialogContainer.react'),null)};function k(){h.apply(this,arguments)}k.propTypes={viewer:j.string.isRequired};f.exports=k}),null);
__d('messengerP2PDialogContainerReact',['reasonReact','MessengerP2PDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerP2PDialogContainer.react'),{viewer:i},j)}g.make=h}),null);
__d('messengerReasonDialogContainerReact',['bs_list','bs_array','bs_block','bs_curry','React','bs_pervasives','reasonReact','messengerDialogsRe'],(function a(b,c,d,e,f,g){'use strict';function h(l){return [l]}var i=c('reasonReact').reducerComponent("MessengerReasonDialogContainer");function j(){var l=i.slice();l[4]=function(m){c('messengerDialogsRe').addHandler(c('bs_curry')._1(m[3],h));return 0};l[9]=function(m){var n=m[4][0];if(n){return c('React').createElement("div",undefined,c('bs_array').of_list(c('bs_list').mapi(function(o,p){return c('React').createElement("span",{key:c('bs_pervasives').string_of_int(o)},c('bs_curry')._1(p,0))},c('bs_list').rev(n[0]))))}else return null;};l[10]=function(){return [0]};l[12]=function(m,n){return c('bs_block').__(0,[[m[0]]])};return l}var k=c('reasonReact').wrapReasonForJs(i,function(){return j([])});g.updateDialog=h;g.component=i;g.make=j;g.jsComponent=k}),null);
__d('pagesPlatformDialogContainerReact',['reasonReact','PagesPlatformDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('PagesPlatformDialogContainer.react'),{},i)}g.make=h}),null);
__d("messengerReact",["cx","React","utilsRe","CurrentUser","reasonReact","bs_js_primitive","MessengerStateStore","messengerBannerReact","messengerBugNubReact","MessengerSettingsStore","messengerDetailViewReact","messengerMasterViewReact","PureStoreBasedStateMixin","messengerErrorBoundaryReact","fBPaymentsDialogContainerReact","mNCommerceDialogContainerReact","messengerP2PDialogContainerReact","pagesPlatformDialogContainerReact","ReactComponentWithPureRenderMixin","messengerReasonDialogContainerReact"],(function a(b,c,d,e,f,g,h){'use strict';function i(l){l.preventDefault();return 0}function j(l,m,n,o){var p=+c("CurrentUser").isEmployee();return c("React").createElement("div",{className:"_li"},c("reasonReact").element(0,0,c("messengerBannerReact").make(n,m,[])),c("React").createElement("div",{className:"_4sp8",onDragEnter:i,onDragOver:i,onDrop:i},c("React").createElement("div",{className:"_1enh"},c("reasonReact").element(0,0,c("messengerErrorBoundaryReact").make(0,["conversation list"],[c("reasonReact").element(0,0,c("messengerMasterViewReact").make(c("bs_js_primitive").null_undefined_to_opt(o.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(o.state.detailView),[o.state.filter],o.state.folder,o.state.masterView,c("CurrentUser").getID(),[]))])),p!==0?c("reasonReact").element(0,0,c("messengerBugNubReact").make([l?c("utilsRe").isTruthy(l[0].isBetaEnabled):0],l?[l[0].unixName]:0,[])):null),c("reasonReact").element(0,0,c("messengerDetailViewReact").make(c("bs_js_primitive").null_undefined_to_opt(o.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(o.state.mid),c("bs_js_primitive").null_undefined_to_opt(o.state.query),c("bs_js_primitive").null_undefined_to_opt(o.state.detailView),c("CurrentUser").getID(),[]))),c("reasonReact").element(0,0,c("messengerReasonDialogContainerReact").make([])),c("reasonReact").element(0,0,c("mNCommerceDialogContainerReact").make([])),c("reasonReact").element(0,0,c("messengerP2PDialogContainerReact").make(c("CurrentUser").getID(),[])),c("reasonReact").element(0,0,c("pagesPlatformDialogContainerReact").make([])),c("reasonReact").element(0,0,c("fBPaymentsDialogContainerReact").make([])))}var k=c("React").createClass({displayName:"MessengerReact",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("MessengerStateStore"),c("MessengerSettingsStore"))],statics:{calculateState:function l(){return {state:c("MessengerStateStore").getState(),settings:c("MessengerSettingsStore").getSettings()}}},componentDidMount:function l(){var m=this,n=m.props;return n.onMount()},componentWillUnmount:function l(){c("MessengerStateStore").destroy();c("MessengerSettingsStore").destroy();return 0},render:function l(){var m=this,n=m.props,o=m.state;return j(c("bs_js_primitive").null_undefined_to_opt(n.employeeData),c("utilsRe").nullUndefinedBooleanToOptionBool(n.isFirstRedirect),c("bs_js_primitive").null_undefined_to_opt(n.promotionData),o)}});g.preventDefault=i;g.make=j;g.jsComponent=k}),null);
__d('messengerSearchConfirmationDialogReact',['fbt','reasonReact','messengerDialogsRe','messengerDialogReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerSearchConfirmationDialog");function j(m){if(m){return 0}else return c('messengerDialogsRe').removeDialog(0);}function k(m,n,o){var p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('messengerDialogReact').Dialog[0](0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Header[0](0,0,[h._("Search for \"{term}\"?",[h.param("term",n)])])),c('reasonReact').element(0,0,c('messengerDialogReact').Footer[0](0,0,[c('reasonReact').element(0,0,c('messengerDialogReact').Button[0]([2],[h._("OK")],0,0,[m],[0],0,0,[])),c('reasonReact').element(0,0,c('messengerDialogReact').CancelButton[0](0,[]))]))]))};return p}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.onSearch,m.term,[])});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l}),null);
__d('MessengerMount',['cx','Bootloader','CSS','ChannelConnection','ChannelManager','CurrentUser','HotLikeSound','InstantGamesGateKeepers','mercuryBlockedParticipantsRe','MercuryConfig','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryOrderedThreadlist','MercuryParticipants','MercuryServerPayloadPreprocessor','MercurySyncEnvironment','MercuryThreads','MercuryThreadIDMap','MercuryUnreadState','MercuryUnseenState','messengerReact','MessengerActions','messengerDialogsRe','MessengerAttributionTagsStore','MessengerComposerActions','MessengerBrowserAlerts','MessengerComposerStore','MessengerConfig','MessengerEnvironment','MessengerMDotMeReferralStore','MessengerPage','MessengerRTCMessageHandler','MessengerSettingsStore','messengerSearchConfirmationDialogReact','MessengerStateStore','MessengerThreadSearchStore','MessengerURIListener','MessengerURIConstants','MessengerURISerializer','MessengerView','MNPlatformTagsDataManager','OmniMStore','React','ReactDOM','URI','goURI','OrderedFriendsList','PageHooks'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryDelayedRoger').get(),j=c('messengerReact').jsComponent,k=c('messengerSearchConfirmationDialogReact').jsComponent;c('OrderedFriendsList');c('PageHooks');c('ChannelManager').startChannelManager();var l={mount:function q(r,s){c('MessengerEnvironment').setMessengerUI(true);c('MessengerPage').emit(c('MessengerPage').Events.JS_LOADED);var t=c('CurrentUser').getID();m(t);n(t);o(t,s);c('MessengerPage').emit(c('MessengerPage').Events.DATA_INITIALIZED);if(document.documentElement)c('CSS').addClass(document.documentElement,"_51l0");if(document.body){var u=document.body;c('CSS').addClass(u,"_z4_");if(c('MessengerConfig').SFFontEnabled)c('CSS').addClass(u,"__6g");if(c('MessengerConfig').SegoeUIDisabled)c('CSS').addClass(u,"_2por");if(c('MessengerEnvironment').facebookdotcom)c('CSS').addClass(u,"_mvg");}c('HotLikeSound').setCheckSoundEnabledFunc(function(){return c('MessengerSettingsStore').getSettings().sound_enabled});c('ReactDOM').render(c('React').createElement(j,{employeeData:s.employeeData,facebookNotificationTokens:s.facebookNotificationTokens,promotionData:s.promotionData,isFirstRedirect:!c('MercuryConfig').MessengerDotComUser,viewer:t,onMount:function v(){return p(s)}}),r)}};function m(q){i;c('MercuryDeliveryReceipts').getForFBID(q);c('MercuryDeliveryState').getForFBID(q);c('MercuryOrderedThreadlist').getForFBID(q);c('MercuryParticipants');c('mercuryBlockedParticipantsRe').getForFBID(q);c('MercuryThreads').getForFBID(q);c('MercuryUnreadState').getForFBID(q);c('MercuryUnseenState').getForFBID(q);c('MessengerAttributionTagsStore');c('MessengerComposerStore');c('MessengerMDotMeReferralStore');c('MessengerSettingsStore');c('MessengerStateStore');c('MessengerThreadSearchStore').getForFBID(q)}function n(q){c('MessengerURIListener').start();c('MercurySyncEnvironment').setUp();c('MessengerBrowserAlerts').init(q);c('MessengerRTCMessageHandler').init();c('ChannelConnection');c('OmniMStore').setUp()}function o(q,r){var s,t=c('MercuryServerPayloadPreprocessor').getForFBID(q);t.handleUpdate(r.mercuryPayload);var u=new (c('URI'))(window.location.href),v=c('MessengerURISerializer').deserialize(u);if(v.query)(function(){var y=v.masterView===c('MessengerView').MASTER.SEARCH,z=v.query;v.query=null;v.masterView=c('MessengerView').MASTER.RECENT;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{term:z,onSearch:function aa(){c('messengerDialogsRe').removeAllDialogs();y?c('MessengerActions').changeQueryAll(z):c('MessengerActions').changeQuery(z)}})})})();c('goURI')(c('MessengerURISerializer').serialize(v),false,true);if(u.getPath().endsWith(c('MessengerURIConstants').COMPOSE_SUBPATH))return;if(v.masterView===c('MessengerView').MASTER.PAYMENT)return;c('MessengerActions').changeMDotMeReferral(r.mDotMeReferral,r.mDotMeReferralThreadKey);var w=c('MercuryThreadIDMap').get(),x=w.getClientIDFromServerIDNow(r.lastReadThreadKey);if(x){c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(x)}else if(u.getPath()==='/')c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(r.messagingSource,r.mDotMeReferralThreadKey&&r.mDotMeReferralThreadKey.toString())}function p(q){c('MessengerPage').emit(c('MessengerPage').Events.APP_MOUNTED);if(q.gameData&&q.gameData.gameID&&c('InstantGamesGateKeepers').messenger_dot_com_shareable_link_open_game)c('Bootloader').loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(r,s,t){var u=null,v=s.SOLO;if(q.gameData.contextSourceID){u=q.gameData.contextSourceID;v=s.THREAD}c('messengerDialogsRe').showDialog(function(){return c('React').createElement(r,{contextSourceID:u,contextType:v,onHide:function w(){return c('messengerDialogsRe').removeAllDialogs()},gameID:q.gameData.gameID,source:t.M_ME_LINK,sourceID:null})})},'MessengerMount');}f.exports=l}),null);