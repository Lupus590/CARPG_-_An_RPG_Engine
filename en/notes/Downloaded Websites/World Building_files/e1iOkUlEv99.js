if (self.CavalryLogger) { CavalryLogger.start_js(["pN0+m"]); }

__d('ItunesPluginLogging',['Run','Bootloader'],(function a(b,c,d,e,f,g){var h={logPluginData:function i(){c('Run').onAfterLoad(function(){var j=c('Bootloader');j.loadModules(["ItunesDetector","AsyncRequest"],function(k,l){new l().setURI('/ajax/ads/media/log').setData({status:k.hasItunes()}).send()},'ItunesPluginLogging')})}};f.exports=h}),null);
__d('NubController',['ArbiterMixin','Dock'],(function a(b,c,d,e,f,g){function h(){}Object.assign(h.prototype,c('ArbiterMixin'),{init:function i(j){this.el=j;c('Dock').registerNubController(j,this);return this},buttonContentChanged:function i(){this.inform('nub/button/content-changed')},flyoutContentChanged:function i(){this.inform('nub/flyout/content-changed')},hide:function i(){c('Dock').hide(this.el)},show:function i(){c('Dock').show(this.el)}});f.exports=h}),null);
__d('BuddyListNub',['csx','cx','fbt','Arbiter','AsyncRequest','AvailableList','BootloadedComponent.react','ChannelConnection','ChatOptions','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','ChatVisibility','CSS','Dock','DOM','Event','intlNumUtils','JSLogger','JSResource','KeyEventController','Keys','MercuryConfig','NubController','OrderedFriendsList','Parent','PresencePrivacy','PresenceStatus','PresenceUtil','React','ReactDOM','Run','SidebarType','Style','Toggler','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=40,n=253,o='285px',p=c('JSLogger').create('buddylist_nub');k=babelHelpers.inherits(q,c('NubController'));l=k&&k.prototype;function q(r,s,t,u){'use strict';l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c('DOM').find(r,'a.fbNubButton');this.unreadCount=c('DOM').find(r,"span._5ayx");this.label=c('DOM').find(r,'span.label');this.body=c('DOM').scry(r,'div.fbNubFlyoutBody')[0];this.container=c('Parent').bySelector(r,"._56ox");var v=c('DOM').find(r,'div.fbNubFlyoutTitlebar');c('Toggler').createInstance(v).setSticky(false);c('Toggler').createInstance(r).setSticky(true);if(u)c('Run').onAfterLoad(function(){this.dropdown=c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function w(){},sidebarType:c('SidebarType').BUDDYLIST}),u)}.bind(this));s.subscribeOnce('render',this.flyoutContentChanged.bind(this));c('Run').onAfterLoad(function(){var w=c('DOM').find(v,"div._4k48");if(w)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),w);var x=c('DOM').find(this.button,"div._1us9");if(x)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarComposeLink.react').__setRef('BuddyListNub'),className:"_3a-4"}),x);var y=c('DOM').find(this.button,"div._1usa");if(y)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarDropdown.react').__setRef('BuddyListNub'),onToggleSidebar:function ba(){},sidebarType:c('SidebarType').BUDDYLIST_NUB}),y);if(c('MercuryConfig').NewGCF){var z=c('DOM').find(v,"div._3gl7");if(z)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarGroupCreateButtonReactComponent').__setRef('BuddyListNub')}),z);var aa=c('DOM').find(this.button,"div._3gll");if(aa)c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ChatSidebarGroupCreateButtonReactComponent').__setRef('BuddyListNub'),className:"newGCF"}),aa);}}.bind(this));s.setScrollContainer(this.body);c('AvailableList').subscribe('buddylist/availability-changed',this._updateCount.bind(this));c('Arbiter').subscribe('chat/connect',function(){return this._handleConnect(true)}.bind(this));c('Arbiter').subscribe('chat/option-changed',function(w,x){if(x.name=='hide_groups'){this.onResize()}else if(x.name==='hide_buddylist')x.value?this.hide():this.show();}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').CONNECTED,function(){return this._updateView()}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').SHUTDOWN,function(){return this._updateView()}.bind(this));c('ChannelConnection').subscribe(c('ChannelConnection').RECONNECTING,function(){return this._updateView()}.bind(this));c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],function(){return this._updateView()}.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));c('Event').listen(r,'keydown',this._onKeyDown.bind(this));c('Event').listen(this.button,'click',this.onButtonClick.bind(this));c('KeyEventController').registerKey('q',function(event){if(!this._isOpen){this.onButtonClick();this.show()}event.prevent()}.bind(this));c('Arbiter').subscribe('minisidebar/show',this.hide.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(w,x){if(x){this.hide()}else this._onSidebarHide();}.bind(this));c('Style').set(this.body,'min-height',o);c('Arbiter').subscribe('sidebar/typeahead/active',function(w,x){if(x){this._typeaheadActive=true;c('CSS').hide(this.body.parentNode);this.orderedList.hide();this.onResize()}else{this._typeaheadActive=false;this.onResize();c('CSS').show(this.body.parentNode);this.orderedList.show()}}.bind(this));c('OrderedFriendsList').getList(function(w){if(c('ChatSidebarStore').isEnabled()&&c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&w.length>0)this.show();c('Event').listen(v,'click',function(x){if(c('CSS').matchesSelector(x.target,".titlebarTextWrapper"))this._syncHideBuddylist(true);}.bind(this));this._updateView();p.log('buddylist_initialized')}.bind(this))}q.prototype._handleVisibilityChange=function(){'use strict';this._updateView();if(!c('ChatVisibility').isOnline())this.hide();};q.prototype._updateView=function(r){'use strict';var s,t;if(!c('ChatVisibility').isOnline()){s=j._("{Chat} (Off)",[j.param('Chat',j._("Chat"))])}else if(c('ChannelConnection').disconnected()){s=j._("{Chat} (Disconnected)",[j.param('Chat',j._("Chat"))])}else{var u=c('PresenceStatus').getOnlineCount();if(u){var v=c('DOM').create('span',{className:'count'},'('+c('intlNumUtils').formatNumberWithThousandDelimiters(u)+')');s=j._({"*":"{Chat} {number-available}"},[j.param('Chat',j._("Chat")),j.param('number-available',v,[0,u])])}else{s=j._("Chat");t=true}}this._setPresenceIcon();this._setUnread();this._setLabel(s,t);this.buttonContentChanged()};q.prototype._setPresenceIcon=function(){'use strict';c('CSS').conditionClass(this.root,'offline',!c('ChatVisibility').isOnline()||c('ChannelConnection').disconnected())};q.prototype.onButtonClick=function(){'use strict';if(!c('ChatSidebarStore').isInitialized())return true;c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(r,s){var t=c('ChatSidebarStore').isEnabled();if(!t&&r){c('ChatSidebarActions').enable(c('SidebarType').SIDEBAR)}else c('ChatSidebarActions').show(t&&r?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);})};q.prototype.onHide=function(){'use strict';this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null}this._hideBuddyList();c('Arbiter').inform('buddylist/hide')};q.prototype._onKeyDown=function(event){'use strict';var r=c('Event').getKeyCode(event);if(r===c('Keys').ESC&&!c('CSS').hasClass(this.root,'menuOpened')){this.hide();return false}else if(r==c('Keys').RETURN)c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(s,t){c('ChatSidebarActions').enable(s?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST)});};q.prototype._onSidebarHide=function(event){'use strict';c('OrderedFriendsList').getList(function(r){if(c('ChatSidebarStore').isEnabled()&&!c('ChatOptions').getSetting('hide_buddylist')&&!c('ChannelConnection').disconnected()&&!c('PresencePrivacy').isUserOffline()&&r.lenth>0){this.show()}else this.hide();}.bind(this))};q.prototype.onResize=function(){'use strict';var r=!this._typeaheadActive?n:c('Dock').getMaxFlyoutHeight(this.root)-60;c('Arbiter').inform('buddyList/resized',r,c('Arbiter').BEHAVIOR_PERSISTENT);if(this._typeaheadActive){c('Style').set(this.body,'max-height','none')}else c('Style').set(this.body,'max-height',o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t)};q.prototype._showBuddyList=function(){'use strict';this._buddyListRenderSubscription=this.orderedList.subscribe('render',function(){if(c('Style').get(this.body,'height')!=o)c('Style').set(this.body,'height',o);}.bind(this));this.orderedList.show();p.bump('buddylist_show')};q.prototype._hideBuddyList=function(){'use strict';this.orderedList.hide();p.bump('buddylist_hide')};q.prototype.onShow=function(){'use strict';this._isOpen=true;if(c('ChannelConnection').disconnected()){c('ChannelConnection').reconnect();this._showBuddyList()}else c('ChatVisibility').goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false)};q.prototype._setLabel=function(r,s){'use strict';var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c('DOM').setContent(u,r);c('DOM').replace(this.label,u);this.label=u}this.throbber&&c('CSS').conditionShow(this.throbber,!!s)};q.prototype._setUnread=function(r){'use strict';c('CSS').conditionShow(this.unreadCount,!!r)};q.prototype._updateCount=function(){'use strict';this._updateView()};q.prototype._syncHideBuddylist=function(r){'use strict';c('ChatOptions').setSetting('hide_buddylist',r,'buddylist');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('emptyFunction')).setErrorHandler(c('emptyFunction')).setData({hide_buddylist:r,window_id:c('PresenceUtil').getSessionID()}).setAllowCrossPageTransition(true).send()};c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(r,s){s.buddylist_visible=c('ChatSidebarStore').getVisibleType()===c('SidebarType').BUDDYLIST});f.exports=q}),null);
__d('isInFocusMode',['WorkFocusModeController'],(function a(b,c,d,e,f,g){var h=c('WorkFocusModeController').WorkFocusMode,i=function j(k){return !!(h&&h.currentViewerInFocusMode(k))};f.exports=i}),null);
__d('ChatUnreadCount',['ChatDispatcher','ChatUnreadCountActionTypes','Map','MercuryIDs','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','MercuryUnreadState','isInFocusMode'],(function a(b,c,d,e,f,g){'use strict';h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c('MercuryThreadInformer').getForFBID(j);this.$ChatUnreadCount3=c('MercuryThreads').getForFBID(j);this.$ChatUnreadCount4=new (c('Map'))();this.$ChatUnreadCount5=c('MercuryUnreadState').getForFBID(j);this.setupSubscriptions()}h.prototype.getUnreadCountForUID=function(j){if(!j)return null;var k=c('MercuryIDs').getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)){this.$ChatUnreadCount4['delete'](j);return 0}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;this.$ChatUnreadCount4.set(j,m);if(c('isInFocusMode')(k))return 0;return m};h.prototype.setupSubscriptions=function(){this.$ChatUnreadCount2.subscribe('threads-updated',function(j,k){var l=Object.keys(k).some(function(m){var n=c('MercuryIDs').getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p}.bind(this));if(l)c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED});}.bind(this));this.$ChatUnreadCount2.subscribe('unread-updated',function(){return c('ChatDispatcher').dispatch({type:c('ChatUnreadCountActionTypes').COUNT_UPDATED})})};var i=new (c('MercurySingletonProvider'))(h);f.exports=h}),null);
__d('ChatTypeaheadConstants',[],(function a(b,c,d,e,f,g){var h={USER_TYPE:'user',THREAD_TYPE:'thread',FRIEND_TYPE:'friend',NON_FRIEND_TYPE:'non_friend',FB4C_TYPE:'fb4c',PAGE_TYPE:'page',MEETING_ROOM_PAGE_TYPE:'meeting_room_page',COMMERCE_PAGE_TYPE:'commerce_page',HEADER_TYPE:'header',INTERNAL_BOT_PAGE_TYPE:'internal_bot_page',GAME_TYPE:'game'};f.exports=h}),null);
__d('ChatSidebarComposeLink.react',['fbt','ChatOpenTabEventLogger','FantaTabActions','Link.react','MercuryThreads','React','TooltipData'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MercuryThreads').get();i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m)}l.prototype.render=function(){var m=h._("New Message");return c('React').createElement(c('Link.react'),babelHelpers['extends']({className:this.props.className,href:'#',onClick:this.$ChatSidebarComposeLink1},c('TooltipData').propsFor(m,'below')))};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c('FantaTabActions').openTabEventually(n,'compose_link');c('ChatOpenTabEventLogger').logClickOpen('sidebar',n);m.preventDefault()};f.exports=l}),null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerEnvironment','MessengerTypeaheadUtils','SearchableEntry','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=50,k=c('MessengerEnvironment').messengerui;h=babelHelpers.inherits(l,c('ChatSearchSource'));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){i.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n}l.prototype.bootstrapImpl=function(n){c('requireWeak')('OrderedFriendsList',function(p){return p.getSearchableEntries(j,true,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q)}.bind(this))}.bind(this));var o=c('MercuryIDs').getParticipantIDFromUserID(this.$MessengerSearchSource2);c('MercuryParticipants').get(o,function(p){i.addLocalEntries.call(this,[new (c('SearchableEntry'))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c('MercuryParticipantTypes').FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})])}.bind(this));i.bootstrapImpl.call(this,c('emptyFunction'));n()};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===''&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return}p.threadLimit=c('MercuryConfig').MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p)};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c('MessengerTypeaheadUtils').getMessageSearchEntry(q);if(r){n([r].concat(p),q)}else n(p,q);}:n};var m=new (c('MercurySingletonProvider'))(l);f.exports=l}),null);
__d('MessengerSearchTypeahead.react',['cx','fbt','ix','AbstractTypeahead.react','Bootloader','Image.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessengerActions','MessengerSearchSource','React','TypeaheadNavigation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryThreadIDMap').get(),n=c('MercuryThreads').get(),o=c('React').PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w}t.prototype.componentWillMount=function(){var v=function x(y,z,aa){var ba=y.indexOf(z),ca=ba==-1?y.length-1:ba-1;aa(ca==-1?y[y.length-1]:y[ca])},w=function x(y,z,aa){var ba=y.indexOf(z)+1;aa(ba==y.length?y[0]:y[ba])};v=c('TypeaheadNavigation').moveDown;w=c('TypeaheadNavigation').moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),aa=1;aa<y;aa++)z[aa-1]=arguments[aa];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this)};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger");return c('React').createElement('div',{className:"_3rh8"},c('React').createElement(c('AbstractTypeahead.react'),{'aria-label':i._("friends to message"),autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:"_5iwm"+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")+(this.props.hideResults?' '+"_1a03":''),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.props.onBlur,onChange:this.$MessengerSearchTypeahead3,onFocus:function(){var w;this.$MessengerSearchTypeahead4();(w=this.props).onFocus.apply(w,arguments)}.bind(this),onMouseOver:this.$MessengerSearchTypeahead4,onClick:this.$MessengerSearchTypeahead4,onSelectAttempt:this.$MessengerSearchTypeahead5,placeholder:v.toString(),presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead6,useLayer:false},queryString:this.props.queryString,role:'search',searchSource:c('MessengerSearchSource').getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead7,onQueryStarted:this.$MessengerSearchTypeahead8,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(!this.props.queryString?"hidden_elem":'')+(' '+"_2xme"),src:p}))};t.propTypes={hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function v(){this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var w;this.setState({isLoaded:false});(w=this.props).onChange.apply(w,arguments)}.bind(this);this.$MessengerSearchTypeahead4=function(){if(!this.state.orderable)c('Bootloader').loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils","messengerGraphQLThreadFetcherRe"],function(w,x,y){r=w;s=x;this.setState({orderable:true})}.bind(this),'MessengerSearchTypeahead.react');}.bind(this);this.$MessengerSearchTypeahead8=function(w){if(w===this.props.queryString)this.setState({isLoading:true});}.bind(this);this.$MessengerSearchTypeahead7=function(w){if(w===this.props.queryString)this.setState({isLoading:false,isLoaded:true});}.bind(this);this.$MessengerSearchTypeahead6=function(w){return s?s.sortEntries(w,this.props.queryString):w}.bind(this);this.$MessengerSearchTypeahead5=function(w){var x=w.getUniqueID(),y=w.getType(),z=w.getAuxiliaryData().alias;if(z)c('MercuryVanityIDMap').set(z,c('MercuryIDs').getParticipantIDFromUserID(x));if(y===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerActions').changeQueryAll(this.props.queryString)}else if(y===c('MercuryTypeaheadConstants').THREAD_TYPE){m.getClientIDFromServerID(x,function(aa){this.props.onSelect(aa,y)}.bind(this))}else n.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(aa){this.props.onSelect(aa.thread_id,y)}.bind(this));}.bind(this)};f.exports=t}),null);
__d('ChatTypeaheadWrapper.react',['cx','Arbiter','Bootloader','LoadOnRender.react','ChatConfig','ChatOpenTabEventLogger','ChatSidebarComposeLink.react','ChatSidebarSections','ChatSidebarSheet.react','ChatTypeaheadConstants','FantaTabActions','LazyComponent.react','MessengerSearchTypeahead.react','MercuryConfig','React','Run','emptyFunction','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=40,l=c('ChatConfig').get('divebar_rounded_profile',false);function m(o){c('Arbiter').inform('sidebar/typeahead/active',o)}i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={height:0,value:'',isSearching:false,dropdownComponent:null,GCFComponent:null},p}n.prototype.componentDidMount=function(){if(this.props.isSidebar){c('Arbiter').subscribe('sidebar/resized',function(o,p){this.setState({height:p})}.bind(this));c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["ChatSidebarDropdown.react","SidebarType","ChatSidebarActions"],function(p,q,r){this.setState({dropdownComponent:c('React').createElement(p,{sidebarType:q.SIDEBAR,onToggleSidebar:r.disable})})}.bind(this),'ChatTypeaheadWrapper.react');if(c('MercuryConfig').NewGCF){var o=function p(q){c('Bootloader').loadModules(["chatSidebarGroupCreateButtonReact"],function(r){var s=r.jsComponent;return q(s)},'ChatTypeaheadWrapper.react')};this.setState({GCFComponent:c('React').createElement(c('LoadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),null),loader:o,placeholder:c('React').createElement('div',{className:"_1-4-"})})})}}.bind(this))}else c('Arbiter').subscribe('buddyList/resized',function(o,p){this.setState({height:p})}.bind(this));};n.prototype.componentWillUpdate=function(o,p){if(p.isSearching!==this.state.isSearching)m(p.isSearching);};n.prototype.render=function(){var o=this.state.height!=null?Math.floor((this.state.height-k*2)/k):null;return c('React').createElement('div',{className:!l?"squareProfile":''},c('React').createElement(c('ChatSidebarSheet.react'),{className:'fbChatSidebarMessage'}),c('React').createElement(c('MessengerSearchTypeahead.react'),{isFacebookChat:true,isFocused:true,maxEntries:o,queryString:this.state.value,viewer:this.props.id,onBlur:function(){return this.setState({isSearching:false,value:''})}.bind(this),onChange:function(p){var q=p.target.value;this.setState({isSearching:q!=='',value:q})}.bind(this),onClear:c('emptyFunction'),onFocus:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),onSelect:function(p,q){c('getActiveElement')().blur();if(q===c('ChatTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){c('Bootloader').loadModules(["MercuryIDs","goURI"],function(r,s){this.setState({isSearching:false,value:''});var t=r.getUserIDFromThreadID(p);s('/'+t)}.bind(this),'ChatTypeaheadWrapper.react')}else{c('FantaTabActions').openTab(p,'chat_sidebar_typeahead');c('ChatOpenTabEventLogger').logClickOpen('chat_sidebar_typeahead',p)}}.bind(this)}),this.props.isSidebar?c('React').createElement('div',{className:"_531b"},this.state.dropdownComponent,c('React').createElement(c('ChatSidebarComposeLink.react'),{className:"_3a-4 _5q85"}),this.state.GCFComponent):null)};f.exports=n}),null);
__d('ChatTypeaheadCore',['ChatTypeaheadWrapper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={init:function i(j,k,l){c('ReactDOM').render(c('React').createElement(c('ChatTypeaheadWrapper.react'),{id:k,isSidebar:l}),j)}};f.exports=h}),null);
__d("NotifTestIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({REACT_BLUE_BAR_JEWEL:"react_blue_bar_jewel",NON_REACT_BLUE_BAR_JEWEL:"non_react_blue_bar_jewel",REACT_NOTIF_LIST:"react_notif_list",NOTIF_LIST_ITEM:"notif_list_item",SEE_ALL_LIST:"see_all_list",REACT_NOTIF_JEWEL_FLYOUT:"react_notif_jewel_flyout",NON_REACT_NOTIF_JEWEL_FLYOUT:"non_react_notif_jewel_flyout",CHEVRON:"chevron",REACT_MARK_ALL_AS_READ_LINK:"react_mark_all_as_read_link",NON_REACT_MARK_ALL_AS_READ_LINK:"non_react_mark_all_as_read_link",NOTIFICATION_SOUND_SETTING:"notifiation_sound_setting",NOTIFICATION_SOUND_SETTING_SELECTOR:"notifiation_sound_setting_selector",MESSAGE_SOUND_SETTING:"message_sound_setting",MESSAGE_SOUND_SETTING_SELECTOR:"message_sound_setting_selector",CLOSE_FRIEND_ACTIVITY_SELECTOR:"close_friend_activity_selector",BIRTHDAY_SELECTOR:"birthday_selector",ON_THIS_DAY_SELECTOR:"on_this_day_selector",TAGS_SELECTOR:"tags_selector",LIVE_VIDEO_SELECTOR:"live_video_selector",REACT_BADGE_COUNT_CONTAINER:"react_badge_count_container",NON_REACT_BADGE_COUNT_CONTAINER:"non_react_badge_count_container",BEEPER_LIST:"beeper_list",NON_REACT_SETTING_LINK:"non_react_setting_link",REACT_SETTING_LINK:"react_setting_link",GEOGRAPHIC_SUBSCRIPTION_SELECTOR:"geographic_subscription_selector"})}),null);
__d('NotificationPhotoThumbnail',['NotificationAttachmentConfig','QE2Logger'],(function a(b,c,d,e,f,g){'use strict';var h='notifications_www_thumbnails_universe';function i(k){if(!k.media||!k.style_list||!k.style_list.length)return null;var l=k.style_list[0];if(c('NotificationAttachmentConfig').experimentStyles[l])c('QE2Logger').logExposureForUser(h);if(c('NotificationAttachmentConfig').thumbnailStyles[l])return k.media.image;return null}var j={getThumbnailForNotification:function k(l){var m=l.attachments,n=l.attached_story,o=l.feedback_context;return j.getThumbnail(m,n,o)},getThumbnail:function k(l,m,n){var o=void 0;if(l&&l.length){l.some(function(s){o=i(s);if(o)return true;return false});if(o)return o;}if(n){var p=n.relevant_comments;if(p&&p.length){var q=p[0].attachments;if(q&&q.length){o=i(q[0]);if(o)return o;}}}if(m){var r=m.attachments;if(r&&r.length)return i(r[0]);}return null}};f.exports=j}),null);
__d('NotificationURI',['BusinessURI.brands','URI','VideoPermalinkURI','isFacebookURI'],(function a(b,c,d,e,f,g){var h={localize:function i(j){try{j=c('BusinessURI.brands')(j)}catch(l){return j.toString()}var k=j.getSubdomain();return j.getUnqualifiedURI().getQualifiedURI().setSubdomain(k).toString()},snowliftable:function i(j){if(!j)return false;var k=new (c('URI'))(j),l=k.getQueryData();return c('isFacebookURI')(k)&&(c('VideoPermalinkURI').isValid(k)||'fbid' in l)},isVaultSetURI:function i(j){return this._areEquals(j,'/ajax/vault/sharer_preview.php')},isAlbumDraftRecoveryDialogURI:function i(j){return this._areEquals(j,'/ajax/photos/upload/overlay/')},isQuicksilverURI:function i(j){return this._areEquals(j,'/games/quicksilver/spotlight/')},isDirectURI:function i(j){return this._startsWith(j,'/direct/')},isIGAccountCreationURI:function i(j){return this._areEquals(j,'/ads/growth/aymt/instagram/account-creation-dialog/')},_areEquals:function i(j,k){if(!j)return false;var l=new (c('URI'))(j);return c('isFacebookURI')(l)&&l.getPath()===k},_startsWith:function i(j,k){if(!j)return false;var l=new (c('URI'))(j);return c('isFacebookURI')(l)&&l.getPath().startsWith(k)}};f.exports=h}),null);
__d('NotificationBeepData',['NotificationPhotoThumbnail','NotificationURI','URI','idx'],(function a(b,c,d,e,f,g){'use strict';f.exports={fromNotification:function h(i){var j;if(!i.showBeep||!i.alert_id||i.pinnedConvoConfig&&i.pinnedConvoConfig.hide_beeper_naive)return null;var k=i.unaggregatedActors||i.actors,l=i.alert_id,m=l+'-'+String(i.receivedTime),n=c('NotificationPhotoThumbnail').getThumbnail(i.attachments,i.attached_story);return {actors:k,ajaxifyLink:i.ajaxify_url,beepID:m,beepRenderer:i.beepRenderer,beepUpdatesOnTop:i.beepUpdatesOnTop,eligible_buckets:i.eligible_buckets,icon:i.icon,link:i.url?c('NotificationURI').localize(new (c('URI'))(i.url)):'#',notificationID:l,notifID:i.id,photo:n,receivedTime:i.receivedTime,rendererData:i.rendererData,sound:!!i.sound,text:i.unaggregatedTitle||i.title,thumbnail:i.thumbnail||((j=k)!=null?(j=j[0])!=null?j.profile_picture:j:j),timestamp:i.timestamp,tracking:i.tracking,url:i.url}}}}),null);
__d('NotificationBeeperConst',['keyMirror'],(function a(b,c,d,e,f,g){var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:c('keyMirror')({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h}),null);
__d('NotificationBeeperItemCloseButton.react',['cx','fbt','React','XUIAbstractGlyphButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';var m=i._("Close");return c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{className:"_3soc",title:m,label:m,labelIsHidden:true}))};function l(){'use strict';j.apply(this,arguments)}f.exports=l}),null);
__d('NotificationInterpolator',['Badge.react','React'],(function a(b,c,d,e,f,g){function h(i,j){var k=null;if(j.entity.is_viewer_coworker===false||j.entity.is_multi_company_group===true)k=c('React').createElement(c('Badge.react'),{type:'work_non_coworker'});return c('React').createElement('span',{className:'fwb'},i,k)}f.exports=h}),null);
__d('NotificationAttachmentUtils',['NotificationAttachmentConfig'],(function a(b,c,d,e,f,g){'use strict';var h={shouldOpenSnowlift:function i(j){var k=j.attachments,l=j.feedback_context,m=j.attached_story,n=[];if(k)n.push.apply(n,k);if(l&&l.relevant_comments){var o=l.relevant_comments;o.reduce(function(p,q){return p.concat(q.attachments)},n)}if(m&&m.attachments)n.push.apply(n,m.attachments);return n.some(function(p){if(!p.style_list||!p.style_list.length)return false;var q=p.style_list[0];return !!c('NotificationAttachmentConfig').snowliftStyles[q]})}};f.exports=h}),null);
__d('NotificationUtils',['NotificationAttachmentUtils','NotificationURI','URI'],(function a(b,c,d,e,f,g){'use strict';var h={getLinkProps:function i(j){var k=c('NotificationURI').localize(new (c('URI'))(j.url)),l=k,m=h.canRenderInVideoChannelView(j.rendererData),n=h.canRenderInTahoe(j.rendererData);if(m||n)return {href:l};var o=c('NotificationAttachmentUtils').shouldOpenSnowlift(j)&&c('NotificationURI').snowliftable(k),p=c('NotificationURI').isAlbumDraftRecoveryDialogURI(k),q=o||p?k:j.ajaxify_url||'',r=null;if(o){r='theater'}else if(p){r='async-post'}else if(c('NotificationURI').isQuicksilverURI(q)||c('NotificationURI').isIGAccountCreationURI(q)){r='dialog-post'}else if(c('NotificationURI').isDirectURI(k)){r='async'}else if(q)r='dialog';return {ajaxify:q,href:l,rel:r}},canRenderInVideoChannelView:function i(j){return !!(j&&j.video_channel_id)},canRenderInTahoe:function i(j){return !!(j&&j.can_render_in_tahoe)},canRenderInStoryTray:function i(j){return !!(j&&j.bucket_data)}};f.exports=h}),null);
__d('RelationshipDelightTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:RelationshipDelightLoggerConfig',this.$RelationshipDelightTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:RelationshipDelightLoggerConfig',this.$RelationshipDelightTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$RelationshipDelightTypedLogger1={};return this};h.prototype.updateData=function(j){this.$RelationshipDelightTypedLogger1=babelHelpers['extends']({},this.$RelationshipDelightTypedLogger1,j);return this};h.prototype.setAlertID=function(j){this.$RelationshipDelightTypedLogger1.alert_id=j;return this};h.prototype.setEvent=function(j){this.$RelationshipDelightTypedLogger1.event=j;return this};h.prototype.setMetadata=function(j){this.$RelationshipDelightTypedLogger1.metadata=j;return this};h.prototype.setVC=function(j){this.$RelationshipDelightTypedLogger1.vc=j;return this};var i={alert_id:true,event:true,metadata:true,vc:true};f.exports=h}),null);
__d('RelationshipDelightUtils',['QE2Logger','RelationshipDelightTypedLogger','idx'],(function a(b,c,d,e,f,g){'use strict';var h=function m(n){var o;return (o=n)!=null?(o=o.rendererData)!=null?o.relationship_delight_data:o:o},i=function m(n){var o=h(n);if(!o||!l.isNotificationEligible(n))return false;if(o.should_expose_heart_notif)c('QE2Logger').logExposureForUser(o.universe_name);return !!o.should_heart_notif},j={},k=function m(n,event,o){var p=event+'-'+n;if(j[p])return;j[p]=true;var q=new (c('RelationshipDelightTypedLogger'))().setEvent(event).setAlertID(n);if(o)q.setMetadata(JSON.stringify(o));q.log()},l={isNotificationEligible:function m(n){var o=n.eligible_buckets;return !!o&&o.indexOf('so_notifications')!==-1},shouldHeartBeeper:function m(n){return i(n)},shouldHeartNotification:function m(n){return i(n)},shouldHeartBadge:function m(n){var o=h(n);if(!o||!l.isNotificationEligible(n))return false;if(o.should_expose_heart_badge)c('QE2Logger').logExposureForUser(o.universe_name);return !!o.should_heart_badge},logNotificationAnimation:function m(n,o,p){k(n,'notification_animated',{animation:o,rowIndex:p})},logBeeperAnimation:function m(n){k(n,'beeper_animated')},logBadgeAnimation:function m(n){k(n,'badge_animated')}};f.exports=l}),null);
__d('NotificationBeeperItemContents.react',['cx','Animation','AsyncRequest','BootloadedComponent.react','Bootloader','FBProfilePhotoShadow.react','Image.react','ImageBlock.react','JSResource','NotificationBeeperItemCloseButton.react','NotificationInterpolator','NotificationURI','NotificationUserActions','NotificationUtils','React','ReactDOM','RelationshipDelightUtils','TextWithEntities.react','Timestamp.react','URI'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.isLiveVideo=null,this.$NotificationBeeperItemContents2=function(q){this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.beep,s=r.rendererData;if(c('NotificationURI').isAlbumDraftRecoveryDialogURI(r.link)){new (c('AsyncRequest'))(r.link).send();q.preventDefault()}else if(c('NotificationUtils').canRenderInTahoe(s)){this.$NotificationBeeperItemContents3();q.preventDefault()}else if(s&&c('NotificationUtils').canRenderInVideoChannelView(s)){this.$NotificationBeeperItemContents4(s);q.preventDefault()}else if(r.photo&&c('NotificationURI').snowliftable(r.link)){q.persist();c('Bootloader').loadModules(["PhotoSnowlift"],function(t){t.bootstrap(r.link,q.currentTarget)},'NotificationBeeperItemContents.react');q.preventDefault()}else if(r.ajaxifyLink){c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(r.ajaxifyLink,q.currentTarget,'dialog')},'NotificationBeeperItemContents.react');q.preventDefault()}}.bind(this),this.$NotificationBeeperItemContents5=function(){this.$NotificationBeeperItemContents1();this.props.onHide()}.bind(this),m}k.prototype.$NotificationBeeperItemContents1=function(){'use strict';c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID])};k.prototype.$NotificationBeeperItemContents6=function(){'use strict';new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go()};k.prototype.$NotificationBeeperItemContents7=function(){'use strict';var l=this.$NotificationBeeperItemContents8(),m=JSON.parse(l);return m.content_id};k.prototype.$NotificationBeeperItemContents9=function(){'use strict';if(this.isLiveVideo===null){var l=this.$NotificationBeeperItemContents8();this.isLiveVideo=l.indexOf('live_video')!==-1}return !!this.isLiveVideo};k.prototype.$NotificationBeeperItemContents8=function(){'use strict';return this.props.beep.tracking||'{}'};k.prototype.$NotificationBeeperItemContents4=function(l){'use strict';if(!this.$NotificationBeeperItemContents9())return;c('Bootloader').loadModules(["VideoChannelHandleLink"],function(m){m.openChannel(l.video_channel_id,l.video_channel_caller,l.video_id)},'NotificationBeeperItemContents.react')};k.prototype.$NotificationBeeperItemContents3=function(){'use strict';if(!this.$NotificationBeeperItemContents9())return;var l=this.props.beep.url;c('Bootloader').loadModules(["TahoeController"],function(m){var n=c('NotificationURI').localize(new (c('URI'))(l));m.openFromVideoLink(new (c('URI'))(n))},'NotificationBeeperItemContents.react')};k.prototype.$NotificationBeeperItemContents10=function(){'use strict';var l=this.props.beep,m=c('RelationshipDelightUtils').shouldHeartBeeper(l);if(!m)return null;c('RelationshipDelightUtils').logBeeperAnimation(l.notificationID);return c('React').createElement('div',{className:"_5_xp"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('RelationshipDelightsActorAnimation.react').__setRef('NotificationBeeperItemContents.react')}))};k.prototype.componentDidMount=function(){'use strict';this.props.onReadyToHide(this.props.beep.notificationID);if(this.$NotificationBeeperItemContents9())c('Bootloader').loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(l,m){var n=this.$NotificationBeeperItemContents7();if(n)l.genVideoData(n);}.bind(this),'NotificationBeeperItemContents.react');};k.prototype.componentDidUpdate=function(l){'use strict';if(l.beep.beepID!==this.props.beep.beepID){this.$NotificationBeeperItemContents6();this.props.onReadyToHide(this.props.beep.notificationID)}};k.prototype.render=function(){'use strict';var l=this.props.beep,m=((l.actors[0]||{}).profile_picture||{}).uri,n=(l.icon||{}).uri;return c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$NotificationBeeperItemContents5}),c('React').createElement('a',{href:l.link,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c('React').createElement(c('ImageBlock.react'),{className:"_3soj",spacing:'medium'},c('React').createElement(c('FBProfilePhotoShadow.react'),{className:"_2yt7"},c('React').createElement(c('Image.react'),{src:m,className:"_3sok"+(!m?' '+"hidden_elem":'')})),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('TextWithEntities.react'),{renderEmoticons:true,renderEmoji:true,interpolator:c('NotificationInterpolator'),ranges:l.text.ranges,aggregatedranges:l.text.aggregated_ranges,text:l.text.text}),c('React').createElement(c('ImageBlock.react'),{className:"_3som"},c('React').createElement(c('Image.react'),{className:"_1x8t"+(!n?' '+"hidden_elem":''),src:n}),c('React').createElement(c('Timestamp.react'),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))),this.$NotificationBeeperItemContents10()))};f.exports=k}),null);
__d('NotificationBeeperItem.react',['cx','CSSFade','NotificationBeeperConst','NotificationBeeperItemContents.react','NotificationBeeperItemRenderersList','React','ReactDOM','Style','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i,j,k=c('NotificationBeeperConst').FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={fadedIn:false,hidden:false},this.$NotificationBeeperItem3=function(){this.setState({hidden:true})}.bind(this),n}l.prototype.componentDidMount=function(){'use strict';c('setTimeoutAcrossTransitions')(function(){this.setState({fadedIn:true})}.bind(this),50);this.props.onInserted(this.props.beep)};l.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeperItem1)this.$NotificationBeeperItem1.cancel();};l.prototype.render=function(){'use strict';var m=this.props.beep,n=this.$NotificationBeeperItem4(m.beepRenderer);return c('React').createElement('li',{className:this.state.hidden?"hidden_elem":'',ref:function(o){return this.$NotificationBeeperItem2=o}.bind(this),'data-gt':m.tracking},c('React').createElement(n,{beep:m,className:"_3sod"+(this.state.fadedIn?' '+"_3soe":''),onHide:this.$NotificationBeeperItem3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};l.prototype.componentDidUpdate=function(m,n,o){'use strict';if(!this.$NotificationBeeperItem2)return;var p=c('ReactDOM').findDOMNode(this.$NotificationBeeperItem2);if(!p)return;if(this.props.fadingOut){this.$NotificationBeeperItem1=c('CSSFade').hide(p,{callback:this.$NotificationBeeperItem3,duration:k});p.style.transitionDuration='0ms'}else{if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.cancel();this.$NotificationBeeperItem1=undefined}c('Style').set(p,'opacity','1')}};l.prototype.$NotificationBeeperItem4=function(m){'use strict';if(m&&m in c('NotificationBeeperItemRenderersList'))return c('NotificationBeeperItemRenderersList')[m];return c('NotificationBeeperItemContents.react')};f.exports=l}),null);
__d('NotificationImpressions',['AsyncSignal','NotificationTokens','URI'],(function a(b,c,d,e,f,g){var h='/ajax/notifications/impression.php';function i(j,k){var l={ref:k};c('NotificationTokens').untokenizeIDs(j).forEach(function(m,n){l['alert_ids['+n+']']=m});new (c('AsyncSignal'))(new (c('URI'))(h).getQualifiedURI().toString(),l).send()}f.exports={log:i}}),null);
__d('NotificationSound',['Sound'],(function a(b,c,d,e,f,g){var h=5000;c('Sound').init(['audio/mpeg']);function i(j){this._soundPath=j;this._lastPlayed=0}Object.assign(i.prototype,{play:function j(k){if(!this._soundPath)return;var l=Date.now();if(l-this._lastPlayed<h)return;this._lastPlayed=l;c('Sound').playOnlyIfImmediate(this._soundPath,k)}});f.exports=i}),null);
__d('NotificationBeeper.react',['cx','Arbiter','ChannelConstants','NotificationBeepData','NotificationBeeperConst','NotificationBeeperItem.react','NotificationBeeperPinnedPostLoader','NotificationConstants','NotificationImpressions','NotificationSound','NotificationUpdates','NotificationUserActions','NotifTestIDs','React','SubscriptionsHandler','WorkFocusModeController','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g,h){var i,j,k=c('WorkFocusModeController').WorkFocusMode,l=c('NotificationBeeperConst').ACTIVE_DELAY_LONG,m=c('NotificationBeeperConst').BeepStates,n=c('NotificationBeeperConst').FADE_OUT_LENGTH,o=c('NotificationBeeperConst').IDLE_DELAY,p=c('NotificationBeeperPinnedPostLoader').payload,q='beeper',r=c('NotificationConstants').PayloadSourceType,s=r.LIVE_SEND,t=r.OTHER_APPLICATION,u=r.CLIENT;i=babelHelpers.inherits(v,c('React').Component);j=i&&i.prototype;function v(){var w,x;'use strict';for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return x=(w=j.constructor).call.apply(w,[this].concat(z)),this.state={soundEnabled:this.props.soundEnabled,hovering:false,fading:false,beeps:{}},this.onMouseEnter=function(){this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);var ba=[],ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state!=m.PENDING){ba.push(da)}else ca[da].state=m.RENDERED;});c('NotificationUserActions').markNotificationsAsSeen(ba);this.setState({hovering:true,fading:false,beeps:ca})}.bind(this),this.onMouseLeave=function(){this.$NotificationBeeper5(l);this.setState({hovering:false})}.bind(this),this.$NotificationBeeper6=function(ba){if(!this.state.hovering)this.$NotificationBeeper5();if(this.state.soundEnabled&&ba.sound){if(!this.$NotificationBeeper3)this.$NotificationBeeper3=new (c('NotificationSound'))(this.props.soundPath);this.$NotificationBeeper3.play(ba.beepID)}if(this.props.shouldLogImpressions)c('NotificationImpressions').log([ba.notificationID],q);}.bind(this),this.onReadyToHide=function(ba,ca){this.state.beeps[ba].state=m.READY_TO_HIDE;if(!this.$NotificationBeeper2)this.$NotificationBeeper5(ca);}.bind(this),this.$NotificationBeeper8=function(ba){this.state.beeps[ba].state=m.RENDERED}.bind(this),this.$NotificationBeeper7=function(){this.$NotificationBeeper2=null;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==m.READY_TO_HIDE)ba[ca].state=m.FADING_OUT;});this.setState({fading:true});c('setTimeoutAcrossTransitions')(c('shield')(this.$NotificationBeeper9,this),n)}.bind(this),this.$NotificationBeeper9=function(){if(!this.state.fading)return;var ba=this.state.beeps;Object.keys(ba).forEach(function(ca){if(ba[ca].state==m.FADING_OUT)delete ba[ca];});this.setState({fading:false,beeps:ba});c('setTimeoutAcrossTransitions')(function(){var ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state==m.PENDING)ca[da].state=m.RENDERED;});this.setState({beeps:ca})}.bind(this))}.bind(this),x}v.prototype.componentWillMount=function(){'use strict';this.$NotificationBeeper1=new (c('SubscriptionsHandler'))();this.$NotificationBeeper1.addSubscriptions(c('NotificationUpdates').subscribe('update-notifications',function(w,x){if(x.payloadsource===s||x.payloadsource===t||x.payloadsource===u){var y=x.nodes;if(y&&y.length){if(k&&k.currentViewerInFocusMode())return;this.handleBeepChanges(this.$NotificationBeeper4(y))}}}.bind(this)),c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('notif_sound_pref_changed'),function(w,x){this.setState({soundEnabled:x.obj.enabled})}.bind(this)));c('Arbiter').inform('NotificationBeeper/mounted',null,c('Arbiter').BEHAVIOR_PERSISTENT);if(p)this.handleBeepChanges(this.$NotificationBeeper4(p.nodes));};v.prototype.componentWillUnmount=function(){'use strict';if(this.$NotificationBeeper1)this.$NotificationBeeper1.release();this.$NotificationBeeper1=null};v.prototype.$NotificationBeeper5=function(w){'use strict';this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);this.$NotificationBeeper2=c('setTimeoutAcrossTransitions')(c('shield')(this.$NotificationBeeper7,this),w==null?o:w)};v.prototype.handleBeepChanges=function(w){'use strict';var x=this.state.fading?m.PENDING:m.RENDERED,y=this.state.beeps,z=false;Object.keys(w).reverse().forEach(function(aa){var ba={state:x,data:w[aa]};if(!y[aa]||y[aa].data.beepID!=ba.data.beepID){if(y[aa]){z=true;if(ba.data.beepUpdatesOnTop)delete y[aa];}y[aa]=ba}});if(z)this.$NotificationBeeper5();this.forceUpdate()};v.prototype.render=function(){'use strict';var w=this.state.beeps,x=[];Object.keys(w).reverse().forEach(function(aa){var ba=w[aa];if(ba.state==m.PENDING)return;x.push(c('React').createElement(c('NotificationBeeperItem.react'),{key:aa,fadingOut:this.state.fading&&ba.state==m.FADING_OUT,beep:ba.data,onInserted:this.$NotificationBeeper6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$NotificationBeeper8}))},this);var y=x.length>0,z=(!y?"hidden_elem":'')+(' '+"_50d1");return c('React').createElement('ul',{ref:'container',className:z,'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},x)};v.prototype.$NotificationBeeper4=function(w){'use strict';return w.reduce(function(x,y){var z=c('NotificationBeepData').fromNotification(y);if(z)x[y.alert_id]=z;return x},{})};f.exports=v}),null);
__d('NotificationBeeperContainer',['NotificationBeeper.react','React','ReactDOM'],(function a(b,c,d,e,f,g){var h={renderBeeper:function i(j,k){c('ReactDOM').render(c('React').createElement(c('NotificationBeeper.react'),j),k)}};f.exports=h}),null);
__d('LiveVideoBeeperItemContents.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('LiveVideoBeeperItemContentsImpl.react').__setRef('LiveVideoBeeperItemContents.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,{ref:'itemContents'}))})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('SyncRequestAcceptedMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return c('React').createElement('div',null,h._("{receiver} accepted your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]))}else return c('React').createElement('div',null,h._("You accepted an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]));};function m(){j.apply(this,arguments)}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m}),null);
__d('SyncRequestCanceledMessage.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){if(this.props.isSender){return c('React').createElement('div',null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]))}else return c('React').createElement('div',null,i._("{sender} canceled an invitation to play {app name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]));};function m(){j.apply(this,arguments)}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m}),null);
__d('SyncRequestExpiredMessage.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,h._("{receiver} missed your invite to play {app name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]))}else return c('React').createElement('div',null,h._("You missed an invite from {sender} to play {app name}.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]));};function m(){'use strict';j.apply(this,arguments)}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m}),null);
__d('SyncRequestRejectedMessage.react',['cx','fbt','AsyncRequest','Link.react','React','URI'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$SyncRequestRejectedMessage1=function(){var s=new (c('URI'))('/games/block_app/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,source:'sync_request'});t.send()}.bind(this),this.$SyncRequestRejectedMessage2=function(){var s=new (c('URI'))('/games/block_user/'),t=new (c('AsyncRequest'))().setURI(s);t.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});t.send()}.bind(this),o}m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,i._("{receiver} declined your invite to play {app_name}.",[i.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiver.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]))}else return c('React').createElement('div',null,i._("You declined an invite from {sender} to play {app_name}.",[i.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.sender.name)),i.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.app.name))]),c('React').createElement('div',{className:"_13n7"},c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage1},i._("Block {app}",[i.param('app',this.props.app.name)]))),c('React').createElement('div',null,c('React').createElement(c('Link.react'),{onClick:this.$SyncRequestRejectedMessage2},i._("Block requests from {sender}",[i.param('sender',this.props.sender.name)])))));};m.propTypes={requestId:l.string.isRequired,app:l.object.isRequired,isSender:l.bool.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired};f.exports=m}),null);
__d('SyncRequestTimer.react',['fbt','React'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;function l(n){if(n){n=Math.ceil(n);var o=n%60;if(o<10)o='0'+o;var p=Math.floor(n/60);return p+':'+o}else return "0:00";}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,h._("({time_remaining} remaining)",[h.param('time_remaining',l(this.props.timeRemaining))]))}else return c('React').createElement('div',null,h._("You have {time_remaining} to accept.",[h.param('time_remaining',l(this.props.timeRemaining))]));};function m(){'use strict';i.apply(this,arguments)}m.propTypes={timeRemaining:k.number.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired};f.exports=m}),null);
__d('SyncRequestTitle.react',['fbt','cx','React'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';if(this.props.isSender){return c('React').createElement('div',null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param('receiver',c('React').createElement('span',{className:"_dg4"},this.props.receiverName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]))}else return c('React').createElement('div',null,h._("{sender} wants to play {app_name} with you, right now.",[h.param('sender',c('React').createElement('span',{className:"_dg4"},this.props.senderName)),h.param('app_name',c('React').createElement('span',{className:"_dg5"},this.props.appName))]));};function m(){'use strict';j.apply(this,arguments)}m.propTypes={appName:l.string.isRequired,isSender:l.bool.isRequired,receiverName:l.string.isRequired,senderName:l.string.isRequired};f.exports=m}),null);
__d("XSyncRequestSubmitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}})}),null);
__d('SyncRequest.react',['cx','fbt','Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','getObjectValues'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id},this.$SyncRequest1=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').ACCEPTED);var s=window.open(this.props.app.uri);if(s)s.focus();}.bind(this),this.$SyncRequest2=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').REJECTED)}.bind(this),this.$SyncRequest3=function(){this.$SyncRequest4(c('SyncRequestStatusEnum').CANCELED)}.bind(this),this.$SyncRequest4=function(s){this.setState({status:s,buttonsDisabled:true});var t=c('XSyncRequestSubmitController').getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',s).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(u){this.setState({status:s})}.bind(this)).setErrorHandler(function(u){this.setState({buttonsDisabled:false})}.bind(this)).send()}.bind(this),o}m.prototype.componentWillMount=function(){'use strict';if(this.props.status===c('SyncRequestStatusEnum').PENDING){var n=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('sync_request_updated'),function(q,r){r=r.obj;if(r.id.toString()!==this.props.requestId)return;this.setState({status:r.status})}.bind(this));this.setState({statusEvent:n})}var o=null;if(this.props.status===c('SyncRequestStatusEnum').PENDING){var p=function q(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var r={counter:null,time_remaining:0};if(this.state.status===c('SyncRequestStatusEnum').PENDING)r.status=c('SyncRequestStatusEnum').EXPIRED;this.setState(r)}};o=setInterval(p.bind(this),1000)}this.setState({time_remaining:this.props.timeRemaining,counter:o})};m.prototype.componentWillUnmount=function(){'use strict';if(this.state.counter)clearInterval(this.state.counter);c('Arbiter').unsubscribe(this.state.statusEvent)};m.prototype.componentDidUpdate=function(n,o){'use strict';if(this.props.status!=c('SyncRequestStatusEnum').PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,o.status);};m.prototype.render=function(){'use strict';var n;switch(this.state.status){case c('SyncRequestStatusEnum').PENDING:var o;if(!this.state.viewerIsSender){o=[c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.$SyncRequest1,disabled:this.state.buttonsDisabled,label:i._("Accept")}),c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest2,disabled:this.state.buttonsDisabled,label:i._("Decline")})]}else o=c('React').createElement(c('XUIButton.react'),{use:'default',onClick:this.$SyncRequest3,disabled:this.state.buttonsDisabled,label:i._("Cancel")});n=c('React').createElement('div',null,c('React').createElement('div',{className:"_372m"},c('React').createElement(c('SyncRequestTitle.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),c('React').createElement('div',{className:"_372n"},c('React').createElement(c('SyncRequestTimer.react'),{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),c('React').createElement('div',{className:"_372o"},o));break;case c('SyncRequestStatusEnum').ACCEPTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestAcceptedMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').REJECTED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestRejectedMessage.react'),{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case c('SyncRequestStatusEnum').EXPIRED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestExpiredMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case c('SyncRequestStatusEnum').CANCELED:n=c('React').createElement('div',{className:"_372p mvs"},c('React').createElement(c('SyncRequestCanceledMessage.react'),{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return c('React').createElement('div',{className:"_372q"},n)};m.propTypes={app:l.object.isRequired,creationTime:l.number.isRequired,requestId:l.string.isRequired,receiver:l.object.isRequired,sender:l.object.isRequired,status:l.oneOf(c('getObjectValues')(c('SyncRequestStatusEnum'))).isRequired,timeout:l.number.isRequired,timeRemaining:l.number.isRequired,viewerId:l.number.isRequired,onStatusUpdate:l.func};f.exports=m}),null);
__d("ConversationNubAddTabSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d('once',[],(function a(b,c,d,e,f,g){'use strict';function h(j){var k=i(j);for(var l in j)if(Object.prototype.hasOwnProperty.call(j,l))k[l]=j[l];return k}function i(j){var k=j,l=void 0,m=function n(){if(k){l=k.apply(this,arguments);k=null}return l};return m}f.exports=h}),null);
__d('ConversationNotificationListeners',['Bootloader','ConversationNubAddTabSource','NotificationConstants','NotificationUpdates','PinnedConversationNubsConfig','once'],(function a(b,c,d,e,f,g){'use strict';var h=c('NotificationConstants').PayloadSourceType,i=h.LIVE_SEND,j=h.OTHER_APPLICATION,k=c('once')(function(){var l='update-notifications';c('NotificationUpdates').subscribe(l,function(m,n){var o;if(c('PinnedConversationNubsConfig').sharedNotificationsReadStateEnabled&&n.payloadsource===i&&n.readState&&Object.keys(n.readState).length){c('Bootloader').loadModules(["NotificationConversationController"],function(p){p.handleNotificationsRead(n.readState)},'ConversationNotificationListeners')}else if(n.payloadsource===i||n.payloadsource===j)(function(){var p=n.nodes,q=p&&p.length&&p.some(function(r){return r.pinnedConvoConfig});if(q)c('Bootloader').loadModules(["NotificationConversationController"],function(r){r.handleNewNotifications(p,c('ConversationNubAddTabSource').NOTIFICATION)},'ConversationNotificationListeners');})();})});f.exports={initialize:function l(){k()}}}),null);
__d('SidebarAppTickerResizer',['csx','cx','Animation','Arbiter','AsyncRequest','ChatSidebarActions','ChatSidebarStore','ChatSidebarVisibility','CSS','Event','Parent','SidebarType','SimpleDrag','TickerController','$','debounce','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h,i){var j=1e-7,k=1,l=85,m=171,n=165,o=300,p=46,q=90,r=82,s=150;function t(u,v,w,x,y,z){'use strict';this.$SidebarAppTickerResizer1=c('$')('pagelet_ticker');this.$SidebarAppTickerResizer2=c('$')('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer3=c('Parent').bySelector(this.$SidebarAppTickerResizer1,"._51x_")||this.$SidebarAppTickerResizer1.parentNode;this.$SidebarAppTickerResizer4=x;this.$SidebarAppTickerResizer5=y;var aa=parseInt(w,10);if(!isNaN(aa)){if(aa>l)if(aa!=this.$SidebarAppTickerResizer6())w=this.$SidebarAppTickerResizer6()+'px';this.$SidebarAppTickerResizer7(aa)}this.$SidebarAppTickerResizer2.style.height=w;this.$SidebarAppTickerResizer8(u,v);if(w===null)c('Arbiter').subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer9.bind(this));if(!x){this.$SidebarAppTickerResizer10();c('CSS').hide(u)}else{this.$SidebarAppTickerResizer11();this.$SidebarAppTickerResizer1.style.height=Math.round(z/100*this.$SidebarAppTickerResizer12)+'px'}c('Arbiter').subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer10.bind(this));c('Arbiter').subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer13.bind(this));c('Arbiter').subscribe('sidebar/visibility',function(ba,ca){if(ca)this.$SidebarAppTickerResizer14();}.bind(this));this.$SidebarAppTickerResizer15=c('debounce')(this.$SidebarAppTickerResizer9.bind(this),200);c('Event').listen(window,'resize',this.$SidebarAppTickerResizer15);c('Arbiter').inform('Ticker/resized')}t.prototype.$SidebarAppTickerResizer14=function(){'use strict';var u=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height)*100/this.$SidebarAppTickerResizer12);if(u<=j)return;c('TickerController').show(this.$SidebarAppTickerResizer1)};t.prototype.$SidebarAppTickerResizer9=function(u){'use strict';c('queryThenMutateDOM')(function(){this.$SidebarAppTickerResizer11()}.bind(this),function(){var v=Math.round(parseFloat(this.$SidebarAppTickerResizer1.style.height)*100/this.$SidebarAppTickerResizer12);if(v>Math.round(this.$SidebarAppTickerResizer16())||this.$SidebarAppTickerResizer17&&this.$SidebarAppTickerResizer17>k){var w=this.$SidebarAppTickerResizer17/this.$SidebarAppTickerResizer12*100,x=this.$SidebarAppTickerResizer18(0,this.$SidebarAppTickerResizer16()-w);if(!(u&&u.type==='resize'))this.$SidebarAppTickerResizer19(x);c('ChatSidebarVisibility').shouldShowSidebar(null,function(y,z){c('ChatSidebarActions').show(y?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST)})}}.bind(this))};t.prototype.$SidebarAppTickerResizer16=function(){'use strict';if(!this.$SidebarAppTickerResizer4)return 0;if(c('ChatSidebarStore').getVisibleType()!==c('SidebarType').SIDEBAR)return q;return Math.min(q,(this.$SidebarAppTickerResizer12-this.$SidebarAppTickerResizer20-r)*100/this.$SidebarAppTickerResizer12)};t.prototype.$SidebarAppTickerResizer8=function(u,v){'use strict';var w=new (c('SimpleDrag'))(u);w.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));w.subscribe(['update','end'],this.$SidebarAppTickerResizer22.bind(this));var x=new (c('SimpleDrag'))(v);x.subscribe('start',this.$SidebarAppTickerResizer21.bind(this));x.subscribe('update',this.$SidebarAppTickerResizer23.bind(this));x.subscribe('end',this.$SidebarAppTickerResizer24.bind(this))};t.prototype.$SidebarAppTickerResizer21=function(u,event){'use strict';this.$SidebarAppTickerResizer25=event.clientY;this.$SidebarAppTickerResizer11();this.$SidebarAppTickerResizer26()};t.prototype.$SidebarAppTickerResizer11=function(){'use strict';this.$SidebarAppTickerResizer20=this.$SidebarAppTickerResizer2.offsetTop;this.$SidebarAppTickerResizer27=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizer12=this.$SidebarAppTickerResizer3.offsetHeight;this.$SidebarAppTickerResizer17=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer17};t.prototype.$SidebarAppTickerResizer26=function(){'use strict';c('CSS').addClass(this.$SidebarAppTickerResizer3,"_4vfq")};t.prototype.$SidebarAppTickerResizer29=function(){'use strict';c('CSS').removeClass(this.$SidebarAppTickerResizer3,"_4vfq")};t.prototype.$SidebarAppTickerResizer22=function(u,event){'use strict';var v=this.$SidebarAppTickerResizer17/this.$SidebarAppTickerResizer12*100,w=this.$SidebarAppTickerResizer18(event.clientY-this.$SidebarAppTickerResizer25,this.$SidebarAppTickerResizer16()-v);if(u=='end'){this.$SidebarAppTickerResizer29();this.$SidebarAppTickerResizer19(w)}c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST)})};t.prototype.$SidebarAppTickerResizer23=function(u,event){'use strict';var v=-this.$SidebarAppTickerResizer17,w=this.$SidebarAppTickerResizer6()-this.$SidebarAppTickerResizer17,x=this.$SidebarAppTickerResizer30(event.clientY-this.$SidebarAppTickerResizer25,v,w);this.$SidebarAppTickerResizer18(-x,this.$SidebarAppTickerResizer16());this.$SidebarAppTickerResizer28=this.$SidebarAppTickerResizer17+x;this.$SidebarAppTickerResizer28=Math.max(k,this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer2.style.height=this.$SidebarAppTickerResizer28+'px'};t.prototype.$SidebarAppTickerResizer24=function(u,event){'use strict';var v=this.$SidebarAppTickerResizer28,w=this.$SidebarAppTickerResizer31(this.$SidebarAppTickerResizer28);this.$SidebarAppTickerResizer7(w);var x=this.$SidebarAppTickerResizer18(this.$SidebarAppTickerResizer17-w,this.$SidebarAppTickerResizer16());if(this.$SidebarAppTickerResizer17!=w){this.$SidebarAppTickerResizer32(w);this.$SidebarAppTickerResizer19(x)}new (c('Animation'))(this.$SidebarAppTickerResizer2).from('height',v).to('height',w).duration(o).go()};t.prototype.$SidebarAppTickerResizer7=function(u){'use strict';if(!this.$SidebarAppTickerResizer5)return;var v="_3qrt",w=document.getElementsByClassName(v),x='';if(u==this.$SidebarAppTickerResizer33()){x='inline'}else x='';for(var y=0;y<w.length;y++)w[y].style.display=x;};t.prototype.$SidebarAppTickerResizer18=function(u,v){'use strict';var w=this.$SidebarAppTickerResizer27+u,x=w/this.$SidebarAppTickerResizer12*100;x=Math.max(j,Math.min(v,x));this.$SidebarAppTickerResizer1.style.height=w+'px';if(x!=j){c('CSS').removeClass(this.$SidebarAppTickerResizer1,'hidden_elem');this.$SidebarAppTickerResizer14()}return x};t.prototype.$SidebarAppTickerResizer31=function(u){'use strict';var v=this.$SidebarAppTickerResizer33(),w=this.$SidebarAppTickerResizer6();return u<w-p?u<v-p?k:v:w};t.prototype.$SidebarAppTickerResizer33=function(){'use strict';return l};t.prototype.$SidebarAppTickerResizer6=function(){'use strict';if(this.$SidebarAppTickerResizer5){return n}else return m;};t.prototype.$SidebarAppTickerResizer34=function(u){'use strict';var v=this.$SidebarAppTickerResizer6();return u<0?k:u>v?v:u};t.prototype.$SidebarAppTickerResizer30=function(u,v,w){'use strict';return u<v?v:u>w?w:u};t.prototype.$SidebarAppTickerResizer19=function(u){'use strict';new (c('AsyncRequest'))('/ajax/feed/ticker/resize').setData({height:''+u}).setMethod('POST').send();c('Arbiter').inform('Ticker/resized')};t.prototype.$SidebarAppTickerResizer32=function(u){'use strict';new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+u}).setMethod('POST').send()};t.prototype.$SidebarAppTickerResizer35=function(u){'use strict';var v=this.$SidebarAppTickerResizer27,w=this.$SidebarAppTickerResizer12*u/100;new (c('Animation'))(this.$SidebarAppTickerResizer1).from('height',v).to('height',w).duration(s).ondone(function(){this.$SidebarAppTickerResizer1.style.height=w+'px';this.$SidebarAppTickerResizer19(u===0?'0.0':u);c('ChatSidebarVisibility').shouldShowSidebar(null,function(x,y){c('ChatSidebarActions').show(x?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST)})}.bind(this)).go()};t.prototype.$SidebarAppTickerResizer10=function(){'use strict';this.$SidebarAppTickerResizer11();this.$SidebarAppTickerResizer35(0)};t.prototype.$SidebarAppTickerResizer13=function(){'use strict';this.$SidebarAppTickerResizer1.style.height='40px';c('TickerController').show(this.$SidebarAppTickerResizer1,function(){this.$SidebarAppTickerResizer11();var u=(this.$SidebarAppTickerResizer12-this.$SidebarAppTickerResizer20-r-this.$SidebarAppTickerResizer17)*50/this.$SidebarAppTickerResizer12;this.$SidebarAppTickerResizer35(u)}.bind(this))};f.exports=t}),null);
__d('FantaTabMainPlaceholder.react',['cx','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(){return c('React').createElement('div',{className:"_59v1"},c('React').createElement('div',{className:"_5qi9"+(' '+"_5qib")},c('React').createElement('div',{className:"_3_9e"+(' '+"_s0f")+(' '+"_50mz")+(' '+"_50m_")+(' '+"fbNub")+(' '+"_50-v")+(' '+"opened")+(' '+"_27_3")},c('React').createElement('div',{className:'fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent'},c('React').createElement('div',{className:'fbNubFlyoutOuter'},c('React').createElement('div',{className:'fbNubFlyoutInner'},c('React').createElement('div',{className:"_5-kq"},c('React').createElement(c('XUISpinner.react'),null))))))))};f.exports=i}),null);
__d('FantaTabsSlimApp',['BootloadOnRender.react','ChatPerfInstrumentation','FantaTabMainPlaceholder.react','FantaTabsAppBase','JSResource','LazyComponent.react','Map','React','ReactDOM','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0;h=babelHelpers.inherits(k,c('FantaTabsAppBase'));i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r)})})}else this.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaMessageActions',function(s){c('setImmediate')(function(){s.receivedNewMessage(q,r)})})});}.bind(this),m}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1){l()}else this.$FantaTabsSlimApp2(l);};k.prototype.getViewComponent=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{loadDataOnMount:false}),loader:c('JSResource')('FantaMercuryTabsWithMain.react').__setRef('FantaTabsSlimApp'),placeholder:c('React').createElement(c('FantaTabMainPlaceholder.react'),null)})};k.prototype.initializeFantaData=function(l){e(['FantaCookieUtil','MercuryThreadInformer','PresenceState'],function(m,n,o){o.registerStateLoader(function(p){var q,r=this;if(this.$FantaTabsSlimApp1){c('ifRequired')('FantaTabActions',function(s){c('ifRequired')('FantaAppStore',function(t){s.loadFromData(m.convertCookieData(p,t.getState().tabGroup,l))})})}else (function(){var s=m.convertCookieData(p,null,l);if(s.tabs.length>0)r.$FantaTabsSlimApp2(function(){c('ifRequired')('FantaTabActions',function(t){t.loadFromData(s)})});})();}.bind(this));o.doSync();n.get().subscribe('threads-updated',function(p,q){c('ifRequired')('FantaGetMessageActions',function(r){Object.keys(q).forEach(function(s){c('setImmediate')(function(){r.refreshThread(s)})})})});c('ChatPerfInstrumentation').logInitData()}.bind(this))};k.prototype.$FantaTabsSlimApp2=function(l){c('ifRequired')('FantaAppStore',function(m){l()},function(){e(['FantaAppStore','FantaCookieUtil','FantaMessageActions','FantaTabActions','FantaTabViewportManager','PresenceState'],function(m,n,o,p,q,r){r.registerStateStorer(function(s){var t=m.getState().tabGroup;if(!j||j&&!j.equals(t)){j=t;return n.createCookieData(t,s)}else return s;});c('ReactDOM').render(this.getViewComponent(),this.tabsElem);q.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l()}.bind(this))}.bind(this))};k.prototype.initializeFantaUI=function(){e(['FantaMercuryThreadEventsBootloaded','FantaMessageActions','FantaTabActions','FantaTabViewportManager','FBRTCMessageHandler','MercuryBrowserAlerts'],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c('ChatPerfInstrumentation').logInitUI();c('ChatPerfInstrumentation').logDisplayDone()}.bind(this))};f.exports=new k()}),null);
__d('NotificationJewelReminderLoader',[],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){i.load().done(function(k){k.init(j)})}}}),null);
__d('SyncRequestNotificationBeeperItemContents.react',['cx','Animation','Image.react','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$SyncRequestNotificationBeeperItemContents1=function(){c('NotificationUserActions').markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide()}.bind(this),this.$SyncRequestNotificationBeeperItemContents2=function(){this.$SyncRequestNotificationBeeperItemContents1();this.props.onHide()}.bind(this),this.$SyncRequestNotificationBeeperItemContents3=function(){new (c('Animation'))(c('ReactDOM').findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go()}.bind(this),this.onRequestStatusUpdate=function(q,r){if(q!=c('SyncRequestStatusEnum').PENDING&&r==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);}.bind(this),m}k.prototype.componentDidMount=function(){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.componentDidUpdate=function(l){'use strict';if(this.props.beep.rendererData.status!=c('SyncRequestStatusEnum').PENDING&&l.beep.rendererData.status==c('SyncRequestStatusEnum').PENDING)this.props.onReadyToHide(this.props.beep.notificationID);};k.prototype.render=function(){'use strict';var l=this.props.beep,m=l.rendererData;return c('React').createElement('div',{ref:'inner',className:this.props.className},c('React').createElement(c('NotificationBeeperItemCloseButton.react'),{onClick:this.$SyncRequestNotificationBeeperItemContents2}),c('React').createElement(c('ImageBlock.react'),{className:"_3soj"},c('React').createElement(c('Image.react'),{src:l.thumbnail?l.thumbnail.uri:l.actors[0].profile_picture.uri,className:"_3sok"}),c('React').createElement('div',{className:"_3sol"},c('React').createElement(c('SyncRequest.react'),{app:m.app,creationTime:m.creation_time,requestId:m.id.toString(),receiver:m.receiver,sender:m.sender,status:m.status,timeout:m.timeout,timeRemaining:m.time_remaining,viewerId:m.receiver.id,onStatusUpdate:this.onRequestStatusUpdate}))))};f.exports=k}),null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],(function a(b,c,d,e,f,g){function h(i){this.eventName=i;this.subs=null;this.handler=c('emptyFunction');this.shutdownHandler=null;this.registered=false;this.appId=1}Object.assign(h,{getAppMessageType:function i(j,k){return 'live_message/'+j+':'+k},route:function i(j){var k=function l(m){var n=h.getAppMessageType(j.app_id,j.event_name);c('Arbiter').inform(n,m,c('Arbiter').BEHAVIOR_PERSISTENT)};k(j.response)}});Object.assign(h.prototype,{setAppId:function i(j){this.appId=j;return this},setHandler:function i(j){this.handler=j;this._dirty();return this},setRestartHandler:c('emptyFunction'),setShutdownHandler:function i(j){this.shutdownHandler=c('shield')(j);this._dirty();return this},_dirty:function i(){if(this.registered){this.unregister();this.register()}},register:function i(){var j=function(l,m){return this.handler(m)}.bind(this),k=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c('Arbiter').subscribe(k,j);if(this.shutdownHandler)this.subs.shut=c('Arbiter').subscribe(c('ChannelConstants').ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this},unregister:function i(){if(!this.subs)return this;for(var j in this.subs)if(this.subs[j])this.subs[j].unsubscribe();this.subs=null;this.registered=false;return this}});f.exports=h}),null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],(function a(b,c,d,e,f,g){c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('app_msg'),function(h,i){c('LiveMessageReceiver').route(i.obj)})}),null);