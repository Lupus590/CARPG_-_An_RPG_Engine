if (self.CavalryLogger) { CavalryLogger.start_js(["pC9he"]); }

__d("PagesPlatformNativeBookingGraphQLStatus",[],(function a(b,c,d,e,f,g){f.exports={CANCELLED:"CANCELLED",CONFIRMED:"CONFIRMED",DECLINED:"DECLINED",PENDING:"PENDING",REQUESTED:"REQUESTED",INSTANT_BOOKING_PENDING:"INSTANT_BOOKING_PENDING"}}),null);
__d('PagesMessengerConfirmCloseThreadDialog.react',['fbt','React','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes,l=300;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){'use strict';j.constructor.call(this,n)}m.prototype.render=function(){'use strict';return c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,shown:this.props.shown,width:l},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},h._("Close Message Thread")),c('React').createElement(c('XUIDialogBody.react'),null,h._("You haven't sent your message yet. Do you want to leave without sending it?")),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:h._("Continue Writing"),onClick:this.props.onCancel,use:'default'}),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:h._("Leave This Thread"),onClick:this.props.onConfirm,use:'confirm'})))};m.propTypes={onCancel:k.func.isRequired,onConfirm:k.func.isRequired,shown:k.bool.isRequired};f.exports=m}),null);
__d('PagesMessengerSimpleMultilineComposer.react',['cx','fbt','MercuryMessageObject','MercurySourceType','MercuryPageMessageActions','PagesEventObserver','PagesEventType','PagesMessengerTextInput.react','React','ReactDOM','XUIButton.react','isEmpty'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){'use strict';k.constructor.call(this,n);this.state={value:''};this.$PagesMessengerSimpleMultilineComposer1=c('MercuryPageMessageActions').getForFBID(this.props.sourceID);this.$PagesMessengerSimpleMultilineComposer2=c('MercuryMessageObject').getForFBID(this.props.sourceID)}m.prototype.hasInput=function(){'use strict';return !!this.state.value};m.prototype.clearInput=function(){'use strict';this.setState({value:''})};m.prototype.focusInput=function(){'use strict';c('ReactDOM').findDOMNode(this.refs.textInput).focus()};m.prototype.getConfirmButtonLabel=function(){'use strict';return i._("Send")};m.prototype.getTextInputPlaceholder=function(){'use strict';return i._("Write a message")};m.prototype.onTextInputChanged=function(event){'use strict';this.setState({value:event.target.value})};m.prototype.processSend=function(event){'use strict';var n=this.refs.textInput.props.value;if(!n)return;var o=this.$PagesMessengerSimpleMultilineComposer2.constructUserGeneratedMessageObject(n,c('MercurySourceType').TITAN_WEB,this.props.threadID,null,null);c('PagesEventObserver').logData_DEPRECATED({page_id:this.props.sourceID,event_name:c('PagesEventType').MESSAGES_DIALOG_SEND,thread_id:this.props.destinationID},null);event.preventDefault();if(this.props.allowSend()){this.$PagesMessengerSimpleMultilineComposer1.send(o);this.setState({value:''});this.props.afterSend()}};m.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_1yn"},c('React').createElement('div',null,c('React').createElement(c('PagesMessengerTextInput.react'),{className:"_1yq"+(' '+"_32wh")+(c('isEmpty')(this.state.value)?' '+"_1yx":''),placeholder:this.getTextInputPlaceholder(),onChange:this.onTextInputChanged.bind(this),onKeyUp:this.props.onKeyUp,value:this.state.value,ref:'textInput'})),c('React').createElement('hr',{className:"_1yy"}),c('React').createElement('div',{className:"_1yz"},c('React').createElement('div',{className:"_1y-"},c('React').createElement(c('XUIButton.react'),{use:'confirm',onClick:this.processSend.bind(this),label:this.getConfirmButtonLabel()}))))};m.propTypes={afterSend:l.func.isRequired,allowSend:l.func.isRequired,destinationID:l.string.isRequired,onKeyUp:l.func.isRequired,sourceID:l.string.isRequired,threadID:l.string.isRequired};f.exports=m}),null);
__d("XPagesMessagingFindPageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/search\/page_name_typeahead\/",{page_id:{type:"String",required:true},value:{type:"String"}})}),null);
__d('PagesMessengerNewThreadDialog.react',['cx','fbt','Event','Keys','MercuryIDs','MercuryParticipants','PagesEventObserver','PagesEventType','PagesMessengerConfirmCloseThreadDialog.react','PagesMessengerSimpleMultilineComposer.react','React','WebAsyncSearchSource','XPagesMessagingFindPageController','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','XUITokenizerRichToken.react','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=445,n=326;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){'use strict';k.constructor.call(this,p);this.state={typeaheadErrorMessage:null,initDialog:false,pageName:'...',query:'',selectedItem:null,showCloseConfirmationDialog:false};this.$PagesMessengerNewThreadDialog1=false;this.$PagesMessengerNewThreadDialog2=false;var q=c('XPagesMessagingFindPageController').getURIBuilder().setString('page_id',this.props.pageID).getURI(),r={uri:q};this.$PagesMessengerNewThreadDialog3=new (c('WebAsyncSearchSource'))({bootstrapRequests:[r],queryRequests:[r],getAllForEmptyQuery:true})}o.prototype.$PagesMessengerNewThreadDialog4=function(p){'use strict';c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_CLOSE_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID,close_state:p})};o.prototype.$PagesMessengerNewThreadDialog5=function(){'use strict';if(this.refs.newThreadComposer.hasInput()){this.setState({showCloseConfirmationDialog:true});this.$PagesMessengerNewThreadDialog4('has_message')}else{this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('no_message')}};o.prototype.$PagesMessengerNewThreadDialog6=function(){'use strict';this.refs.newThreadComposer.clearInput();this.setState({query:'',selectedItem:null,showCloseConfirmationDialog:false})};o.prototype.$PagesMessengerNewThreadDialog7=function(){'use strict';this.$PagesMessengerNewThreadDialog6();this.props.onHide();this.$PagesMessengerNewThreadDialog4('confirm_close')};o.prototype.$PagesMessengerNewThreadDialog8=function(){'use strict';this.setState({showCloseConfirmationDialog:false})};o.prototype.$PagesMessengerNewThreadDialog9=function(p,event){'use strict';if(c('Event').getKeyCode(event)===c('Keys').ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog10=function(event){'use strict';if(c('Event').getKeyCode(event)===c('Keys').ESC)setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0);};o.prototype.$PagesMessengerNewThreadDialog11=function(p){'use strict';if(!p&&this.props.shown)this.$PagesMessengerNewThreadDialog5();};o.prototype.subscribeEvents=function(){'use strict';if(this.refs.newPageMessageDialog&&!this.$PagesMessengerNewThreadDialog2){this.refs.newPageMessageDialog.layerSubscribe('key',this.$PagesMessengerNewThreadDialog9.bind(this));this.$PagesMessengerNewThreadDialog2=true}};o.prototype.loadPageName=function(){'use strict';if(!this.$PagesMessengerNewThreadDialog1){this.$PagesMessengerNewThreadDialog1=true;c('MercuryParticipants').get(c('MercuryIDs').getParticipantIDFromUserID(this.props.pageID),function(p){this.setState({pageName:p.name})}.bind(this))}};o.prototype.componentDidUpdate=function(p,q){'use strict';if(!this.props.shown)return;this.subscribeEvents();this.loadPageName();if(!this.refs.pageTypeahead)return;var r=this.refs.pageTypeahead.getTextFieldDOM();r.style.border='0px';r.style.fontSize='14px';r.style.lineHeight='14px';if(this.props.shown&&!p.shown)this.refs.pageTypeahead.focusInput();};o.prototype.renderFrom=function(){'use strict';return c('React').createElement('div',{className:"_1vwk"},i._("From: {pageName}",[i.param('pageName',this.state.pageName)]))};o.prototype.renderSelectedResult=function(){'use strict';if(!this.state.selectedItem)return null;return c('React').createElement('span',{className:"_31d6"},c('React').createElement(c('XUITokenizerRichToken.react'),{entry:this.state.selectedItem,highlighted:false,label:this.state.selectedItem.getTitle(),onRemove:this.$PagesMessengerNewThreadDialog12.bind(this)}))};o.prototype.renderTypeahead=function(){'use strict';if(this.state.selectedItem)return null;return c('React').createElement(c('XUITypeahead.react'),{className:(!this.state.selectedItem?"_1vwn":'')+(this.state.selectedItem?' '+"_29ez":'')+(' '+"_2pir"),clearable:!!this.state.selectedItem,highlightOnSelect:true,onChange:this.$PagesMessengerNewThreadDialog13.bind(this),onClear:this.$PagesMessengerNewThreadDialog12.bind(this),onSelectAttempt:this.$PagesMessengerNewThreadDialog14.bind(this),queryString:this.state.query,ref:'pageTypeahead',searchSource:this.$PagesMessengerNewThreadDialog3,selectedEntry:this.state.selectedItem,showPhoto:!!this.state.selectedItem,tallInput:false,viewStyle:'rich',xuiError:this.state.typeaheadErrorMessage})};o.prototype.renderTo=function(){'use strict';return c('React').createElement('div',{className:"_1vwl"},c('React').createElement('span',{className:"_1vwm"},i._("To:")),this.renderSelectedResult(),this.renderTypeahead(),c('React').createElement('span',{className:"_2f3y"},i._("Pages only")))};o.prototype.$PagesMessengerNewThreadDialog14=function(p){'use strict';this.refs.newThreadComposer.focusInput();this.setState({typeaheadErrorMessage:null,query:p.getTitle(),selectedItem:p});c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_PAGE_MESSAGE_DIALOG_CHOOSE_RECIPIENT,this.props.pageID,{flowID:this.props.flowID,recipient:p.getUniqueID()})};o.prototype.$PagesMessengerNewThreadDialog13=function(event){'use strict';this.setState({typeaheadErrorMessage:null,query:event.target.value,selectedItem:null})};o.prototype.$PagesMessengerNewThreadDialog12=function(){'use strict';this.setState({typeaheadErrorMessage:null,query:'',selectedItem:null});setTimeout(function(){this.refs.pageTypeahead.focusInput()}.bind(this),0)};o.prototype.$PagesMessengerNewThreadDialog15=function(){'use strict';setTimeout(this.$PagesMessengerNewThreadDialog5.bind(this),0)};o.prototype.$PagesMessengerNewThreadDialog16=function(){'use strict';if(!this.state.selectedItem||this.state.selectedItem.getUniqueID().length==0){var p=i._("Please choose a Page to receive your message");this.refs.pageTypeahead.focusInput();this.setState({typeaheadErrorMessage:p});return false}c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_PAGE_MESSAGE_DIALOG_SEND,this.props.pageID,{flowID:this.props.flowID,recipient:this.state.selectedItem.getUniqueID()});return true};o.prototype.renderAttachmentShelf=function(){'use strict';return c('React').createElement('div',{ref:'newThreadAttachmentsShelf',className:"_jz4"})};o.prototype.renderComposer=function(){'use strict';var p=this.state.selectedItem?this.state.selectedItem.getUniqueID():'',q='user:'+p;return c('React').createElement(c('PagesMessengerSimpleMultilineComposer.react'),{afterSend:this.$PagesMessengerNewThreadDialog15.bind(this),allowSend:this.$PagesMessengerNewThreadDialog16.bind(this),destinationID:p,onKeyUp:this.$PagesMessengerNewThreadDialog10.bind(this),ref:'newThreadComposer',sourceID:this.props.pageID,threadID:q})};o.prototype.componentWillReceiveProps=function(p){'use strict';if(!this.state.initDialog&&p.shown)this.setState({initDialog:true});};o.prototype.renderCloseConfirmationDialog=function(){'use strict';if(!this.state.showCloseConfirmationDialog)return null;return c('React').createElement(c('PagesMessengerConfirmCloseThreadDialog.react'),{shown:this.state.showCloseConfirmationDialog,onCancel:this.$PagesMessengerNewThreadDialog8.bind(this),onConfirm:this.$PagesMessengerNewThreadDialog7.bind(this)})};o.prototype.render=function(){'use strict';if(!this.state.initDialog)return null;return c('React').createElement('div',null,c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,ref:'newPageMessageDialog',shown:this.props.shown,onToggle:this.$PagesMessengerNewThreadDialog11.bind(this),width:m,height:n},c('React').createElement(c('XUIDialogTitle.react'),{className:"_2ga7"},i._("New Message to Page")),c('React').createElement(c('XUIDialogBody.react'),{className:"_1vwv"},this.renderFrom(),this.renderTo(),this.renderAttachmentShelf(),this.renderComposer())),this.renderCloseConfirmationDialog())};o.propTypes={flowID:l.string,onHide:l.func.isRequired,shown:l.bool.isRequired,pageID:l.string.isRequired};f.exports=o}),null);
__d('PagesMessengerMessagePageButton.react',['ix','cx','fbt','Image.react','PagesEventObserver','PagesEventType','PagesMessengerNewThreadDialog.react','React','XUIButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.getButtonSize=function(o){'use strict';return o.size||'medium'};function n(o){'use strict';l.constructor.call(this,o);this.state={showDialog:false}}n.prototype.$PagesMessengerMessagePageButton1=function(){'use strict';this.setState({showDialog:false})};n.prototype.$PagesMessengerMessagePageButton2=function(){'use strict';if(this.state.showDialog)return;this.setState({showDialog:true});c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_OPEN_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID})};n.prototype.render=function(){'use strict';var o=j._("Message Page");return c('React').createElement('span',{className:!this.props.pagesCommNewMessagesTab?"_3-9a":''},c('React').createElement(c('XUIButton.react'),{className:this.props.pagesCommNewMessagesTab?"_3kr2":'',image:c('React').createElement(c('Image.react'),{src:h("142642")}),label:o,onClick:this.$PagesMessengerMessagePageButton2.bind(this),size:this.props.size}),c('React').createElement(c('PagesMessengerNewThreadDialog.react'),{flowID:this.props.flowID,shown:this.state.showDialog,onHide:this.$PagesMessengerMessagePageButton1.bind(this),pageID:this.props.pageID}))};n.propTypes={flowID:m.string,pageID:m.string.isRequired,pagesCommNewMessagesTab:m.bool};f.exports=n}),null);
__d('PagesContextCardCustomTag.react',['cx','Image.react','React','XUICard.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$PagesContextCardCustomTag1=function(){if(this.props.onClick)this.props.onClick(this.props.tagData);}.bind(this);this.$PagesContextCardCustomTag2=function(event){event.stopPropagation();if(this.props.hideOnRemove)this.setState({removed:true});if(this.props.onRemove)this.props.onRemove(this.props.tagData.name);}.bind(this);this.state={removed:false}}k.prototype.genDefaultProps=function(){return {textOnly:false}};k.prototype.render=function(){if(this.props.hideOnRemove&&this.state.removed)return null;var l=this.props.tagData,m='/images/pages/context_card/cross/cross_'+l.borderColor+'.png',n={color:'#'+l.color.substring(2),backgroundColor:'none'};if(!this.props.textOnly)n.backgroundColor='#'+l.darkerFill.substring(2);return c('React').createElement(c('XUICard.react'),{className:"_1pbr"+(this.props.onClick?' '+"_2rj2":'')+(this.props.textOnly?' '+"_49ww":''),style:n,key:l.id,onClick:this.$PagesContextCardCustomTag1},l.name,this.props.canRemove?c('React').createElement(c('Image.react'),{className:"_2rj2 _5t1r",src:m,onClick:this.$PagesContextCardCustomTag2,height:8,width:8}):null)};f.exports=k}),null);
__d('PagesEnumTag.react',['PagesContextCardCustomTag.react','React','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;'use strict';for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$PagesEnumTag1=function(){if(this.props.onClick)this.props.onClick(this.props.unit);}.bind(this),this.$PagesEnumTag2=function(){if(this.props.onRemove)this.props.onRemove();}.bind(this),l}j.prototype.getTagData=function(){'use strict';var k={};if(this.props.unit.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED||this.props.unit.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.PRIORITY){k.borderColor='FFFB9240';k.color='FFFB9240';k.fillColor='FFFFF4EC';k.darkerFill='FFFCDEC5';k.id=0}k.name=this.props.unit.getDisplayTitle();return k};j.prototype.render=function(){'use strict';var k=this.getTagData();return c('React').createElement(c('PagesContextCardCustomTag.react'),babelHelpers['extends']({},this.props,{key:k.id,onClick:this.$PagesEnumTag1,onRemove:this.$PagesEnumTag2,tagData:k}))};f.exports=j}),null);
__d('PageCommItemMessengerConsistencyTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PageCommItemMessengerConsistencyLoggerConfig',this.$PageCommItemMessengerConsistencyTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PageCommItemMessengerConsistencyLoggerConfig',this.$PageCommItemMessengerConsistencyTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$PageCommItemMessengerConsistencyTypedLogger1={};return this};h.prototype.updateData=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1=babelHelpers['extends']({},this.$PageCommItemMessengerConsistencyTypedLogger1,j);return this};h.prototype.setCommItemSourceID=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.comm_item_source_id=j;return this};h.prototype.setIsUnifiedInbox=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.is_unified_inbox=j;return this};h.prototype.setMessagingFolderTag=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.messaging_folder_tag=j;return this};h.prototype.setMessengerArchived=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.messenger_archived=j;return this};h.prototype.setPageCommItemStatus=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.page_comm_item_status=j;return this};h.prototype.setVC=function(j){this.$PageCommItemMessengerConsistencyTypedLogger1.vc=j;return this};var i={comm_item_source_id:true,is_unified_inbox:true,messaging_folder_tag:true,messenger_archived:true,page_comm_item_status:true,vc:true};f.exports=h}),null);
__d('PagesManagerPerfTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PagesManagerPerfLoggerConfig',this.$PagesManagerPerfTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$PagesManagerPerfTypedLogger1={};return this};h.prototype.updateData=function(j){this.$PagesManagerPerfTypedLogger1=babelHelpers['extends']({},this.$PagesManagerPerfTypedLogger1,j);return this};h.prototype.setEventName=function(j){this.$PagesManagerPerfTypedLogger1.event_name=j;return this};h.prototype.setEventSeriesID=function(j){this.$PagesManagerPerfTypedLogger1.event_series_id=j;return this};h.prototype.setPageID=function(j){this.$PagesManagerPerfTypedLogger1.page_id=j;return this};h.prototype.setPerfTime=function(j){this.$PagesManagerPerfTypedLogger1.perf_time=j;return this};h.prototype.setVC=function(j){this.$PagesManagerPerfTypedLogger1.vc=j;return this};var i={event_name:true,event_series_id:true,page_id:true,perf_time:true,vc:true};f.exports=h}),null);
__d('MercurySeenIndicator.react',['cx','MercuryDelayedRoger','MercuryIDs','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercurySeenIndicator3=function(){var r=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),s=this.props.thread.participants.filter(function(t){return t!==r});return {viewer:r,others:s}}.bind(this),this.$MercurySeenIndicator4=function(r){return r===this.props.thread.snippet_sender}.bind(this),this.$MercurySeenIndicator5=function(r){var s=this.props.thread.thread_id;return this.$MercurySeenIndicator1.getSeenBy(s).length===r.length}.bind(this),n}l.prototype.componentWillMount=function(){this.$MercurySeenIndicator1=c('MercuryDelayedRoger').getForFBID(this.props.viewer)};l.prototype.componentDidMount=function(){this.$MercurySeenIndicator2=new (c('SubscriptionsHandler'))();this.$MercurySeenIndicator2.addSubscriptions(this.$MercurySeenIndicator1.subscribe('state-changed',function(m,n){n[this.props.thread.thread_id]&&this.forceUpdate()}.bind(this)))};l.prototype.componentWillUnmount=function(){this.$MercurySeenIndicator2&&this.$MercurySeenIndicator2.release()};l.prototype.render=function(){var m=this.$MercurySeenIndicator3(),n=m.viewer,o=m.others,p=this.$MercurySeenIndicator4(n),q=this.$MercurySeenIndicator5(o);return c('React').createElement('span',{className:"_3jy5"+(p?' '+"repliedLast":'')+(p&&q?' '+"seenByAll":'')})};l.propTypes={thread:k.object.isRequired,viewer:k.string.isRequired};f.exports=l}),null);
__d('DOMEmployeeLink',['cx','EmployeeLinkMatcher','EmployeeLinkRanges','JSXDOM','TransformTextToDOMMixin'],(function a(b,c,d,e,f,g,h){var i={match:function j(k){if(!c('EmployeeLinkMatcher').isMatch(k))return false;var l=c('EmployeeLinkMatcher').match(k);return {startIndex:l.idx,endIndex:l.idx+l.lnk.length,element:this._element(l.lnk)}},_element:function j(k){var l=c('EmployeeLinkRanges').get(k);if(l.length==0)return k;return c('JSXDOM').a({className:"_553k",href:l[0].entity.url,target:'_blank',rel:'nofollow'},k)}};f.exports=Object.assign(i,c('TransformTextToDOMMixin'))}),null);
__d('MercuryMessageRenderer',['DOM','DOMEmoji','DOMEmote','DOMEmployeeLink','DOMHyperlink','JSXDOM','URI','shouldAddMRefParam','transformTextToDOM'],(function a(b,c,d,e,f,g){var h={formatMessageBody:function l(m,n,o){var p=(m||'').replace(/\s+$/,'');if(!n)return k(p,false,o);var q=Object.keys(n).map(function(t){return window.parseInt(t)}).sort(function(t,u){return t-u}),r=[],s=0;q.forEach(function(t){var u=p.slice(s,t);if(u)r.push(k(u,false,o));s=t+n[t].length;var v=p.slice(t,s);if(v)r.push(k(v,true,o));});if(s<p.length)r.push(k(p.slice(s),false,o));return r.length===0?null:r.length===1?r[0]:c('DOM').create('span',{},r)}};function i(l,m){var n=m(l);if(Array.isArray(n))n.forEach(function(o){if(o.href){var p=new (c('URI'))(o.href);if(c('shouldAddMRefParam')(p))o.href=p.addQueryData({__mref:'message'}).toString();}});return n}function j(l,m){var n=l.replace(/\r\n?/g,'\n').split(/\n{2,}/);return n.filter(function(o){return o.length}).map(function(o){return c('JSXDOM').p(null,i(o,m))})}function k(l,m,n){if(l.length===0&&!m)return null;var o=function p(q){return c('transformTextToDOM')(q,[c('DOMHyperlink').params(true),c('DOMEmoji').params({renderInMessenger:true}),c('DOMEmote').params({renderInMessenger:true}),c('DOMEmployeeLink')])};return c('JSXDOM').span({className:m?'highlight':null},n?j(l,o):i(l,o))}f.exports=h}),null);
__d('MercuryThreadSearchUtils',['escapeRegex','TokenizeUtil'],(function a(b,c,d,e,f,g){var h={wordsInString:function i(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0})},anyMatchPredicate:function i(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false},allMatchPredicate:function i(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true},queryWordMatchesAnyNameWord:function i(j,k){var l=new RegExp('^'+c('escapeRegex')(j),'i');return this.anyMatchPredicate(k,function(m){var n=c('TokenizeUtil').parse(m).flatValue;return l.test(n)})},queryMatchesName:function i(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m)}.bind(this))}};f.exports=h}),null);
__d('MercuryLocalThreadResults',['MercuryFolders','MercuryIDs','MercurySingletonMixin','MercuryPageOrderedThreadlist','MercuryParticipants','MercuryThreadSearchUtils','MercuryThreads'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$MercuryLocalThreadResults1=i;this.$MercuryLocalThreadResults2=c('MercuryPageOrderedThreadlist').getForFBID(this.$MercuryLocalThreadResults1);this.$MercuryLocalThreadResults3=c('MercuryThreads').getForFBID(this.$MercuryLocalThreadResults1)}h.prototype.findMatchingThreadsFromIds=function(i,j){'use strict';return j.filter(function(k){var l=this.$MercuryLocalThreadResults3.getThreadMetaNow(k);return this.$MercuryLocalThreadResults4(l,i)}.bind(this))};h.prototype.findMatchingThreads=function(i){'use strict';var j=[];c('MercuryFolders').getSupportedFolders().forEach(function(k){j=j.concat(this.$MercuryLocalThreadResults2.getThreadlistUntilTimestamp(0,k))}.bind(this));return this.findMatchingThreadsFromIds(i,j)};h.prototype.$MercuryLocalThreadResults4=function(i,j){'use strict';var k=this.$MercuryLocalThreadResults5(i.participants),l=c('MercuryThreadSearchUtils').wordsInString(j),m=null;c('MercuryParticipants').getMulti(k,function(n){m=k.map(function(o){return n[o]})});if(!m)return false;return c('MercuryThreadSearchUtils').allMatchPredicate(l,function(n){var o=c('MercuryThreadSearchUtils').anyMatchPredicate(m,function(q){return q&&q.name&&c('MercuryThreadSearchUtils').queryWordMatchesAnyNameWord(n,c('MercuryThreadSearchUtils').wordsInString(q.name))}),p=i.name&&c('MercuryThreadSearchUtils').queryWordMatchesAnyNameWord(n,c('MercuryThreadSearchUtils').wordsInString(i.name));return o||p})};h.prototype.$MercuryLocalThreadResults5=function(i){'use strict';if(i.length===1&&c('MercuryIDs').tokenize(i[0]).value===this.$MercuryLocalThreadResults1)return i;return i.filter(function(j){var k=c('MercuryIDs').tokenize(j).value;return k!==this.$MercuryLocalThreadResults1}.bind(this))};Object.assign(h,c('MercurySingletonMixin'));f.exports=h}),null);
__d('MercurySearchThreadResultOrderer',['MercurySingletonMixin','MessagingTag','MercuryThreads','createObjectFrom'],(function a(b,c,d,e,f,g){function h(l){'use strict';this.$MercurySearchThreadResultOrderer1=l;this.$MercurySearchThreadResultOrderer2=c('MercuryThreads').getForFBID(l)}h.prototype.separateCanonicalThreadsInFolder=function(l,m){'use strict';var n=[],o=[];l.forEach(function(p){var q=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(p);if(q.folder===m&&q.is_canonical){n.push(p)}else o.push(p);}.bind(this));return {canonical_in_folder:n.sort(function(p,q){return this.$MercurySearchThreadResultOrderer3(p,q)}.bind(this)),remaining:o}};h.prototype.filterThreadsInFolder=function(l,m){'use strict';var n=[];l.forEach(function(o){var p=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(o);if(p.folder===m&&p.is_archived===false){n.push(o)}else if(m===c('MessagingTag').ACTION_ARCHIVED&&p.is_archived===true)n.push(o);}.bind(this));return n};h.prototype.orderResults=function(l,m,n,o){'use strict';var p=k(m,n),q=p.sort(this.$MercurySearchThreadResultOrderer4.bind(this,o));return k(l,q)};h.prototype.$MercurySearchThreadResultOrderer4=function(l,m,n){'use strict';var o=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(m),p=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(n),q=i(o),r=i(p);if(q!==r)return j(q,l)>j(r,l)?-1:1;if(o.is_canonical!==p.is_canonical)return o.is_canonical?-1:1;return this.$MercurySearchThreadResultOrderer3(m,n)};h.prototype.$MercurySearchThreadResultOrderer3=function(l,m){'use strict';var n=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(l),o=this.$MercurySearchThreadResultOrderer2.getThreadMetaNow(m);return n.timestamp>o.timestamp?-1:1};function i(l){return l.is_archived?c('MessagingTag').ACTION_ARCHIVED:l.folder}function j(l,m){if(l===m)return 5;var n={};n[c('MessagingTag').INBOX]=4;n[c('MessagingTag').ACTION_ARCHIVED]=3;n[c('MessagingTag').OTHER]=2;n[c('MessagingTag').SPAM]=1;return n[l]}function k(l,m){var n=c('createObjectFrom')(l),o=m.filter(function(p){return !(p in n)});return l.concat(o)}Object.assign(h,c('MercurySingletonMixin'));f.exports=h}),null);
__d('MercurySearchThreadResults',['KeyedCallbackManager','MercuryAPIArgsSource','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){var h=new (c('KeyedCallbackManager'))(),i=c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT,j=c('MercuryThreadlistConstants').WEBMESSENGER_MORE_COUNT;function k(l){'use strict';this.$MercurySearchThreadResults1=l;this.$MercurySearchThreadResults2=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySearchThreadResults1);this.$MercurySearchThreadResults3=c('MercuryThreadIDMap').getForFBID(this.$MercurySearchThreadResults1);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_threads.php':{request_user_id:l,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(m){this.handleUpdate(m)}.bind(this)}})}k.prototype.getThreadlist=function(l,m){'use strict';if(l){var n=h.executeOrEnqueue(l,function(q){var r=q.getAllResources(),s=q.hasReachedEndOfArray();m(r,s)}),o=h.getUnavailableResources(n),p=c('MercuryAPIArgsSource').WEBMESSENGER;if(o.length)this.$MercurySearchThreadResults4({client:p,query:l,offset:0,limit:i+1});return n}};k.prototype.isExhausted=function(l){'use strict';var m=h.getResource(l);return m?m.hasReachedEndOfArray():false};k.prototype.getCachedThreadlist=function(l){'use strict';var m=h.getResource(l);return m?m.getAllResources():null};k.prototype.cacheThreadlist=function(l,m){'use strict';h.getResource(l);var n=new (c('RangedCallbackManager'))();n.addResourcesWithoutSorting(m,0);n.setReachedEndOfArray();h.setResource(l,n)};k.prototype.getMoreThreadlist=function(l,m){'use strict';if(l){var n=h.getResource(l);if(n){var o=n.getCurrentArraySize(),p=j,q=n.executeOrEnqueue(0,o+p,function(){var s=n.getAllResources(),t=n.hasReachedEndOfArray();m(s,t)}),r=n.getUnavailableResources(q);if(r.length)this.$MercurySearchThreadResults4({query:l,offset:o,limit:p+1});return q}}};k.prototype.handleUpdate=function(l){'use strict';if(l.mercury_payload)this.$MercurySearchThreadResults2.handleUpdate(l.mercury_payload);var m=l.search_threads||{};for(var n in m){var o=m[n]||[],p=o.map(function(r){return this.$MercurySearchThreadResults3.getClientIDFromServerIDNow(r)}.bind(this)),q=h.getResource(n);if(q){this.$MercurySearchThreadResults5(q,p,j+1)}else{q=new (c('RangedCallbackManager'))();this.$MercurySearchThreadResults5(q,p,i+1);h.setResource(n,q)}}};k.prototype.unsubscribe=function(l,m){'use strict';if(m){var n=h.getResource(m);if(n){n.unsubscribe(l)}else h.unsubscribe(l);}};k.prototype.setInitialCount=function(l){'use strict';i=l};k.prototype.$MercurySearchThreadResults5=function(l,m,n){'use strict';var o=l.getCurrentArraySize(),p=m.length<n;if(!p)m.pop();l.addResourcesWithoutSorting(m,o);if(p)l.setReachedEndOfArray();};k.prototype.$MercurySearchThreadResults4=function(l){'use strict';l.client=c('MercuryAPIArgsSource').WEBMESSENGER;l.index='fbid';c('MercuryServerDispatcher').trySend('/ajax/mercury/search_threads.php',l,null,this.$MercurySearchThreadResults1)};Object.assign(k,c('MercurySingletonMixin'));f.exports=k}),null);
__d('MercurySearchThreadsStrategy',['WebMessengerConstants','MercuryLocalThreadResults','MercurySingletonMixin','MercurySearchThreadResults','createObjectFrom'],(function a(b,c,d,e,f,g){var h=null,i=null,j=c('WebMessengerConstants').SEARCH_THREAD_DELAY;function k(l){'use strict';this.$MercurySearchThreadsStrategy1=l;this.$MercurySearchThreadsStrategy2=c('MercuryLocalThreadResults').getForFBID(this.$MercurySearchThreadsStrategy1);this.$MercurySearchThreadsStrategy3=c('MercurySearchThreadResults').getForFBID(this.$MercurySearchThreadsStrategy1)}k.prototype.clearTimer=function(){'use strict';h=null;clearTimeout(i);i=null};k.prototype.search=function(l,m,n,o){'use strict';if(l!=h){h=l;clearTimeout(i);i=null}var p=this.$MercurySearchThreadsStrategy2.findMatchingThreads(l),q=this.$MercurySearchThreadsStrategy3.getCachedThreadlist(l);if(q){var r=this.$MercurySearchThreadsStrategy4(p,q);m(r);n([],this.$MercurySearchThreadsStrategy3.isExhausted(l));o(null,l);return}var s=this.$MercurySearchThreadsStrategy5(l),t=this.$MercurySearchThreadsStrategy4(p,s.thread_ids);if(s.from_exhausted_remote_results){this.$MercurySearchThreadsStrategy3.cacheThreadlist(l,t);m(t);n([],true);o(null,l);return}m(t);i=setTimeout(function(){var u=this.$MercurySearchThreadsStrategy3.getThreadlist(l,n);o(u,l)}.bind(this),j)};k.prototype.$MercurySearchThreadsStrategy5=function(l){'use strict';var m='',n=[];for(var o=l.length-1;o>0;o--){var p=l.slice(0,o),q=this.$MercurySearchThreadsStrategy3.getCachedThreadlist(p);if(!q)continue;if(this.$MercurySearchThreadsStrategy3.isExhausted(p)){return {from_exhausted_remote_results:true,thread_ids:this.$MercurySearchThreadsStrategy2.findMatchingThreadsFromIds(l,q)}}else if(m.length===0){m=p;n=this.$MercurySearchThreadsStrategy2.findMatchingThreadsFromIds(l,q)}}return {from_exhausted_remote_results:false,thread_ids:n}};k.prototype.$MercurySearchThreadsStrategy4=function(l,m){'use strict';return Object.keys(babelHelpers['extends']({},c('createObjectFrom')(l),c('createObjectFrom')(m)))};Object.assign(k,c('MercurySingletonMixin'));f.exports=k}),null);
__d('PagesManagerCountDownTimer.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j,k=1000;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m,n);this.$PagesManagerCountDownTimer2=function(){this.setState({isCountingDown:true});var o=function(){var p=this.$PagesManagerCountDownTimer1(this.props.expireTimestamp);if(p>0){this.setState({timeRemaining:p});this.$PagesManagerCountDownTimer2();return}this.setState({isCountingDown:false});this.props.onTimeup()}.bind(this);setTimeout(o,k)}.bind(this);this.state={timeRemaining:this.$PagesManagerCountDownTimer1(this.props.expireTimestamp),isCountingDown:false}}l.prototype.componentDidMount=function(){'use strict';if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};l.prototype.componentWillReceiveProps=function(m){'use strict';this.setState({timeRemaining:this.$PagesManagerCountDownTimer1(m.expireTimestamp)});if(!this.state.isCountingDown)this.$PagesManagerCountDownTimer2();};l.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_3uo9"+(this.props.isHidden?' '+"hidden_elem":'')},this.$PagesManagerCountDownTimer3())};l.prototype.$PagesManagerCountDownTimer3=function(){'use strict';var m=Math.floor(this.state.timeRemaining/1000/60),n=this.$PagesManagerCountDownTimer4(Math.floor(m/60)),o=this.$PagesManagerCountDownTimer4(m%60);return c('React').createElement('span',null,n+':'+o)};l.prototype.$PagesManagerCountDownTimer1=function(m){'use strict';return m?m-Date.now():0};l.prototype.$PagesManagerCountDownTimer4=function(m){'use strict';return ('0'+m).slice(-2)};f.exports=l}),null);
__d('PagesManagerPerfLogger',['PagesManagerPerfTypedLogger','Set'],(function a(b,c,d,e,f,g){'use strict';var h=1000;function i(){this.$PagesManagerPerfLogger1=new (c('Set'))()}i.prototype.log=function(j,k){var l=k.perfID+':'+j;if(this.$PagesManagerPerfLogger1.has(l))return;this.$PagesManagerPerfLogger1.add(l);var m=Date.now()/h-k.baseTime;new (c('PagesManagerPerfTypedLogger'))().setPageID(k.pageID).setEventName(j).setEventSeriesID(k.perfID).setPerfTime(Math.round(m)).log()};f.exports=new i()}),null);
__d('PagesManagerListBatchActionContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerStore')]};j.calculateState=function(k){'use strict';var l=c('PagesManagerStore').getSelectedRows(),m=l.length>0;return {showBatchAction:m,selectedRows:l}};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return c('React').createElement(l,babelHelpers['extends']({},m,{selectedRows:this.state.selectedRows,showBatchAction:this.state.showBatchAction}))};function j(){'use strict';h.apply(this,arguments)}f.exports=c('FluxContainer').create(j)}),null);
__d('PagesManagerListRowContainer.react',['FluxContainer','PagesManagerStore','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerStore')]};j.calculateState=function(k,l){'use strict';var m=false,n=false;if(l&&l.listItem){m=l.selected===undefined?c('PagesManagerStore').getIsRowSelected(l.listItem):l.selected;n=c('PagesManagerStore').getViewingListItem()===l.listItem}var o=c('PagesManagerStore').isSelectionMode();return {selected:m,isViewing:n,selectionMode:o}};j.prototype.render=function(){'use strict';var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return c('React').createElement(l,babelHelpers['extends']({ref:'childClass',isViewing:this.state.isViewing,onSelected:this.props.onSelected,selected:this.state.selected,selectionMode:this.state.selectionMode},m))};function j(){'use strict';h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('PagesManagerStaticStore',[],(function a(b,c,d,e,f,g){var h={_pageID:'',setPageID:function i(j){this._pageID=j},getPageID:function i(){return this._pageID}};f.exports=h}),null);
__d("XPagesCustomTagCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/create\/",{tag_name:{type:"String",required:true},color:{type:"String"}})}),null);
__d("XPagesCustomTagDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/delete\/",{tag_name:{type:"String",required:true}})}),null);
__d("XPagesCustomTagEditColorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/edit\/color\/",{tag_name:{type:"String",required:true},color:{type:"String",required:true}})}),null);
__d("XPagesCustomTagMergeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tag\/merge\/",{tag_name:{type:"String",required:true},old_tags:{type:"StringSet",required:true}})}),null);
__d("XPagesCustomTagsDataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tags\/data\/",{})}),null);
__d('PagesManagerCustomTagsStore',['ActorURI','AsyncRequest','FluxStore','immutable','Map','PageCustomerActions','PagesManagerCustomTagsActionType','PagesManagerDispatcher','XPagesCustomTagCreateController','XPagesCustomTagDeleteController','XPagesCustomTagEditColorController','XPagesCustomTagMergeController','XPagesCustomTagsDataController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerCustomTagsStore1=new (c('Map'))();this.$PagesManagerCustomTagsStore2=false;this.$PagesManagerCustomTagsStore3=false}j.prototype.hasCustomTags=function(k){return this.$PagesManagerCustomTagsStore1.has(k)};j.prototype.getCustomTags=function(k){return c('immutable').Map(this.$PagesManagerCustomTagsStore1.get(k)||new (c('Map'))())};j.prototype.hasCustomTag=function(k,l){var m=this.$PagesManagerCustomTagsStore1.get(k);return m!==undefined&&m.has(l)};j.prototype.getIsMergingLabels=function(){return this.$PagesManagerCustomTagsStore2};j.prototype.getIsManagingTags=function(){return this.$PagesManagerCustomTagsStore3};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerCustomTagsActionType').FETCH:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagsDataController').getURIBuilder().getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:m.payload})}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').UPDATE:var l=this.$PagesManagerCustomTagsStore1.get(k.pageID)||new (c('Map'))();k.customTags.map(function(m){l.set(m.name,m)});this.$PagesManagerCustomTagsStore1.set(k.pageID,l);this.__emitChange();break;case c('PagesManagerCustomTagsActionType').TOGGLE_MERGE_LABELS:this.$PagesManagerCustomTagsStore2=k.show;this.__emitChange();break;case c('PagesManagerCustomTagsActionType').TOGGLE_TAG_MANAGEMENT_DIALOG:this.$PagesManagerCustomTagsStore3=k.show;this.$PagesManagerCustomTagsStore2=false;this.__emitChange();break;case c('PagesManagerCustomTagsActionType').CREATE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagCreateController').getURIBuilder().setString('tag_name',k.tagName).setString('color',k.color).getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:true})}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').DELETE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagDeleteController').getURIBuilder().setString('tag_name',k.tagName).getURI(),k.pageID)).setHandler(function(m){var n=this.$PagesManagerCustomTagsStore1.get(k.pageID);if(n&&n.has(k.tagName)){n['delete'](k.tagName);this.$PagesManagerCustomTagsStore1.set(k.pageID,n);this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[],hasTagListChanged:true})}}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').EDIT_COLOR:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagEditColorController').getURIBuilder().setString('tag_name',k.tagName).setString('color',k.color).getURI(),k.pageID)).setHandler(function(m){this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:false})}.bind(this)).send();break;case c('PagesManagerCustomTagsActionType').MERGE:new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagMergeController').getURIBuilder().setString('tag_name',k.tagName).setStringSet('old_tags',k.oldTags).getURI(),k.pageID)).setHandler(function(m){var n=this.$PagesManagerCustomTagsStore1.get(k.pageID);k.oldTags.forEach(function(o){if(n&&n.has(o)&&o!==k.tagName)n['delete'](o);});this.$PagesManagerCustomTagsStore1.set(k.pageID,n);this.__dispatcher.dispatch({type:c('PagesManagerCustomTagsActionType').UPDATE,pageID:k.pageID,customTags:[m.payload],hasTagListChanged:true});c('PageCustomerActions').resetData(k.pageID)}.bind(this)).send();break;default:break;}};f.exports=new j(c('PagesManagerDispatcher'))}),null);
__d('PageCustomTagColorSelector.react',['ix','cx','xuiglyph','ContextualLayer.react','Image.react','PageCustomTagConsts','React','XUICard.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('PageCustomTagConsts').COLORS,n=c('PageCustomTagConsts').TRIANGLES;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){l.constructor.call(this,p);this.$PageCustomTagColorSelector1=function(q){this.props.onToggleSelector(q);this.setState({openSelector:q})}.bind(this);this.$PageCustomTagColorSelector2=function(q){this.props.onSelectColor(q);this.setState({openSelector:false})}.bind(this);this.state={openSelector:false}}o.prototype.$PageCustomTagColorSelector3=function(p){return '#'+m[p].border.substring(2)};o.prototype.$PageCustomTagColorSelector4=function(p){return '#'+m[p].fill.substring(2)};o.prototype.$PageCustomTagColorSelector5=function(p){var q=null;if(p==='FF000000'){q=h("88838")}else q='/images/pages/context_card/checkmark/checkmark_'+p+'.png';return c('React').createElement(c('Image.react'),{src:q})};o.prototype.render=function(){var p=n[this.props.selectedColor];return c('React').createElement('span',null,c('React').createElement('div',{className:"_1fj6"+(this.state.openSelector?' '+"_1fj7":''),ref:'colorSelector'},c('React').createElement(c('XUICard.react'),{className:"_1fjd",style:{borderColor:this.$PageCustomTagColorSelector3(this.props.selectedColor),backgroundColor:this.$PageCustomTagColorSelector4(this.props.selectedColor)},onClick:function(){return this.$PageCustomTagColorSelector1(!this.state.openSelector)}.bind(this)},c('React').createElement(c('Image.react'),{src:p}))),c('React').createElement(c('ContextualLayer.react'),{contextRef:function(){return this.refs.colorSelector}.bind(this),shown:this.state.openSelector,onToggle:function(q){return !q&&this.$PageCustomTagColorSelector1}.bind(this),position:'below',alignment:'left'},c('React').createElement('div',{className:"_1fj8"},c('React').createElement('div',{className:"_1fjb"}),Object.keys(m).map(function(q){return c('React').createElement(c('XUICard.react'),{className:"_1fjc",key:q,style:{borderColor:this.$PageCustomTagColorSelector3(q),backgroundColor:this.$PageCustomTagColorSelector4(q)},onClick:function(){return this.$PageCustomTagColorSelector2(q)}.bind(this)},q===this.props.selectedColor?this.$PageCustomTagColorSelector5(q):null)}.bind(this)))))};f.exports=o}),null);
__d('PageCustomTagSearchableEntry',['SearchableEntry'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('SearchableEntry'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,{uniqueID:k.id,title:k.name});this.$PageCustomTagSearchableEntry1=k}j.prototype.getColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.color.substring(2)};j.prototype.getBorderColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.borderColor.substring(2)};j.prototype.getFillColor=function(){'use strict';return '#'+this.$PageCustomTagSearchableEntry1.fillColor.substring(2)};j.prototype.getFBID=function(){'use strict';return this.$PageCustomTagSearchableEntry1.id};j.prototype.getData=function(){'use strict';return this.$PageCustomTagSearchableEntry1};f.exports=j}),null);
__d('PageCustomTagSearchSource',['AbstractSearchSource','PageCustomTagSearchableEntry'],(function a(b,c,d,e,f,g){var h,i,j=3,k=[];h=babelHelpers.inherits(l,c('AbstractSearchSource'));i=h&&h.prototype;l.getInstance=function(m,n){'use strict';var o=n?1:0;if(!k[o]){k[o]=new l(m,n)}else k[o].setAvailableTags(m);return k[o]};function l(m,n){'use strict';i.constructor.call(this);var o=n?1:0;if(!k[o]){this.setAvailableTags(m);this.setShowQueryAsEntry(n)}}l.prototype.setAvailableTags=function(m){'use strict';this.$PageCustomTagSearchSource1=m};l.prototype.setShowQueryAsEntry=function(m){'use strict';this.$PageCustomTagSearchSource2=m};l.prototype.searchImpl=function(m,n,o){'use strict';var p=[],q=false;if(m){var r=m.toLowerCase();this.$PageCustomTagSearchSource1.forEach(function(u){if(u.name.toLowerCase().indexOf(r)!==-1)p.push(u);if(m===u.name)q=true;})}else p=this.$PageCustomTagSearchSource1.slice(0,j);var s=[],t=0;if(m&&!q&&this.$PageCustomTagSearchSource2)s.push(new (c('PageCustomTagSearchableEntry'))({id:0,color:'',borderColor:'',fillColor:'',name:m}));p.forEach(function(u){s.push(new (c('PageCustomTagSearchableEntry'))(u))});n(s,m)};f.exports=l}),null);
__d('PageCustomTagTypeaheadPresenter.react',['cx','fbt','ContextualLayerUpdateOnScroll','LeftRight.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n,o;j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;p.prototype.render=function(){'use strict';var t=this.props.entry,u="_599m"+(this.props.highlighted?' '+"_599n":''),v={};if(!this.props.searchBar)v.color=this.props.highlighted?'white':t.getColor();var w=!t.getFBID();return c('React').createElement('li',{'aria-selected':this.props.highlighted,className:u,key:t.getUniqueID(),onMouseDown:function(x){return this.props.onSelect(t,x)}.bind(this),onMouseEnter:function(){return this.props.onHighlight(t)}.bind(this),role:this.props.role},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',{style:v},t.getTitle()),w?c('React').createElement('div',{className:"_507"},i._("+ New label")):null))};function p(){'use strict';j.apply(this,arguments)}l=babelHelpers.inherits(q,c('React').Component);m=l&&l.prototype;q.prototype.$PageCustomTagsRenderer1=function(t){'use strict';return c('React').createElement(p,{entry:t,key:t.getUniqueID(),highlighted:t===this.props.highlightedEntry,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect,searchBar:this.props.searchBar})};q.prototype.render=function(){'use strict';var t=(!this.props.searchBar?"_50ig":'')+(!this.props.entries.length?' '+"_599s":'');return c('React').createElement('ul',{className:t,onMouseLeave:function(){return this.props.removeHighlight()}.bind(this)},this.props.entries.map(function(u){return this.$PageCustomTagsRenderer1(u)}.bind(this)))};function q(){'use strict';l.apply(this,arguments)}n=babelHelpers.inherits(r,c('React').Component);o=n&&n.prototype;r.prototype.render=function(){'use strict';var t=this.props.entry;return c('React').createElement('span',{className:"_4n1-",style:{color:t.getColor()}},t.getTitle())};function r(){'use strict';n.apply(this,arguments)}var s={useLayer:true,layerBehaviors:{ContextualLayerUpdateOnScroll:c('ContextualLayerUpdateOnScroll')},ViewRenderer:q,TokenRenderer:r};q.defaultProps={removeHighlight:c('emptyFunction'),searchBar:false};f.exports=s}),null);
__d('PagesManagerManageCustomTagsDialog.react',['cx','fbt','LeftRight.react','Link.react','ObjectSort','PageCustomTagColorSelector.react','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesManagerCustomTagsAction','PagesManagerLogger','PagesSelectableListCheckbox.react','React','ScrollableArea.react','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISortableDataTable.react','XUITextInput.react','curry','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=350,m=500,n=225,o=25,p=5;j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(r){k.constructor.call(this,r);this.$PagesManagerManageCustomTagsDialog1=function(s){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_DELETE_LINK,this.props.pageID,{fbid:s.id,tag_name:s.name});if(this.state.selectedRows.indexOf(s.name)>=0)this.$PagesManagerManageCustomTagsDialog2(s.name);this.$PagesManagerManageCustomTagsDialog3(true,s)}.bind(this);this.$PagesManagerManageCustomTagsDialog4=function(){var s=c('nullthrows')(this.state.deleteConfirmationDialogProps.actionTag);c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_CONFIRM_DELETE,this.props.pageID,{fbid:s.id,tag_name:s.name});c('PagesManagerCustomTagsAction').deleteCustomTag(this.props.pageID,s.name);this.$PagesManagerManageCustomTagsDialog3(false)}.bind(this);this.$PagesManagerManageCustomTagsDialog6=function(s,t){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_CHANGE_COLOR,this.props.pageID,{fbid:s.id,tagName:s.name});c('PagesManagerCustomTagsAction').editCustomTagColor(this.props.pageID,s.name,t)}.bind(this);this.$PagesManagerManageCustomTagsDialog7=function(s){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_COLOR_SELECTOR,this.props.pageID,{show:s})}.bind(this);this.$PagesManagerManageCustomTagsDialog8=function(event){this.setState({tagNameInputValue:event.target.value})}.bind(this);this.$PagesManagerManageCustomTagsDialog9=function(event){this.setState({mergeTagNameInputValue:event.target.value})}.bind(this);this.$PagesManagerManageCustomTagsDialog10=function(){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_ADD_TAG,this.props.pageID,{tag_name:this.state.tagNameInputValue});c('PagesManagerCustomTagsAction').createCustomTag(this.props.pageID,this.state.tagNameInputValue);this.setState({tagNameInputValue:''})}.bind(this);this.$PagesManagerManageCustomTagsDialog11=function(){c('PagesManagerLogger').logManageTagUIAction(c('PagesAdminToolUIActionType').TAG_MANAGEMENT_CLICK_MERGE_TAG,this.props.pageID,{tag_name:this.state.mergeTagNameInputValue});c('PagesManagerCustomTagsAction').mergeCustomTag(this.props.pageID,this.state.mergeTagNameInputValue,this.state.selectedRows);this.$PagesManagerManageCustomTagsDialog12(false);this.setState({mergeTagNameInputValue:'',selectedRows:[]})}.bind(this);this.$PagesManagerManageCustomTagsDialog13=function(s){this.setState({hoveredTag:s})}.bind(this);this.$PagesManagerManageCustomTagsDialog15=function(s){if(this.state.selectedRows.indexOf(s)>=0){this.$PagesManagerManageCustomTagsDialog2(s)}else this.$PagesManagerManageCustomTagsDialog14(s);}.bind(this);this.$PagesManagerManageCustomTagsDialog12=function(s){c('PagesManagerCustomTagsAction').toggleMergeLabelsSection(this.props.pageID,s)}.bind(this);this.state={deleteConfirmationDialogProps:{show:false,actionTag:null},tagNameInputValue:'',mergeTagNameInputValue:'',selectedRows:[],hoveredTag:''}}q.prototype.$PagesManagerManageCustomTagsDialog3=function(r,s){this.setState({deleteConfirmationDialogProps:{show:r,actionTag:r?c('nullthrows')(s):null}})};q.prototype.$PagesManagerManageCustomTagsDialog5=function(){return c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:function(r){return !r&&this.$PagesManagerManageCustomTagsDialog3(r)}.bind(this),shown:this.state.deleteConfirmationDialogProps.show,width:l},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Delete label?")),c('React').createElement(c('XUIDialogBody.react'),null,i._("Are you sure to delete label \"{label name}\"?",[i.param('label name',this.state.deleteConfirmationDialogProps.actionTag!==null?this.state.deleteConfirmationDialogProps.actionTag.name:null)])),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),null),c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',label:i._("Confirm"),onClick:this.$PagesManagerManageCustomTagsDialog4,use:'confirm'})))};q.prototype.$PagesManagerManageCustomTagsDialog2=function(r){var s=this.state.selectedRows,t=this.state.selectedRows.indexOf(r);s.splice(t,1);this.setState({selectedRows:s})};q.prototype.$PagesManagerManageCustomTagsDialog14=function(r){var s=this.state.selectedRows;s.push(r);this.setState({selectedRows:s})};q.prototype.$PagesManagerManageCustomTagsDialog16=function(r){if(this.state.hoveredTag===r||this.state.selectedRows.indexOf(r)>=0)return c('React').createElement(c('PagesSelectableListCheckbox.react'),{checked:this.state.selectedRows.indexOf(r)>=0,className:"_54un",onChange:c('curry')(this.$PagesManagerManageCustomTagsDialog15,r)});return null};q.prototype.$PagesManagerManageCustomTagsDialog17=function(){return c('React').createElement('div',{className:"_42xa"},c('React').createElement(c('XUITextInput.react'),{className:"_42xc",placeholder:i._("Name the new combined label..."),xuiError:this.$PagesManagerManageCustomTagsDialog18(),onChange:this.$PagesManagerManageCustomTagsDialog9,value:this.state.mergeTagNameInputValue,maxLength:o}),c('React').createElement(c('XUIButton.react'),{className:"_42xd",label:i._("Combine"),disabled:this.$PagesManagerManageCustomTagsDialog18()||this.state.mergeTagNameInputValue===''||this.state.selectedRows.length<2,use:'confirm',onClick:this.$PagesManagerManageCustomTagsDialog11}))};q.prototype.$PagesManagerManageCustomTagsDialog19=function(){return c('React').createElement('div',{className:"_5hry"},c('React').createElement(c('XUITextInput.react'),{className:"_5hrz",placeholder:i._("Add a label for products, services or common questions..."),xuiError:this.$PagesManagerManageCustomTagsDialog20(),onChange:this.$PagesManagerManageCustomTagsDialog8,value:this.state.tagNameInputValue,maxLength:o}),c('React').createElement(c('XUIButton.react'),{className:"_5hr-",label:i._("Add"),disabled:this.$PagesManagerManageCustomTagsDialog20()||this.state.tagNameInputValue==='',use:'confirm',onClick:this.$PagesManagerManageCustomTagsDialog10}))};q.prototype.$PagesManagerManageCustomTagsDialog21=function(){if(this.props.customTags.size===0)return null;var r=c('React').createElement('div',{className:"_31fn"},this.props.customTags.toArray().map(function(s){return c('React').createElement(c('LeftRight.react'),{className:"_2zxg",key:s.id,onMouseEnter:c('curry')(this.$PagesManagerManageCustomTagsDialog13,s.name),onMouseLeave:c('curry')(this.$PagesManagerManageCustomTagsDialog13,'')},c('React').createElement('div',null,this.$PagesManagerManageCustomTagsDialog16(s.name),c('React').createElement(c('PageCustomTagColorSelector.react'),{selectedColor:s.color,onSelectColor:function(t){return this.$PagesManagerManageCustomTagsDialog6(s,t)}.bind(this),onToggleSelector:this.$PagesManagerManageCustomTagsDialog7}),c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,tagData:s})),c('React').createElement(c('Link.react'),{onClick:c('curry')(this.$PagesManagerManageCustomTagsDialog1,s)},i._("Delete")))}.bind(this)));if(this.props.customTags.size>p)return c('React').createElement(c('ScrollableArea.react'),{height:n},r);return r};q.prototype.$PagesManagerManageCustomTagsDialog20=function(){if(this.props.customTags.has(this.state.tagNameInputValue))return i._("Label name must be unique.");if(this.state.tagNameInputValue.indexOf(':')!==-1)return i._("Label name can not contain \":\".");return null};q.prototype.$PagesManagerManageCustomTagsDialog18=function(){if(this.state.mergeTagNameInputValue.indexOf(':')!==-1)return i._("Label name can not contain \":\".");return null};q.prototype.render=function(){var r=this.props.isMergingLabels&&this.state.selectedRows.length>1?this.$PagesManagerManageCustomTagsDialog17():this.$PagesManagerManageCustomTagsDialog19();return c('React').createElement(c('XUIDialog.react'),{layerHideOnBlur:false,onToggle:this.props.onToggle,shown:this.props.show,width:m},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},i._("Add and manage labels")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement('div',{className:"_5hrx"},i._("Labels help you track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")),c('React').createElement('div',{className:(this.state.selectedRows.length<2||this.props.isMergingLabels?"hidden_elem":'')+(' '+"_54uo")},c('React').createElement(c('XUIButton.react'),{className:"_54up",label:i._("Combine"),use:'confirm',onClick:c('curry')(this.$PagesManagerManageCustomTagsDialog12,true)})),this.$PagesManagerManageCustomTagsDialog21(),this.$PagesManagerManageCustomTagsDialog5(),r),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',label:i._("Close"),use:'confirm'})))};f.exports=q}),null);
__d('PagesManagerInboxSwitcher.react',['ix','cx','fbt','Image.react','PagesManagerInboxSwitcherUtil','React','ShimButton.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;m.prototype.render=function(){'use strict';return c('React').createElement(c('ShimButton.react'),{className:"_1tvr _4w2j",onClick:function(){return c('PagesManagerInboxSwitcherUtil').switchToInbox(this.props.pageID,this.props.pageToken)}.bind(this)},c('React').createElement('div',{className:"_259i"},j._("Go to new inbox")),c('React').createElement(c('Image.react'),{className:"_1tvs",src:h("133558")}))};function m(){'use strict';k.apply(this,arguments)}f.exports=m}),null);
__d('PagesManagerMessagingAwayStatusDispatcher',['ReactDispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){f.exports=new (c('ReactDispatcher_DEPRECATED'))()}),null);
__d('PagesManagerAwayToggleAction',['PagesManagerMessagingActionType','PagesManagerMessagingAwayStatusDispatcher','PagesAdminToolUIActionType','PagesManagerLogger'],(function a(b,c,d,e,f,g){'use strict';var h={fetchStatus:function i(j){c('PagesManagerMessagingAwayStatusDispatcher').dispatch({pageID:j,type:c('PagesManagerMessagingActionType').AWAY_STATE.FETCH})},setToggleStatus:function i(j,k){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_AWAY_TOGGLE,j,{away:k});c('PagesManagerMessagingAwayStatusDispatcher').dispatch({pageID:j,toggle:k,type:c('PagesManagerMessagingActionType').AWAY_STATE.SET})}};f.exports=h}),null);
__d('PagesManagerAwayBanner.react',['cx','fbt','ix','PagesManagerAwayToggleAction','Image.react','LeftRight.react','Link.react','PagesManagerResizeListener','PagesManagerCountDownTimer.react','React','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m='/help/800788243369168';k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.$PagesManagerAwayBanner1=function(){'use strict';c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false)};n.prototype.componentDidUpdate=function(o){'use strict';if(o.isAway!==this.props.isAway)c('PagesManagerResizeListener').emit('change');};n.prototype.renderLeftChild=function(){'use strict';var o=this.props.expirationTimestamp*1000;return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_2fei",src:j("94985")}),c('React').createElement(c('XUIText.react'),{className:"_2fek",size:'small',display:'inline'},i._("Currently Away"),c('React').createElement('div',{className:"_2fel"},c('React').createElement(c('PagesManagerCountDownTimer.react'),{expireTimestamp:o,isHidden:!this.props.isAway,isNewInbox:true,onTimeup:function(){return this.$PagesManagerAwayBanner1()}.bind(this)}))))};n.prototype.renderRightChild=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:"_2fem",href:m,target:'_blank'},i._("Learn more")),c('React').createElement(c('XUIText.react'),{className:"_2fen",onClick:function(){c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false)}.bind(this)},i._("Turn Off")))};n.prototype.render=function(){'use strict';if(!this.props.isInitialized)return c('React').createElement('div',null);return c('React').createElement(c('LeftRight.react'),{className:"_2feo"+(!this.props.isAway?' '+"hidden_elem":'')},this.renderLeftChild(),this.renderRightChild())};function n(){'use strict';k.apply(this,arguments)}f.exports=n}),null);
__d("XPagesAwayToggleController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/",{})}),null);
__d("XPagesAwayToggleStatusController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/manager\/messages\/awaytoggle\/status\/",{})}),null);
__d('PagesManagerMessagingAwayStatusStore',['ActorURI','AsyncRequest','PagesManagerMessagingActionType','FluxStore','PagesManagerMessagingAwayStatusDispatcher','XPagesAwayToggleController','XPagesAwayToggleStatusController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PagesManagerMessagingAwayStatusStore1=false;this.$PagesManagerMessagingAwayStatusStore2=false;this.$PagesManagerMessagingAwayStatusStore3=0}j.prototype.$PagesManagerMessagingAwayStatusStore4=function(k){var l=c('XPagesAwayToggleStatusController').getURIBuilder().getURI();l=c('ActorURI').create(l,k);new (c('AsyncRequest'))().setURI(l).setHandler(function(m){this.$PagesManagerMessagingAwayStatusStore1=m.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=m.payload.expiration;this.$PagesManagerMessagingAwayStatusStore2=true;this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE})}.bind(this)).send()};j.prototype.$PagesManagerMessagingAwayStatusStore5=function(k,l){var m=c('XPagesAwayToggleController').getURIBuilder().getURI();m=c('ActorURI').create(m,k);new (c('AsyncRequest'))().setURI(m).setMethod('POST').setData({is_away:l}).setHandler(function(n){this.$PagesManagerMessagingAwayStatusStore1=n.payload.isAway;this.$PagesManagerMessagingAwayStatusStore3=n.payload.expiration;this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE})}.bind(this)).send()};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerMessagingActionType').AWAY_STATE.SET:this.$PagesManagerMessagingAwayStatusStore5(k.pageID,k.toggle);break;case c('PagesManagerMessagingActionType').AWAY_STATE.FETCH:this.$PagesManagerMessagingAwayStatusStore4(k.pageID);break;case c('PagesManagerMessagingActionType').AWAY_STATE.UPDATE:this.__emitChange();break;default:break;}};j.prototype.isAway=function(){return this.$PagesManagerMessagingAwayStatusStore1};j.prototype.isInitialized=function(){return this.$PagesManagerMessagingAwayStatusStore2};j.prototype.getExpirationTimestamp=function(){return this.$PagesManagerMessagingAwayStatusStore3};f.exports=new j(c('PagesManagerMessagingAwayStatusDispatcher'))}),null);
__d('PagesManagerAwayContainer.react',['PagesManagerMessagingAwayStatusStore','PagesManagerAwayToggleAction','FluxContainer','React'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){'use strict';return [c('PagesManagerMessagingAwayStatusStore')]};j.calculateState=function(k,l){'use strict';return {isAway:c('PagesManagerMessagingAwayStatusStore').isAway(),isInitialized:c('PagesManagerMessagingAwayStatusStore').isInitialized(),expirationTimestamp:c('PagesManagerMessagingAwayStatusStore').getExpirationTimestamp()}};j.prototype.componentWillMount=function(){'use strict';c('PagesManagerAwayToggleAction').fetchStatus(this.props.pageID)};j.prototype.render=function(){'use strict';var k=this.props,l=k.RenderClass,m=babelHelpers.objectWithoutProperties(k,['RenderClass']);return c('React').createElement(l,babelHelpers['extends']({},m,this.state))};function j(){'use strict';h.apply(this,arguments)}f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('PagesManagerMessagingAppointmentBannerContainer.react',['ix','cx','fbt','ChatAppointmentUtil','Image.react','Link.react','Map','PagesEventObserver','PagesEventType','PagesManagerMessagingAppointmentDialog.react','PagesManagerMessagingMessagelistAction','PagesPlatformBookingMessageViewer','PagesPlatformNativeBookingGraphQLStatus','PagesPlatformNativeBookingStatus','React','ReactDOM','RelayClassic','ServicesAppointmentReferrer','fbglyph','idx'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=100,n=function q(r){return c('React').createElement(c('Link.react'),{className:"_2ph_ _1hgm",onClick:r.onClick,role:'button'},c('React').createElement('span',{className:"_2pii _1hgo _1hgp"},c('React').createElement(c('Image.react'),{className:"_3-90",src:h("112904")}),r.title),c('React').createElement('span',{className:"_1hgq"+(r.bookingStatus===c('PagesPlatformNativeBookingStatus').CONFIRMED?' '+"_1hgt":'')+(r.bookingStatus===c('PagesPlatformNativeBookingStatus').PENDING?' '+"_1hgs":'')+(' '+"_1hgu")},r.status))};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(q){l.constructor.call(this,q);this.$PagesManagerMessagingAppointmentBanner7=function(){this.setState({dialogShown:true,selectedBookingStatus:[c('PagesPlatformNativeBookingGraphQLStatus').REQUESTED]});c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_CLICK_REQUEST_LIST,this.props.pageID)}.bind(this);this.$PagesManagerMessagingAppointmentBanner8=function(){this.setState({dialogShown:true,selectedBookingStatus:[c('PagesPlatformNativeBookingGraphQLStatus').PENDING,c('PagesPlatformNativeBookingGraphQLStatus').CONFIRMED]});c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_CLICK_SENT_LIST,this.props.pageID)}.bind(this);var r=q.messageList,s=q.pageID,t=q.userID;this.state=this.$PagesManagerMessagingAppointmentBanner2(q);this.lastMessageMap=new (c('Map'))();this.$PagesManagerMessagingAppointmentBanner1=true;q.relay.setVariables({pageID:s,count:m});this.lastMessageMap.set(t,this.$PagesManagerMessagingAppointmentBanner3(r))}o.prototype.$PagesManagerMessagingAppointmentBanner2=function(q){var r,s,t=((r=this)!=null?(r=r.state)!=null?r.dialogShown:r:r)||false,u=((s=this)!=null?(s=s.state)!=null?s.selectedBookingStatus:s:s)||[];return {dialogShown:t,selectedBookingStatus:u}};o.prototype.componentWillReceiveProps=function(q){var r=q.messageList,s=q.pageID,t=q.userID,u=this.$PagesManagerMessagingAppointmentBanner3(r),v=this.lastMessageMap.get(t),w=null;this.setState(this.$PagesManagerMessagingAppointmentBanner2(q));if(this.$PagesManagerMessagingAppointmentBanner4(v,u)){w='forceFetch'}else if(this.props.userID!==t||this.props.pageID!==s){this.$PagesManagerMessagingAppointmentBanner1=true;w='setVariables'}if(w)this.props.relay[w]({pageID:s,count:m});this.lastMessageMap.set(t,u)};o.prototype.$PagesManagerMessagingAppointmentBanner5=function(){var q,r=((q=this)!=null?(q=q.props)!=null?(q=q.appointments)!=null?(q=q.confirmed)!=null?q.edges:q:q:q:q)||[];return r.map(function(s){return s.node})};o.prototype.$PagesManagerMessagingAppointmentBanner6=function(){var q,r=((q=this)!=null?(q=q.props)!=null?(q=q.appointments)!=null?(q=q.requested)!=null?q.edges:q:q:q:q)||[];return r.map(function(s){return s.node})};o.prototype.$PagesManagerMessagingAppointmentBanner3=function(q){return q&&q[q.length-1]};o.prototype.$PagesManagerMessagingAppointmentBanner4=function(q,r){if(r&&q!==r){var s,t,u=((s=r)!=null?(s=s.attachments)!=null?(s=s[0])!=null?(s=s.share)!=null?(s=s.target)!=null?(s=s.requestMetadata)!=null?s.id:s:s:s:s:s:s)||((t=r)!=null?(t=t.log_message_data)!=null?(t=t.untypedData)!=null?t.request_id:t:t:t);return Boolean(u)}return false};o.prototype.$PagesManagerMessagingAppointmentBanner9=function(q){if(q.length===0)return null;var r=void 0;if(q.length===1){r=j._({"*":"{user name} requested {number} appointments","_1":"{user name} requested 1 appointment"},[j.param('user name',this.props.appointments.user_name),j.plural(q.length,'number')])}else r=j._({"*":"{number} appointment requests","_1":"1 appointment request"},[j.plural(q.length,'number')]);return c('React').createElement(n,{status:j._("Respond"),title:r,onClick:this.$PagesManagerMessagingAppointmentBanner7})};o.prototype.$PagesManagerMessagingAppointmentBanner10=function(q){if(q.length===0)return null;var r=void 0,s=void 0,t=void 0;if(q.length===1){var u=q[0],v=u.suggested_time_range;r=c('ChatAppointmentUtil').renderDateTimeRange(v);s=u.status;t=u.booking_status}else{r=j._({"*":"{number} appointments","_1":"1 appointment"},[j.plural(q.length,'number')]);s=j._("View")}return c('React').createElement(n,{bookingStatus:t,status:s,title:r,onClick:this.$PagesManagerMessagingAppointmentBanner8})};o.prototype.$PagesManagerMessagingAppointmentBanner11=function(){if(!this.state.dialogShown)return null;return c('React').createElement(c('PagesManagerMessagingAppointmentDialog.react'),{actorID:this.props.viewer.actor.id,appointments:this.props.appointments,bookingStatus:this.state.selectedBookingStatus,causalElementRef:function(){return this}.bind(this),count:this.props.count,dialogShown:this.state.dialogShown,onToggle:function(q){return this.setState({dialogShown:q})}.bind(this),pageID:this.props.pageID,referrer:c('ServicesAppointmentReferrer').BANNER,viewer:c('PagesPlatformBookingMessageViewer').ADMIN})};o.prototype.render=function(){var q=this.$PagesManagerMessagingAppointmentBanner5(),r=this.$PagesManagerMessagingAppointmentBanner6();if(q.length===0&&r.length===0)return null;if(this.$PagesManagerMessagingAppointmentBanner1){c('PagesEventObserver').notify(c('PagesEventType').BOOKING_ADMIN_BANNER_IMPRESSION,this.props.pageID,{sent_count:q.length,requested_count:r.length});this.$PagesManagerMessagingAppointmentBanner1=false}return c('React').createElement('div',{className:"_1hgy",ref:function s(t){if(t&&c('ReactDOM').findDOMNode(t)){c('PagesManagerMessagingMessagelistAction').setAppointmentBannerHeight(c('ReactDOM').findDOMNode(t).clientHeight)}else c('PagesManagerMessagingMessagelistAction').setAppointmentBannerHeight(0);}},this.$PagesManagerMessagingAppointmentBanner11(),this.$PagesManagerMessagingAppointmentBanner9(r),this.$PagesManagerMessagingAppointmentBanner10(q))};var p=function(){return {children:[{children:[{children:[{fieldName:'booking_status',kind:'Field',metadata:{},type:'PagesPlatformNativeBookingStatus'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'end',kind:'Field',metadata:{},type:'Time'},{fieldName:'start',kind:'Field',metadata:{},type:'Time'}],fieldName:'suggested_time_range',kind:'Field',metadata:{canHaveSubselections:true},type:'TimeRange'},{fieldName:'status',kind:'Field',metadata:{},type:'String'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'NativeComponentFlowBookingRequest'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'NativeBookingRequestsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],id:c('RelayClassic').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_reactRelayQL',type:'NativeBookingRequestsConnection'}}();f.exports=c('RelayClassic').createContainer(o,{initialVariables:{count:m,pageID:''},fragments:{appointments:function q(r){var s=r.count,t=r.pageID;return function(u,v,w){return {children:[].concat.apply([],[{alias:'user_name',fieldName:'name',kind:'Field',metadata:{},type:'String'},{alias:'confirmed',calls:[{kind:'Call',metadata:{type:'[PagesPlatformNativeBookingStatus]'},name:'booking_status',value:[{kind:'CallValue',callValue:'PENDING'},{kind:'CallValue',callValue:'CONFIRMED'}]},{kind:'Call',metadata:{type:'PagesPlatformNativeBookingTimeFilter'},name:'booking_time',value:{kind:'CallValue',callValue:'FUTURE_ONLY'}},{kind:'Call',metadata:{},name:'requests_on_page',value:{kind:'CallVariable',callVariableName:'pageID'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('RelayClassic').QL.__frag(u)]),fieldName:'native_booking_request',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'NativeBookingRequestsConnection'},{alias:'requested',calls:[{kind:'Call',metadata:{type:'[PagesPlatformNativeBookingStatus]'},name:'booking_status',value:[{kind:'CallValue',callValue:'REQUESTED'}]},{kind:'Call',metadata:{type:'PagesPlatformNativeBookingTimeFilter'},name:'booking_time',value:{kind:'CallValue',callValue:'FUTURE_ONLY'}},{kind:'Call',metadata:{},name:'requests_on_page',value:{kind:'CallVariable',callVariableName:'pageID'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[c('RelayClassic').QL.__frag(v)]),fieldName:'native_booking_request',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'NativeBookingRequestsConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayClassic').QL.__frag(w)]),id:c('RelayClassic').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_react_AppointmentsRelayQL',type:'User'}}(p,p,c('PagesManagerMessagingAppointmentDialog.react').getFragment('appointments',{bookingStatus:['PENDING','REQUESTED','CONFIRMED'],count:s,pageID:t}))},viewer:function q(){return function(){return {children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'actor',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'}],id:c('RelayClassic').QL.__id(),kind:'Fragment',metadata:{},name:'PagesManagerMessagingAppointmentBannerContainer_react_ViewerRelayQL',type:'Viewer'}}()}}})}),null);
__d('PagesManagerMessagingAppointmentBannerRoute',['RelayClassic'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayClassic').Route);i=h&&h.prototype;function j(){h.apply(this,arguments)}j.paramDefinitions={count:{type:'Int',required:true},pageID:{type:'String',required:true},userID:{type:'String',required:true}};j.queries={appointments:function k(l,m){var n=m.count,o=m.pageID;return function(p){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'userID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayClassic').QL.__frag(p)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'PagesManagerMessagingAppointmentBannerRoute',type:'Node'}}(l.getFragment('appointments',{count:n,pageID:o}))},viewer:function k(l){return function(m){return {children:[].concat.apply([],[c('RelayClassic').QL.__frag(m)]),fieldName:'viewer',kind:'Query',metadata:{},name:'PagesManagerMessagingAppointmentBannerRoute',type:'Viewer'}}(l.getFragment('viewer'))}};j.routeName='PagesManagerMessagingAppointmentBannerRoute';f.exports=j}),null);
__d('PagesManagerMessagingAppointmentBannerRoot.react',['PagesManagerMessagingAppointmentBannerContainer.react','PagesManagerMessagingAppointmentBannerRoute','React','RelayRootContainer'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props,l=k.pageID,m=k.userID,n=babelHelpers.objectWithoutProperties(k,['pageID','userID']);if(!l||!m)return null;return c('React').createElement(c('RelayRootContainer'),{Component:c('PagesManagerMessagingAppointmentBannerContainer.react'),renderFetched:function o(p){return c('React').createElement(c('PagesManagerMessagingAppointmentBannerContainer.react'),babelHelpers['extends']({},n,p))},route:new (c('PagesManagerMessagingAppointmentBannerRoute'))({count:100,pageID:l,userID:m})})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('PagesManagerNavigationUnit',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.$PagesManagerNavigationUnit1=j}i.prototype.getDisplayTitle=function(){h(0)};i.prototype.getKey=function(){return this.$PagesManagerNavigationUnit1};i.prototype.getNotificationCount=function(j,k){return 0};f.exports=i}),null);
__d('PagesManagerMessagingAllNavigationUnit',['fbt','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL)}k.prototype.getDisplayTitle=function(){return h._("All")};f.exports=k}),null);
__d('PagesManagerMessagingFolderNavigationUnit',['invariant','immutable','PagesManagerMessagingNavigationUnitKey','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List;i=babelHelpers.inherits(l,c('PagesManagerNavigationUnit'));j=i&&i.prototype;l.prototype.getSupportedFilterKeys=function(){return k([c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL])};l.prototype.assertSupportsFilter=function(m){this.getSupportedFilterKeys().indexOf(m.getKey())>=0||h(0)};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d('PagesManagerMessagingArchiveNavigationUnit',['fbt','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.ARCHIVED)}k.prototype.getDisplayTitle=function(){return h._("Archived")};f.exports=k}),null);
__d('PagesManagerMessagingFlaggedNavigationUnit',['fbt','PagesManagerNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)}k.prototype.getDisplayTitle=function(){return h._("Flagged")};f.exports=k}),null);
__d('PagesManagerMessagingUnreadCountHelper',['MercuryThreadlistConstants','MercuryUnreadState'],(function a(b,c,d,e,f,g){'use strict';var h={getUnreadCount:function i(j,k){var l=c('MercuryUnreadState').getForFBID(j),m=l.exceedsMaxCount(k);return m?0:l.getUnreadCount(k)}};f.exports=h}),null);
__d('PagesManagerMessagingInboxNavigationUnit',['fbt','immutable','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List;i=babelHelpers.inherits(l,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function l(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX)}l.prototype.getDisplayTitle=function(){return h._("Inbox")};l.prototype.getSupportedFilterKeys=function(){return k([c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL,c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD,c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED])};l.prototype.getNotificationCount=function(m,n){return c('PagesManagerMessagingUnreadCountHelper').getUnreadCount(m,this.getKey())};f.exports=l}),null);
__d('PagesManagerMessagingSpamNavigationUnit',['fbt','PagesManagerMessagingFolderNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerMessagingFolderNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FOLDERS.SPAM)}k.prototype.getDisplayTitle=function(){return h._("Spam")};f.exports=k}),null);
__d('PagesManagerMessagingUnreadNavigationUnit',['fbt','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingUnreadCountHelper','PagesManagerNavigationUnit'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('PagesManagerNavigationUnit'));j=i&&i.prototype;function k(){j.constructor.call(this,c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD)}k.prototype.getDisplayTitle=function(){return h._("Unread")};k.prototype.getNotificationCount=function(l,m){if(m.activeFolder.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX)return 0;return c('PagesManagerMessagingUnreadCountHelper').getUnreadCount(l,m.activeFolder.getKey())};f.exports=k}),null);
__d('PagesManagerMessagingFilterStore',['invariant','FluxStore','immutable','Map','MessagingTag','MessageThreadViewSource','PagesManagerActionType','PagesManagerDispatcher','PagesManagerMessagingAllNavigationUnit','PagesManagerMessagingArchiveNavigationUnit','PagesManagerMessagingFlaggedNavigationUnit','PagesManagerMessagingInboxNavigationUnit','PagesManagerMessagingLogger','PagesManagerMessagingSpamNavigationUnit','PagesManagerMessagingSearchStore','PagesManagerMessagingUnreadNavigationUnit','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='inbox|all|';i=babelHelpers.inherits(l,c('FluxStore'));j=i&&i.prototype;function l(){j.constructor.call(this,c('PagesManagerDispatcher'));var m=new (c('PagesManagerMessagingInboxNavigationUnit'))(),n=new (c('PagesManagerMessagingArchiveNavigationUnit'))(),o=new (c('PagesManagerMessagingSpamNavigationUnit'))();this.$PagesManagerMessagingFilterStore2=c('immutable').List([m,n,o]);this.$PagesManagerMessagingFilterStore8=new (c('PagesManagerMessagingAllNavigationUnit'))();var p=new (c('PagesManagerMessagingUnreadNavigationUnit'))();this.$PagesManagerMessagingFilterStore1=c('immutable').List([this.$PagesManagerMessagingFilterStore8,p,new (c('PagesManagerMessagingFlaggedNavigationUnit'))()]);this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first();this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(this.$PagesManagerMessagingFilterStore4.getSupportedFilterKeys().first());this.$PagesManagerMessagingFilterStore7=false;this.$PagesManagerMessagingFilterStore6=false;this.$PagesManagerMessagingFilterStore3=[m,p,n,o]}l.prototype.$PagesManagerMessagingFilterStore9=function(m,n){var o=m.filter(function(p){return p.getKey()===n});o.size>0||h(0);return o.first()};l.prototype.$PagesManagerMessagingFilterStore10=function(m,n){c('PagesManagerMessagingLogger').logMessagesSectionViewEvent(m,n.getKey());c('PagesManagerMessagingLogger').logPageViewFolderEvent(m,n,c('MessageThreadViewSource').NEW_MESSAGETAB);this.$PagesManagerMessagingFilterStore4=n;this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(n.getSupportedFilterKeys().first());this.__emitChange()};l.prototype.$PagesManagerMessagingFilterStore11=function(m,n){if(n.getKey()===c('MessagingTag').UNREAD){this.$PagesManagerMessagingFilterStore5=n;this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first()}else{this.$PagesManagerMessagingFilterStore4.assertSupportsFilter(n);this.$PagesManagerMessagingFilterStore5=n}this.__emitChange()};l.prototype.getFilterByKey=function(m){return this.$PagesManagerMessagingFilterStore9(this.$PagesManagerMessagingFilterStore1,m)};l.prototype.getAvailableFolders=function(){return this.$PagesManagerMessagingFilterStore2};l.prototype.getAvailableFilters=function(){return c('immutable').List(this.$PagesManagerMessagingFilterStore1.filter(function(m){return this.getActiveFolder().getSupportedFilterKeys().indexOf(m.getKey())>=0}.bind(this)))};l.prototype.getActiveFolder=function(){return this.$PagesManagerMessagingFilterStore4};l.prototype.getActiveFilter=function(){var m=c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames();return this.$PagesManagerMessagingFilterStore6||m.size!==0&&this.$PagesManagerMessagingFilterStore5.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?this.$PagesManagerMessagingFilterStore8:this.$PagesManagerMessagingFilterStore5};l.prototype.getActiveFolderName=function(){return this.getActiveFolder().getKey()};l.prototype.getActiveFilterName=function(){return this.getActiveFilter().getKey()};l.prototype.getFolderDropDown=function(){if(this.getActiveFilterName()===c('MessagingTag').UNREAD){return this.$PagesManagerMessagingFilterStore2}else{var m=this.$PagesManagerMessagingFilterStore3.filter(function(n){return n.getKey()!==this.$PagesManagerMessagingFilterStore4.getKey()}.bind(this));return c('immutable').List(m)}};l.prototype.getActiveFolderDropDown=function(){if(this.getActiveFilterName()===c('MessagingTag').UNREAD){return this.$PagesManagerMessagingFilterStore5}else return this.$PagesManagerMessagingFilterStore4;};l.prototype.getUnitNotificationCountMap=function(m){var n=new (c('Map'))(),o=function(p){return n.set(p,p.getNotificationCount(m,{activeFolder:this.getActiveFolder(),activeFilter:this.getActiveFilter()}))}.bind(this);this.getAvailableFolders().map(o);this.getAvailableFilters().map(o);return n};l.prototype.getNavigationKey=function(){return this.getActiveFolderName()+'|'+this.getActiveFilterName()+'|'+(c('PagesManagerMessagingSearchStore').getCustomTagsFilterName()||'')};l.prototype.getIsInboxAll=function(){return this.getNavigationKey()===k};l.prototype.getIsFiltering=function(){return this.$PagesManagerMessagingFilterStore7};l.prototype.__onDispatch=function(m){switch(m.type){case c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE:if(this.getAvailableFolders().indexOf(m.unit)>=0){this.$PagesManagerMessagingFilterStore10(m.pageID,m.unit)}else this.$PagesManagerMessagingFilterStore11(m.pageID,m.unit);break;case c('PagesManagerActionType').NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE:this.__emitChange();break;case c('PagesManagerActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case c('PagesManagerActionType').SEARCH.CHANGE_SEARCH_TERM:c('PagesManagerDispatcher').waitFor([c('PagesManagerMessagingSearchStore').getDispatchToken()]);var n=c('PagesManagerMessagingSearchStore').getCurrentSearchTerm()!=='';this.$PagesManagerMessagingFilterStore7=false;if(this.$PagesManagerMessagingFilterStore6!==n){this.$PagesManagerMessagingFilterStore6=n;this.__emitChange()}break;case c('PagesManagerActionType').FILTER_PANEL.TOGGLE_PANEL:this.$PagesManagerMessagingFilterStore7=m.showPanel;this.__emitChange();}};f.exports=new l()}),null);
__d("XPagesCustomTagMessageThreadCountsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/custom_tags\/message_thread_counts\/",{intersect_custom_tags:{type:"StringVector",defaultValue:[]},folder:{type:"String",defaultValue:"inbox"},key:{type:"String",required:true},enum_tag:{type:"Enum",enumType:1}})}),null);
__d('PagesManagerMessagingSearchStore',['ActorURI','PagesManagerMessagingActionType','AsyncRequest','PagesManagerDispatcher','FluxStore','immutable','Map','MercurySearchSnippetResults','MercurySearchThreadResults','MercurySearchThreadResultOrderer','MercurySearchThreadsStrategy','PageMessageEnumTag','PagesManagerCustomTagsActionType','PagesManagerCustomTagsStore','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','PagesManagerMessagingNavigationUnitKey','XPagesCustomTagMessageThreadCountsController','emptyFunction','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerMessagingSearchStore2='';this.$PagesManagerMessagingSearchStore3=false;this.$PagesManagerMessagingSearchStore4=false;this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore6=false;this.$PagesManagerMessagingSearchStore7=false;this.$PagesManagerMessagingSearchStore8='';this.$PagesManagerMessagingSearchStore10=[];this.$PagesManagerMessagingSearchStore11={};this.$PagesManagerMessagingSearchStore1=[];this.$PagesManagerMessagingSearchStore9=c('PagesMessagingSearchMode').NONE;this.$PagesManagerMessagingSearchStore12={}}j.prototype.getCurrentSearchTerm=function(){return this.$PagesManagerMessagingSearchStore2};j.prototype.getIsInSearchMode=function(){return this.$PagesManagerMessagingSearchStore5};j.prototype.getSearchMode=function(){return this.$PagesManagerMessagingSearchStore9};j.prototype.getThreadNameSearchResults=function(){return this.$PagesManagerMessagingSearchStore10};j.prototype.getThreadSnippetSearchResults=function(){return this.$PagesManagerMessagingSearchStore11};j.prototype.getIsSearchingName=function(){return this.$PagesManagerMessagingSearchStore6};j.prototype.getIsSearchingSnippet=function(){return this.$PagesManagerMessagingSearchStore7};j.prototype.hasMoreNameSearchResult=function(){return this.$PagesManagerMessagingSearchStore3};j.prototype.hasMoreSnippetSearchResult=function(){return this.$PagesManagerMessagingSearchStore4};j.prototype.getCurrentSearchCustomTagNames=function(){return c('immutable').List(this.$PagesManagerMessagingSearchStore1)};j.prototype.getCustomTagsFilterName=function(){if(this.$PagesManagerMessagingSearchStore1.length===0)return null;return c('PagesMessengerThreadUtils').getCustomTagsFilter(this.$PagesManagerMessagingSearchStore1,c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)};j.prototype.getCurrentSearchCustomTagThreadCounts=function(){var k=this.$PagesManagerMessagingSearchStore13();if(!k||!(k in this.$PagesManagerMessagingSearchStore12))return null;return c('immutable').OrderedMap(this.$PagesManagerMessagingSearchStore12[k])};j.prototype.$PagesManagerMessagingSearchStore14=function(k,l){return k+'|'+l};j.prototype.$PagesManagerMessagingSearchStore13=function(){return this.$PagesManagerMessagingSearchStore14(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.getCustomTagsFilterName()||'')};j.prototype.$PagesManagerMessagingSearchStore15=function(k){var l=this.$PagesManagerMessagingSearchStore13();if(!l||l in this.$PagesManagerMessagingSearchStore12)return;new (c('AsyncRequest'))().setURI(c('ActorURI').create(c('XPagesCustomTagMessageThreadCountsController').getURIBuilder().setStringVector('intersect_custom_tags',this.$PagesManagerMessagingSearchStore1).setEnum('enum_tag',c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?c('PageMessageEnumTag').FLAG:null).setString('folder',c('PagesManagerMessagingFilterStore').getActiveFolderName()).setString('key',this.$PagesManagerMessagingSearchStore13()).getURI(),k)).setHandler(function(m){var n=m.payload.threadCounts,o=Object.keys(n).sort(function(q,r){return n[r]-n[q]}),p=new (c('Map'))();o.map(function(q){p.set(q,n[q])});if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore12[m.payload.key]=p;if(m.payload.key===this.$PagesManagerMessagingSearchStore13())this.__emitChange();}else this.__dispatcher.dispatch({type:c('PagesManagerMessagingActionType').SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS,key:m.payload.key,threadCounts:p});}.bind(this)).send()};j.prototype.__onDispatch=function(k){switch(k.type){case c('PagesManagerMessagingActionType').SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerMessagingSearchStore2=k.searchTerm;if(this.$PagesManagerMessagingSearchStore2===''){this.$PagesManagerMessagingSearchStore10=[];this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore9=c('PagesMessagingSearchMode').NONE}else{this.$PagesManagerMessagingSearchStore5=true;this.$PagesManagerMessagingSearchStore9=k.searchMode;this.$PagesManagerMessagingSearchStore16(k.pageID,k.searchTerm,k.activeFolder,k.searchMode)}this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.NAME_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore6=k.isSearching;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore7=k.isSearching;this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT:this.$PagesManagerMessagingSearchStore17(k.pageID,k.searchTerm,k.activeFolder);this.__emitChange();break;case c('PagesManagerMessagingActionType').MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT:this.$PagesManagerMessagingSearchStore18(k.pageID,k.searchTerm,k.activeFolder);this.__emitChange();break;case c('PagesManagerMessagingActionType').SEARCH.ADD_SEARCH_CUSTOM_TAG:c('PagesManagerDispatcher').waitFor([c('PagesManagerCustomTagsStore').getDispatchToken()]);var l=c('PagesManagerCustomTagsStore').hasCustomTag(k.pageID,k.tagName);if(l&&this.$PagesManagerMessagingSearchStore1.indexOf(k.tagName)<0){this.$PagesManagerMessagingSearchStore2='';this.$PagesManagerMessagingSearchStore5=false;this.$PagesManagerMessagingSearchStore1.push(k.tagName);this.__emitChange()}break;case c('PagesManagerMessagingActionType').SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case c('PagesManagerCustomTagsActionType').DELETE:var m=this.$PagesManagerMessagingSearchStore1.indexOf(k.tagName);if(m>=0){this.$PagesManagerMessagingSearchStore1.splice(m,1);this.__emitChange()}break;case c('PagesManagerMessagingActionType').SEARCH.FETCH_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore15(k.pageID);break;case c('PagesManagerCustomTagsActionType').UPDATE:if(k.hasTagListChanged){this.$PagesManagerMessagingSearchStore12={};this.$PagesManagerMessagingSearchStore15(k.pageID)}this.__emitChange();break;case c('PagesManagerMessagingActionType').SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore12[k.key]=k.threadCounts;if(k.key===this.$PagesManagerMessagingSearchStore13())this.__emitChange();break;}};j.prototype.$PagesManagerMessagingSearchStore16=function(k,l,m,n){var o=c('guid')();this.$PagesManagerMessagingSearchStore8=o;var p=c('MercurySearchThreadsStrategy').getForFBID(k),q=c('MercurySearchSnippetResults').getForFBID(k),r=c('MercurySearchThreadResultOrderer').getForFBID(k);if(n===c('PagesMessagingSearchMode').ALL||n===c('PagesMessagingSearchMode').NAME_SEARCH){this.$PagesManagerMessagingSearchStore6=true;p.search(l,function(s){this.$PagesManagerMessagingSearchStore10=r.filterThreadsInFolder(s,m);this.__emitChange()}.bind(this),function(s,t){if(o!==this.$PagesManagerMessagingSearchStore8)return;var u=r.filterThreadsInFolder(s,m);this.$PagesManagerMessagingSearchStore10=r.orderResults(this.$PagesManagerMessagingSearchStore10,[],u,m);this.$PagesManagerMessagingSearchStore3=!t;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange()}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingNameStatus(false);}.bind(this),c('emptyFunction'))}if(n===c('PagesMessagingSearchMode').ALL||n===c('PagesMessagingSearchMode').MESSAGE_SEARCH){this.$PagesManagerMessagingSearchStore7=true;q.getAllThreadSearchResults(l,function(s,t,u){this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(t,s,m);this.$PagesManagerMessagingSearchStore4=!u;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore7=false;this.__emitChange()}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingSnippetStatus(false);}.bind(this,r))}this.__emitChange()};j.prototype.$PagesManagerMessagingSearchStore19=function(k,l,m){var n=Object.keys(k),o=l.filterThreadsInFolder(n,m),p={};o.forEach(function(q){p[q]=k[q]});return p};j.prototype.$PagesManagerMessagingSearchStore17=function(k,l,m){var n=c('MercurySearchThreadResults').getForFBID(k),o=c('MercurySearchThreadResultOrderer').getForFBID(k);this.$PagesManagerMessagingSearchStore6=true;n.getMoreThreadlist(l,function(p,q){var r=o.filterThreadsInFolder(p,m);this.$PagesManagerMessagingSearchStore10=r;if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore6=false;this.__emitChange()}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingNameStatus(false);}.bind(this))};j.prototype.$PagesManagerMessagingSearchStore18=function(k,l,m){var n=c('MercurySearchSnippetResults').getForFBID(k),o=c('MercurySearchThreadResultOrderer').getForFBID(k);n.getAllThreadSearchMoreResults(l,function(p,q,r){this.$PagesManagerMessagingSearchStore4=!r;this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(q,p,m);if(this.__dispatcher.isDispatching()){this.$PagesManagerMessagingSearchStore7=false;this.__emitChange()}else c('PagesManagerMessagingThreadlistAction').changeIsSearchingSnippetStatus(false);}.bind(this,o))};f.exports=new j()}),null);
__d("PagesManagerMessagingTabPerfEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSAGE_TAB_WILL_RENDER:"message_tab_will_render",MESSAGE_TAB_APP_DID_RENDER:"message_tab_app_did_render",MESSAGE_TAB_THREAD_LIST_DID_RENDER:"message_tab_thread_list_did_render",MESSAGE_TAB_DETAIL_VIEW_DID_RENDER:"message_tab_detail_view_did_render",OLD_MESSAGE_TAB_WILL_RENDER:"old_message_tab_will_render",OLD_MESSAGE_TAB_DID_RENDER:"old_message_tab_did_render"})}),null);
__d('PagesManagerMessagingFilterActions',['PagesManagerActionType','PagesManagerDispatcher','PagesManagerMessagingThreadlistAction'],(function a(b,c,d,e,f,g){'use strict';var h={changeFilter:function i(j,k){c('PagesManagerDispatcher').dispatch({unit:k,pageID:j,type:c('PagesManagerActionType').NAVIGATION_UNIT.CHANGE});c('PagesManagerMessagingThreadlistAction').resetSearch(j)},notifyNotificationCountChanged:function i(j){c('PagesManagerDispatcher').dispatch({pageID:j,type:c('PagesManagerActionType').NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE})},toggleFilterPanel:function i(j,k){c('PagesManagerDispatcher').dispatch({pageID:j,showPanel:k,type:c('PagesManagerActionType').FILTER_PANEL.TOGGLE_PANEL})}};f.exports=h}),null);
__d('PagesManagerMessagingThreadlistStore',['AbstractPagesManagerListStore','PagesManagerActionType','MercuryPageOrderedThreadlist','MercuryThreadlistConstants','PagesManagerDispatcher','PagesManagerMessagingFilterStore','PagesManagerMessagingSearchStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractPagesManagerListStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'))}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerActionType').LIST.FETCH:this.__handleListFetch(k);break;case c('PagesManagerActionType').LIST.LOADING:this.__isLoading=true;this.__emitChange();break;default:i.__onDispatch.call(this,k);}};j.prototype.$PagesManagerMessagingThreadlistStore1=function(){'use strict';return c('PagesManagerMessagingSearchStore').getCustomTagsFilterName()||c('PagesManagerMessagingFilterStore').getActiveFilterName()};j.prototype.$PagesManagerMessagingThreadlistStore2=function(k,l){'use strict';var m=c('MercuryPageOrderedThreadlist').getForFBID(k);return m.hasLoadedThreadlist(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())||m.getThreadCount(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())>=l};j.prototype.$PagesManagerMessagingThreadlistStore3=function(k,l,m){'use strict';var n=c('MercuryPageOrderedThreadlist').getForFBID(k);n.getFilteredThreadlist(l,m+1,c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1(),function(o){var p=o.length>m;this.$PagesManagerMessagingThreadlistStore4(p)}.bind(this))};j.prototype.$PagesManagerMessagingThreadlistStore5=function(k){'use strict';var l=c('MercuryPageOrderedThreadlist').getForFBID(k);return l.getAvailableThreadlistNow(c('PagesManagerMessagingFilterStore').getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())};j.prototype.__handleListFetch=function(k){'use strict';var l=k.pageID,m=k.offset,n=k.limit;this.__isLoading=true;var o=this.$PagesManagerMessagingThreadlistStore2(l,m+n);if(o){this.$PagesManagerMessagingThreadlistStore4(!!this.__hasMoreItem.get(c('PagesManagerMessagingFilterStore').getNavigationKey()))}else this.$PagesManagerMessagingThreadlistStore3(l,m,n);this.__emitChange()};j.prototype.__handleNavigationUnitChange=function(k){'use strict';c('PagesManagerDispatcher').waitFor([c('PagesManagerMessagingFilterStore').getDispatchToken(),c('PagesManagerMessagingSearchStore').getDispatchToken()]);if(this.__isPriorityEnabled&&c('PagesManagerMessagingFilterStore').getIsInboxAll())return;this.__handleListFetch({pageID:k.pageID,offset:0,limit:c('MercuryThreadlistConstants').WEBMESSENGER_THREAD_COUNT})};j.prototype.$PagesManagerMessagingThreadlistStore4=function(k){'use strict';this.__isLoading=false;this.__hasMoreItem.set(c('PagesManagerMessagingFilterStore').getNavigationKey(),k);if(!this.__dispatcher.isDispatching())this.__dispatcher.dispatch({type:c('PagesManagerActionType').LIST.FETCHED});};j.prototype.getItemList=function(k){'use strict';var l=this.$PagesManagerMessagingThreadlistStore5(k),m=c('PagesManagerMessagingFilterStore').getNavigationKey();return this.hasMoreItem(m)&&l.length>0?l.slice(0,l.length-1):l};f.exports=new j()}),null);
__d('PagesManagerMessagingThreadInteractionHelper',['MercuryPageThreadActions','MercuryThreadIDMap','MercuryThreads','MessagingTag','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterStore','PagesManagerMessagingMessagelistStore','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingThreadlistStore','PagesManagerStore','PagesMessagingActionPlacement','URI'],(function a(b,c,d,e,f,g){'use strict';var h={_getPermalinkURI:function i(j,k){var l=c('MercuryThreadIDMap').getForFBID(k).getServerIDFromClientIDNow(j),m=c('URI').getRequestURI(),n=c('MercuryThreads').getForFBID(k).getThreadMetaNow(j);m.addQueryData({threadid:l,timestamp:n?n.timestamp:null});return m},_clearURLParam:function i(){var j=c('URI').getRequestURI();j.removeQueryData('threadid');j.removeQueryData('timestamp');window.history.replaceState({},null,j)},handlePermalinkUpdate:function i(j,k){if(!j){this._clearURLParam();return}var l=h._getPermalinkURI(j,k);window.history.replaceState({},null,l)},handleUnreadStateUpdate:function i(j,k,l){var m=c('PagesManagerStore').getViewingListItem();if(!m)return;var n=c('MercuryThreads').getForFBID(k).getThreadMetaNow(m.toString()),o=c('MercuryThreads').getForFBID(k).getThreadMetaNow(j.toString()),p=c('PagesManagerMessagingMessagelistStore').getMessagelist(k,m.toString()),q=c('PagesManagerMessagingThreadlistStore').getItemList(k,l).length,r=c('MercuryPageThreadActions').getForFBID(k);if(n&&n.unread_count>0||p.length>0)if(l===c('MessagingTag').UNREAD&&q>1&&j!==m){r.markRead(m,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN)}else if(l===c('MessagingTag').UNREAD&&q===1){r.markRead(j,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN);c('PagesManagerMessagingFilterActions').changeFilter(k,c('PagesManagerMessagingFilterStore').getFilterByKey(c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL))}else if(l!==c('MessagingTag').UNREAD)r.markRead(j,c('PagesMessagingActionPlacement').MESSAGE_DIALOG_SHOWN);}};f.exports=h}),null);
__d('PagesManagerMessagingBatchActionMenu.react',['cx','fbt','invariant','AsyncRequest','MercuryPageThreadActions','InsightsInfoTip.react','PagesAdminToolUIActionType','PagesManagerAction','PagesManagerLogger','PagesManagerMessagingMessagelistAction','PagesMessengerActions','PagesMessagingActionPlacement','PopoverMenu.react','React','SimpleXUIDialog','XPagesBanUserDataController','ReactXUIMenu','XUIDialogButton.react','XUIDialogCancelButton.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){'use strict';l.constructor.call(this,o);this.$PagesManagerMessagingBatchActionMenu1=c('MercuryPageThreadActions').getForFBID(o.pageID)}n.prototype.$PagesManagerMessagingBatchActionMenu2=function(event,o){'use strict';var p=o.item.getValue();c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_MENU_ACTION,this.props.pageID,{menu_action:p,position:this.props.placement});var q=null,r=false;switch(p){case c('PagesMessengerActions').FLAG:q=this.$PagesManagerMessagingBatchActionMenu1.batchAddFlag;break;case c('PagesMessengerActions').UNFLAG:q=this.$PagesManagerMessagingBatchActionMenu1.batchRemoveFlag;break;case c('PagesMessengerActions').MARK_AS_SPAM:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam;r=true;break;case c('PagesMessengerActions').MARK_AS_UNSPAM:q=this.$PagesManagerMessagingBatchActionMenu1.batchUnmarkSpam;r=true;break;case c('PagesMessengerActions').MARK_AS_READ:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkRead;break;case c('PagesMessengerActions').MARK_AS_UNREAD:q=this.$PagesManagerMessagingBatchActionMenu1.batchMarkUnread;break;case c('PagesMessengerActions').ARCHIVE:q=this.$PagesManagerMessagingBatchActionMenu1.batchArchive;r=true;break;case c('PagesMessengerActions').UNARCHIVE:q=this.$PagesManagerMessagingBatchActionMenu1.batchUnarchive;r=true;break;case c('PagesMessengerActions').DELETE_THREAD:this.$PagesManagerMessagingBatchActionMenu3();return;case c('PagesMessengerActions').HIDE_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu4();return;case c('PagesMessengerActions').SHOW_CONTEXT_CARD:this.$PagesManagerMessagingBatchActionMenu5();return;case c('PagesMessengerActions').SHOW_BAN_FROM_PAGE:this.$PagesManagerMessagingBatchActionMenu6();return;default:j(0);}if(q)q.call(this.$PagesManagerMessagingBatchActionMenu1,this.props.selectedRows,this.props.placement);c('PagesManagerAction').deselectAll();if(r===true)c('PagesManagerAction').viewListItem(null);this.props.onSelectionClear&&this.props.onSelectionClear()};n.prototype.$PagesManagerMessagingBatchActionMenu3=function(){'use strict';var o=this.props.selectedRows.length,p=i._("Delete Messages"),q=i._("Are you sure you want to delete {number of messages}?",[i.param('number of messages',c('React').createElement('span',{className:"_50f7"},i._({"*":{"message":"{number of messages} message","messages":"{number of messages} messages"}},[i.param('number of messages',o,[0]),i['enum'](o>1?'messages':'message',{message:'message',messages:'messages'})])))]),r=i._("Delete Messages"),s=[c('React').createElement(c('XUIDialogCancelButton.react'),{key:'cancel'}),c('React').createElement(c('XUIDialogButton.react'),{action:'cancel',key:'submit',label:r,onClick:function(){this.$PagesManagerMessagingBatchActionMenu1.batchDelete(this.props.selectedRows,c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION);c('PagesManagerAction').deselectAll();c('PagesManagerAction').viewListItem(null);this.props.onSelectionClear&&this.props.onSelectionClear()}.bind(this),use:'confirm'})];c('SimpleXUIDialog').showEx(q,p,s)};n.prototype.$PagesManagerMessagingBatchActionMenu4=function(){'use strict';c('PagesManagerMessagingMessagelistAction').setIsContextCardHidden(this.props.pageID,true)};n.prototype.$PagesManagerMessagingBatchActionMenu5=function(){'use strict';c('PagesManagerMessagingMessagelistAction').setIsContextCardHidden(this.props.pageID,false)};n.prototype.$PagesManagerMessagingBatchActionMenu6=function(){'use strict';this.props.pageID||j(0);this.props.userID||j(0);var o=c('XPagesBanUserDataController').getURIBuilder().setFBID('page_id',this.props.pageID).setFBIDVector('user_ids',[this.props.userID]).getURI(),p=i._("Ban person from Page"),q=i._("A person who's banned can't post, comment, like or take other actions on the Page. They won't be notified."),r=this.props.userName?i._("Would you like to ban {user name}?",[i.param('user name',c('React').createElement(c('XUIText.react'),{weight:'bold'},this.props.userName))]):i._("Would you like to ban this user?"),s=c('React').createElement('div',null,r,c('React').createElement(c('InsightsInfoTip.react'),{alignH:'center',position:'above',tip:q}));c('SimpleXUIDialog').showConfirm(s,p,function(t){if(!t)return;new (c('AsyncRequest'))().setURI(o).setHandler(function(u){if(!u.payload.success)return;c('PagesManagerMessagingMessagelistAction').resetIsUserBanned(this.props.pageID,this.props.userID);this.$PagesManagerMessagingBatchActionMenu1.batchMarkSpam(this.props.selectedRows,c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION)}.bind(this)).send()}.bind(this))};n.prototype.renderMenu=function(){'use strict';return c('React').createElement(c('ReactXUIMenu'),{onItemClick:function(event,o){return this.$PagesManagerMessagingBatchActionMenu2(event,o)}.bind(this)},this.props.inlineActionParam.showFlag?c('React').createElement(m,{value:c('PagesMessengerActions').FLAG},i._("Flag")):null,this.props.inlineActionParam.showUnflag?c('React').createElement(m,{value:c('PagesMessengerActions').UNFLAG},i._("Unflag")):null,this.props.inlineActionParam.showSpam?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_SPAM},i._("Mark as Spam")):null,this.props.inlineActionParam.showUnspam?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_UNSPAM},i._("Move to Inbox")):null,this.props.inlineActionParam.showMarkRead?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_READ},i._("Mark as Read")):null,this.props.inlineActionParam.showMarkUnread?c('React').createElement(m,{value:c('PagesMessengerActions').MARK_AS_UNREAD},i._("Mark as Unread")):null,this.props.inlineActionParam.showArchive?c('React').createElement(m,{value:c('PagesMessengerActions').ARCHIVE},i._("Archive")):null,this.props.inlineActionParam.showUnarchive?c('React').createElement(m,{value:c('PagesMessengerActions').UNARCHIVE},i._("Move to Inbox")):null,this.props.inlineActionParam.showDelete?c('React').createElement(m,{value:c('PagesMessengerActions').DELETE_THREAD},i._("Delete")):null,this.props.inlineActionParam.showHideContextCard?c('React').createElement(m,{value:c('PagesMessengerActions').HIDE_CONTEXT_CARD},i._("Hide sender info")):null,this.props.inlineActionParam.showShowContextCard?c('React').createElement(m,{value:c('PagesMessengerActions').SHOW_CONTEXT_CARD},i._("Show sender info")):null,this.props.showBanFromPage&&this.props.pageID&&this.props.userID?c('React').createElement(m,{value:c('PagesMessengerActions').SHOW_BAN_FROM_PAGE},i._("Ban from Page")):null)};n.prototype.render=function(){'use strict';return c('React').createElement(c('PopoverMenu.react'),{alignh:this.props.alignh,className:"_1tly"+(!this.props.showBatchAction?' '+"hidden_elem":''),layerBehaviors:this.props.layerBehaviors,menu:this.renderMenu(),onHide:this.props.onHide,onShow:this.props.onShow,ref:'menu'},this.props.children)};n.defaultProps={alignh:'left'};f.exports=n}),null);
__d('PagesManagerMessagingThreadTitle.react',['cx','fbt','ContextualDialogArrow','ContextualLayerAutoFlip','Image.react','InlineBlock.react','LeftRight.react','Link.react','MercuryIDs','MercuryParticipants','MercuryThreadTitle.react','PagesManagerMessagingBatchActionMenu.react','PagesMessengerThreadUtils','PagesMessagingActionPlacement','MercuryParticipantListRenderer','XUIPopoverButton.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this,m);this.state={href:'',userName:null,imageSource:null}}l.prototype.$PagesManagerMessagingThreadTitle1=function(m){'use strict';if(m&&m.other_user_fbid){var n=c('MercuryIDs').getParticipantIDFromUserID(m.other_user_fbid);c('MercuryParticipants').get(n,function(o){var p=new (c('MercuryParticipantListRenderer'))().renderParticipantList([o]);this.setState({userName:p,href:o.href,imageSource:o.image_src})}.bind(this))}};l.prototype.componentWillMount=function(){'use strict';this.$PagesManagerMessagingThreadTitle1(this.props.thread)};l.prototype.componentWillReceiveProps=function(m){'use strict';this.$PagesManagerMessagingThreadTitle1(m.thread)};l.prototype.$PagesManagerMessagingThreadTitle2=function(){'use strict';return c('React').createElement('div',null,this.state.imageSource?c('React').createElement(c('Image.react'),{className:"_3stv",src:this.state.imageSource}):c('React').createElement('div',{className:"_3stv"}),c('React').createElement(c('InlineBlock.react'),{className:"_3ak8 _3-9a"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:false}),c('React').createElement(c('Link.react'),{href:this.state.href?this.state.href:'',target:'_blank'},i._("View Profile"))))};l.prototype.render=function(){'use strict';if(this.props.thread===null||this.props.thread===undefined)return c('React').createElement('div',{className:"_174o"});var m=c('PagesMessengerThreadUtils').getBatchActionMenuParam(this.props.thread);m.showMarkRead=false;m.showMarkUnread=false;m.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;m.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;var n=c('React').createElement(c('XUIPopoverButton.react'),{label:i._("Actions")});return c('React').createElement(c('LeftRight.react'),{className:"_3stw"},this.$PagesManagerMessagingThreadTitle2(),c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),{alignh:'right',layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],onHide:function o(){},onShow:function o(){},pageID:this.props.pageID,inlineActionParam:m,placement:c('PagesMessagingActionPlacement').THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBanFromPage:this.props.isBanFromPageEnabled,showBatchAction:true,userID:this.props.thread?this.props.thread.other_user_fbid:null,userName:this.state?this.state.userName:null},n))};f.exports=l}),null);
__d('PagesManagerMessagingDetailContainer.react',['cx','BootloadedComponent.react','FluxContainer','Grid.react','immutable','JSResource','MercuryMessageStore','mercuryRogerRe','MercuryThreadInformer','MercuryThreads','MessagingTag','MessengerConfig','MessengerHotLikePreviewEvents','PagesManagerMessagingAppointmentBannerRoot.react','PagesManagerMessagingComposerContainer.react','PagesManagerMessagingFilterStore','PagesManagerMessagingMessageList.react','PagesManagerMessagingMessagelistAction','PagesManagerMessagingMessagelistStore','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadTitle.react','PagesManagerPerfLogger','PagesMessagingPerfTypedLogger','PagesMessagingPerfLoggerEvent','React','ReactDOM','Set','SubscriptionsHandler','Vector','debounce'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Grid.react').GridItem;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m,n){j.constructor.call(this,m,n);this.$PagesManagerMessagingDetailContainer6=c('mercuryRogerRe').getForFBID(m.pageID);this.$PagesManagerMessagingDetailContainer10=c('MercuryThreadInformer').getForFBID(m.pageID);this.$PagesManagerMessagingDetailContainer2=null;this.$PagesManagerMessagingDetailContainer4=false;this.state={appointmentBannerHeight:0,isContextCardEnabled:false,isLoading:false,isLoadingMore:false,messagelist:[],preventScroll:false,hideContextCard:m.config.hideContextCard,readReceipts:c('immutable').OrderedMap(),scrollHeight:0,threadID:'',isUserBanned:false,thread:{}};this.$PagesManagerMessagingDetailContainer3=false;this.$PagesManagerMessagingDetailContainer7=c('debounce')(function(){if(this.props.height)this.$PagesManagerMessagingDetailContainer11(this.props.height);}.bind(this),50)}l.getStores=function(){return [c('PagesManagerMessagingMessagelistStore')]};l.calculateState=function(m,n){var o=[],p={},q=null,r=n.listItemKey;if(r){o=c('PagesManagerMessagingMessagelistStore').getMessagelist(n.pageID,r);p=c('PagesManagerMessagingMessagelistStore').getReadReceipts(r);q=c('MercuryThreads').getForFBID(n.pageID).getThreadMetaNow(r);if(q&&q.other_user_fbid&&n.config&&n.pageID)c('PagesManagerMessagingMessagelistAction').fetchIsUserBanned(n.pageID,q.other_user_fbid);}var s=c('PagesManagerMessagingMessagelistStore').isCardHidden();if(s===null)s=n.config.hideContextCard;var t=n.config.enableContextCard&&q&&q.other_user_fbid,u=n.pageID&&q&&q.other_user_fbid?c('PagesManagerMessagingMessagelistStore').getIsUserBanned(n.pageID,q.other_user_fbid):false;return {appointmentBannerHeight:c('PagesManagerMessagingMessagelistStore').getAppointmentBannerHeight(),isContextCardEnabled:t,hideContextCard:s,isLoading:c('PagesManagerMessagingMessagelistStore').isLoading(),isLoadingMore:c('PagesManagerMessagingMessagelistStore').isLoadingMore(),isUserBanned:u,scrollHeight:c('PagesManagerMessagingMessagelistStore').getScrollHeight(),messagelist:o,readReceipts:p,threadID:n.listItemKey,thread:q}};l.prototype.$PagesManagerMessagingDetailContainer11=function(m){var n=0;if(this.refs.threadTitle)n=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.threadTitle)).y;var o=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.composer)).y,p=m-n-o-this.state.appointmentBannerHeight;if(p<0)p=0;c('PagesManagerMessagingMessagelistAction').setScrollAreaHeight(p)};l.prototype.$PagesManagerMessagingDetailContainer12=function(m,n){var o=this.$PagesManagerMessagingDetailContainer6.getSeenTimestamps(m),p=new (c('Set'))(o.keys());return o.withMutations(function(q){c('immutable').Seq(n).reverse().forEach(function(r){if(p.size===0)return false;if(!p.has(r.author))return true;q.update(r.author,function(s){if(!s||s.watermark<=r.timestamp)return {watermark:r.timestamp,action:r.timestamp};return s});p['delete'](r.author)})})};l.prototype.componentDidMount=function(){c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_DETAIL_VIEW_DID_RENDER,this.props.perfParams);if(this.props.listItemKey)this.$PagesManagerMessagingDetailContainer13(this.props.listItemKey);};l.prototype.componentWillReceiveProps=function(m){var n=m.listItemKey;if(n&&this.props.listItemKey!==n)this.$PagesManagerMessagingDetailContainer13(n);};l.prototype.componentWillUpdate=function(m,n){if(m.height!==this.props.height)this.$PagesManagerMessagingDetailContainer11(m.height);};l.prototype.componentDidUpdate=function(m,n){if(n.appointmentBannerHeight!==this.state.appointmentBannerHeight)this.$PagesManagerMessagingDetailContainer11(this.props.height);};l.prototype.getMessageStore=function(){return this.$PagesManagerMessagingDetailContainer5};l.prototype.logMessageLoadingStart=function(m){this.$PagesManagerMessagingDetailContainer3=true;this.$PagesManagerMessagingDetailContainer1=Date.now();this.$PagesManagerMessagingDetailContainer9=m;new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesMessagingPerfLoggerEvent').MESSAGELIST_LOAD_START).log()};l.prototype.logMessageLoadingEnd=function(){if(this.$PagesManagerMessagingDetailContainer3&&this.$PagesManagerMessagingDetailContainer9===this.props.listItemKey){this.$PagesManagerMessagingDetailContainer3=false;new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesMessagingPerfLoggerEvent').MESSAGELIST_LOAD_END).setPerfTime(Date.now()-this.$PagesManagerMessagingDetailContainer1).log()}};l.prototype.$PagesManagerMessagingDetailContainer13=function(m){this.$PagesManagerMessagingDetailContainer5&&this.$PagesManagerMessagingDetailContainer5.destroy();this.$PagesManagerMessagingDetailContainer8&&this.$PagesManagerMessagingDetailContainer8.release();this.$PagesManagerMessagingDetailContainer5=new (c('MercuryMessageStore'))(m,c('MessengerConfig').MessageLoadCount,this.props.pageID);var n=c('PagesManagerMessagingMessagelistStore').getMessagelist(this.props.pageID,m);if(n.length===0){c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(false);c('PagesManagerMessagingMessagelistAction').setIsLoading(true);this.logMessageLoadingStart(m)}var o=this.$PagesManagerMessagingDetailContainer12(m,n);c('PagesManagerMessagingMessagelistAction').updateReadReceipts(this.props.pageID,m,o);this.$PagesManagerMessagingDetailContainer8=new (c('SubscriptionsHandler'))();this.$PagesManagerMessagingDetailContainer8.addSubscriptions(this.$PagesManagerMessagingDetailContainer5.subscribe(function(p){this.logMessageLoadingEnd();c('PagesManagerMessagingMessagelistAction').setIsLoading(false);c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(false);c('PagesManagerMessagingMessagelistAction').updateMessagelist(this.props.pageID,m,p)}.bind(this)),this.$PagesManagerMessagingDetailContainer10.subscribe('threads-updated',function(p,q){if(q[this.props.listItemKey])c('PagesManagerMessagingMessagelistAction').updateThread(this.props.pageID,this.props.listItemKey);}.bind(this)),this.$PagesManagerMessagingDetailContainer6.subscribe('change',function(p,q){if(q[this.props.listItemKey]){var r=c('PagesManagerMessagingMessagelistStore').getMessagelist(this.props.pageID,this.props.listItemKey),s=this.$PagesManagerMessagingDetailContainer12(this.props.listItemKey,r);c('PagesManagerMessagingMessagelistAction').updateReadReceipts(this.props.pageID,this.props.listItemKey,s)}}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(p,q){if(m==q)c('PagesManagerMessagingMessagelistAction').setHotLikeStart(p);}),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(p){if(m==p)c('PagesManagerMessagingMessagelistAction').setHotLikeEnd();}))};l.prototype.$PagesManagerMessagingDetailContainer14=function(){var m=c('PagesManagerMessagingFilterStore').getActiveFilterName();if(!this.props.listItemKey||m===c('MessagingTag').UNREAD)return;c('PagesManagerMessagingThreadInteractionHelper').handleUnreadStateUpdate(this.props.listItemKey,this.props.pageID,m);c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(this.props.listItemKey,this.props.pageID)};l.prototype.$PagesManagerMessagingDetailContainer15=function(){if(!this.state.isLoadingMore)if(this.getMessageStore().fetchMoreMessages()){c('PagesManagerMessagingMessagelistAction').setIsLoading(false);c('PagesManagerMessagingMessagelistAction').setIsLoadingMore(true)}};l.prototype.$PagesManagerMessagingDetailContainer16=function(){return c('React').createElement(c('PagesManagerMessagingMessageList.react'),babelHelpers['extends']({},this.props,{initLoading:this.state.isLoading,isLoadingMore:this.state.isLoadingMore,messagelist:c('immutable').List(this.state.messagelist),fetchEarlierMessages:function(){return this.$PagesManagerMessagingDetailContainer15()}.bind(this),readReceipts:this.state.readReceipts,scrollHeight:this.state.scrollHeight,threadID:this.state.threadID,thread:this.state.thread}))};l.prototype.$PagesManagerMessagingDetailContainer17=function(m){if(!this.state.isContextCardEnabled)return null;var n=m,o=0;if(this.refs.threadTitle)o=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.threadTitle)).y;n+=o;return c('React').createElement(k,{alignv:'middle',className:"_2utd"+(this.state.hideContextCard?' '+"hidden_elem":'')},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{className:"hidden_elem"}),bootloadLoader:c('JSResource')('PagesMessengerContextCardContainer.react').__setRef('PagesManagerMessagingDetailContainer.react'),pageID:this.props.pageID,userID:this.state.thread&&this.state.thread.other_user_fbid,scrollHeight:n,updatedUI:true}))};l.prototype.$PagesManagerMessagingDetailContainer18=function(){if(!this.props.config.enableBookingFlow)return null;var m=this.state.thread||{};return c('React').createElement(c('PagesManagerMessagingAppointmentBannerRoot.react'),{messageList:this.state.messagelist,pageID:this.props.pageID,userID:m.other_user_fbid})};l.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(c('Grid.react'),{alignv:'top',className:"_2utb",cols:this.state.isContextCardEnabled?2:1},c('React').createElement(k,{className:"_2utc"},c('React').createElement(c('PagesManagerMessagingThreadTitle.react'),{pageID:this.props.pageID,isContextCardEnabled:this.state.isContextCardEnabled,isContextCardHidden:this.state.hideContextCard,isBanFromPageEnabled:!this.state.isUserBanned,s:true,ref:'threadTitle',thread:this.state.thread}),this.$PagesManagerMessagingDetailContainer18(),this.$PagesManagerMessagingDetailContainer16()),this.$PagesManagerMessagingDetailContainer17(this.state.scrollHeight)),c('React').createElement('div',{className:!this.props.config.enableComposer?"hidden_elem":''},c('React').createElement(c('PagesManagerMessagingComposerContainer.react'),{canCreateAppointment:this.props.config.shouldShowCreateAppointmentButton,creatorInfo:this.props.config.creatorInfo,defaultCurrency:this.props.config.defaultCurrency,onInitialRender:function(){return this.$PagesManagerMessagingDetailContainer7()}.bind(this),onMessageOrAttachmentUpdate:function(){return this.$PagesManagerMessagingDetailContainer7()}.bind(this),onFocus:function(){return this.$PagesManagerMessagingDetailContainer14()}.bind(this),recipientID:this.state.thread?this.state.thread.other_user_fbid.toString():null,ref:'composer',shouldSendTypingIndications:this.props.config.typingIndications,shouldShowCommerceInvoiceButton:this.props.config.shouldShowCommerceInvoiceButton,shouldShowCommerceInvoiceButtonNUX:this.props.config.shouldShowCommerceInvoiceButtonNUX,shouldShowCommerceInvoiceButtonPUX:this.props.config.shouldShowCommerceInvoiceButtonPUX,shouldShowCommerceInvoiceNewFlow:this.props.config.shouldShowCommerceInvoiceNewFlow,shouldShowInvoiceShippingNUX:this.props.config.shouldShowInvoiceShippingNUX,shouldShowConfirmPayment:this.props.config.shouldShowConfirmPayment,threadElementID:this.state.threadID,threadID:this.state.threadID,userID:this.props.pageID})))};f.exports=c('FluxContainer').create(l,{withProps:true})}),null);
__d('PagesManagerAwayToggle.react',['cx','fbt','PagesManagerAwayToggleAction','BUISwitch.react','PagesManagerCountDownTimer.react','React','Tooltip'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerAwayToggle1=function(){'use strict';if(this.props.isAway)c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,false);};l.prototype.$PagesManagerAwayToggle2=function(m){'use strict';if(m!==this.props.isAway)c('PagesManagerAwayToggleAction').setToggleStatus(this.props.pageID,m);};l.prototype.render=function(){'use strict';var m=i._("Going out? Set your status to Away for 12 hours. Change it if you get back sooner."),n=i._("Away"),o=0;if(this.props.expirationTimestamp)o=this.props.expirationTimestamp*1000;var p=c('React').createElement(c('PagesManagerCountDownTimer.react'),{expireTimestamp:o,isHidden:!this.props.isAway,onTimeup:function(){return this.$PagesManagerAwayToggle1()}.bind(this)});return c('React').createElement('div',{className:"_4cdp"},c('React').createElement('div',{className:"_ast"},c('React').createElement(c('BUISwitch.react'),babelHelpers['extends']({onToggle:function(q){return this.$PagesManagerAwayToggle2(q)}.bind(this),value:this.props.isAway},c('Tooltip').propsFor(m)))),c('React').createElement('div',{className:"_asu"+(this.props.isAway?' '+"_2eyq":'')},n),p)};function l(){'use strict';j.apply(this,arguments)}f.exports=l}),null);
__d('PagesManagerMessagingBatchActionHeader.react',['cx','fbt','PagesManagerMessagingBatchActionMenu.react','PagesMessagingActionPlacement','React','XUIPopoverButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),babelHelpers['extends']({layerBehaviors:[],placement:c('PagesMessagingActionPlacement').THREAD_LIST_BATCH_ACTION},this.props),c('React').createElement(c('XUIPopoverButton.react'),{className:"_3640",label:i._("Actions")}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('PagesManagerMessagingBatchActionHeaderContainer.react',['FluxContainer','MercuryPageThreadActions','MercuryThreads','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingBatchActionHeader.react','PagesManagerMessagingFilterStore','PagesMessengerThreadUtils','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);this.$PagesManagerMessagingBatchActionHeaderContainer1=c('MercuryPageThreadActions').getForFBID(k.pageID)}j.getStores=function(){return [c('PagesManagerMessagingFilterStore')]};j.calculateState=function(k,l){var m=c('PagesManagerMessagingFilterStore').getActiveFolderName(),n=c('PagesManagerMessagingFilterStore').getActiveFilterName(),o=c('MercuryThreads').getForFBID(l.pageID),p=false,q=false,r=false,s=false,t=false,u=false,v=false,w=false,x=false,y=0,z=0;l.selectedRows.forEach(function(ba){var ca=o.getThreadMetaNow(ba);if(c('PagesMessengerThreadUtils').isFlagThread(ca))y++;if(ca&&ca.unread_count===0)z++;});var aa=l.selectedRows.length;if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){p=true;s=true;u=aa-y>0;v=y>0;w=z<aa;x=z>0}else if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.ARCHIVED&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){q=true;r=true}else if(m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.SPAM&&n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.ALL){t=true}else if(n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED&&m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX){v=true}else if(n===c('PagesManagerMessagingNavigationUnitKey').FILTERS.UNREAD&&m===c('PagesManagerMessagingNavigationUnitKey').FOLDERS.INBOX)w=true;return {inlineActionParam:{showArchive:p,showDelete:q,showUnarchive:r,showSpam:s,showUnspam:t,showFlag:u,showUnflag:v,showMarkRead:w,showMarkUnread:x}}};j.prototype.$PagesManagerMessagingBatchActionHeaderContainer2=function(){this.props.onSelectionClear()};j.prototype.render=function(){return c('React').createElement(c('PagesManagerMessagingBatchActionHeader.react'),babelHelpers['extends']({onSelectionClear:function(){return this.$PagesManagerMessagingBatchActionHeaderContainer2()}.bind(this),pageID:this.props.pageID,showBatchAction:this.props.showBatchAction,selectedRows:this.props.selectedRows},this.state))};f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('PagesManagerMessagingFilterPanel.react',['cx','ix','fbt','Image.react','InlineBlock.react','LeftRight.react','Link.react','MessengerSpinner.react','PageCustomTagSearchSource','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerCustomTagsAction','PagesManagerLogger','PagesManagerManageCustomTagsDialog.react','PagesManagerMessagingFilterActions','PagesManagerMessagingThreadlistAction','React','ReactDOM','SearchableTextInput.react','ScrollableArea.react','Vector','fbglyph','nullthrows','PagesManagerMessagingNavigationUnitKey'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('PagesManagerMessagingNavigationUnitKey').FILTERS,n=45,o=130;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(q){l.constructor.call(this,q);this.$PagesManagerMessagingFilterPanel1=function(r){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,r)}.bind(this);this.$PagesManagerMessagingFilterPanel2=function(){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,this.props.defaultFilter)}.bind(this);this.$PagesManagerMessagingFilterPanel3=function(r){this.setState({tagQuery:'',tagQueryResult:null});c('PagesManagerMessagingThreadlistAction').addSearchCustomTag(this.props.pageID,r.name,'filter_panel')}.bind(this);this.$PagesManagerMessagingFilterPanel4=function(r){this.setState({tagQuery:'',tagQueryResult:null});c('PagesManagerMessagingThreadlistAction').removeSearchCustomTag(this.props.pageID,r.name,'filter_panel')}.bind(this);this.$PagesManagerMessagingFilterPanel6=function(event){this.setState({tagQuery:event.target.value})}.bind(this);this.$PagesManagerMessagingFilterPanel7=function(r,s){if(s===this.state.tagQuery)this.setState({tagQueryResult:r.map(function(t){return t.getTitle()})});}.bind(this);this.$PagesManagerMessagingFilterPanel14=function(){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_MANAGE_TAGS,this.props.pageID);this.$PagesManagerMessagingFilterPanel15(true)}.bind(this);this.$PagesManagerMessagingFilterPanel15=function(r){c('PagesManagerCustomTagsAction').toggleManageTagsDialog(this.props.pageID,r)}.bind(this);this.state={tagQuery:'',tagQueryResult:null}}p.prototype.$PagesManagerMessagingFilterPanel5=function(){var q=this.props.height-n,r=c('ReactDOM').findDOMNode(this.refs.header);if(r!==null)q-=c('Vector').getElementDimensions(r).y;var s=c('ReactDOM').findDOMNode(this.refs.searchBar);if(s!==null)q-=c('Vector').getElementDimensions(s).y;return q-o};p.prototype.$PagesManagerMessagingFilterPanel8=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.getKey()},c('React').createElement(c('Image.react'),{className:"__o0",src:i("141802")}),c('React').createElement(c('PagesEnumTag.react'),{onClick:this.$PagesManagerMessagingFilterPanel1,unit:q,textOnly:true}),c('React').createElement(c('Link.react'),{className:"__o1",onClick:this.$PagesManagerMessagingFilterPanel2},j._("Remove")))};p.prototype.$PagesManagerMessagingFilterPanel9=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.getKey()},c('React').createElement(c('PagesEnumTag.react'),{onClick:this.$PagesManagerMessagingFilterPanel1,unit:q,textOnly:true}))};p.prototype.$PagesManagerMessagingFilterPanel10=function(q){return c('React').createElement('div',{className:"_3v0k",key:q.id},c('React').createElement(c('Image.react'),{className:"__o0",src:i("141802")}),c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,key:q.id,tagData:q,textOnly:true}),c('React').createElement(c('Link.react'),{className:"__o1",onClick:function(){return this.$PagesManagerMessagingFilterPanel4(q)}.bind(this)},j._("Remove")))};p.prototype.$PagesManagerMessagingFilterPanel11=function(q){var r=null;if(this.props.currentSearchCustomTagThreadCounts)r=this.props.currentSearchCustomTagThreadCounts.get(q.name);return c('React').createElement('div',{className:"_3v0k",key:q.id},c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:false,key:q.id,tagData:q,onClick:this.$PagesManagerMessagingFilterPanel3,textOnly:true}),c('React').createElement('span',{className:"_2-3_"},r!==null?r:c('React').createElement(c('MessengerSpinner.react'),null)))};p.prototype.$PagesManagerMessagingFilterPanel12=function(){var q=[],r=[],s=[],t=this.state.tagQuery!==''&&this.state.tagQueryResult!==null;if(this.props.activeFilter.getKey()===m.FLAGGED)q.push(this.$PagesManagerMessagingFilterPanel8(this.props.activeFilter));this.props.currentSearchCustomTagNames.map(function(u){if(!t||c('nullthrows')(this.state.tagQueryResult).indexOf(u)>=0)q.push(this.$PagesManagerMessagingFilterPanel10(this.props.customTags.get(u)));}.bind(this));if(this.state.tagQuery!==''&&this.state.tagQueryResult!==null){c('nullthrows')(this.state.tagQueryResult).map(function(u){if(!this.props.currentSearchCustomTagNames.contains(u))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(u)));}.bind(this))}else{if(this.props.enumTags)this.props.enumTags.forEach(function(u){if(u.getKey()!==this.props.activeFilter.getKey())r.push(this.$PagesManagerMessagingFilterPanel9(u));}.bind(this));if(this.props.currentSearchCustomTagThreadCounts!==null)this.props.currentSearchCustomTagThreadCounts.forEach(function(u,v){if(!this.props.currentSearchCustomTagNames.contains(v))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(v)));}.bind(this));this.props.customTags.forEach(function(u,v){if(!this.props.currentSearchCustomTagNames.contains(v)&&(this.props.currentSearchCustomTagThreadCounts===null||v in this.props.currentSearchCustomTagThreadCounts))s.push(this.$PagesManagerMessagingFilterPanel11(this.props.customTags.get(v)));}.bind(this))}return c('React').createElement(c('ScrollableArea.react'),{className:"_3v0j",height:this.$PagesManagerMessagingFilterPanel5(),key:'tagList'},q,r,s)};p.prototype.$PagesManagerMessagingFilterPanel13=function(){return c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('Image.react'),{src:i("94632")}),c('React').createElement(c('InlineBlock.react'),{className:"_106m"},c('React').createElement('div',{className:"_106n"},j._("About labels")),j._("Labels help you to track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")))};p.prototype.$PagesManagerMessagingFilterPanel16=function(){return c('React').createElement(c('PagesManagerManageCustomTagsDialog.react'),{customTags:this.props.customTags,pageID:this.props.pageID,show:this.props.isManagingTags,onToggle:this.$PagesManagerMessagingFilterPanel15,isMergingLabels:this.props.isMergingLabels})};p.prototype.render=function(){return c('React').createElement('div',{className:"_5xjz",style:{height:this.props.height-n+'px'}},c('React').createElement(c('LeftRight.react'),{className:"_5xj_",ref:'header'},j._("LABELS"),c('React').createElement(c('Link.react'),{onClick:this.$PagesManagerMessagingFilterPanel14},j._("Add and manage"))),c('React').createElement(c('SearchableTextInput.react'),{className:"_30p_",onChange:this.$PagesManagerMessagingFilterPanel6,onEntriesFound:this.$PagesManagerMessagingFilterPanel7,placeholder:j._("Search your labels..."),queryString:this.state.tagQuery,searchSource:c('PageCustomTagSearchSource').getInstance(this.props.customTags.toArray(),false),ref:'searchBar'}),this.$PagesManagerMessagingFilterPanel12(),this.$PagesManagerMessagingFilterPanel16(),this.$PagesManagerMessagingFilterPanel13())};f.exports=p}),null);
__d('PagesManagerMessagingFilterPanelContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','PagesManagerCustomTagsAction','PagesManagerCustomTagsStore','PagesManagerMessagingFilterPanel.react','PagesManagerMessagingNavigationUnitKey','PagesManagerMessagingThreadlistAction','React','PagesManagerMessagingSearchStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('PagesManagerMessagingNavigationUnitKey').FILTERS;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l)}k.getStores=function(){return [c('PagesManagerMessagingFilterStore'),c('PagesManagerCustomTagsStore'),c('PagesManagerMessagingSearchStore')]};k.prototype.componentWillMount=function(){if(!c('PagesManagerCustomTagsStore').hasCustomTags(this.props.pageID))c('PagesManagerCustomTagsAction').fetch(this.props.pageID);};k.prototype.componentDidUpdate=function(l,m){if(this.state.isFiltering&&!m.isFiltering&&this.state.currentSearchCustomTagThreadCounts===null)c('PagesManagerMessagingThreadlistAction').fetchCustomTagThreadCounts(this.props.pageID);};k.calculateState=function(l,m){return {activeFilter:c('PagesManagerMessagingFilterStore').getActiveFilter(),currentSearchCustomTagNames:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames(),currentSearchCustomTagThreadCounts:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagThreadCounts(),customTags:c('PagesManagerCustomTagsStore').getCustomTags(m.pageID),isManagingTags:c('PagesManagerCustomTagsStore').getIsManagingTags(),isFiltering:c('PagesManagerMessagingFilterStore').getIsFiltering(),isMergingLabels:c('PagesManagerCustomTagsStore').getIsMergingLabels()}};k.prototype.render=function(){var l=c('PagesManagerMessagingFilterStore').getAvailableFilters(),m=[],n=l.get(0);if(c('PagesManagerMessagingFilterStore').getActiveFilterName()===j.ALL)m=l.filter(function(o){return o.getKey()===j.FLAGGED});return c('React').createElement(c('PagesManagerMessagingFilterPanel.react'),{activeFilter:this.state.activeFilter,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames,currentSearchCustomTagThreadCounts:this.state.currentSearchCustomTagThreadCounts,customTags:this.state.customTags,defaultFilter:n,enumTags:m,height:this.props.height,isManagingTags:this.state.isManagingTags,pageID:this.props.pageID,isMergingLabels:this.state.isMergingLabels})};f.exports=c('FluxContainer').create(k,{withProps:true})}),null);
__d('PagesManagerMessagingFilterPanelSwitch.react',['ix','cx','fbt','AsyncRequest','ContextualDialogArrow','ContextualLayer.react','Image.react','PagesAdminToolUIActionType','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterPanelContainer.react','React','XBasicFBNuxDismissController','XUIAmbientNUX.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=4152;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$PagesManagerMessagingFilterPanelSwitch1=function(){var p=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',m).getURI();new (c('AsyncRequest'))().setURI(p).send();this.setState({showNUX:false})}.bind(this);this.$PagesManagerMessagingFilterPanelSwitch2=function(){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_TOGGLE_FILTER_PANEL,this.props.pageID,{show:!this.props.isFiltering});c('PagesManagerMessagingFilterActions').toggleFilterPanel(this.props.pageID,!this.props.isFiltering)}.bind(this);this.state={showNUX:this.props.showNUX}}n.prototype.$PagesManagerMessagingFilterPanelSwitch3=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.contextRef}.bind(this),onCloseButtonClick:this.$PagesManagerMessagingFilterPanelSwitch1,position:'above',shown:this.state.showNUX,width:'auto'},j._("You can now filter your inbox by labels."))};n.prototype.render=function(){return c('React').createElement('span',null,c('React').createElement('span',{className:"_5pwy",onClick:this.$PagesManagerMessagingFilterPanelSwitch2,ref:'contextRef',role:'button',tabIndex:'0'},c('React').createElement('span',{className:"_5pwz"+(this.props.isFiltering?' '+"_5px3":'')},j._("Filter by")),c('React').createElement(c('Image.react'),{className:"_5px4",src:this.props.isFiltering?h("113106"):h("124190")})),c('React').createElement(c('ContextualLayer.react'),{alignment:'right',containerWidthMatchContext:false,contextRef:function(){return this.refs.contextRef}.bind(this),layerBehaviors:[c('ContextualDialogArrow')],shown:this.props.isFiltering,offsetX:12,offsetY:16,position:'below'},c('React').createElement(c('PagesManagerMessagingFilterPanelContainer.react'),{pageID:this.props.pageID,height:this.props.height})),this.$PagesManagerMessagingFilterPanelSwitch3())};f.exports=n}),null);
__d('PagesManagerMessagingList.react',['cx','fbt','Link.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesMessagingSearchMode','PagesSelectableList.react','React','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.$PagesManagerMessagingList1=function(m){'use strict';c('PagesManagerAction').viewListItem(m)};l.prototype.$PagesManagerMessagingList2=function(){'use strict';if(!this.props.isInSearchMode){if(!this.props.list.length){if(!this.props.initLoading){return [this.props.emptyView]}else return [this.$PagesManagerMessagingList3()];}else return this.$PagesManagerMessagingList4();}else return this.$PagesManagerMessagingList5();};l.prototype.$PagesManagerMessagingList5=function(){'use strict';var m=null,n=[];switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:m=i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);Object.keys(this.props.snippetSearchResult).forEach(function(p){n.push(c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingList1,snippetSearchResult:this.props.snippetSearchResult[p],highlightText:this.props.searchTerm,useHighlightTitle:false,type:'li'},this.props.containerProps)))}.bind(this));break;case c('PagesMessagingSearchMode').NAME_SEARCH:m=i._("Names that contain \"{message search term}\"",[i.param('message search term',this.props.searchTerm)]);n=this.props.searchResult.map(function(p){return c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,listItem:p,pageID:this.props.pageID,ref:p,key:p,onViewingListItem:this.$PagesManagerMessagingList1,highlightText:this.props.searchTerm,useHighlightTitle:true,type:'li'},this.props.containerProps))}.bind(this));break;}m=c('React').createElement('li',{className:"_16-z",key:'searchTitle'},m);var o=this.props.hasMoreResult?c('React').createElement('li',{className:"_2b19",key:'loadMoreResult'},c('React').createElement(c('Link.react'),{onClick:this.props.loadMore.bind(null,this.props.searchMode,this.props.searchTerm)},i._("See More Results"))):c('React').createElement('li',{className:"_3o39",key:'loadMoreResult'});return [m].concat(n,[o])};l.prototype.$PagesManagerMessagingList3=function(){'use strict';return c('React').createElement('div',{key:'loading'})};l.prototype.$PagesManagerMessagingList4=function(){'use strict';return this.props.list.map(function(m){return c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,listItem:m,pageID:this.props.pageID,ref:this.props.getKey(m),key:this.props.getKey(m),onViewingListItem:this.$PagesManagerMessagingList1,type:'li'},this.props.containerProps))}.bind(this))};l.prototype.render=function(){'use strict';var m=this.$PagesManagerMessagingList2();return c('React').createElement(c('PagesSelectableList.react'),{actionBarRightComponent:this.props.actionBarRightContainer,customLeftComponent:this.props.folderDropDown,deselectAllLabel:'',hideBatchAction:this.props.isInSearchMode||this.props.isFilteringByTag,enableOnVisible:!this.props.isInSearchMode&&this.props.hasMoreResult,forceRequestMoreRows:!this.props.isInSearchMode,height:this.props.height,header:this.props.header,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.props.isInSearchMode?c('emptyFunction'):this.props.onScroll,ref:'selectableList',scrollableAreaMode:true,scrollableAreaHasShadow:false,scrollableAreaOnScroll:this.props.handleScroll,scrollableWidth:this.props.scrollableWidth,selectAllLabel:this.props.selectAllLabel},m)};l.prototype.clearSelection=function(){'use strict';this.refs.selectableList.clearSelection()};function l(){'use strict';j.apply(this,arguments)}f.exports=l}),null);
__d('MercuryPageSeenIndicator.react',['cx','MercuryIDs','MercurySeenIndicator.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.snippetSearchResult){var l=this.props.snippetSearchResult.snippets.length;if(l===1){var m=this.props.snippetSearchResult.snippets[0].author,n=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(m===n)return c('React').createElement('span',{className:"_3jy5 repliedLast"});}return c('React').createElement('span',null)}else return c('React').createElement(c('MercurySeenIndicator.react'),{thread:this.props.thread,viewer:this.props.viewer});};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('MercuryPageThreadTitle.react',['DOM','MercuryMessageRenderer','MercuryThreadTitle.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('MercuryThreadTitle.react'));i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement('div',{className:this.props.className},c('React').createElement('span',{ref:'title'}))};j.prototype.componentDidUpdate=function(){var k=this.props.thread.name?this.$MercuryPageThreadTitle1():this.state.participantNames;if(this.props.useHighlightTitle){var l=k.toLowerCase().search(this.props.highlightText.toLowerCase()),m={};m[l]=this.props.highlightText;k=c('MercuryMessageRenderer').formatMessageBody(k,m)}c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.title),k)};function j(){h.apply(this,arguments)}j.defaultProps={isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};f.exports=j}),null);
__d('PagesManagerMessagingListRow.react',['csx','cx','fbt','ContextualDialogArrow','ContextualLayerAutoFlip','CSS','PagesManagerMessagingFilterStore','Layout.react','MercuryPageSeenIndicator.react','MercuryPageThreadTitle.react','MercuryThreadSnippet.react','mercuryThreadTimestampReact','MercuryTimestamp','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerLogger','PagesManagerMessagingBatchActionMenu.react','PagesMessagingActionPlacement','PagesSelectableListRow.react','React','ShimButton.react','SplitImage.react','PagesManagerMessagingNavigationUnitKey','XUIBadge.react'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('mercuryThreadTimestampReact').jsComponent,n=c('Layout.react').Column,o=c('Layout.react').FillColumn,p=44;k=babelHelpers.inherits(q,c('React').Component);l=k&&k.prototype;function q(r){'use strict';l.constructor.call(this,r);this.state={menuShown:false,showFadding:false}}q.prototype.renderSnippetSearchResult=function(){'use strict';var r=this.props.snippetSearchResult.snippets.length,s=this.props.snippetSearchResult.num_total_snippets;if(r===1){return c('React').createElement('div',{className:"_3f6a"},this.props.snippetSearchResult.snippets[0].body)}else return c('React').createElement('div',{className:"_3f6a"},j._("Found {number of messages found} results",[j.param('number of messages found',s)]));};q.prototype.$PagesManagerMessagingListRow1=function(){'use strict';var r=this.props.customTagsData,s=null;if(this.props.isFlagged)s=c('React').createElement(c('PagesEnumTag.react'),{canRemove:false,unit:c('PagesManagerMessagingFilterStore').getFilterByKey(c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)});return c('React').createElement('div',{className:"_1woq",ref:'tagBlock'},c('React').createElement('div',{ref:'tags',className:"_4pbm"},s,r.map(function(t){return c('React').createElement(c('PagesContextCardCustomTag.react'),{key:t.name,canRemove:false,tagData:t})})),c('React').createElement('span',{className:"_1wor"}))};q.prototype.$PagesManagerMessagingListRow2=function(){'use strict';return c('React').createElement('div',null,c('React').createElement('div',{className:"_2fp5"},this.props.participantImages?c('React').createElement(c('SplitImage.react'),{srcs:this.props.participantImages,size:p}):null),c('React').createElement('div',{className:"_55hu"},c('React').createElement(m,{time:this.props.thread.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(this.props.thread.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(this.props.thread.timestamp)})),c('React').createElement(c('PagesManagerMessagingBatchActionMenu.react'),{alignh:'right',layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],onHide:function(){this.setState({menuShown:false})}.bind(this),onShow:function(){this.setState({menuShown:true})}.bind(this),pageID:this.props.pageID,inlineActionParam:this.props.inlineActionParam,placement:c('PagesMessagingActionPlacement').THREAD_ROW_ACTION_ICON,selectedRows:[this.props.thread.thread_id],showBatchAction:true},c('React').createElement(c('ShimButton.react'),{className:"_4hq1",inline:true,onClick:function r(event){return event.stopPropagation()}})),c('React').createElement(c('Layout.react'),null,c('React').createElement(o,{className:"_2fp6"},c('React').createElement(c('MercuryPageThreadTitle.react'),{className:"_1a_3",highlightText:this.props.highlightText,showUnreadCount:false,thread:this.props.thread,useShortName:false,useHighlightTitle:this.props.useHighlightTitle,viewer:this.props.pageID}),c('React').createElement('div',{className:"_1a_7"},this.props.snippetSearchResult?this.renderSnippetSearchResult():c('React').createElement(c('MercuryThreadSnippet.react'),{participants:this.props.participants,shouldRenderYou:false,thread:this.props.thread,viewer:this.props.pageID})),this.$PagesManagerMessagingListRow1()),c('React').createElement(n,{className:"_2fp8"},this.props.thread.unread_count>0?c('React').createElement('div',{className:"_2fp9"},c('React').createElement(c('XUIBadge.react'),{count:this.props.thread.unread_count,maxcount:99})):c('React').createElement('div',{className:"_2fpa"},c('React').createElement(c('MercuryPageSeenIndicator.react'),{snippetSearchResult:this.props.snippetSearchResult,thread:this.props.thread,viewer:this.props.pageID})))))};q.prototype.render=function(){'use strict';return c('React').createElement(c('PagesSelectableListRow.react'),{disabled:this.props.disableCheckBox,onSelected:this.props.onSelected,onClick:function(event){if(c('CSS').matchesSelector(event.target.parentElement,"._4vbb"))return;c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_THREAD_BLOCK,this.props.pageID);this.props.onViewingListItem(this.props.listItem)}.bind(this),selected:this.props.selected,className:"_1a_0"+(this.props.isUnread?' '+"_1a_1":'')+(this.props.isViewing&&!this.props.selected?' '+"_3wxb":'')+(this.state.menuShown?' '+"_1hgw":'')+(' '+"_o3f")+(' '+"_1yt-")+(this.props.selectionMode?' '+"_ptw":'')},this.$PagesManagerMessagingListRow2())};q.defaultProps={disableCheckBox:false,useHighlightTitle:false};f.exports=q}),null);
__d('PagesManagerMessagingListRowContainer.react',['immutable','PagesManagerMessagingListRow.react','MercuryIDs','MercuryParticipants','MercuryThreads','PagesManagerCustomTagsStore','PagesManagerMessagingFilterStore','PagesManagerMessagingThreadInteractionHelper','PagesMessengerThreadUtils','PageCommItemMessengerConsistencyTypedLogger','PageCommItemStatus','MessagingTag','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){i.constructor.call(this);this.$PagesManagerMessagingListRowContainer4=function(l){if(this.$PagesManagerMessagingListRowContainer1)this.setState({participantImages:l});}.bind(this);this.$PagesManagerMessagingListRowContainer2=function(l){c('PagesManagerMessagingThreadInteractionHelper').handleUnreadStateUpdate(l,this.props.pageID,c('PagesManagerMessagingFilterStore').getActiveFilterName());c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(l,this.props.pageID);this.props.onViewingListItem(l)}.bind(this);this.$PagesManagerMessagingListRowContainer1=false}k.prototype.componentWillUnmount=function(){this.$PagesManagerMessagingListRowContainer1=false};k.prototype.componentWillMount=function(){this.$PagesManagerMessagingListRowContainer1=true;var l=c('MercuryThreads').getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);if(!l)return;this.$PagesManagerMessagingListRowContainer3(l);var m=void 0;if(l.other_user_fbid){var n=c('MercuryIDs').getParticipantIDFromUserID(l.other_user_fbid),o=c('MercuryParticipants').getNow(n);m=o&&o.big_image_src?[o.big_image_src]:undefined;if(!m)c('MercuryParticipants').getOrderedBigImageMulti([n],this.$PagesManagerMessagingListRowContainer4);}this.setState({inlineActionParam:c('PagesMessengerThreadUtils').getBatchActionMenuParam(l),thread:l,participants:j(c('immutable').Seq(l.participants).map(function(p){return [p,c('MercuryParticipants').getOrFetch(p)]})),participantImages:m})};k.prototype.$PagesManagerMessagingListRowContainer3=function(l){if(l.comm_status===null)return;var m=false;switch(l.comm_status){case c('PageCommItemStatus').DONE:m=!l.is_archived;break;case c('PageCommItemStatus').FOLLOW_UP:m=l.folder!==c('MessagingTag').INBOX;break;case c('PageCommItemStatus').TODO:m=l.folder!==c('MessagingTag').INBOX;break;case c('PageCommItemStatus').SPAM:m=l.folder!==c('MessagingTag').OTHER;break;default:break;}if(m)new (c('PageCommItemMessengerConsistencyTypedLogger'))().setCommItemSourceID(l.comm_source_id).setPageCommItemStatus(l.comm_status.toLowerCase()).setMessengerArchived(l.is_archived).setMessagingFolderTag(l.folder).setIsUnifiedInbox(false).log();};k.prototype.shouldComponentUpdate=function(l,m){if(l.selected!==this.props.selected||l.selectionMode!==this.props.selectionMode||l.isViewing!==this.props.isViewing||l.useHighlightTitle!==this.props.useHighlightTitle||m.participantImages!==this.state.participantImages)return true;return this.state.thread!=m.thread};k.prototype.render=function(){if(this.state.thread.other_user_fbid===null)return c('React').createElement('div',null);var l=this.state.thread.unread_count&&this.state.thread.unread_count>0,m=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.flagged,n=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.customTagNames,o=[],p=c('PagesManagerCustomTagsStore').getCustomTags(this.props.pageID);(n||[]).map(function(t){if(p.has(t))o.push(p.get(t));});var q=this.props,r=q.onViewingListItem,s=babelHelpers.objectWithoutProperties(q,['onViewingListItem']);return c('React').createElement(c('PagesManagerMessagingListRow.react'),babelHelpers['extends']({customTagsData:o,isFlagged:m,isUnread:l,onViewingListItem:this.$PagesManagerMessagingListRowContainer2,participantImages:this.state.participantImages,thread:this.state.thread},s,this.state))};k.prototype.updateThread=function(){var l=c('MercuryThreads').getForFBID(this.props.pageID).getThreadMetaNow(this.props.listItem);if(!l)return;this.setState({thread:l,inlineActionParam:c('PagesMessengerThreadUtils').getBatchActionMenuParam(l)})};k.defaultProps={useHighlightTitle:false};f.exports=k}),null);
__d("MessageSettingsPreviewTab",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MESSENGER_CODE:"messenger_code",RESPONSE_ASSISTANT:"response_assistant"})}),null);
__d("XPageMessageSettingsPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/settings\/preview_dialog\/",{page_id:{type:"FBID",required:true},tab:{type:"Enum",defaultValue:"messenger_code",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d('PagesManagerMessagingMessengerCodeLink.react',['ix','cx','fbt','AsyncRequest','Image.react','Link.react','MessageSettingsPreviewTab','React','TooltipData','XBasicFBNuxDismissController','XPageMessageSettingsPreviewController','XUIAmbientNUX.react','fbglyph','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=4156,n=4198;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(p){'use strict';l.constructor.call(this,p);this.state={isMessengerCodeNuxShown:this.props.showMessengerCodeNux,isResponseAssistantNuxShown:this.props.showResponseAssistantNux}}o.prototype.$PagesManagerMessagingMessengerCodeLink1=function(p){'use strict';return function(){var q=c('XBasicFBNuxDismissController').getURIBuilder().setInt('nux_id',p).getURI();new (c('AsyncRequest'))().setURI(q).send();switch(p){case m:this.setState({isMessengerCodeNuxShown:false});break;case n:this.setState({isResponseAssistantNuxShown:false});break;}}.bind(this)};o.prototype.$PagesManagerMessagingMessengerCodeLink2=function(p){'use strict';var q=void 0,r=void 0;switch(p){case m:q=this.state.isMessengerCodeNuxShown;r=j._("Download and share your Messenger Code");break;case n:q=this.state.isResponseAssistantNuxShown;r=j._("Get started with Response Assistant");break;}return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.codeLink}.bind(this),hasActionableContext:true,onCloseButtonClick:this.$PagesManagerMessagingMessengerCodeLink1(p),position:'above',shown:q,width:'auto'},r)};o.prototype.render=function(){'use strict';var p=j._("View Response Assistant and Messenger Code"),q=c('XPageMessageSettingsPreviewController').getURIBuilder().setFBID('page_id',this.props.pageID);if(this.state.isResponseAssistantNuxShown)q=q.setEnum('tab',c('MessageSettingsPreviewTab').RESPONSE_ASSISTANT);var r=c('joinClasses')("_59k4",this.props.className);return c('React').createElement('div',{className:r},c('React').createElement(c('Link.react'),babelHelpers['extends']({ajaxify:q.getURI(),className:"_4d6o",ref:'codeLink',rel:'dialog'},c('TooltipData').propsFor(p)),c('React').createElement(c('Image.react'),{src:h("126342")})),this.state.isMessengerCodeNuxShown?this.$PagesManagerMessagingMessengerCodeLink2(m):null,this.state.isResponseAssistantNuxShown?this.$PagesManagerMessagingMessengerCodeLink2(n):null)};f.exports=o}),null);
__d('PagesManagerMessagingSearchInput.react',['cx','fbt','ContextualLayer.react','LayerHideOnEscape','PageCustomTagTypeaheadPresenter.react','React','SearchableTextInput.react','SearchableEntry','TokenizerToken.react','XUICloseButton.react','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){'use strict';k.constructor.call(this,n,o);this.$PagesManagerMessagingSearchInput1=function(){this.setState({showLayer:false})}.bind(this);this.$PagesManagerMessagingSearchInput8=function(p,q){var r=this.props.TokenRenderer||c('TokenizerToken.react'),s=c('joinClasses')("_2ei6",this.props.tokenClassName);return c('React').createElement(r,{className:s,key:p.getUniqueID(),label:p.getTitle(),entry:p,index:q,onRemove:this.props.onRemove})}.bind(this);this.$PagesManagerMessagingSearchInput9=function(p){var q=p.target.value,r=true;if(q===''){r=false;this.props.onClear()}this.setState({query:q,showLayer:r})}.bind(this);this.$PagesManagerMessagingSearchInput10=function(){this.setState({query:''});this.props.onClear()}.bind(this);this.$PagesManagerMessagingSearchInput11=function(p,q){this.setState({matchedLabels:p})}.bind(this);this.$PagesManagerMessagingSearchInput12=function(){if(this.state.query!==''){this.refs.input.getTextFieldDOM().select();this.setState({showLayer:true})}}.bind(this);this.$PagesManagerMessagingSearchInput5=function(p){this.setState({highlightedEntry:p})}.bind(this);this.$PagesManagerMessagingSearchInput6=function(){this.setState({highlightedEntry:{}})}.bind(this);this.$PagesManagerMessagingSearchInput7=function(p){this.props.addCustomTag(p);this.setState({query:''})}.bind(this);this.state={query:'',showLayer:false,matchedLabels:[],highlightedEntry:{}}}m.prototype.$PagesManagerMessagingSearchInput2=function(n,o,event){'use strict';this.setState({showLayer:false});switch(n){case 'message':this.props.searchMessage.call(this,o);break;case 'name':this.props.searchName.call(this,o);break;}};m.prototype.$PagesManagerMessagingSearchInput3=function(n){'use strict';return c('React').createElement('div',{className:"_4j2v"},c('React').createElement('li',{className:"_4j2w",onMouseDown:this.$PagesManagerMessagingSearchInput2.bind(this,'message',this.state.query)},i._("Messages that contain \"{message search term}\"",[i.param('message search term',this.state.query)])),c('React').createElement('li',{className:"_4j2x",onMouseDown:this.$PagesManagerMessagingSearchInput2.bind(this,'name',this.state.query)},i._("Names that contain \"{message search term}\"",[i.param('message search term',this.state.query)])))};m.prototype.$PagesManagerMessagingSearchInput4=function(n){'use strict';var o=this.state.matchedLabels.filter(function(q){return !Object.prototype.hasOwnProperty.call(n,q.getUniqueID())});if(o.length==0){return c('React').createElement('div',null)}else{var p=c('PageCustomTagTypeaheadPresenter.react').ViewRenderer;return c('React').createElement('div',null,c('React').createElement('li',{className:"_5n87"},i._("Labels")),c('React').createElement(p,{entries:o,highlightedEntry:this.state.highlightedEntry,onHighlight:this.$PagesManagerMessagingSearchInput5,removeHighlight:this.$PagesManagerMessagingSearchInput6,onSelect:this.$PagesManagerMessagingSearchInput7,searchBar:true}))}};m.prototype.render=function(){'use strict';var n=this.props.entries&&this.props.entries.length>0,o=this.props.entries.map(this.$PagesManagerMessagingSearchInput8,this),p={},q;if(n)for(var r=0,s=this.props.entries.length;r<s;r++){var t=this.props.entries[r];q=t.getUniqueID();p[q]=true}var u=this.props,v=u.className,w=u.placeholder,x=babelHelpers.objectWithoutProperties(u,['className','placeholder']);v=c('joinClasses')("_29s6"+(n?' '+"_29s7":''),v);w=n?'':this.props.placeholder;return c('React').createElement('div',{className:v},c('React').createElement('div',{className:"_29s8"},o),c('React').createElement(c('SearchableTextInput.react'),babelHelpers['extends']({onBlur:this.$PagesManagerMessagingSearchInput1,onChange:this.$PagesManagerMessagingSearchInput9,onFocus:this.$PagesManagerMessagingSearchInput12,onEntriesFound:this.$PagesManagerMessagingSearchInput11,placeholder:w,queryString:this.state.query,ref:'input'},x)),c('React').createElement(c('XUICloseButton.react'),{className:"_3i2o"+(c('isEmpty')(this.state.query)?' '+"hidden_elem":''),onClick:this.$PagesManagerMessagingSearchInput10,size:'medium'}),this.props.contextRef&&this.props.contextRef()?c('React').createElement(c('ContextualLayer.react'),{behaviors:{LayerHideOnEscape:c('LayerHideOnEscape')},containerWidthMatchContext:true,contextRef:this.props.contextRef,shown:this.state.showLayer,position:'below'},this.$PagesManagerMessagingSearchInput3(p)):null)};m.propTypes={addCustomTag:l.func,contextRef:l.func,searchMessage:l.func,searchName:l.func,textInputClassName:l.string,tokenClassName:l.string,TokenRenderer:l.element,entries:l.arrayOf(l.instanceOf(c('SearchableEntry')))};f.exports=m}),null);
__d('PagesManagerMessagingSearchView.react',['cx','fbt','ix','AbstractTextInput.react','AbstractTokenizer.react','PagesManagerMessagingFilterStore','Image.react','PageCustomTagSearchableEntry','PageCustomTagSearchSource','PageCustomTagTypeaheadPresenter.react','PagesAdminToolUIActionType','PagesContextCardCustomTag.react','PagesEnumTag.react','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingSearchInput.react','React','PagesMessagingSearchMode','PagesManagerMessagingThreadlistAction','PagesManagerMessagingNavigationUnitKey','XUICloseButton.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n,o){l.constructor.call(this,n,o);this.$PagesManagerMessagingSearchView5=function(p){var q=p.target.value,r=true;if(q==='')r=false;this.setState({query:q,showLayer:r})}.bind(this);this.$PagesManagerMessagingSearchView4=function(p){c('PagesManagerMessagingThreadlistAction').removeSearchCustomTag(this.props.pageID,p,'search_block')}.bind(this);this.$PagesManagerMessagingSearchView9=function(){c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,c('PagesManagerMessagingFilterStore').getAvailableFilters().get(0))}.bind(this);this.$PagesManagerMessagingSearchView1=function(p){c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p.target.value,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').ALL)}.bind(this);this.$PagesManagerMessagingSearchView2=function(){c('PagesManagerMessagingThreadlistAction').resetSearch(this.props.pageID)}.bind(this);this.$PagesManagerMessagingSearchView3=function(p){if(p.key==='Escape')c('PagesManagerMessagingThreadlistAction').resetSearch(this.props.pageID);}.bind(this);this.$PagesManagerMessagingSearchView7=function(p){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEARCH_NAMES,this.props.pageID,{query:p});c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').NAME_SEARCH);this.setState({showLayer:false})}.bind(this);this.$PagesManagerMessagingSearchView8=function(p){c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_CLICK_SEARCH_MESSAGES,this.props.pageID,{query:p});c('PagesManagerMessagingThreadlistAction').changeSearchTerm(this.props.pageID,p,c('PagesManagerMessagingFilterStore').getActiveFolderName(),c('PagesMessagingSearchMode').MESSAGE_SEARCH);this.setState({showLayer:false})}.bind(this);this.$PagesManagerMessagingSearchView6=function(p){if(this.state.query!=='')this.setState({showLayer:true});}.bind(this);this.state={query:'',showLayer:false,highlightedEntry:{}}}m.prototype.$PagesManagerMessagingSearchView10=function(){var n=[];this.props.currentSearchCustomTagNames.toArray().map(function(o){if(this.props.customTagSearchSource.has(o))n.push(this.props.customTagSearchSource.get(o));}.bind(this));return n};m.prototype.$PagesManagerMessagingSearchView11=function(){var n=i._("Search people and messages");return c('React').createElement(c('PagesManagerMessagingSearchInput.react'),{addCustomTag:c('emptyFunction'),className:"_5ptj",contextRef:function(){return this.refs.input}.bind(this),onClick:this.$PagesManagerMessagingSearchView6,onClear:this.$PagesManagerMessagingSearchView2,onRemove:c('emptyFunction'),placeholder:n,searchMessage:this.$PagesManagerMessagingSearchView8,searchName:this.$PagesManagerMessagingSearchView7,entries:[],excludedEntries:[],TokenRendere:c('PageCustomTagTypeaheadPresenter.react').ViewRenderer,searchSource:c('PageCustomTagSearchSource').getInstance([],false)})};m.prototype.$PagesManagerMessagingSearchView12=function(){if(this.props.currentSearchCustomTagNames.toArray().length===0&&this.props.activeFilter.getKey()!==c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED)return null;return c('React').createElement('div',{className:"_4w11"},this.props.activeFilter.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?c('React').createElement(c('PagesEnumTag.react'),{canRemove:true,onRemove:this.$PagesManagerMessagingSearchView9,unit:this.props.activeFilter}):null,this.$PagesManagerMessagingSearchView10().map(function(n){return c('React').createElement(c('PagesContextCardCustomTag.react'),{canRemove:true,hideOnRemove:true,key:n.id,onRemove:this.$PagesManagerMessagingSearchView4,tagData:n})}.bind(this)))};m.prototype.render=function(){var n={left:this.props.arrowTopX,top:this.props.arrowTopY-8};return c('React').createElement('div',null,c('React').createElement('div',{ref:'arrow',className:"_1u5x"+(this.props.currentSearchCustomTagNames.toArray().length>0||c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED||this.props.isSearchActive?' '+"hidden_elem":''),style:n}),c('React').createElement('div',{className:"_3i2n"+(' '+"_4m_d")+(this.props.currentSearchCustomTagNames.toArray().length>0||c('PagesManagerMessagingFilterStore').getActiveFilterName()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED?' '+"hidden_elem":''),ref:'input'},c('React').createElement(c('Image.react'),{className:"_5pti",src:j("27278")}),this.$PagesManagerMessagingSearchView11()),this.$PagesManagerMessagingSearchView12())};f.exports=m}),null);
__d('PagesManagerMessagingUIActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirrorRecursive')({SET_SEARCH_ARROW_TOP_X:'',SET_SEARCH_ARROW_TOP_Y:'',SET_SEARCH_BAR_SHADOW:''});f.exports=h}),null);
__d('PagesManagerMessagingUIStore',['PagesManagerMessagingUIActionTypes','FluxStore','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this,c('PagesManagerDispatcher'));this.$PagesManagerMessagingUIStore1=0;this.$PagesManagerMessagingUIStore2=0;this.$PagesManagerMessagingUIStore3=false}j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_X:this.$PagesManagerMessagingUIStore1=k.offset;this.__emitChange();break;case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_Y:this.$PagesManagerMessagingUIStore2=k.offset;this.__emitChange();break;case c('PagesManagerMessagingUIActionTypes').SET_SEARCH_BAR_SHADOW:this.$PagesManagerMessagingUIStore3=k.status;this.__emitChange();break;}};j.prototype.getSearchBarArrowTopX=function(){'use strict';return this.$PagesManagerMessagingUIStore1};j.prototype.getSearchBarArrowTopY=function(){'use strict';return this.$PagesManagerMessagingUIStore2};j.prototype.getSearchBarShadow=function(){'use strict';return this.$PagesManagerMessagingUIStore3};f.exports=new j()}),null);
__d('PagesManagerMessagingSearchContainer.react',['PagesManagerMessagingFilterStore','FluxContainer','PagesManagerCustomTagsAction','PagesManagerCustomTagsStore','PagesManagerMessagingSearchStore','PagesManagerMessagingSearchView.react','PagesManagerMessagingUIStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l)}j.getStores=function(){return [c('PagesManagerMessagingFilterStore'),c('PagesManagerCustomTagsStore'),c('PagesManagerMessagingSearchStore'),c('PagesManagerMessagingUIStore')]};j.prototype.componentWillMount=function(){if(!c('PagesManagerCustomTagsStore').hasCustomTags(this.props.pageID))c('PagesManagerCustomTagsAction').fetch(this.props.pageID);};j.calculateState=function(k,l){return {activeFilter:c('PagesManagerMessagingFilterStore').getActiveFilter(),arrowTopX:c('PagesManagerMessagingUIStore').getSearchBarArrowTopX(),arrowTopY:c('PagesManagerMessagingUIStore').getSearchBarArrowTopY(),currentSearchCustomTagNames:c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames(),currentSearchTerm:c('PagesManagerMessagingSearchStore').getCurrentSearchTerm(),isSearchActive:c('PagesManagerMessagingSearchStore').getIsInSearchMode(),customTagSearchSource:c('PagesManagerCustomTagsStore').getCustomTags(l.pageID)}};j.prototype.render=function(){return c('React').createElement(c('PagesManagerMessagingSearchView.react'),babelHelpers['extends']({},this.props,{activeFilter:this.state.activeFilter,arrowTopX:this.state.arrowTopX,arrowTopY:this.state.arrowTopY,initSearchTerm:this.state.currentSearchTerm,isSearchActive:this.state.isSearchActive,customTagSearchSource:this.state.customTagSearchSource,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames}))};f.exports=c('FluxContainer').create(j,{withProps:true})}),null);
__d('PagesManagerMessagingSimpleList.react',['cssVar','cx','fbt','invariant','CenteredContainer.react','PagesManagerListRowContainer.react','PagesManagerAction','PagesMessagingSearchMode','PagesSelectableSimpleList.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;l=babelHelpers.inherits(n,c('React').PureComponent);m=l&&l.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=m.constructor).call.apply(o,[this].concat(r)),this.$PagesManagerMessagingSimpleList2=function(t,u,v){switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:var w=Object.keys(this.props.snippetSearchResult),x=w[t];return c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,highlightText:this.props.searchTerm,listItem:x,onViewingListItem:this.$PagesManagerMessagingSimpleList1,pageID:this.props.pageID,ref:this.$PagesManagerMessagingSimpleList3(t),key:this.props.searchMode+this.$PagesManagerMessagingSimpleList3(t),snippetSearchResult:this.props.snippetSearchResult[x],type:'li',useHighlightTitle:false},this.props.containerProps));case c('PagesMessagingSearchMode').NAME_SEARCH:var y=this.props.searchResult[t];return c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,disableCheckBox:true,highlightText:this.props.searchTerm,listItem:y,ref:this.$PagesManagerMessagingSimpleList3(t),key:this.props.searchMode+this.$PagesManagerMessagingSimpleList3(t),onViewingListItem:this.$PagesManagerMessagingSimpleList1,pageID:this.props.pageID,type:'li',useHighlightTitle:true},this.props.containerProps));default:k(0);}}.bind(this),this.$PagesManagerMessagingSimpleList4=function(t,u,v){var w=this.props.list[t];return c('React').createElement(c('PagesManagerListRowContainer.react'),babelHelpers['extends']({ChildClass:this.props.listRowContainer,ref:this.$PagesManagerMessagingSimpleList3(t),key:this.$PagesManagerMessagingSimpleList3(t),listItem:w,onSelected:v,onViewingListItem:this.$PagesManagerMessagingSimpleList1,pageID:this.props.pageID,selected:u,type:'li'},this.props.containerProps))}.bind(this),this.$PagesManagerMessagingSimpleList3=function(t){var u=this.props.list[t];return this.props.getKey(u)}.bind(this),this.$PagesManagerMessagingSimpleList5=function(){return this.props.list.map(function(t){return this.props.getKey(t)}.bind(this))}.bind(this),this.$PagesManagerMessagingSimpleList7=function(){if(this.props.isInSearchMode)this.props.loadMore(this.props.searchMode,this.props.searchTerm);return this.props.onScroll()}.bind(this),p}n.prototype.$PagesManagerMessagingSimpleList1=function(o){c('PagesManagerAction').viewListItem(o)};n.prototype.getListRowContainer=function(o){var p=this.refs.selectableList;if(p===null)return null;var q=p.getSimpleList();if(!q)return null;var r=q.refs[o];if(!r)return null;return r.refs[o]};n.prototype.render=function(){return c('React').createElement(c('PagesSelectableSimpleList.react'),{actionBarLeftComponent:this.props.isInSearchMode?undefined:this.props.folderDropDown,actionBarRightComponent:this.props.actionBarRightContainer,allRowKeysGetter:this.props.isInSearchMode?undefined:this.$PagesManagerMessagingSimpleList5,canLoadMoreRows:this.props.hasMoreResult,header:this.$PagesManagerMessagingSimpleList6(),height:this.props.height,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.$PagesManagerMessagingSimpleList7,ref:'selectableList',replaceContent:this.$PagesManagerMessagingSimpleList8(),rowCount:this.$PagesManagerMessagingSimpleList9(),rowHeight:parseInt("72px",10),rowKeyGetter:this.$PagesManagerMessagingSimpleList3,rowRenderer:this.props.isInSearchMode?this.$PagesManagerMessagingSimpleList2:this.$PagesManagerMessagingSimpleList4,showHeader:true})};n.prototype.$PagesManagerMessagingSimpleList9=function(){if(this.props.isInSearchMode)switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:return Object.keys(this.props.snippetSearchResult).length;case c('PagesMessagingSearchMode').NAME_SEARCH:return this.props.searchResult.length;}return this.props.list.length};n.prototype.$PagesManagerMessagingSimpleList6=function(){var o=void 0;if(this.props.isInSearchMode)switch(this.props.searchMode){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:o=j._("Messages that contain \"{message search term}\"",[j.param('message search term',this.props.searchTerm)]);break;case c('PagesMessagingSearchMode').NAME_SEARCH:o=j._("Names that contain \"{message search term}\"",[j.param('message search term',this.props.searchTerm)]);break;}if(o)o=c('React').createElement('div',{className:"_16-z"},o);return c('React').createElement('div',null,this.props.header,o)};n.prototype.$PagesManagerMessagingSimpleList8=function(){if(this.props.list.length)return null;if(!this.props.initLoading)return this.props.emptyView;return c('React').createElement(c('CenteredContainer.react'),{fullHeight:true,vertical:true},c('React').createElement(c('XUISpinner.react'),{size:'large'}))};f.exports=n}),null);
__d('PagesManagerMessagingUIActions',['PagesManagerMessagingUIActionTypes','PagesManagerDispatcher'],(function a(b,c,d,e,f,g){var h={setSearchBarArrowTopX:function i(j){c('PagesManagerDispatcher').dispatch({offset:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_X})},setSearchBarArrowTopY:function i(j){c('PagesManagerDispatcher').dispatch({offset:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_ARROW_TOP_Y})},setSearchBarShaddow:function i(j){c('PagesManagerDispatcher').dispatch({status:j,type:c('PagesManagerMessagingUIActionTypes').SET_SEARCH_BAR_SHADOW})}};f.exports=h}),null);
__d('PagesManagerMessagingListContainer.react',['cx','fbt','ix','PagesManagerMessagingBatchActionHeaderContainer.react','ContextualDialogArrow','ContextualLayerAutoFlip','FluxContainer','Image.react','LeftRight.react','PagesManagerListBatchActionContainer.react','Map','MercuryThreadlistConstants','MessageThreadViewSource','PagesAdminToolUIActionType','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayContainer.react','PagesManagerAwayToggle.react','PagesManagerInboxSwitcher.react','PagesManagerLogger','PagesManagerMessagingFilterActions','PagesManagerMessagingFilterPanelSwitch.react','PagesManagerMessagingFilterStore','PagesManagerMessagingList.react','PagesManagerMessagingListRowContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingMessengerCodeLink.react','PagesManagerMessagingNUXActions','PagesManagerMessagingSearchContainer.react','PagesManagerMessagingSearchStore','PagesManagerMessagingSimpleList.react','PagesManagerMessagingTabPerfEvents','PagesManagerMessagingThreadInteractionHelper','PagesManagerMessagingThreadlistAction','PagesManagerMessagingThreadlistStore','PagesManagerMessagingUIActions','PagesManagerMessagingUIStore','PagesManagerPerfLogger','PagesManagerStore','PagesMessagingPerfLoggerEvent','PagesMessagingPerfTypedLogger','PagesMessagingSearchMode','PagesSelectableSimpleListAction','PopoverMenu.react','React','ReactDOM','SubscriptionsHandler','MercuryThreadInformer','PagesManagerMessagingNavigationUnitKey','Vector','XUICard.react','ReactXUIMenu'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('ReactXUIMenu').Item;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$PagesManagerMessagingListContainer15=function(p,q){switch(p){case c('PagesMessagingSearchMode').NAME_SEARCH:c('PagesManagerMessagingThreadlistAction').loadMoreNameResult(this.props.pageID,q,c('PagesManagerMessagingFilterStore').getActiveFolderName());break;case c('PagesMessagingSearchMode').MESSAGE_SEARCH:c('PagesManagerMessagingThreadlistAction').loadMoreSnippetResult(this.props.pageID,q,c('PagesManagerMessagingFilterStore').getActiveFolderName());break;}}.bind(this);this.$PagesManagerMessagingListContainer16=function(){var p=c('PagesManagerMessagingFilterStore').getNavigationKey(),q=c('PagesManagerMessagingThreadlistStore').hasMoreItem(p)&&!c('PagesManagerMessagingThreadlistStore').isLoading();if(q&&!this.state.isInSearchMode){var r=this.$PagesManagerMessagingListContainer7(this.state);if(this.$PagesManagerMessagingListContainer8()){this.$PagesManagerMessagingListContainer2.set(r,Date.now());new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesMessagingPerfLoggerEvent').THREADLIST_LOAD_MORE_EVENT).setThreadOffset(r).log()}c('PagesManagerMessagingThreadlistAction').fetchThreadlist(this.props.pageID,r,c('MercuryThreadlistConstants').WEBMESSENGER_MORE_COUNT)}}.bind(this);this.$PagesManagerMessagingListContainer17=function(){if(this.refs.listView.refs.selectableList.refs.scrollableArea.getArea().isScrolledToTop()){c('PagesManagerMessagingUIActions').setSearchBarShaddow(false)}else if(!c('PagesManagerMessagingUIStore').getSearchBarShadow())c('PagesManagerMessagingUIActions').setSearchBarShaddow(true);}.bind(this);this.$PagesManagerMessagingListContainer20=function(p,q){var r=this.state.folderDropdown.filter(function(t){return t.getKey()===q.item.getValue()});if(r.count()==0)return;var s=r.get(0);c('PagesManagerLogger').logMessageInboxUIAction(c('PagesAdminToolUIActionType').MESSAGE_INBOX_SWITCH_FOLDER,this.props.pageID,{folder:s.getKey(),position:'dropdown'});c('PagesManagerMessagingFilterActions').changeFilter(this.props.pageID,s)}.bind(this);this.$PagesManagerMessagingListContainer1=false;this.$PagesManagerMessagingListContainer2=new (c('Map'))();this.$PagesManagerMessagingListContainer5=function(){if(this.refs.listView.clearSelection){this.refs.listView.clearSelection()}else c('PagesSelectableSimpleListAction').deselectAll();}.bind(this)}n.getStores=function(){return [c('PagesManagerMessagingThreadlistStore'),c('PagesManagerMessagingFilterStore'),c('PagesManagerMessagingSearchStore'),c('PagesManagerMessagingUIStore')]};n.calculateSearchState=function(o,p){var q=c('PagesManagerMessagingSearchStore').getThreadNameSearchResults(),r=c('PagesManagerMessagingSearchStore').getIsSearchingName(),s=c('PagesManagerMessagingSearchStore').hasMoreNameSearchResult(),t=c('PagesManagerMessagingSearchStore').hasMoreSnippetSearchResult(),u=c('PagesManagerMessagingSearchStore').getThreadSnippetSearchResults(),v=c('PagesManagerMessagingSearchStore').getIsSearchingSnippet(),w=[],x={},y=false,z=false;switch(c('PagesManagerMessagingSearchStore').getSearchMode()){case c('PagesMessagingSearchMode').MESSAGE_SEARCH:x=u;y=t;z=v;break;case c('PagesMessagingSearchMode').NAME_SEARCH:w=q;y=s;z=r;break;}return {hasMoreResult:y,isInSearchMode:true,isSearching:z,searchTerm:c('PagesManagerMessagingSearchStore').getCurrentSearchTerm(),searchMode:c('PagesManagerMessagingSearchStore').getSearchMode(),searchResult:w,snippetSearchResult:x}};n.calsulateListState=function(o,p){var q=c('PagesManagerMessagingThreadlistStore').getItemList(p.pageID),r=c('PagesManagerMessagingThreadlistStore').hasMoreItem(c('PagesManagerMessagingFilterStore').getNavigationKey()),s=q.findIndex(function(ba){return ba===c('PagesManagerStore').getViewingListItem()})>=0,t=c('PagesManagerStore').getInitialViewingItem(),u=c('PagesManagerStore').getViewingListItem(),v=q.length>0,w=t&&t===u,x=!w&&(!u&&v||u&&v&&!s);if(x){var y=q[0];c('PagesManagerAction').viewListItem(y);c('PagesManagerMessagingThreadInteractionHelper').handlePermalinkUpdate(y,p.pageID)}var z=c('PagesManagerMessagingThreadlistStore').isLoading(),aa=false;if(q.length===0)aa=z;return {hasMoreResult:r,initLoading:aa,isInSearchMode:false,threadIDList:q}};n.calculateState=function(o,p){var q=null;if(c('PagesManagerMessagingSearchStore').getIsInSearchMode()&&c('PagesManagerMessagingSearchStore').getCurrentSearchTerm().length>0){q=n.calculateSearchState(o,p)}else q=n.calsulateListState(o,p);if(o&&o.initLoading&&!q.initLoading)c('PagesManagerMessagingNUXActions').setThreadlistReady();q.isFiltering=c('PagesManagerMessagingFilterStore').getIsFiltering();q.folderDropdown=c('PagesManagerMessagingFilterStore').getFolderDropDown();q.unitNotificationCountMap=c('PagesManagerMessagingFilterStore').getUnitNotificationCountMap(p.pageID);q.showShadow=c('PagesManagerMessagingUIStore').getSearchBarShadow();q.currentSearchCustomTagNames=c('PagesManagerMessagingSearchStore').getCurrentSearchCustomTagNames();q.activeFilter=c('PagesManagerMessagingFilterStore').getActiveFilter();return q};n.prototype.$PagesManagerMessagingListContainer6=function(){return this.state.currentSearchCustomTagNames.size!==0||this.state.activeFilter.getKey()===c('PagesManagerMessagingNavigationUnitKey').FILTERS.FLAGGED};n.prototype.$PagesManagerMessagingListContainer7=function(o){return o.threadIDList.length};n.prototype.$PagesManagerMessagingListContainer8=function(){return c('PagesManagerMessagingFilterStore').getIsInboxAll()&&!this.state.isInSearchMode};n.prototype.componentDidUpdate=function(o,p){if(this.$PagesManagerMessagingListContainer8()){var q=this.$PagesManagerMessagingListContainer7(p);if(q!==this.$PagesManagerMessagingListContainer7(this.state)){var r=this.$PagesManagerMessagingListContainer2.get(q),s=r?Date.now()-r:0;new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesMessagingPerfLoggerEvent').THREADLIST_RENDER_COMPLETE_EVENT).setPerfTime(s).setThreadOffset(q).log()}}if(this.$PagesManagerMessagingListContainer1&&!this.state.initLoading){this.$PagesManagerMessagingListContainer1=false;c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_INBOX_LOAD_END,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()})}if(this.state.isFiltering!==p.isFiltering||this.state.activeFilter!==p.activeFilter||this.state.currentSearchCustomTagNames.size===0&&p.currentSearchCustomTagNames.size!==0)this.$PagesManagerMessagingListContainer9();};n.prototype.componentDidMount=function(){c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_THREAD_LIST_DID_RENDER,this.props.perfParams);c('PagesManagerMessagingThreadlistAction').initThreadlist(this.props.pageID);c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_THREADLIST_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});c('PagesManagerMessagingLogger').logPageViewFolderEvent(this.props.pageID,c('PagesManagerMessagingFilterStore').getActiveFolder(),c('MessageThreadViewSource').NEW_MESSAGETAB);if(this.$PagesManagerMessagingListContainer8()){this.$PagesManagerMessagingListContainer2.set(0,Date.now());new (c('PagesMessagingPerfTypedLogger'))().setPageID(this.props.pageID).setEventName(c('PagesMessagingPerfLoggerEvent').THREADLIST_LOAD_MORE_EVENT).setThreadOffset(0).log()}this.$PagesManagerMessagingListContainer1=true;this.$PagesManagerMessagingListContainer3=c('MercuryThreadInformer').getForFBID(this.props.pageID);this.$PagesManagerMessagingListContainer4=new (c('SubscriptionsHandler'))();this.$PagesManagerMessagingListContainer4.addSubscriptions(this.$PagesManagerMessagingListContainer3.subscribe('threadlist-updated',function(o,p){return this.$PagesManagerMessagingListContainer10()}.bind(this)),this.$PagesManagerMessagingListContainer3.subscribe('threads-updated',function(o,p){return this.$PagesManagerMessagingListContainer11(Object.keys(p))}.bind(this)));this.$PagesManagerMessagingListContainer9()};n.prototype.componentWillUnmount=function(){this.$PagesManagerMessagingListContainer4&&this.$PagesManagerMessagingListContainer4.release()};n.prototype.$PagesManagerMessagingListContainer12=function(o){return o};n.prototype.$PagesManagerMessagingListContainer13=function(){c('PagesManagerMessagingThreadlistAction').loadMoreNameResult(this.props.pageID,this.state.searchTerm,c('PagesManagerMessagingFilterStore').getActiveFolderName())};n.prototype.$PagesManagerMessagingListContainer14=function(){c('PagesManagerMessagingThreadlistAction').loadMoreSnippetResult(this.props.pageID,this.state.searchTerm,c('PagesManagerMessagingFilterStore').getActiveFolderName())};n.prototype.$PagesManagerMessagingListContainer10=function(){c('PagesManagerMessagingThreadlistAction').updateThreadlist(this.props.pageID)};n.prototype.$PagesManagerMessagingListContainer11=function(o){o.forEach(function(p){if(this.refs.searchResult){var q=this.refs.searchResult.refs[p];if(q)q.refs.childClass.updateThread();}else if(this.refs.listView)if(this.props.config.useSimpleList){var r=this.refs.listView.getListRowContainer(p);if(r)r.refs.childClass.updateThread();}else{var s=this.refs.listView.refs[p];if(s)s.refs.childClass.updateThread();}}.bind(this))};n.prototype.$PagesManagerMessagingListContainer9=function(){if(this.refs.fileMenu&&this.refs.unreadCount){var o=0;if(this.state.isFiltering){var p=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.filterSwitch)).x,q=c('ReactDOM').findDOMNode(this.refs.filterSwitch).offsetLeft;o=q+p-4}else{var r=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.fileMenu)).x,s=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.unreadCount)).x,t=c('ReactDOM').findDOMNode(this.refs.fileMenu).offsetLeft;o=t+(r-s)/2}c('PagesManagerMessagingUIActions').setSearchBarArrowTopX(o)}};n.prototype.$PagesManagerMessagingListContainer18=function(){var o=c('React').createElement(c('PagesManagerMessagingFilterPanelSwitch.react'),{pageID:this.props.pageID,ref:'filterSwitch',height:this.$PagesManagerMessagingListContainer19(),isFiltering:c('PagesManagerMessagingFilterStore').getIsFiltering(),enableManageTags:this.props.config.enableManageTags,showNUX:this.props.config.showFilterNUX});return c('React').createElement('div',null,c('React').createElement(c('PagesManagerListBatchActionContainer.react'),{ChildClass:c('PagesManagerMessagingBatchActionHeaderContainer.react'),pageID:this.props.pageID,onSelectionClear:this.$PagesManagerMessagingListContainer5}),o)};n.prototype.$PagesManagerMessagingListContainer21=function(o){return c('React').createElement(m,{key:o.getKey(),value:o.getKey()},c('React').createElement('div',{className:"_-7b"},o.getDisplayTitle()))};n.prototype.$PagesManagerMessagingListContainer22=function(){var o=c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$PagesManagerMessagingListContainer20},this.state.folderDropdown.map(this.$PagesManagerMessagingListContainer21)),p=c('PagesManagerMessagingFilterStore').getActiveFolderDropDown(),q=this.state.unitNotificationCountMap.get(p);return c('React').createElement(c('PopoverMenu.react'),{layerBehaviors:[c('ContextualDialogArrow'),c('ContextualLayerAutoFlip')],menu:o},c('React').createElement('div',{className:"_-7c _46l"},c('React').createElement('span',{ref:'fileMenu'},p.getDisplayTitle()),c('React').createElement('div',{className:"_-7h"+(' '+"_-7e")+(q===0?' '+"hidden_elem":''),ref:'unreadCount'},q)))};n.prototype.$PagesManagerMessagingListContainer23=function(){return ''};n.prototype.$PagesManagerMessagingListContainer19=function(){var o=c('ReactDOM').findDOMNode(this.refs.threadListFooter),p=0;if(o!==null)p=c('Vector').getElementDimensions(o).y;return this.props.height-p};n.prototype.$PagesManagerMessagingListContainer24=function(){return c('React').createElement(c('XUICard.react'),{className:"_alj",ref:'threadListFooter'},c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('PagesManagerAwayContainer.react'),{pageID:this.props.pageID,RenderClass:c('PagesManagerAwayToggle.react')}),c('React').createElement(c('PagesManagerMessagingMessengerCodeLink.react'),{className:"_h38",pageID:this.props.pageID,showMessengerCodeNux:this.props.config.shouldShowMessengerCodeNUX,showResponseAssistantNux:this.props.config.shouldShowResponseAssistantNUX})))};n.prototype.$PagesManagerMessagingListContainer25=function(){return c('React').createElement('div',{ref:'threadListHeader'},c('React').createElement('div',{className:(this.state.isFiltering?"_4f_9":'')+(' '+"_alk")+(this.state.showShadow&&!this.props.config.showInboxSwitcher?' '+"_1axm":'')},c('React').createElement(c('PagesManagerMessagingSearchContainer.react'),{pageID:this.props.pageID})),this.props.config.showInboxSwitcher?c('React').createElement('div',{className:this.state.showShadow?"_1axm":''},c('React').createElement(c('PagesManagerInboxSwitcher.react'),{pageID:this.props.pageID,pageToken:this.props.config.uriToken})):null)};n.prototype.$PagesManagerMessagingListContainer26=function(){if(this.$PagesManagerMessagingListContainer6())return c('React').createElement('div',{className:"_3-8-",key:'emptyView'},c('React').createElement(c('Image.react'),{className:"_5gxr",src:j("94993")}),c('React').createElement('div',{className:"_5gxs"},i._("No conversations match the labels that you've selected")));return c('React').createElement('div',{key:'emptyView'})};n.prototype.$PagesManagerMessagingListContainer27=function(){if(this.props.config.useSimpleList)return c('React').createElement(c('PagesManagerMessagingSimpleList.react'),babelHelpers['extends']({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer18(),folderDropDown:this.$PagesManagerMessagingListContainer22(),containerProps:{config:this.props.config},emptyView:this.$PagesManagerMessagingListContainer26(),getKey:this.$PagesManagerMessagingListContainer12,handleScroll:this.$PagesManagerMessagingListContainer17,hasMoreResult:this.state.hasMoreResult,header:this.$PagesManagerMessagingListContainer25(),height:this.$PagesManagerMessagingListContainer19(),initLoading:this.state.initLoading,isFiltering:this.state.isFiltering,isInSearchMode:this.state.isInSearchMode,isSearching:this.state.isSearching,isFilteringByTag:this.$PagesManagerMessagingListContainer6(),list:this.state.threadIDList,listRowContainer:c('PagesManagerMessagingListRowContainer.react'),loadMore:this.$PagesManagerMessagingListContainer15,navigationKey:c('PagesManagerMessagingFilterStore').getNavigationKey(),onScroll:this.$PagesManagerMessagingListContainer16,onSelectionChange:this.props.onSelectionChange,ref:'listView',scrollableWidth:320,selectAllLabel:this.$PagesManagerMessagingListContainer23(),searchTerm:this.state.searchTerm,searchMode:this.state.searchMode,searchResult:this.state.searchResult,snippetSearchResult:this.state.snippetSearchResult}));return c('React').createElement(c('PagesManagerMessagingList.react'),babelHelpers['extends']({},this.props,{actionBarRightContainer:this.$PagesManagerMessagingListContainer18(),folderDropDown:this.$PagesManagerMessagingListContainer22(),containerProps:{config:this.props.config},emptyView:this.$PagesManagerMessagingListContainer26(),getKey:this.$PagesManagerMessagingListContainer12,handleScroll:this.$PagesManagerMessagingListContainer17,hasMoreResult:this.state.hasMoreResult,header:this.$PagesManagerMessagingListContainer25(),height:this.$PagesManagerMessagingListContainer19(),initLoading:this.state.initLoading,isFiltering:this.state.isFiltering,isInSearchMode:this.state.isInSearchMode,isSearching:this.state.isSearching,isFilteringByTag:this.$PagesManagerMessagingListContainer6(),list:this.state.threadIDList,listRowContainer:c('PagesManagerMessagingListRowContainer.react'),loadMore:this.$PagesManagerMessagingListContainer15,navigationKey:c('PagesManagerMessagingFilterStore').getNavigationKey(),onScroll:this.$PagesManagerMessagingListContainer16,onSelectionChange:this.props.onSelectionChange,ref:'listView',scrollableWidth:320,selectAllLabel:this.$PagesManagerMessagingListContainer23(),searchTerm:this.state.searchTerm,searchMode:this.state.searchMode,searchResult:this.state.searchResult,snippetSearchResult:this.state.snippetSearchResult}))};n.prototype.render=function(){return c('React').createElement('div',null,this.$PagesManagerMessagingListContainer27(),this.$PagesManagerMessagingListContainer24())};f.exports=c('FluxContainer').create(n,{withProps:true})}),null);
__d('PagesManagerMessagingApp.react',['cx','MercuryServerPayloadPreprocessor','MercurySyncPageEnvironment','PagesEventObserver','PagesEventType','PagesManagerAction','PagesManagerAwayBanner.react','PagesManagerAwayContainer.react','PagesManagerDetailContainer.react','PagesManagerListContainer.react','PagesManagerListDetailLayout.react','PagesManagerMessagingDetailContainer.react','PagesManagerMessagingListContainer.react','PagesManagerMessagingLogger','PagesManagerMessagingTabPerfEvents','PagesManagerPerfLogger','PagesManagerStaticStore','PagesMessengerMessagePageButton.react','React','ReactDOM','PagesManagerStore'],(function a(b,c,d,e,f,g,h){var i,j;c('PagesManagerStore');i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);c('PagesManagerStaticStore').setPageID(this.props.pageID);this.state={rootElement:null};this.$PagesManagerMessagingApp1=function(){this.refs.body&&this.refs.body.recalculateHeight()}.bind(this)}k.prototype.componentWillMount=function(){'use strict';c('MercurySyncPageEnvironment').setUp(this.props.pageID,this.props.initSyncSequenceID);c('PagesManagerMessagingLogger').logMessagesSectionViewEvent(this.props.pageID);c('PagesEventObserver').notify(c('PagesEventType').MESSAGES_THREADLIST_LAYOUT_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()});if(this.props.initialThreadID)c('PagesManagerAction').setInitialViewItem(this.props.initialThreadID);};k.prototype.componentDidMount=function(){'use strict';c('PagesManagerPerfLogger').log(c('PagesManagerMessagingTabPerfEvents').MESSAGE_TAB_APP_DID_RENDER,this.props.perfParams);var l=c('MercuryServerPayloadPreprocessor').getForFBID(this.props.pageID);l.handleUpdate(this.props.config.jewelInitData);this.setState({rootElement:c('ReactDOM').findDOMNode(this)})};k.prototype.componentWillUnmount=function(){'use strict';c('MercurySyncPageEnvironment').tearDown(this.props.pageID)};k.prototype.$PagesManagerMessagingApp2=function(l){'use strict';if(l)return l;return null};k.prototype.$PagesManagerMessagingApp3=function(){'use strict';if(this.props.config.enabledPageToPageMessaging)return c('React').createElement(c('PagesMessengerMessagePageButton.react'),{flowID:this.props.flowID,pageID:this.props.pageID,pagesCommNewMessagesTab:true,size:'large'});return null};k.prototype.$PagesManagerMessagingApp4=function(){'use strict';return c('React').createElement('div',{className:"_n4_"})};k.prototype.$PagesManagerMessagingApp5=function(){'use strict';return c('React').createElement('div',{className:"_14vf"},c('React').createElement(c('PagesManagerListContainer.react'),{config:this.props.config,ChildContainerClass:c('PagesManagerMessagingListContainer.react'),flowID:this.props.flowID,pageID:this.props.pageID,perfParams:this.props.perfParams,useSimpleList:this.props.config.useSimpleList}))};k.prototype.$PagesManagerMessagingApp6=function(){'use strict';return c('React').createElement('div',null,c('React').createElement(c('PagesManagerDetailContainer.react'),{config:this.props.config,pageID:this.props.pageID,ChildContainerClass:c('PagesManagerMessagingDetailContainer.react'),getListItemKey:this.$PagesManagerMessagingApp2,perfParams:this.props.perfParams}))};k.prototype.$PagesManagerMessagingApp7=function(){'use strict';if(!this.props.config.enableAwayToggle)return null;return c('React').createElement('div',null,c('React').createElement(c('PagesManagerAwayContainer.react'),{pageID:this.props.pageID,RenderClass:c('PagesManagerAwayBanner.react')}))};k.prototype.render=function(){'use strict';return c('React').createElement('div',null,c('React').createElement('div',{className:"_15i2"},c('React').createElement(c('PagesManagerListDetailLayout.react'),{ref:'body',detailSection:this.$PagesManagerMessagingApp6(),listClassName:"_1-9p",listSection:this.$PagesManagerMessagingApp5(),navigationSection:this.$PagesManagerMessagingApp4()})))};f.exports=k}),null);