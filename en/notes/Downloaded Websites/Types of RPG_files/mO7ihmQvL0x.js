if (self.CavalryLogger) { CavalryLogger.start_js(["WpwZi"]); }

__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={}}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()}delete this.$UFICommentLogger2[i]};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l]}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log()};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h()}),null);
__d('UFIAcceptedAnswerStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER:return babelHelpers['extends']({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:'Accepted',id:l.comment.id}:{type:'NoneAccepted'},m));default:return k;}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:'Accepted',id:l}:{type:'NoneAccepted'}};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true})})}j.prototype.getInitialState=function(){return {}};j.prototype.getForInstance=function(k){return this.getState()[k]||null};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k};f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p}function l(p,q){return p===q||p.startsWith(q+'-')}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[]}function n(p){return {instanceid:p}}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {}};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c('UFIVisibility').HIDDEN};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r)}.bind(this))};o.prototype.reduce=function(p,q){var r;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var s=babelHelpers['extends']({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var t=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),u=c('UFIComments').getCommentsForFTEntIdentifier(t);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=v;return ca},{});if(t){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(t);if(y){var z=c('UFIComments').getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v;}}return babelHelpers['extends']({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x)}case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return da!==ba&&!l(da,aa)});}return p};function o(){i.apply(this,arguments)}f.exports=new o(c('UFIDispatcherBase'))}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.getValueFor=function(k){return this.getState()[k]||null};j.prototype.getStateKey=function(k){return k.instanceID};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue')};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o))}return k};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('UFICommercialBreakStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIComposerIsTypingStore',['UFIAddCommentActionType','UFIDispatcherBase','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n))}return k};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend'};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFICentralUpdatesLocalCommentAdapter',['ClientIDs','FeedbackPayloadSourceType','UFICentralUpdates','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i={},j=(h={},h[c('FeedbackPayloadSourceType').USER_ACTION]=l,h[c('FeedbackPayloadSourceType').ENDPOINT_ADD_COMMENT]=m,h);function k(){return c('UFICentralUpdates').subscribe('update-comments',function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r);}})}function l(p){if(!c('ClientIDs').isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_ADDED_COMMENT',instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id})}function m(p){if(!c('ClientIDs').isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_SAVED_COMMENT',instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id})}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n}return null}};f.exports=o}),null);
__d('UFILocallyComposedCommentStore',['invariant','ClientIDs','FluxReduceStore','UFIAddCommentActionType','UFICentralUpdatesLocalCommentAdapter','UFIDispatcherBase','setByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m){return babelHelpers['extends']({},m)}i=babelHelpers.inherits(l,c('FluxReduceStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c('UFICentralUpdatesLocalCommentAdapter').subscribeOnce()}l.prototype.getInitialState=function(){return {}};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{}};l.prototype.reduce=function(m,n){switch(n.type){case 'CENTRALUPDATES_ADDED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.clientID],true);return m;case 'CENTRALUPDATES_SAVED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c('UFIAddCommentActionType').SUBMIT_EDIT:m=k(m);c('setByPath')(m,[n.instanceID,n.comment.id],true);return m;}return m};f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFIPlayLiveVODHighlightsStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').PLAY_LIVE_VOD_HIGHLIGHTS:return k.playingLiveVODHighlights;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment'}function k(o){return o+'-story'}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q))}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q))}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {}};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0};function n(){h.apply(this,arguments)}f.exports=new n(c('UFIDispatcherBase'))}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment'}function k(m){return m+'-story'}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {}};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)]};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)]};function l(){h.apply(this,arguments)}f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFIAcceptedAnswerStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore','UFIPlayLiveVODHighlightsStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFIAcceptedAnswerStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFILocallyComposedCommentStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');c('UFIPlayLiveVODHighlightsStore');f.exports=c('UFIDispatcherBase')}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m}},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l}},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},delete_comment_and_remove_commenter:function i(j,k,l,m){return {type:c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},mute_member:function i(j,k,l,m){return {type:c('UFICommentActionType').MUTE_MEMBER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},toggle_text_delights:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_TEXT_DELIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l}},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l}},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l}},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l}},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l}},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l}},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},manageConstituentBadge:function i(j,k){return {type:c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},keepSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},appealSpam:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}},secureAccount:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}}};f.exports=h}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){l&&o.unshift(l);q=1}}else if(p>-1){o.splice(p,1);q=-1}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r)}else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(l)if(n){w[l]=k}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']}}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k}},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count}}return k}};f.exports=h}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeAcceptedAnswer:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l}},commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m}},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m}},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l}},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m}},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n}},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k}},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l}},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k}}};f.exports=h}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var k={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(k,j);return k}};f.exports=h}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','ChannelClientID','ClientIDs','MercuryServerDispatcher','NumberFormat','QE2Logger','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionsUtils','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFICommentReactionController','XUFIReactionController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function z(aa,ba,ca,da){var ea=arguments.length<=4||arguments[4]===undefined?null:arguments[4],fa=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c('UFIFeedbackTargets').getFeedbackTarget(aa,function(ga){var ha,ia=w(ga,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ia});var ja=c('UFIUserActionUtils').trackingData(da),ka={};ka[c('ActorURI').PARAMETER_ACTOR]=ga.actorforpost;var la=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:aa,reaction_type:ba,root_id:ca.rootid,session_id:c('ChannelClientID').getID(),source:ca.source,feedback_referrer:ca.feedbackReferrer,instance_id:ca.instanceid},ka,ja);if(ca.fluentContentToken)(function(){var ma=ca.fluentContentToken,na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(da,ma);if(na&&na.isSpherical())la.video_playback_timestamp=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(ca.isLiveVOD){la.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma)}else if(ca.islivestreaming)la.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(na&&na.isSpherical())c('ifRequired')('SphericalViewportControlStore',function(oa){var pa=oa.getOrientation(na.getVideoPlayerID());if(pa)if(ea!==null&&fa!==null){la.spherical_yaw=ea;la.spherical_pitch=fa}else{la.spherical_pitch=Math.round(pa.pitch);la.spherical_yaw=Math.round(pa.yaw)}},c('emptyFunction')());})();c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),la)})},changeCommentReaction:function z(aa,ba,ca,da){var ea=c('UFIComments').getComment(aa);if(ea&&ea.__typename==='saved'&&ea.viewerreaction!=ba)c('UFIFeedbackTargets').getFeedbackTarget(ea.ftentidentifier,function(fa){var ga=c('UFIUserActionUtils').trackingData(da),ha=v(ea,fa,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ha});var ia={};ia[c('ActorURI').PARAMETER_ACTOR]=fa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:aa,legacy_id:ea.legacyid,reaction_type:ba,ft_ent_identifier:ea.ftentidentifier,source:ca.source,instance_id:ca.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ga,ia))});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r,handler:q};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c('MercuryServerDispatcher').registerEndpoints(i);function l(z,aa){return z&&z.ft_ent_identifier==aa.ft_ent_identifier&&z.comment_id==aa.comment_id}function m(z,aa){return aa}var n='feedback_reactions_www_rollback_universe';function o(){c('QE2Logger').logExposureForUser(n)}function p(z,aa){var ba=c('UFIReactionPendingRequestsStore').getPendingRequests(z);if(ba>0)return;var ca=c('UFIReactionSyncStore').getLastKnownReaction(z);if(aa===ca)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(da){var ea=w(da,ca);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ea})})}function q(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},da));c('setImmediate')(function(){return p(ca,da)})}function r(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type;o();var da=c('UFIConfig').reactionsHasReactionsRollback,ea=c('UFIConfig').reactionsHasReactionsRetry;if(ea&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},ca));if(da)c('setImmediate')(function(){return p(ba,ca)});c('AsyncResponse').defaultErrorHandler(z)}function s(z,aa,ba){var ca=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(aa.fbid);if(ca>0)return;var da=c('UFIReactionSyncStore').getLastKnownCommentReaction(aa.fbid);if(ba===da)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(ea){var fa=v(aa,ea,da);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa})})}function t(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type,ea=c('UFIComments').getComment(ba.comment_id);if(!ea||ea.__typename!=='saved')return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},ea,da));c('setImmediate')(function(){return s(ca,ea,da)})}function u(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type,da=c('UFIComments').getComment(aa.comment_id);if(!da)return;o();var ea=c('UFIConfig').reactionsHasCommentReactionsRollback,fa=c('UFIConfig').reactionsHasCommentReactionsRetry;if(fa&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}if(da&&da.__typename==='saved'){c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},da,ca));if(ea)c('setImmediate')(function(){return s(ba,da,ca)});}c('AsyncResponse').defaultErrorHandler(z)}function v(z,aa,ba){var ca=z.id,da=[y(z,ba,ca,aa.supportedreactions||[],aa.actorforpost)],ea=ba===c('UFIReactionTypes').LIKE;if(aa.hasviewerliked!==ea){var fa=ea?1:-1;da.push({commentid:ca,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ea,likecount:(z.likecount||0)+fa})}return da}function w(z,aa){var ba=[x(z,aa)],ca=aa!==c('UFIReactionTypes').NONE;if(z.hasviewerliked!==ca){var da=ca?1:-1;ba.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:ca,likecount:(z.likecount||0)+da,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}})}return ba}function x(z,aa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c('UFIReactionsUtils').getReactionData(z,aa,z.actorforpost,c('NumberFormat').formatInteger))}function y(z,aa,ba,ca,da){var ea={};for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=z.reactioncountmap?z.reactioncountmap[ga]:null;ea[ga]={'default':ha?ha['default']:0,reduced:ha?ha.reduced:'0'}}var ia=c('UFIReactionsUtils').getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:ea,reactorids:z.viewerreaction?[da]:[]},aa,da);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:ba,hasviewerliked:!!aa,likecount:ia.reactioncountmap[1]['default'],reactioncount:ia.reactioncount,reactioncountmap:ia.reactioncountmap,reactioncountreduced:ia.reactioncountreduced,viewerreaction:aa}}f.exports=h}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"Live",ON_DEMAND:"OnDemand"})}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink}.bind(this))}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.__typename==='local'){this.$UFIPagedCommentListImpl1(i.id)}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k)}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j))}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p}.bind(this));return this.commentsFromCommentIDs(l,k,j)};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {}};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};h.prototype.getCommentCount=function(){return this.count};h.prototype.getDeletedCount=function(){return this.deletedCount};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount};h.prototype.getBasePermalink=function(){return this.basePermalink};h.prototype.buildCommentPermalink=function(i,j,k){return null};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i]};f.exports=h}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o)};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true}c('UFIComments').resetComments(m);return l};k.prototype.getParentCommentID=function(){return this.parentCommentID};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1]}else j.error('Bad reply comment ID: '+this.getParentCommentID());return new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k}),null);
__d('UFIReplyCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl','getObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o}return h[m][n]},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{})},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});f.exports=i}),22);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIOrderingModeStore','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFIOrderingModeStore').isInverted(l);this.orderingMode=l;this.clientHasAll=false}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n)};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n};j.prototype.getOrderingMode=function(){return this.orderingMode};j.prototype.setClientHasAll=function(k){this.clientHasAll=k};j.prototype.getClientHasAll=function(){return this.clientHasAll};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=j}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",ON_DEMAND:"on_demand"})}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIRange','UFIStreamingStateType'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};i.prototype.getClientHasAll=function(){return false};i.prototype.getActualCommentCount=function(){return this.commentIDs.length};i.prototype.getCommentCount=function(){return this.totalCommentCount};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};i.prototype.getDeletedCount=function(){return this.deletedCount};i.prototype.getPermalinkForComment=function(j){return ''};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l))};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.__typename==='local'){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c('UFIStreamingStateType').ON_DEMAND&&!j.isAnnouncement&&!j.tipOptionIndex)this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m);}this.commentIDs=k};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l)}var m=l.get(k);if(!m){m=new i(j);l.set(k,m)}return m};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k)};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values())};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true});return}var m={};k.forEach(function(n){m[n]=true});i.$UFIToplevelStreamedCommentList2.set(j,m)};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3())};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3())});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l)}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n)});})});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate)}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate)});})});c('UFICentralUpdates').subscribe('update-feedback',function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount)})});f.exports=i}),22);
__d('UFIToplevelPagedCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n}return h[l][m]},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0)},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true}}c('UFIComments').resetComments(m)},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p)}}c('UFIComments').resetComments(o)}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i}),22);
__d("XGroupsMuteMembersController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/mutemember\/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:false},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"}})}),null);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/townhall\/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false}})}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{})}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/answer\/accept\/",{})}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/appeal_spam\/",{})}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/keep_spam\/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{})}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/secure_account\/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/deletecommentandremovecommenter\/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{})}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{})}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{})}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{})}),null);
__d("XUFISendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/message\/send\/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/textdelights\/hide_comment_text_delights\/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:false}})}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{})}),null);
__d('UFIUserActions',['errorCode','fbt','invariant','ActorURI','AsyncResponse','Bootloader','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','MercuryServerDispatcher','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIUserActionUtils','UFIVideoPlayerRegistry','UnicodeBidi','XGroupsMuteMembersController','XTownHallController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentAppealSpamController','XUFICommentKeepSpamController','XUFICommentLikeController','XUFICommentSecureAccountController','XUFIDeleteCommentAndRemoveCommenterController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFISendMessageController','XUFIToggleTextDelightsAsyncController','XUFITranslateCommentController','goURI','ifRequired'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function qa(ra,sa){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ta){var ua;c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ra,sa);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ra);c('UFICentralUpdates').inform('actor-changed',{actorID:sa});var va=(ua={from_actor_id:ta.actorforpost,ft_ent_identifier:ra},ua[c('ActorURI').PARAMETER_ACTOR]=sa,ua),wa=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,va)})},changeCommentLike:function qa(ra,sa,ta){var ua,va=c('UFIComments').getComment(ra);if(va&&va.__typename==='saved'&&va.hasviewerliked!=sa)(function(){var wa=ta.target?c('UFIUserActionUtils').trackingData(ta.target):{},xa=sa?1:-1,ya={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:sa,likecount:(va.likecount||0)+xa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ya]});c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(za){var ab={};ab[c('ActorURI').PARAMETER_ACTOR]=za.actorforpost;var bb=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(bb,babelHelpers['extends']({comment_id:ra,legacy_id:va.legacyid,like_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},wa,ab))})})();},_getAttachment:function qa(ra){return ra},_getLocalComment:function qa(ra,sa,ta,ua,va,wa){var xa=c('ClientIDs').getNewClientID(),ya=c('UnicodeBidi').isDirectionLTR(ta)?'ltr':'rtl',za=this._getAttachment(va.attachedsticker);return {__typename:'local',ftentidentifier:sa,body:{text:ta,dir:ya},author:ra.actorforpost,cancomment:false,clientid:null,fbid:null,id:xa,ufiinstanceid:va.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:va.replyid,replycommentparentid:va.replycommentparentid,attachment:za,photo_comment:va.attachedphoto,video_comment:va.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")},photoTextTagID:va.photoTextTagID,isPhotoTag:va.isPhotoTag,photoTagX:va.photoTagX,photoTagY:va.photoTagY,videoTimeOffset:wa,postedLiveState:va.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND}},addMessage:function qa(ra,sa,ta,ua,va){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(wa){this.sendMessage(ra,sa,ta,ua,va)}.bind(this))},sendMessage:function qa(ra,sa,ta,ua,va){var wa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(wa&&wa.actorforpost))return;var xa=this._getLocalComment(wa,ra,sa,ta,ua,null);this._sendMessageToServer(ra,wa.actorforpost,sa,ta,ua,xa.id,va)},addComment:function qa(ra,sa,ta,ua){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(va){var wa=this.createComment(ra,sa,ta,ua);if(!wa)return;var xa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:va.actorforpost,hasviewersubscribed:true,entidentifier:va.entidentifier},ya={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:va.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa],actions:[xa,ya]})}.bind(this))},createComment:function qa(ra,sa,ta,ua){var va=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(va&&va.actorforpost))return null;var wa=null;if(ua.isBroadcasterUFI){wa=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(ab){return ab.getCurrentBroadcastTime()})}else if(ua.fluentContentToken&&(ua.isLiveVOD||ua.islivestreaming||ua.enableVODCommentTimestamps)){var xa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ua.target,ua.fluentContentToken)||0;if(ua.isLiveVOD||ua.islivestreaming){wa=xa}else{var ya=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ua.target,ua.fluentContentToken);if(ya!=null&&xa>0&&xa<Math.floor(ya.getPlaybackDuration()))wa=xa;}}var za=this._getLocalComment(va,ra,sa,ta,ua,wa);this._sendCommentToServer(ra,va.actorforpost,sa,ta,ua,za.id,wa);return za},_sendMessageToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=c('XUFISendMessageController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,{ft_ent_identifier:ra,comment_text:ua,client_id:wa,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,messenger_recipient:xa})},_sendCommentToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=null;if(va.reply_fbid){ya=va.reply_fbid}else if(va.replyid){var za=c('UFIComments').getComment(va.replyid);za||j(0);ya=za.fbid}var ab=void 0;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(wa,va.timestamp||0,{has_photo:!!va.attachedphoto,has_video:!!va.attachedvideo,has_sticker:!!va.attachedsticker,is_reply:!!va.replyid});var bb={};bb[c('ActorURI').PARAMETER_ACTOR]=sa;var cb=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(cb,babelHelpers['extends']({ft_ent_identifier:ra,comment_text:ua,source:va.source,client_id:wa,session_id:c('ChannelClientID').getID(),reply_fbid:ya,parent_comment_id:va.parent_comment_id||va.replyid,reply_comment_parent_id:va.replycommentparentid,rootid:va.rootid,clp:ab,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,feedback_referrer:va.feedbackReferrer,feed_context:va.feedcontext,video_time_offset:xa,is_live_streaming:va.islivestreaming,is_markdown:va.isMarkdown},c('UFIUserActionUtils').trackingData(va.target),bb,{photo_text_tag_id:va.photoTextTagID,is_private:va.isPrivate,is_photo_tag:va.isPhotoTag,photo_fbid:va.photoFBID,photo_tag_x:va.photoTagX,photo_tag_y:va.photoTagY}))},_hasCommentTextChanged:function qa(ra,sa){return !!ra.body&&ra.body.text!=sa},_hasCommentPhotoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentVideoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentStickerChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&ra.type=='sticker'&&sa&&ra.fbid!=sa.fbid)},_hasCommentShareURLChanged:function qa(ra,sa){if(sa){return true}else return Boolean(ra&&ra.type=='share');},editComment:function qa(ra,sa,ta,ua){var va=c('UFIUserActionUtils').trackingData(ua.target),wa=c('UFIComments').getComment(ra);if(!wa)return;var xa=this._hasCommentTextChanged(wa,sa)||this._hasCommentPhotoChanged(wa.photo_comment,ua.attachedPhoto)||this._hasCommentStickerChanged(wa.attachment,ua.attachedSticker)||this._hasCommentVideoChanged(wa.video_comment,ua.attachedVideo)||this._hasCommentShareURLChanged(wa.attachment,ua.attachedShareURL);wa=c('ImmutableObject').set(wa,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:sa},editnux:null,attachment:ua.attachedSticker,photo_comment:ua.attachedPhoto,video_comment:ua.attachedVideo});if(xa)wa=c('ImmutableObject').set(wa,{originalTimestamp:wa.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa]});c('UFIFeedbackTargets').getFeedbackTarget(wa.ftentidentifier,function(ya){var za={};za[c('ActorURI').PARAMETER_ACTOR]=ya.actorforpost;var ab=c('XUFIEditCommentController').getURIBuilder().getURI();if(wa)c('MercuryServerDispatcher').trySend(ab,babelHelpers['extends']({ft_ent_identifier:wa.ftentidentifier,comment_text:ta,source:ua.source,comment_id:wa.id,parent_comment_id:wa.parentcommentid,attached_sticker_fbid:ua.attachedSticker?ua.attachedSticker.fbid:0,attached_photo_fbid:ua.attachedPhoto?ua.attachedPhoto.fbid:0,attached_video_fbid:ua.attachedVideo?ua.attachedVideo.fbid:0,attached_share_url:ua.attachedShareURL},va,za));})},translateComments:function qa(ra,sa,ta,ua){var va=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,{ft_ent_identifier:ra,comment_ids:sa,source:ua.source,trigger:ta})},setHideAsSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,spam_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya))});},keepSpam:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentKeepSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa));c('Bootloader').loadModules(["SimpleXUIDialog"],function(za){za.show(i._("This comment is now visible on your post."),i._("Comment restored"))},'UFIUserActions')});},appealSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFICommentAppealSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya));c('Bootloader').loadModules(["SimpleXUIDialog"],function(ab){ab.show(i._("Your feedback helps us do better."),i._("Thanks for letting us know"))},'UFIUserActions')});},secureAccount:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={actiontype:c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentSecureAccountController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ua.id,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa))});},removeComment:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},removeCommentWithRule:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,rule_id:ta,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},deleteCommentAndRemoveCommenter:function qa(ra,sa,ta,ua,va,wa){var xa=c('UFIUserActionUtils').trackingData(sa.target),ya=c('UFIComments').getComment(ra),za={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[za]});if(ya&&ya.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(ya.ftentidentifier,function(ab){var bb={};bb[c('ActorURI').PARAMETER_ACTOR]=ab.actorforpost;var cb=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(cb,babelHelpers['extends']({comment_id:ya.id,comment_legacyid:ya.legacyid,ft_ent_identifier:ya.ftentidentifier,one_click:sa.oneclick,source:sa.source,delete_posts:ta,delete_comments:ua,decline_pending_members:va,block_permanently:wa,client_id:c('ClientIDs').getNewClientID()},xa,bb))});},muteMember:function qa(ra,sa,ta,ua){var va=c('UFIComments').getComment(ra),wa=ta!==null;if(va&&va.__typename==='saved'){var xa={authorid:va.author,actiontype:c('UFIConstants').UFIActionType.MUTE_MEMBER,shouldmute:wa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[xa]});var ya;c('Bootloader').loadModules(["GroupMemberActionSource"],function(ab){ya=ab.GROUP_COMMENT},'UFIUserActions');var za=c('XGroupsMuteMembersController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,{group_id:va.group_id,user_id:va.author,mute_duration:ta,custom_expiration:ua,should_reload:false,source:ya})}},toggleTextDelights:function qa(ra,sa,ta){var ua=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,{comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,should_hide:ta,parent_comment_id:ra.parentcommentid,source:sa.source})},changeAcceptedAnswer:function qa(ra,sa){c('MercuryServerDispatcher').trySend(aa,{ft_ent_identifier:ra.id,do_accept:sa})},banUser:function qa(ra,sa,ta,ua){var va=ta?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:sa,commenter_id:ra.author,action:va,comment_id:ra.id,client_side:true})},changeSubscribe:function qa(ra,sa,ta){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ua){var va=c('UFIUserActionUtils').trackingData(ta.target);if(ua.hasviewersubscribed!==sa){var wa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ua.actorforpost,hasviewersubscribed:sa,entidentifier:ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:sa,ft_ent_identifier:ra,source:ta.source,client_id:c('ClientIDs').getNewClientID(),rootid:ta.rootid,comment_expand_mode:ta.commentexpandmode},va,xa))}})},fetchSpamComments:function qa(ra,sa,ta,ua){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ra,viewas:ua,comment_ids:sa,parent_comment_id:ta,source:null})},manageConstituentBadge:function qa(ra){c('goURI')(c('XTownHallController').getURIBuilder().setBool('setting_nux',true).getURI())},removePreview:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua={commentid:ra.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,source:sa.source},ta))}};function m(qa){c('AsyncResponse').defaultErrorHandler(qa)}function n(qa){var ra=qa.request.data;c('AsyncResponse').defaultErrorHandler(qa);var sa=ra.client_id||ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;var ua=ta.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ta=c('ImmutableObject').setDeep(ta,{status:ua,allowRetry:o(qa),body:{mentionstext:ra.comment_text,mentionsphoto:ta.photo_comment,mentionsvideo:ta.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function o(qa){var ra=qa.getError();if(qa.isBlockedAction())return false;if(qa.silentError)return true;if(ra===1357012||ra===1357006)return false;return true}function p(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{status:ta.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function q(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{commentid:sa,needsApproval:!ta.needsApproval,isApproved:!ta.isApproved});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function r(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta){ta=c('ImmutableObject').set(ta,{commentid:sa,appealStatus:null,canAppeal:!ta.canAppeal,canSecure:!ta.canSecure});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}}function s(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta&&ra.like_action===ta.hasviewerliked){var ua=ta.hasviewerliked?-1:1,va={commentid:sa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}c('AsyncResponse').defaultErrorHandler(qa)}function t(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewerliked===ra.like_action){var ua=ta.hasviewerliked?-1:1,va={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ta.actorforpost,hasviewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua,entidentifier:sa,likesentences:{current:ta.likesentences.alternate,alternate:ta.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}});c('AsyncResponse').defaultErrorHandler(qa)}function u(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewersubscribed===ra.subscribe_action){var ua={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ta.actorforpost,hasviewersubscribed:!ta.hasviewersubscribed,entidentifier:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]})}});c('AsyncResponse').defaultErrorHandler(qa)}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:oa,batch_function:pa},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var y=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var z=c('XUFICommentLikeController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ma,batch_function:pa};var aa=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XGroupsMuteMembersController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ca=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE};var da=c('XUFIHideCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var ea=c('XUFICommentKeepSpamController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var fa=c('XUFICommentAppealSpamController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ga=c('XUFICommentSecureAccountController').getURIBuilder().getURI();v[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ha=c('XUFILikeController').getURIBuilder().getURI();v[ha]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:na,batch_function:pa};var ia=c('XUFIEditCommentController').getURIBuilder().getURI();v[ia]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var ja=c('XUFITranslateCommentController').getURIBuilder().getURI();v[ja]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ka=c('XUFIActorChangeController').getURIBuilder().getURI();v[ka]={mode:c('MercuryServerDispatcher').IMMEDIATE};var la=c('XUFISendMessageController').getURIBuilder().getURI();v[la]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ma(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier&&qa.comment_id==ra.comment_id}function na(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function oa(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function pa(qa,ra){return ra}f.exports=babelHelpers['extends']({},l,c('UFIReactionUserActions'))}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return k[m]=true});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('LitestandClassicRHC',['Arbiter','BigPipe','DOMQuery','NavigationMessage','Run','SubscriptionsHandler','requireWeak'],(function a(b,c,d,e,f,g){function h(j,k){var l=new (c('SubscriptionsHandler'))(),m=l.release.bind(l),n=c('DOMQuery').scry(j,'.pagelet'),o=n.length;l.addSubscriptions(k.subscribe(n.map(function(p){return p.id+'_displayed'}),function(){if(--o===0){c('Arbiter').inform('LitestandClassicRHC/loaded');m()}}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,m),k.subscribeOnce(c('BigPipe').Events.displayed,function(){c('Arbiter').inform('LitestandClassicRHC/loaded');m()}));c('Run').onLeave(m)}var i={init:function j(k){c('requireWeak')('BigPipe',function(l){var m=l.getCurrentInstance();if(m&&m.arbiter){h(k,m.arbiter)}else c('Arbiter').subscribeOnce('BigPipe/init',function(event,n){h(k,n.arbiter)},c('Arbiter').SUBSCRIBE_NEW);})}};f.exports=i}),18);